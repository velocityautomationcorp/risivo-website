(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,87973,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(22016),r=e.i(18566);function n({calendarId:e,onClose:s,onUpdated:r}){let[n,x]=(0,a.useState)("general"),[m,u]=(0,a.useState)(!0),[h,g]=(0,a.useState)(!1),[p,b]=(0,a.useState)(null),[j,y]=(0,a.useState)([]),[f,v]=(0,a.useState)([]),[N,w]=(0,a.useState)(null);(0,a.useEffect)(()=>{k(),C(),D()},[e]);let k=async()=>{try{let t=await fetch(`/api/v1/calendars/${e}/settings`),a=await t.json();a.success?b(a.data):w(a.error)}catch(e){w("Failed to load settings")}finally{u(!1)}},C=async()=>{try{let t=await fetch(`/api/v1/calendars/${e}/members`),a=await t.json();a.success&&y(a.data.members||[])}catch(e){console.error("Failed to load members:",e)}},D=async()=>{try{let t=await fetch(`/api/v1/calendars/${e}/appointment-types?activeOnly=false`),a=await t.json();a.success&&v(a.data||[])}catch(e){console.error("Failed to load appointment types:",e)}},S=async()=>{if(p){g(!0),w(null);try{let t=await fetch(`/api/v1/calendars/${e}/settings`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...p.calendar,...p.bookingSettings,...p.reschedulingSettings,workingHours:p.workingHours,dateOverrides:p.dateOverrides})}),a=await t.json();a.success?(r(),alert("Settings saved successfully!")):w(a.error||"Failed to save settings")}catch(e){w("Failed to save settings")}finally{g(!1)}}};return m?(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl p-8",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading settings..."})]})}):p?(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Calendar Settings"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:p.calendar.name})]}),(0,t.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:(0,t.jsx)("i",{className:"fas fa-times text-xl"})})]}),(0,t.jsx)("div",{className:"flex border-b px-6",children:[{id:"general",label:"General",icon:"cog"},{id:"availability",label:"Availability",icon:"clock"},{id:"booking",label:"Booking Rules",icon:"calendar-check"},{id:"team",label:"Team Members",icon:"users"},{id:"types",label:"Appointment Types",icon:"list"}].map(e=>(0,t.jsxs)("button",{onClick:()=>x(e.id),className:`px-4 py-3 text-sm font-medium border-b-2 -mb-px ${n===e.id?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[(0,t.jsx)("i",{className:`fas fa-${e.icon} mr-2`}),e.label]},e.id))}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:[N&&(0,t.jsx)("div",{className:"mb-4 p-4 bg-red-50 text-red-700 rounded-lg",children:N}),"general"===n&&(0,t.jsx)(l,{settings:p,onUpdate:e=>b({...p,calendar:{...p.calendar,...e}})}),"availability"===n&&(0,t.jsx)(i,{workingHours:p.workingHours,dateOverrides:p.dateOverrides,onUpdateWorkingHours:e=>b({...p,workingHours:e}),onUpdateDateOverrides:e=>b({...p,dateOverrides:e})}),"booking"===n&&(0,t.jsx)(o,{bookingSettings:p.bookingSettings,reschedulingSettings:p.reschedulingSettings,onUpdateBooking:e=>b({...p,bookingSettings:{...p.bookingSettings,...e}}),onUpdateRescheduling:e=>b({...p,reschedulingSettings:{...p.reschedulingSettings,...e}})}),"team"===n&&(0,t.jsx)(d,{calendarId:e,calendarType:p.calendar.calendarType||"individual",members:j,onRefresh:C}),"types"===n&&(0,t.jsx)(c,{calendarId:e,types:f,onRefresh:D})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-t bg-gray-50",children:[(0,t.jsx)("button",{onClick:s,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,t.jsx)("button",{onClick:S,disabled:h,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:h?"Saving...":"Save Changes"})]})]})}):(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl p-8 max-w-md",children:[(0,t.jsx)("p",{className:"text-red-600",children:N||"Failed to load settings"}),(0,t.jsx)("button",{onClick:s,className:"mt-4 px-4 py-2 bg-gray-100 rounded-lg",children:"Close"})]})})}function l({settings:e,onUpdate:a}){return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Calendar Name"}),(0,t.jsx)("input",{type:"text",value:e.calendar.name||"",onChange:e=>a({name:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,t.jsx)("textarea",{value:e.calendar.description||"",onChange:e=>a({description:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:3})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Timezone"}),(0,t.jsxs)("select",{value:e.calendar.timezone||"UTC",onChange:e=>a({timezone:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"America/New_York",children:"Eastern Time (ET)"}),(0,t.jsx)("option",{value:"America/Chicago",children:"Central Time (CT)"}),(0,t.jsx)("option",{value:"America/Denver",children:"Mountain Time (MT)"}),(0,t.jsx)("option",{value:"America/Los_Angeles",children:"Pacific Time (PT)"}),(0,t.jsx)("option",{value:"UTC",children:"UTC"}),(0,t.jsx)("option",{value:"Europe/London",children:"London"}),(0,t.jsx)("option",{value:"Europe/Paris",children:"Paris"}),(0,t.jsx)("option",{value:"Asia/Tokyo",children:"Tokyo"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("input",{type:"color",value:e.calendar.color||"#3B82F6",onChange:e=>a({color:e.target.value}),className:"w-12 h-10 border border-gray-300 rounded-lg cursor-pointer"}),(0,t.jsx)("input",{type:"text",value:e.calendar.color||"#3B82F6",onChange:e=>a({color:e.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Booking Page URL"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"/book/"}),(0,t.jsx)("input",{type:"text",value:e.calendar.slug||"",disabled:!0,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg bg-gray-50"}),(0,t.jsx)("button",{onClick:()=>navigator.clipboard.writeText(`${window.location.origin}/book/${e.calendar.slug}`),className:"px-4 py-2 bg-gray-100 rounded-lg hover:bg-gray-200",children:(0,t.jsx)("i",{className:"fas fa-copy"})})]})]})]})}function i({workingHours:e,dateOverrides:s,onUpdateWorkingHours:r,onUpdateDateOverrides:n}){let l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],[i,o]=(0,a.useState)(""),[d,c]=(0,a.useState)("blocked"),[x,m]=(0,a.useState)(""),u=t=>{let a=e.find(e=>e.dayOfWeek===t);return a||{id:`temp-${t}`,calendarId:"",dayOfWeek:t,isAvailable:t>=1&&t<=5,timeBlocks:t>=1&&t<=5?[{startTime:"09:00",endTime:"17:00"}]:[],createdAt:"",updatedAt:""}},h=(t,a,s)=>{let n=e.findIndex(e=>e.dayOfWeek===t),l=u(t),i={...l,isAvailable:a,timeBlocks:void 0!==s?s:l.timeBlocks};if(n>=0){let t=[...e];t[n]=i,r(t)}else r([...e,i])},g=(e,t,a,s)=>{let r=u(e),n=[...r.timeBlocks];n[t]={...n[t],[a]:s},h(e,r.isAvailable,n)};return(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Working Hours"}),(0,t.jsx)("div",{className:"space-y-3",children:[0,1,2,3,4,5,6].map(e=>{let a=u(e);return(0,t.jsxs)("div",{className:"flex items-start gap-4 p-3 bg-gray-50 rounded-lg",children:[(0,t.jsx)("div",{className:"w-28",children:(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:a.isAvailable,onChange:t=>h(e,t.target.checked),className:"rounded border-gray-300"}),(0,t.jsx)("span",{className:"font-medium text-sm",children:l[e]})]})}),a.isAvailable?(0,t.jsxs)("div",{className:"flex-1 space-y-2",children:[a.timeBlocks.map((s,r)=>(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"time",value:s.startTime,onChange:t=>g(e,r,"startTime",t.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm"}),(0,t.jsx)("span",{className:"text-gray-400",children:"to"}),(0,t.jsx)("input",{type:"time",value:s.endTime,onChange:t=>g(e,r,"endTime",t.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm"}),a.timeBlocks.length>1&&(0,t.jsx)("button",{onClick:()=>{let t;return t=u(e).timeBlocks.filter((e,t)=>t!==r),void h(e,t.length>0,t)},className:"p-1 text-red-500 hover:text-red-700",children:(0,t.jsx)("i",{className:"fas fa-times"})})]},r)),(0,t.jsxs)("button",{onClick:()=>{let t;return t=[...u(e).timeBlocks,{startTime:"09:00",endTime:"17:00"}],void h(e,!0,t)},className:"text-sm text-blue-600 hover:text-blue-800",children:[(0,t.jsx)("i",{className:"fas fa-plus mr-1"}),"Add time block"]})]}):(0,t.jsx)("span",{className:"text-gray-400 text-sm",children:"Unavailable"})]},e)})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Date Overrides"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Block specific dates or set custom hours"}),(0,t.jsxs)("div",{className:"flex gap-3 mb-4 p-4 bg-gray-50 rounded-lg",children:[(0,t.jsx)("input",{type:"date",value:i,onChange:e=>o(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg"}),(0,t.jsxs)("select",{value:d,onChange:e=>c(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg",children:[(0,t.jsx)("option",{value:"blocked",children:"Blocked"}),(0,t.jsx)("option",{value:"holiday",children:"Holiday"})]}),(0,t.jsx)("input",{type:"text",value:x,onChange:e=>m(e.target.value),placeholder:"Reason (optional)",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg"}),(0,t.jsx)("button",{onClick:()=>{i&&(n([...s,{id:`temp-${Date.now()}`,calendarId:"",overrideDate:i,overrideType:d,reason:x,isRecurring:!1,createdAt:""}]),o(""),m(""))},disabled:!i,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:"Add"})]}),(0,t.jsx)("div",{className:"space-y-2",children:0===s.length?(0,t.jsx)("p",{className:"text-gray-400 text-sm",children:"No date overrides set"}):s.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:`px-2 py-1 rounded text-xs font-medium ${"holiday"===e.overrideType?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:e.overrideType}),(0,t.jsx)("span",{className:"font-medium",children:new Date(e.overrideDate+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})}),e.reason&&(0,t.jsxs)("span",{className:"text-gray-500 text-sm",children:["- ",e.reason]})]}),(0,t.jsx)("button",{onClick:()=>{var t;return t=e.overrideDate,void n(s.filter(e=>e.overrideDate!==t))},className:"text-red-500 hover:text-red-700",children:(0,t.jsx)("i",{className:"fas fa-trash"})})]},e.overrideDate))})]})]})}function o({bookingSettings:e,reschedulingSettings:a,onUpdateBooking:s,onUpdateRescheduling:r}){return(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Booking Settings"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Duration"}),(0,t.jsxs)("select",{value:e.durationMinutes,onChange:e=>s({durationMinutes:parseInt(e.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[(0,t.jsx)("option",{value:"15",children:"15 minutes"}),(0,t.jsx)("option",{value:"30",children:"30 minutes"}),(0,t.jsx)("option",{value:"45",children:"45 minutes"}),(0,t.jsx)("option",{value:"60",children:"1 hour"}),(0,t.jsx)("option",{value:"90",children:"1.5 hours"}),(0,t.jsx)("option",{value:"120",children:"2 hours"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slot Interval"}),(0,t.jsxs)("select",{value:e.slotIntervalMinutes,onChange:e=>s({slotIntervalMinutes:parseInt(e.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[(0,t.jsx)("option",{value:"5",children:"5 minutes"}),(0,t.jsx)("option",{value:"10",children:"10 minutes"}),(0,t.jsx)("option",{value:"15",children:"15 minutes"}),(0,t.jsx)("option",{value:"30",children:"30 minutes"}),(0,t.jsx)("option",{value:"60",children:"60 minutes"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Buffer Before"}),(0,t.jsxs)("select",{value:e.bufferBeforeMinutes,onChange:e=>s({bufferBeforeMinutes:parseInt(e.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[(0,t.jsx)("option",{value:"0",children:"None"}),(0,t.jsx)("option",{value:"5",children:"5 minutes"}),(0,t.jsx)("option",{value:"10",children:"10 minutes"}),(0,t.jsx)("option",{value:"15",children:"15 minutes"}),(0,t.jsx)("option",{value:"30",children:"30 minutes"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Buffer After"}),(0,t.jsxs)("select",{value:e.bufferAfterMinutes,onChange:e=>s({bufferAfterMinutes:parseInt(e.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[(0,t.jsx)("option",{value:"0",children:"None"}),(0,t.jsx)("option",{value:"5",children:"5 minutes"}),(0,t.jsx)("option",{value:"10",children:"10 minutes"}),(0,t.jsx)("option",{value:"15",children:"15 minutes"}),(0,t.jsx)("option",{value:"30",children:"30 minutes"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Notice"}),(0,t.jsxs)("select",{value:e.minimumNoticeHours,onChange:e=>s({minimumNoticeHours:parseInt(e.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[(0,t.jsx)("option",{value:"0",children:"None"}),(0,t.jsx)("option",{value:"1",children:"1 hour"}),(0,t.jsx)("option",{value:"4",children:"4 hours"}),(0,t.jsx)("option",{value:"24",children:"24 hours"}),(0,t.jsx)("option",{value:"48",children:"48 hours"}),(0,t.jsx)("option",{value:"72",children:"72 hours"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Book Up To"}),(0,t.jsxs)("select",{value:e.maximumBookingDays,onChange:e=>s({maximumBookingDays:parseInt(e.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[(0,t.jsx)("option",{value:"7",children:"1 week"}),(0,t.jsx)("option",{value:"14",children:"2 weeks"}),(0,t.jsx)("option",{value:"30",children:"30 days"}),(0,t.jsx)("option",{value:"60",children:"60 days"}),(0,t.jsx)("option",{value:"90",children:"90 days"}),(0,t.jsx)("option",{value:"180",children:"6 months"}),(0,t.jsx)("option",{value:"365",children:"1 year"})]})]})]}),(0,t.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:e.autoConfirm,onChange:e=>s({autoConfirm:e.target.checked}),className:"rounded border-gray-300"}),(0,t.jsx)("span",{className:"text-sm",children:"Auto-confirm appointments"})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:e.waitlistEnabled,onChange:e=>s({waitlistEnabled:e.target.checked}),className:"rounded border-gray-300"}),(0,t.jsx)("span",{className:"text-sm",children:"Enable waitlist when fully booked"})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:e.allowGuests??!1,onChange:e=>s({allowGuests:e.target.checked}),className:"rounded border-gray-300"}),(0,t.jsx)("span",{className:"text-sm",children:"Allow guests"}),(0,t.jsx)("span",{className:"text-xs text-gray-400",children:"(Let invitees add additional attendees)"})]}),e.allowGuests&&(0,t.jsxs)("div",{className:"ml-6",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum guests per booking"}),(0,t.jsxs)("select",{value:e.maxGuests??5,onChange:e=>s({maxGuests:parseInt(e.target.value)}),className:"w-48 px-4 py-2 border border-gray-300 rounded-lg",children:[(0,t.jsx)("option",{value:"1",children:"1 guest"}),(0,t.jsx)("option",{value:"2",children:"2 guests"}),(0,t.jsx)("option",{value:"3",children:"3 guests"}),(0,t.jsx)("option",{value:"5",children:"5 guests"}),(0,t.jsx)("option",{value:"10",children:"10 guests"})]})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Rescheduling & Cancellation"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:a.allowReschedule,onChange:e=>r({allowReschedule:e.target.checked}),className:"rounded border-gray-300"}),(0,t.jsx)("span",{className:"text-sm",children:"Allow rescheduling"})]}),a.allowReschedule&&(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 ml-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reschedule Deadline"}),(0,t.jsxs)("select",{value:a.rescheduleDeadlineHours||0,onChange:e=>r({rescheduleDeadlineHours:parseInt(e.target.value)||void 0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[(0,t.jsx)("option",{value:"0",children:"Any time"}),(0,t.jsx)("option",{value:"1",children:"1 hour before"}),(0,t.jsx)("option",{value:"4",children:"4 hours before"}),(0,t.jsx)("option",{value:"24",children:"24 hours before"}),(0,t.jsx)("option",{value:"48",children:"48 hours before"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Reschedules"}),(0,t.jsxs)("select",{value:a.maxReschedules||0,onChange:e=>r({maxReschedules:parseInt(e.target.value)||void 0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[(0,t.jsx)("option",{value:"0",children:"Unlimited"}),(0,t.jsx)("option",{value:"1",children:"1 time"}),(0,t.jsx)("option",{value:"2",children:"2 times"}),(0,t.jsx)("option",{value:"3",children:"3 times"})]})]})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:a.allowCancellation,onChange:e=>r({allowCancellation:e.target.checked}),className:"rounded border-gray-300"}),(0,t.jsx)("span",{className:"text-sm",children:"Allow cancellation"})]}),a.allowCancellation&&(0,t.jsxs)("div",{className:"ml-6",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cancellation Deadline"}),(0,t.jsxs)("select",{value:a.cancellationDeadlineHours||0,onChange:e=>r({cancellationDeadlineHours:parseInt(e.target.value)||void 0}),className:"w-full max-w-xs px-4 py-2 border border-gray-300 rounded-lg",children:[(0,t.jsx)("option",{value:"0",children:"Any time"}),(0,t.jsx)("option",{value:"1",children:"1 hour before"}),(0,t.jsx)("option",{value:"4",children:"4 hours before"}),(0,t.jsx)("option",{value:"24",children:"24 hours before"}),(0,t.jsx)("option",{value:"48",children:"48 hours before"})]})]})]})]})]})}function d({calendarId:e,calendarType:s,members:r,onRefresh:n}){let[l,i]=(0,a.useState)(!1),[o,d]=(0,a.useState)(""),[c,x]=(0,a.useState)("member"),[m,u]=(0,a.useState)(!1),h=async()=>{if(o){u(!0);try{let t=await fetch(`/api/v1/calendars/${e}/members`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o,role:c})}),a=await t.json();a.success?(n(),i(!1),d("")):alert(a.error||"Failed to add member")}catch(e){alert("Failed to add member")}finally{u(!1)}}},g=async t=>{if(confirm("Are you sure you want to remove this member?"))try{let a=await fetch(`/api/v1/calendars/${e}/members?memberId=${t}`,{method:"DELETE"}),s=await a.json();s.success?n():alert(s.error||"Failed to remove member")}catch(e){alert("Failed to remove member")}},p=async(t,a)=>{try{await fetch(`/api/v1/calendars/${e}/members`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({memberId:t,isActive:a})}),n()}catch(e){console.error("Failed to update member:",e)}};return["team","round_robin","collective"].includes(s)?(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Team Members"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"round_robin"===s?"Members will be assigned appointments in rotation":"Members can manage appointments on this calendar"})]}),(0,t.jsxs)("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,t.jsx)("i",{className:"fas fa-plus mr-2"}),"Add Member"]})]}),0===r.length?(0,t.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[(0,t.jsx)("i",{className:"fas fa-users text-4xl text-gray-300 mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"No team members"}),(0,t.jsx)("p",{className:"text-gray-500 mb-4",children:"Add team members to enable team scheduling"}),(0,t.jsx)("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add First Member"})]}):(0,t.jsx)("div",{className:"space-y-2",children:r.map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("span",{className:"text-gray-400 text-sm",children:["#",a+1]}),(0,t.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:e.user?.avatar?(0,t.jsx)("img",{src:e.user.avatar,alt:"",className:"w-10 h-10 rounded-full"}):(0,t.jsx)("i",{className:"fas fa-user text-gray-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.user?.name||"Unknown"}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.user?.email})]}),(0,t.jsx)("span",{className:`px-2 py-1 rounded text-xs font-medium ${"owner"===e.role?"bg-purple-100 text-purple-800":"member"===e.role?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:e.role}),e.isPrimaryOwner&&(0,t.jsx)("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded text-xs font-medium",children:"Primary"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:e.isActive,onChange:t=>p(e.id,t.target.checked),className:"rounded border-gray-300"}),(0,t.jsx)("span",{className:"text-sm",children:"Active"})]}),!e.isPrimaryOwner&&(0,t.jsx)("button",{onClick:()=>g(e.id),className:"text-red-500 hover:text-red-700",children:(0,t.jsx)("i",{className:"fas fa-trash"})})]})]},e.id))}),l&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md mx-4 p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Add Team Member"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,t.jsx)("input",{type:"email",value:o,onChange:e=>d(e.target.value),placeholder:"team@example.com",className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),(0,t.jsxs)("select",{value:c,onChange:e=>x(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[(0,t.jsx)("option",{value:"member",children:"Member - Can manage appointments"}),(0,t.jsx)("option",{value:"owner",children:"Owner - Full access"}),(0,t.jsx)("option",{value:"viewer",children:"Viewer - Read only"})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,t.jsx)("button",{onClick:()=>i(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,t.jsx)("button",{onClick:h,disabled:m||!o,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:m?"Adding...":"Add Member"})]})]})})]}):(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("i",{className:"fas fa-user text-4xl text-gray-300 mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Individual Calendar"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Team members are only available for Team, Round Robin, or Collective calendars."})]})}function c({calendarId:e,types:s,onRefresh:r}){let[n,l]=(0,a.useState)(!1),[i,o]=(0,a.useState)(null),[d,c]=(0,a.useState)(!1),[x,m]=(0,a.useState)({name:"",description:"",durationMinutes:30,defaultLocationType:"video",price:"",requirePayment:!1}),u=()=>{m({name:"",description:"",durationMinutes:30,defaultLocationType:"video",price:"",requirePayment:!1}),o(null)},h=async()=>{if(x.name){c(!0);try{let t={...i?{id:i.id}:{},name:x.name,description:x.description,durationMinutes:x.durationMinutes,defaultLocationType:x.defaultLocationType,price:x.price?parseFloat(x.price):null,requirePayment:x.requirePayment},a=await fetch(`/api/v1/calendars/${e}/appointment-types`,{method:i?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),s=await a.json();s.success?(r(),l(!1),u()):alert(s.error||"Failed to save appointment type")}catch(e){alert("Failed to save appointment type")}finally{c(!1)}}},g=async(t,a)=>{try{await fetch(`/api/v1/calendars/${e}/appointment-types`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,isActive:a})}),r()}catch(e){console.error("Failed to update type:",e)}},p=async t=>{if(confirm("Are you sure you want to delete this appointment type?"))try{let a=await fetch(`/api/v1/calendars/${e}/appointment-types?id=${t}&permanent=true`,{method:"DELETE"}),s=await a.json();s.success?r():alert(s.error||"Failed to delete appointment type")}catch(e){alert("Failed to delete appointment type")}};return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Appointment Types"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Create different types of appointments with custom durations and pricing"})]}),(0,t.jsxs)("button",{onClick:()=>{u(),l(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,t.jsx)("i",{className:"fas fa-plus mr-2"}),"Add Type"]})]}),0===s.length?(0,t.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[(0,t.jsx)("i",{className:"fas fa-list text-4xl text-gray-300 mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"No appointment types"}),(0,t.jsx)("p",{className:"text-gray-500 mb-4",children:"Create appointment types to offer different services"}),(0,t.jsx)("button",{onClick:()=>{u(),l(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create First Type"})]}):(0,t.jsx)("div",{className:"space-y-2",children:s.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color||"#3B82F6"}}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:[e.durationMinutes," min",e.price&&` • $${e.price}`,e.defaultLocationType&&` • ${e.defaultLocationType}`]})]}),!e.isActive&&(0,t.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs",children:"Inactive"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("button",{onClick:()=>{o(e),m({name:e.name,description:e.description||"",durationMinutes:e.durationMinutes,defaultLocationType:e.defaultLocationType||"video",price:e.price?.toString()||"",requirePayment:e.requirePayment}),l(!0)},className:"text-gray-400 hover:text-gray-600",children:(0,t.jsx)("i",{className:"fas fa-edit"})}),(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:e.isActive,onChange:t=>g(e.id,t.target.checked),className:"rounded border-gray-300"}),(0,t.jsx)("span",{className:"text-sm",children:"Active"})]}),(0,t.jsx)("button",{onClick:()=>p(e.id),className:"text-red-500 hover:text-red-700",children:(0,t.jsx)("i",{className:"fas fa-trash"})})]})]},e.id))}),n&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md mx-4 p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-bold mb-4",children:i?"Edit Appointment Type":"Create Appointment Type"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),(0,t.jsx)("input",{type:"text",value:x.name,onChange:e=>m({...x,name:e.target.value}),placeholder:"e.g., Discovery Call",className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,t.jsx)("textarea",{value:x.description,onChange:e=>m({...x,description:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",rows:2})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration"}),(0,t.jsxs)("select",{value:x.durationMinutes,onChange:e=>m({...x,durationMinutes:parseInt(e.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[(0,t.jsx)("option",{value:"15",children:"15 minutes"}),(0,t.jsx)("option",{value:"30",children:"30 minutes"}),(0,t.jsx)("option",{value:"45",children:"45 minutes"}),(0,t.jsx)("option",{value:"60",children:"1 hour"}),(0,t.jsx)("option",{value:"90",children:"1.5 hours"}),(0,t.jsx)("option",{value:"120",children:"2 hours"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location Type"}),(0,t.jsxs)("select",{value:x.defaultLocationType,onChange:e=>m({...x,defaultLocationType:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[(0,t.jsx)("option",{value:"video",children:"Video Call"}),(0,t.jsx)("option",{value:"phone",children:"Phone Call"}),(0,t.jsx)("option",{value:"physical",children:"In Person"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price (USD)"}),(0,t.jsx)("input",{type:"number",value:x.price,onChange:e=>m({...x,price:e.target.value}),placeholder:"0.00",className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),x.price&&parseFloat(x.price)>0&&(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:x.requirePayment,onChange:e=>m({...x,requirePayment:e.target.checked}),className:"rounded border-gray-300"}),(0,t.jsx)("span",{className:"text-sm",children:"Require payment to book"})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,t.jsx)("button",{onClick:()=>{l(!1),u()},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,t.jsx)("button",{onClick:h,disabled:d||!x.name,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:d?"Saving...":i?"Save Changes":"Create Type"})]})]})})]})}var x=e.i(95696);let m=[{id:"calendar",label:"Calendar View",icon:"fa-calendar-alt",href:"/sub-account/calendars"},{id:"appointments",label:"Appointment List",icon:"fa-list-alt",href:"/sub-account/calendars?tab=appointments"},{id:"settings",label:"Calendar Settings",icon:"fa-cog",href:"/sub-account/calendars?tab=settings"}];function u(){(0,r.usePathname)();let e=(0,r.useSearchParams)().get("tab")||"calendar",[l,i]=(0,a.useState)([]),[o,d]=(0,a.useState)([]),[c,u]=(0,a.useState)(null),[b,j]=(0,a.useState)(new Date),[y,f]=(0,a.useState)("month"),[v,k]=(0,a.useState)(!0),[C,D]=(0,a.useState)(!1),[S,T]=(0,a.useState)(!1),[M,A]=(0,a.useState)(null),[$,F]=(0,a.useState)(!1),[L,O]=(0,a.useState)(!1),P="b0000000-0000-0000-0000-000000000001";(0,a.useEffect)(()=>{B()},[]),(0,a.useEffect)(()=>{l.length>0&&E()},[l,b,y]);let B=async()=>{try{let e=await fetch(`/api/v1/calendars?subAccountId=${P}`),t=await e.json();t.success?(i(t.data||[]),t.data&&0!==t.data.length||k(!1)):(console.error("Error loading calendars:",t.error),k(!1))}catch(e){console.error("Error loading calendars:",e),k(!1)}},E=async()=>{k(!0);try{let{startDate:e,endDate:t}=I(),a=c?`&calendarId=${c.id}`:"",s=await fetch(`/api/v1/appointments?subAccountId=${P}&startDate=${e}&endDate=${t}${a}&limit=1000`),r=await s.json();r.success&&d(r.data)}catch(e){console.error("Error loading appointments:",e)}finally{k(!1)}},I=()=>{let e,t,a=new Date(b);switch(y){case"day":e=new Date(a.setHours(0,0,0,0)),t=new Date(a.setHours(23,59,59,999));break;case"week":let s=a.getDay();(e=new Date(a)).setDate(a.getDate()-s),e.setHours(0,0,0,0),(t=new Date(e)).setDate(e.getDate()+6),t.setHours(23,59,59,999);break;case"agenda":(e=new Date).setHours(0,0,0,0),(t=new Date).setDate(t.getDate()+30),t.setHours(23,59,59,999);break;default:e=new Date(a.getFullYear(),a.getMonth(),1),t=new Date(a.getFullYear(),a.getMonth()+1,0,23,59,59,999)}return{startDate:e.toISOString().split("T")[0],endDate:t.toISOString().split("T")[0]}},U=(0,a.useMemo)(()=>o.map(e=>({id:e.id,title:e.appointmentType?.name||e.contactName,start:new Date(e.startTime),end:new Date(e.endTime),color:function(e){switch(e){case"scheduled":return"#F59E0B";case"confirmed":default:return"#10B981";case"completed":return"#3B82F6";case"cancelled":return"#EF4444";case"no_show":return"#6B7280";case"rescheduled":return"#8B5CF6"}}(e.status),status:e.status,contactName:e.contactName,contactEmail:e.contactEmail,calendarName:e.calendar?.name,appointmentType:e.appointmentType?.name})),[o]);return(0,t.jsxs)("div",{className:"space-y-6 -m-4 sm:-m-6 lg:-m-8",children:[(0,t.jsxs)("div",{className:"flex-none bg-white border-b border-gray-200 px-4 sm:px-6 lg:px-8 pt-4 sm:pt-6 lg:pt-8 pb-0",children:[(0,t.jsx)(x.PageHeader,{title:"Calendars",description:"Manage appointments, bookings, and scheduling for your team",icon:"fa-calendar-alt"}),(0,t.jsx)("nav",{className:"-mb-px flex space-x-8","aria-label":"Calendar tabs",children:m.map(a=>{let r=a.id===e;return(0,t.jsxs)(s.default,{href:a.href,className:`group inline-flex items-center border-b-2 py-4 px-1 text-sm font-medium transition-colors ${r?"border-[var(--theme-secondary)] text-[var(--theme-secondary)]":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"}`,children:[(0,t.jsx)("i",{className:`fas ${a.icon} mr-2 text-base`,style:{color:r?"var(--theme-secondary)":void 0}}),a.label]},a.id)})})]}),(0,t.jsxs)("div",{className:"px-4 sm:px-6 lg:px-8 pb-4 sm:pb-6 lg:pb-8",children:["calendar"===e&&(0,t.jsx)(h,{calendars:l,appointments:o,events:U,selectedCalendar:c,setSelectedCalendar:u,selectedDate:b,setSelectedDate:j,viewMode:y,setViewMode:f,loading:v,sidebarCollapsed:$,setSidebarCollapsed:F,onEventClick:e=>{let t=o.find(t=>t.id===e.id);t&&(A(t),T(!0))},navigatePrev:()=>{let e=new Date(b);switch(y){case"day":e.setDate(e.getDate()-1);break;case"week":e.setDate(e.getDate()-7);break;default:e.setMonth(e.getMonth()-1)}j(e)},navigateNext:()=>{let e=new Date(b);switch(y){case"day":e.setDate(e.getDate()+1);break;case"week":e.setDate(e.getDate()+7);break;default:e.setMonth(e.getMonth()+1)}j(e)},goToToday:()=>{j(new Date)},getHeaderText:()=>{let e=["January","February","March","April","May","June","July","August","September","October","November","December"];switch(y){case"day":return b.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});case"week":let t=new Date(b);t.setDate(b.getDate()-b.getDay());let a=new Date(t);return a.setDate(t.getDate()+6),`${e[t.getMonth()]} ${t.getDate()} - ${a.getDate()}, ${t.getFullYear()}`;case"agenda":return"Upcoming Appointments";default:return`${e[b.getMonth()]} ${b.getFullYear()}`}},setShowCreateModal:D,setShowSettingsModal:O}),"appointments"===e&&(0,t.jsx)(g,{appointments:o,calendars:l,loading:v,onAppointmentClick:e=>{A(e),T(!0)},onRefresh:E}),"settings"===e&&(0,t.jsx)(p,{calendars:l,onCalendarUpdated:B,subAccountId:P})]}),C&&(0,t.jsx)(N,{subAccountId:P,onClose:()=>D(!1),onCreated:()=>{D(!1),B()}}),S&&M&&(0,t.jsx)(w,{appointment:M,onClose:()=>{T(!1),A(null)},onUpdated:()=>{E()}}),L&&c&&(0,t.jsx)(n,{calendarId:c.id,onClose:()=>O(!1),onUpdated:()=>{B(),O(!1)}})]})}function h({calendars:e,appointments:a,events:s,selectedCalendar:r,setSelectedCalendar:n,selectedDate:l,setSelectedDate:i,viewMode:o,setViewMode:d,loading:c,sidebarCollapsed:x,setSidebarCollapsed:m,onEventClick:u,navigatePrev:h,navigateNext:g,goToToday:p,getHeaderText:N,setShowCreateModal:w,setShowSettingsModal:k}){var C,D;let S,T,M,A;return(0,t.jsxs)("div",{className:"h-[calc(100vh-12rem)] flex -mx-4 sm:-mx-6 lg:-mx-8 -mb-4 sm:-mb-6 lg:-mb-8",children:[(0,t.jsxs)("div",{className:`${x?"w-12":"w-64"} border-r border-gray-200 bg-white transition-all duration-200 flex flex-col`,children:[(0,t.jsx)("button",{onClick:()=>m(!x),className:"p-3 hover:bg-gray-50 border-b border-gray-200",children:(0,t.jsx)("i",{className:`fas fa-${x?"chevron-right":"chevron-left"} text-gray-500`})}),!x&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"p-4",children:(0,t.jsxs)("button",{onClick:()=>w(!0),className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center justify-center gap-2",children:[(0,t.jsx)("i",{className:"fas fa-plus"}),"New Calendar"]})}),(0,t.jsx)("div",{className:"px-4 mb-4",children:(0,t.jsx)(b,{selectedDate:l,onDateSelect:i,events:s})}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto px-4",children:[(0,t.jsx)("h3",{className:"text-xs font-semibold text-gray-500 uppercase mb-2",children:"My Calendars"}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("button",{onClick:()=>n(null),className:`w-full text-left px-3 py-2 rounded-lg text-sm flex items-center gap-2 ${!r?"bg-green-50 text-green-700":"hover:bg-gray-100"}`,children:[(0,t.jsx)("span",{className:"w-3 h-3 rounded-full bg-green-500"}),"All Calendars"]}),e.map(e=>(0,t.jsxs)("div",{className:`w-full text-left px-3 py-2 rounded-lg text-sm flex items-center gap-2 cursor-pointer ${r?.id===e.id?"bg-green-50 text-green-700":"hover:bg-gray-100"}`,onClick:()=>n(e),children:[(0,t.jsx)("span",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:e.color||"#10B981"}}),(0,t.jsx)("span",{className:"truncate flex-1",children:e.name}),(0,t.jsx)("span",{className:"text-xs text-gray-400 capitalize mr-1",children:e.calendarType.replace("_"," ")}),(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),n(e),k(!0)},className:"p-1 hover:bg-gray-200 rounded text-gray-400 hover:text-gray-600",title:"Calendar Settings",children:(0,t.jsx)("i",{className:"fas fa-cog text-xs"})})]},e.id))]})]}),(0,t.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,t.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,t.jsx)("span",{children:"Today's appointments"}),(0,t.jsx)("span",{className:"font-medium",children:(C=s,S=new Date().toDateString(),C.filter(e=>e.start.toDateString()===S).length)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"This week"}),(0,t.jsx)("span",{className:"font-medium",children:(D=s,(M=new Date(T=new Date)).setDate(T.getDate()-T.getDay()),M.setHours(0,0,0,0),(A=new Date(M)).setDate(M.getDate()+6),A.setHours(23,59,59,999),D.filter(e=>e.start>=M&&e.start<=A).length)})]})]})})]})]}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,t.jsxs)("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("button",{onClick:p,className:"px-3 py-1.5 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm",children:"Today"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:h,className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,t.jsx)("i",{className:"fas fa-chevron-left text-gray-500"})}),(0,t.jsx)("button",{onClick:g,className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,t.jsx)("i",{className:"fas fa-chevron-right text-gray-500"})})]}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:N()})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex bg-gray-100 rounded-lg p-1",children:["month","week","day","agenda"].map(e=>(0,t.jsx)("button",{onClick:()=>d(e),className:`px-3 py-1.5 rounded-md text-sm capitalize ${o===e?"bg-white shadow text-gray-900":"text-gray-600 hover:text-gray-900"}`,children:e},e))}),r?(0,t.jsxs)("button",{onClick:()=>k(!0),className:"px-3 py-1.5 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm flex items-center gap-2",children:[(0,t.jsx)("i",{className:"fas fa-cog text-gray-500"}),(0,t.jsx)("span",{children:"Settings"})]}):(0,t.jsx)("button",{disabled:!0,className:"p-2 rounded-lg opacity-50 cursor-not-allowed",title:"Select a calendar first",children:(0,t.jsx)("i",{className:"fas fa-cog text-gray-400"})})]})]}),r&&(0,t.jsxs)("div",{className:"bg-green-50 border-b border-green-100 px-6 py-2 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:r.color||"#10B981"}}),(0,t.jsx)("span",{className:"font-medium text-green-900",children:r.name}),(0,t.jsx)("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded capitalize",children:r.calendarType.replace("_"," ")})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("button",{onClick:()=>navigator.clipboard.writeText(`${window.location.origin}/book/${r.slug}`),className:"text-xs text-green-600 hover:text-green-800 flex items-center gap-1",children:[(0,t.jsx)("i",{className:"fas fa-link"}),"Copy Booking Link"]}),(0,t.jsx)("span",{className:"text-gray-300",children:"|"}),(0,t.jsxs)("button",{onClick:()=>k(!0),className:"text-xs text-green-600 hover:text-green-800 flex items-center gap-1",children:[(0,t.jsx)("i",{className:"fas fa-cog"}),"Configure Calendar"]})]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-auto bg-gray-50 p-6",children:c?(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"})}):(0,t.jsxs)(t.Fragment,{children:["month"===o&&(0,t.jsx)(j,{date:l,events:s,onEventClick:u,onDateClick:e=>{i(e),d("day")}}),"week"===o&&(0,t.jsx)(y,{date:l,events:s,onEventClick:u}),"day"===o&&(0,t.jsx)(f,{date:l,events:s,onEventClick:u}),"agenda"===o&&(0,t.jsx)(v,{events:s,onEventClick:u})]})})]})]})}function g({appointments:e,calendars:s,loading:r,onAppointmentClick:n,onRefresh:l}){let[i,o]=(0,a.useState)(""),[d,c]=(0,a.useState)(""),[x,m]=(0,a.useState)(""),[u,h]=(0,a.useState)("all"),[g,p]=(0,a.useState)("date"),[b,j]=(0,a.useState)("asc"),y=(0,a.useMemo)(()=>{let t=[...e];if(i){let e=i.toLowerCase();t=t.filter(t=>t.contactName.toLowerCase().includes(e)||t.contactEmail.toLowerCase().includes(e)||t.appointmentType?.name?.toLowerCase().includes(e))}d&&(t=t.filter(e=>e.status===d)),x&&(t=t.filter(e=>e.calendarId===x));let a=new Date;if("today"===u){let e=a.toDateString();t=t.filter(t=>new Date(t.startTime).toDateString()===e)}else if("week"===u){let e=new Date(a);e.setDate(a.getDate()-a.getDay()),e.setHours(0,0,0,0);let s=new Date(e);s.setDate(e.getDate()+6),s.setHours(23,59,59,999),t=t.filter(t=>{let a=new Date(t.startTime);return a>=e&&a<=s})}else if("month"===u){let e=new Date(a.getFullYear(),a.getMonth(),1),s=new Date(a.getFullYear(),a.getMonth()+1,0,23,59,59,999);t=t.filter(t=>{let a=new Date(t.startTime);return a>=e&&a<=s})}return t.sort((e,t)=>{let a=0;return"date"===g?a=new Date(e.startTime).getTime()-new Date(t.startTime).getTime():"contact"===g?a=e.contactName.localeCompare(t.contactName):"status"===g&&(a=e.status.localeCompare(t.status)),"asc"===b?a:-a}),t},[e,i,d,x,u,g,b]),f=(0,a.useMemo)(()=>({total:e.length,scheduled:e.filter(e=>"scheduled"===e.status).length,confirmed:e.filter(e=>"confirmed"===e.status).length,completed:e.filter(e=>"completed"===e.status).length,cancelled:e.filter(e=>"cancelled"===e.status).length}),[e]);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"Total Appointments"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900 mt-1",children:f.total})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"Scheduled"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-yellow-600 mt-1",children:f.scheduled})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"Confirmed"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600 mt-1",children:f.confirmed})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"Completed"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600 mt-1",children:f.completed})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"Cancelled"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-red-600 mt-1",children:f.cancelled})]})]}),(0,t.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,t.jsxs)("div",{className:"flex flex-wrap gap-4 items-center",children:[(0,t.jsx)("div",{className:"flex-1 min-w-[200px]",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("i",{className:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),(0,t.jsx)("input",{type:"text",placeholder:"Search by name, email, or type...",value:i,onChange:e=>o(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})}),(0,t.jsxs)("select",{value:u,onChange:e=>h(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"all",children:"All Dates"}),(0,t.jsx)("option",{value:"today",children:"Today"}),(0,t.jsx)("option",{value:"week",children:"This Week"}),(0,t.jsx)("option",{value:"month",children:"This Month"})]}),(0,t.jsxs)("select",{value:d,onChange:e=>c(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"",children:"All Status"}),(0,t.jsx)("option",{value:"scheduled",children:"Scheduled"}),(0,t.jsx)("option",{value:"confirmed",children:"Confirmed"}),(0,t.jsx)("option",{value:"completed",children:"Completed"}),(0,t.jsx)("option",{value:"cancelled",children:"Cancelled"}),(0,t.jsx)("option",{value:"no_show",children:"No Show"}),(0,t.jsx)("option",{value:"rescheduled",children:"Rescheduled"})]}),(0,t.jsxs)("select",{value:x,onChange:e=>m(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"",children:"All Calendars"}),s.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,t.jsx)("button",{onClick:l,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg",title:"Refresh",children:(0,t.jsx)("i",{className:"fas fa-sync-alt"})})]})}),(0,t.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:r?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"})}):0===y.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("i",{className:"fas fa-calendar-times text-4xl text-gray-300 mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No appointments found"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Try adjusting your filters"})]}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>{"date"===g?j("asc"===b?"desc":"asc"):(p("date"),j("asc"))},children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:["Date & Time","date"===g&&(0,t.jsx)("i",{className:`fas fa-sort-${"asc"===b?"up":"down"} text-green-500`})]})}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>{"contact"===g?j("asc"===b?"desc":"asc"):(p("contact"),j("asc"))},children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:["Contact","contact"===g&&(0,t.jsx)("i",{className:`fas fa-sort-${"asc"===b?"up":"down"} text-green-500`})]})}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type / Calendar"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>{"status"===g?j("asc"===b?"desc":"asc"):(p("status"),j("asc"))},children:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:["Status","status"===g&&(0,t.jsx)("i",{className:`fas fa-sort-${"asc"===b?"up":"down"} text-green-500`})]})}),(0,t.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-200",children:y.map(e=>{let a=s.find(t=>t.id===e.calendarId);return(0,t.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>n(e),children:[(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:new Date(e.startTime).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:[new Date(e.startTime).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})," - ",new Date(e.endTime).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})]})]}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.contactName}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.contactEmail})]}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,t.jsx)("div",{className:"text-sm text-gray-900",children:e.appointmentType?.name||"N/A"}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[(0,t.jsx)("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:a?.color||"#10B981"}}),a?.name||"Unknown"]})]}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.durationMinutes," min"]}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${k(e.status)}`,children:e.status})}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:[(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),n(e)},className:"text-green-600 hover:text-green-800 mr-3",children:(0,t.jsx)("i",{className:"fas fa-eye"})}),e.meetingLink&&(0,t.jsx)("a",{href:e.meetingLink,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"text-blue-600 hover:text-blue-800",children:(0,t.jsx)("i",{className:"fas fa-video"})})]})]},e.id)})})]})})})]})}function p({calendars:e,onCalendarUpdated:s,subAccountId:r}){let[n,l]=(0,a.useState)(e[0]?.id||""),[i,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)(!1),[x,m]=(0,a.useState)({defaultDuration:30,defaultView:"week",weekStartDay:0,timeFormat:"12h",dateFormat:"MM/DD/YYYY",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,reminderDefault:24,allowDoubleBooking:!1,requireApproval:!1}),[u,h]=(0,a.useState)({emailNotifications:!0,smsNotifications:!1,notifyOnNew:!0,notifyOnCancel:!0,notifyOnReschedule:!0,sendReminders:!0,reminderTiming:[24,1]});e.find(e=>e.id===n);let g=async t=>{if(confirm("Are you sure you want to delete this calendar? This action cannot be undone."))try{let a=await fetch(`/api/v1/calendars?id=${t}`,{method:"DELETE"}),r=await a.json();r.success?(s(),n===t&&e.length>1&&l(e.find(e=>e.id!==t)?.id||"")):alert(r.error||"Failed to delete calendar")}catch(e){console.error("Error deleting calendar:",e),alert("Failed to delete calendar")}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[(0,t.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Manage Calendars"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Create, edit, and delete your calendars"})]}),(0,t.jsxs)("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[(0,t.jsx)("i",{className:"fas fa-plus"}),"New Calendar"]})]}),(0,t.jsx)("div",{className:"divide-y divide-gray-200",children:0===e.length?(0,t.jsxs)("div",{className:"px-6 py-12 text-center",children:[(0,t.jsx)("i",{className:"fas fa-calendar-plus text-4xl text-gray-300 mb-4"}),(0,t.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-1",children:"No calendars yet"}),(0,t.jsx)("p",{className:"text-gray-500 mb-4",children:"Create your first calendar to start scheduling appointments"}),(0,t.jsx)("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Create Calendar"})]}):e.map(e=>(0,t.jsxs)("div",{className:"px-6 py-4 flex items-center justify-between hover:bg-gray-50",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("span",{className:"w-4 h-4 rounded-full",style:{backgroundColor:e.color||"#10B981"}}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(0,t.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-500 mt-1",children:[(0,t.jsx)("span",{className:"capitalize",children:e.calendarType.replace("_"," ")}),(0,t.jsx)("span",{children:"•"}),(0,t.jsxs)("span",{children:[e.durationMinutes," min slots"]}),(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{className:"active"===e.status?"text-green-600":"text-gray-400",children:e.status})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>navigator.clipboard.writeText(`${window.location.origin}/book/${e.slug}`),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",title:"Copy booking link",children:(0,t.jsx)("i",{className:"fas fa-link"})}),(0,t.jsx)("button",{onClick:()=>l(e.id),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",title:"Edit calendar",children:(0,t.jsx)("i",{className:"fas fa-edit"})}),(0,t.jsx)("button",{onClick:()=>g(e.id),className:"p-2 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg",title:"Delete calendar",children:(0,t.jsx)("i",{className:"fas fa-trash"})})]})]},e.id))})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[(0,t.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"General Settings"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Configure default settings for all calendars"})]}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Appointment Duration"}),(0,t.jsxs)("select",{value:x.defaultDuration,onChange:e=>m(t=>({...t,defaultDuration:parseInt(e.target.value)})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"15",children:"15 minutes"}),(0,t.jsx)("option",{value:"30",children:"30 minutes"}),(0,t.jsx)("option",{value:"45",children:"45 minutes"}),(0,t.jsx)("option",{value:"60",children:"1 hour"}),(0,t.jsx)("option",{value:"90",children:"1.5 hours"}),(0,t.jsx)("option",{value:"120",children:"2 hours"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Calendar View"}),(0,t.jsxs)("select",{value:x.defaultView,onChange:e=>m(t=>({...t,defaultView:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"month",children:"Month"}),(0,t.jsx)("option",{value:"week",children:"Week"}),(0,t.jsx)("option",{value:"day",children:"Day"}),(0,t.jsx)("option",{value:"agenda",children:"Agenda"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Week Starts On"}),(0,t.jsxs)("select",{value:x.weekStartDay,onChange:e=>m(t=>({...t,weekStartDay:parseInt(e.target.value)})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"0",children:"Sunday"}),(0,t.jsx)("option",{value:"1",children:"Monday"}),(0,t.jsx)("option",{value:"6",children:"Saturday"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Format"}),(0,t.jsxs)("select",{value:x.timeFormat,onChange:e=>m(t=>({...t,timeFormat:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"12h",children:"12-hour (AM/PM)"}),(0,t.jsx)("option",{value:"24h",children:"24-hour"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Timezone"}),(0,t.jsxs)("select",{value:x.timezone,onChange:e=>m(t=>({...t,timezone:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"America/New_York",children:"Eastern Time (ET)"}),(0,t.jsx)("option",{value:"America/Chicago",children:"Central Time (CT)"}),(0,t.jsx)("option",{value:"America/Denver",children:"Mountain Time (MT)"}),(0,t.jsx)("option",{value:"America/Los_Angeles",children:"Pacific Time (PT)"}),(0,t.jsx)("option",{value:"UTC",children:"UTC"}),(0,t.jsx)("option",{value:"Europe/London",children:"London (GMT)"}),(0,t.jsx)("option",{value:"Europe/Paris",children:"Paris (CET)"}),(0,t.jsx)("option",{value:"Asia/Tokyo",children:"Tokyo (JST)"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Reminder"}),(0,t.jsxs)("select",{value:x.reminderDefault,onChange:e=>m(t=>({...t,reminderDefault:parseInt(e.target.value)})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"0",children:"No reminder"}),(0,t.jsx)("option",{value:"1",children:"1 hour before"}),(0,t.jsx)("option",{value:"4",children:"4 hours before"}),(0,t.jsx)("option",{value:"24",children:"24 hours before"}),(0,t.jsx)("option",{value:"48",children:"48 hours before"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4 pt-4 border-t border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Allow Double Booking"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Allow overlapping appointments on the same time slot"})]}),(0,t.jsx)("button",{onClick:()=>m(e=>({...e,allowDoubleBooking:!e.allowDoubleBooking})),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${x.allowDoubleBooking?"bg-green-600":"bg-gray-200"}`,children:(0,t.jsx)("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${x.allowDoubleBooking?"translate-x-5":"translate-x-0"}`})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Require Approval"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Manually approve appointments before confirming"})]}),(0,t.jsx)("button",{onClick:()=>m(e=>({...e,requireApproval:!e.requireApproval})),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${x.requireApproval?"bg-green-600":"bg-gray-200"}`,children:(0,t.jsx)("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${x.requireApproval?"translate-x-5":"translate-x-0"}`})})]})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[(0,t.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Notification Settings"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Configure how you receive appointment notifications"})]}),(0,t.jsxs)("div",{className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Email Notifications"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Receive appointment updates via email"})]}),(0,t.jsx)("button",{onClick:()=>h(e=>({...e,emailNotifications:!e.emailNotifications})),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${u.emailNotifications?"bg-green-600":"bg-gray-200"}`,children:(0,t.jsx)("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${u.emailNotifications?"translate-x-5":"translate-x-0"}`})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"SMS Notifications"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Receive appointment updates via SMS"})]}),(0,t.jsx)("button",{onClick:()=>h(e=>({...e,smsNotifications:!e.smsNotifications})),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${u.smsNotifications?"bg-green-600":"bg-gray-200"}`,children:(0,t.jsx)("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${u.smsNotifications?"translate-x-5":"translate-x-0"}`})})]}),(0,t.jsx)("hr",{className:"my-4"}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"New Appointments"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Notify when a new appointment is booked"})]}),(0,t.jsx)("button",{onClick:()=>h(e=>({...e,notifyOnNew:!e.notifyOnNew})),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${u.notifyOnNew?"bg-green-600":"bg-gray-200"}`,children:(0,t.jsx)("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${u.notifyOnNew?"translate-x-5":"translate-x-0"}`})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Cancellations"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Notify when an appointment is cancelled"})]}),(0,t.jsx)("button",{onClick:()=>h(e=>({...e,notifyOnCancel:!e.notifyOnCancel})),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${u.notifyOnCancel?"bg-green-600":"bg-gray-200"}`,children:(0,t.jsx)("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${u.notifyOnCancel?"translate-x-5":"translate-x-0"}`})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Reschedules"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Notify when an appointment is rescheduled"})]}),(0,t.jsx)("button",{onClick:()=>h(e=>({...e,notifyOnReschedule:!e.notifyOnReschedule})),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${u.notifyOnReschedule?"bg-green-600":"bg-gray-200"}`,children:(0,t.jsx)("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${u.notifyOnReschedule?"translate-x-5":"translate-x-0"}`})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Appointment Reminders"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Send reminders before appointments"})]}),(0,t.jsx)("button",{onClick:()=>h(e=>({...e,sendReminders:!e.sendReminders})),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${u.sendReminders?"bg-green-600":"bg-gray-200"}`,children:(0,t.jsx)("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${u.sendReminders?"translate-x-5":"translate-x-0"}`})})]})]})]}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsxs)("button",{onClick:()=>{c(!0),setTimeout(()=>{c(!1),alert("Settings saved successfully!")},1e3)},disabled:d,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 flex items-center gap-2",children:[d&&(0,t.jsx)("i",{className:"fas fa-spinner fa-spin"}),d?"Saving...":"Save Settings"]})}),i&&(0,t.jsx)(N,{subAccountId:r,onClose:()=>o(!1),onCreated:()=>{o(!1),s()}})]})}function b({selectedDate:e,onDateSelect:s,events:r}){let[n,l]=(0,a.useState)(e),i=(e=>{let t=e.getFullYear(),a=e.getMonth(),s=new Date(t,a,1),r=new Date(t,a+1,0).getDate(),n=s.getDay(),l=[];for(let e=0;e<n;e++)l.push(null);for(let e=1;e<=r;e++)l.push(new Date(t,a,e));return l})(n);return(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("button",{onClick:()=>l(new Date(n.getFullYear(),n.getMonth()-1)),className:"p-1 hover:bg-gray-100 rounded",children:(0,t.jsx)("i",{className:"fas fa-chevron-left text-xs text-gray-500"})}),(0,t.jsxs)("span",{className:"text-sm font-medium",children:[["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][n.getMonth()]," ",n.getFullYear()]}),(0,t.jsx)("button",{onClick:()=>l(new Date(n.getFullYear(),n.getMonth()+1)),className:"p-1 hover:bg-gray-100 rounded",children:(0,t.jsx)("i",{className:"fas fa-chevron-right text-xs text-gray-500"})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-7 gap-1",children:[["S","M","T","W","T","F","S"].map((e,a)=>(0,t.jsx)("div",{className:"text-center text-xs text-gray-400 py-1",children:e},a)),i.map((a,n)=>(0,t.jsxs)("button",{onClick:()=>a&&s(a),disabled:!a,className:`
              text-xs p-1 rounded relative
              ${!a?"":"hover:bg-gray-100"}
              ${a?.toDateString()===e.toDateString()?"bg-green-600 text-white hover:bg-green-700":""}
              ${a?.toDateString()===new Date().toDateString()&&a?.toDateString()!==e.toDateString()?"text-green-600 font-bold":""}
            `,children:[a?.getDate(),a&&r.some(e=>e.start.toDateString()===a.toDateString())&&(0,t.jsx)("span",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-green-500 rounded-full"})]},n))]})]})}function j({date:e,events:a,onEventClick:s,onDateClick:r}){let n=(()=>{let t=e.getFullYear(),a=e.getMonth(),s=new Date(t,a,1),r=new Date(t,a+1,0).getDate(),n=s.getDay(),l=[],i=new Date(t,a,0);for(let e=n-1;e>=0;e--)l.push({date:new Date(t,a-1,i.getDate()-e),isCurrentMonth:!1});for(let e=1;e<=r;e++)l.push({date:new Date(t,a,e),isCurrentMonth:!0});let o=42-l.length;for(let e=1;e<=o;e++)l.push({date:new Date(t,a+1,e),isCurrentMonth:!1});return l})();return(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,t.jsx)("div",{className:"grid grid-cols-7 border-b border-gray-200",children:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map(e=>(0,t.jsx)("div",{className:"px-3 py-2 text-sm font-medium text-gray-500 text-center bg-gray-50",children:e},e))}),(0,t.jsx)("div",{className:"grid grid-cols-7 grid-rows-6",children:n.map((e,n)=>{let l,i=(l=e.date,a.filter(e=>e.start.toDateString()===l.toDateString())),o=e.date.toDateString()===new Date().toDateString();return(0,t.jsxs)("div",{className:`min-h-[100px] border-b border-r border-gray-100 p-1 ${!e.isCurrentMonth?"bg-gray-50":""} ${n%7==6?"border-r-0":""}`,onClick:()=>r(e.date),children:[(0,t.jsx)("div",{className:`
                text-sm font-medium mb-1 w-7 h-7 flex items-center justify-center rounded-full cursor-pointer
                ${o?"bg-green-600 text-white":e.isCurrentMonth?"text-gray-900 hover:bg-gray-100":"text-gray-400"}
              `,children:e.date.getDate()}),(0,t.jsxs)("div",{className:"space-y-1",children:[i.slice(0,3).map(e=>(0,t.jsxs)("div",{onClick:t=>{t.stopPropagation(),s(e)},className:"text-xs px-2 py-1 rounded cursor-pointer truncate",style:{backgroundColor:e.color+"20",color:e.color,borderLeft:`3px solid ${e.color}`},children:[e.start.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})," ",e.title]},e.id)),i.length>3&&(0,t.jsxs)("div",{className:"text-xs text-gray-500 px-2",children:["+",i.length-3," more"]})]})]},n)})})]})}function y({date:e,events:a,onEventClick:s}){let r=(()=>{let t=[],a=new Date(e);a.setDate(e.getDate()-e.getDay());for(let e=0;e<7;e++){let s=new Date(a);s.setDate(a.getDate()+e),t.push(s)}return t})(),n=Array.from({length:24},(e,t)=>t);return(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,t.jsxs)("div",{className:"grid grid-cols-8 border-b border-gray-200",children:[(0,t.jsx)("div",{className:"w-16 bg-gray-50"}),r.map((e,a)=>{let s=e.toDateString()===new Date().toDateString();return(0,t.jsxs)("div",{className:`px-2 py-3 text-center border-l border-gray-200 ${s?"bg-green-50":"bg-gray-50"}`,children:[(0,t.jsx)("div",{className:"text-xs text-gray-500",children:e.toLocaleDateString("en-US",{weekday:"short"})}),(0,t.jsx)("div",{className:`text-lg font-medium ${s?"text-green-600":"text-gray-900"}`,children:e.getDate()})]},a)})]}),(0,t.jsx)("div",{className:"overflow-y-auto max-h-[600px]",children:n.map(e=>(0,t.jsxs)("div",{className:"grid grid-cols-8 border-b border-gray-100",children:[(0,t.jsx)("div",{className:"w-16 py-3 px-2 text-xs text-gray-500 text-right",children:0===e?"12 AM":e<12?`${e} AM`:12===e?"12 PM":`${e-12} PM`}),r.map((r,n)=>{let l=a.filter(t=>{let a=t.start.toDateString(),s=t.start.getHours();return a===r.toDateString()&&s===e});return(0,t.jsx)("div",{className:"border-l border-gray-100 min-h-[48px] p-1 relative",children:l.map(e=>(0,t.jsxs)("div",{onClick:()=>s(e),className:"text-xs px-2 py-1 rounded cursor-pointer mb-1",style:{backgroundColor:e.color+"20",color:e.color,borderLeft:`3px solid ${e.color}`},children:[(0,t.jsx)("div",{className:"font-medium truncate",children:e.title}),(0,t.jsx)("div",{className:"text-gray-500",children:e.contactName})]},e.id))},n)})]},e))})]})}function f({date:e,events:a,onEventClick:s}){let r=Array.from({length:24},(e,t)=>t),n=a.filter(t=>t.start.toDateString()===e.toDateString());return(0,t.jsxs)("div",{className:"flex gap-6",children:[(0,t.jsx)("div",{className:"flex-1 bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:(0,t.jsx)("div",{className:"overflow-y-auto max-h-[calc(100vh-250px)]",children:r.map(r=>{let n=a.filter(t=>t.start.toDateString()===e.toDateString()&&t.start.getHours()===r);return(0,t.jsxs)("div",{className:"flex border-b border-gray-100",children:[(0,t.jsx)("div",{className:"w-20 py-4 px-3 text-sm text-gray-500 text-right border-r border-gray-100",children:0===r?"12 AM":r<12?`${r} AM`:12===r?"12 PM":`${r-12} PM`}),(0,t.jsx)("div",{className:"flex-1 min-h-[64px] p-2",children:n.map(e=>(0,t.jsxs)("div",{onClick:()=>s(e),className:"p-3 rounded-lg cursor-pointer mb-2",style:{backgroundColor:e.color+"15",borderLeft:`4px solid ${e.color}`},children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:e.title}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:[e.start.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})," -",e.end.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})]})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:[(0,t.jsx)("i",{className:"fas fa-user mr-1"}),e.contactName," (",e.contactEmail,")"]})]},e.id))})]},r)})})}),(0,t.jsx)("div",{className:"w-80",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:e.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Total appointments"}),(0,t.jsx)("span",{className:"font-medium",children:n.length})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Confirmed"}),(0,t.jsx)("span",{className:"font-medium text-green-600",children:n.filter(e=>"confirmed"===e.status).length})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Pending"}),(0,t.jsx)("span",{className:"font-medium text-yellow-600",children:n.filter(e=>"scheduled"===e.status).length})]})]}),(0,t.jsx)("hr",{className:"my-4"}),(0,t.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Today's Schedule"}),(0,t.jsx)("div",{className:"space-y-2",children:0===n.length?(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"No appointments scheduled"}):n.map(e=>(0,t.jsxs)("div",{onClick:()=>s(e),className:"p-2 rounded-lg hover:bg-gray-50 cursor-pointer flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-1 h-10 rounded-full",style:{backgroundColor:e.color}}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:e.title}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:e.start.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})})]})]},e.id))})]})})]})}function v({events:e,onEventClick:a}){let s=e.filter(e=>e.start>=new Date).sort((e,t)=>e.start.getTime()-t.start.getTime()).reduce((e,t)=>{let a=t.start.toDateString();return e[a]||(e[a]=[]),e[a].push(t),e},{});return(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:0===Object.keys(s).length?(0,t.jsxs)("div",{className:"p-12 text-center",children:[(0,t.jsx)("i",{className:"fas fa-calendar-check text-4xl text-gray-300 mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No upcoming appointments"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Your schedule is clear for the next 30 days"})]}):(0,t.jsx)("div",{className:"divide-y divide-gray-100",children:Object.entries(s).map(([e,s])=>{let r=new Date(e),n=r.toDateString()===new Date().toDateString(),l=r.toDateString()===new Date(Date.now()+864e5).toDateString();return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:`px-6 py-3 ${n?"bg-green-50":"bg-gray-50"}`,children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${n?"bg-green-600 text-white":"bg-white border"}`,children:(0,t.jsx)("span",{className:"text-lg font-bold",children:r.getDate()})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:`font-medium ${n?"text-green-600":"text-gray-900"}`,children:n?"Today":l?"Tomorrow":r.toLocaleDateString("en-US",{weekday:"long"})}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:r.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]})]})}),(0,t.jsx)("div",{className:"divide-y divide-gray-50",children:s.map(e=>(0,t.jsxs)("div",{onClick:()=>a(e),className:"px-6 py-4 hover:bg-gray-50 cursor-pointer flex items-center gap-4",children:[(0,t.jsx)("div",{className:"text-sm text-gray-500 w-20",children:e.start.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}),(0,t.jsx)("div",{className:"w-1 h-12 rounded-full",style:{backgroundColor:e.color}}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"font-medium text-gray-900",children:e.title}),(0,t.jsxs)("div",{className:"text-sm text-gray-500 flex items-center gap-4 mt-1",children:[(0,t.jsxs)("span",{children:[(0,t.jsx)("i",{className:"fas fa-user mr-1"}),e.contactName]}),e.calendarName&&(0,t.jsxs)("span",{children:[(0,t.jsx)("i",{className:"fas fa-calendar mr-1"}),e.calendarName]})]})]}),(0,t.jsx)("div",{className:`px-2 py-1 rounded text-xs font-medium ${k(e.status)}`,children:e.status})]},e.id))})]},e)})})})}function N({subAccountId:e,onClose:s,onCreated:r}){let[n,l]=(0,a.useState)({name:"",calendarType:"individual",description:"",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,durationMinutes:30,slotIntervalMinutes:15,minimumNoticeHours:24,maximumBookingDays:60,autoConfirm:!0}),[i,o]=(0,a.useState)(!1),d=async t=>{t.preventDefault(),o(!0);try{let t=await fetch("/api/v1/calendars",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...n,subAccountId:e})}),a=await t.json();a.success?r():alert(a.error||"Failed to create calendar")}catch(e){console.error("Error creating calendar:",e),alert("Failed to create calendar")}finally{o(!1)}};return(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Create Calendar"}),(0,t.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:(0,t.jsx)("i",{className:"fas fa-times text-xl"})})]}),(0,t.jsxs)("form",{onSubmit:d,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Calendar Name *"}),(0,t.jsx)("input",{type:"text",value:n.name,onChange:e=>l({...n,name:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"e.g., Sales Consultations",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Calendar Type *"}),(0,t.jsxs)("select",{value:n.calendarType,onChange:e=>l({...n,calendarType:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"individual",children:"Individual - Single user scheduling"}),(0,t.jsx)("option",{value:"team",children:"Team - Multiple team members"}),(0,t.jsx)("option",{value:"collective",children:"Collective - Requires multiple participants"}),(0,t.jsx)("option",{value:"round_robin",children:"Round Robin - Auto distribute among team"}),(0,t.jsx)("option",{value:"service",children:"Service - Specific services with durations"}),(0,t.jsx)("option",{value:"class",children:"Class/Event - Group bookings with capacity"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,t.jsx)("textarea",{value:n.description,onChange:e=>l({...n,description:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:2,placeholder:"Brief description for booking page"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes)"}),(0,t.jsxs)("select",{value:n.durationMinutes,onChange:e=>l({...n,durationMinutes:parseInt(e.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"15",children:"15 minutes"}),(0,t.jsx)("option",{value:"30",children:"30 minutes"}),(0,t.jsx)("option",{value:"45",children:"45 minutes"}),(0,t.jsx)("option",{value:"60",children:"1 hour"}),(0,t.jsx)("option",{value:"90",children:"1.5 hours"}),(0,t.jsx)("option",{value:"120",children:"2 hours"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slot Interval"}),(0,t.jsxs)("select",{value:n.slotIntervalMinutes,onChange:e=>l({...n,slotIntervalMinutes:parseInt(e.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"5",children:"5 minutes"}),(0,t.jsx)("option",{value:"10",children:"10 minutes"}),(0,t.jsx)("option",{value:"15",children:"15 minutes"}),(0,t.jsx)("option",{value:"30",children:"30 minutes"}),(0,t.jsx)("option",{value:"60",children:"60 minutes"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Notice"}),(0,t.jsxs)("select",{value:n.minimumNoticeHours,onChange:e=>l({...n,minimumNoticeHours:parseInt(e.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"0",children:"None"}),(0,t.jsx)("option",{value:"1",children:"1 hour"}),(0,t.jsx)("option",{value:"4",children:"4 hours"}),(0,t.jsx)("option",{value:"24",children:"24 hours"}),(0,t.jsx)("option",{value:"48",children:"48 hours"}),(0,t.jsx)("option",{value:"72",children:"72 hours"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Book up to"}),(0,t.jsxs)("select",{value:n.maximumBookingDays,onChange:e=>l({...n,maximumBookingDays:parseInt(e.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"7",children:"1 week"}),(0,t.jsx)("option",{value:"14",children:"2 weeks"}),(0,t.jsx)("option",{value:"30",children:"30 days"}),(0,t.jsx)("option",{value:"60",children:"60 days"}),(0,t.jsx)("option",{value:"90",children:"90 days"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",id:"autoConfirm",checked:n.autoConfirm,onChange:e=>l({...n,autoConfirm:e.target.checked}),className:"rounded border-gray-300 text-green-600 focus:ring-green-500"}),(0,t.jsx)("label",{htmlFor:"autoConfirm",className:"text-sm text-gray-700",children:"Auto-confirm appointments (no approval required)"})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)("button",{type:"button",onClick:s,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:i||!n.name,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:i?"Creating...":"Create Calendar"})]})]})]})})})}function w({appointment:e,onClose:s,onUpdated:r}){let[n,l]=(0,a.useState)(!1),i=async t=>{l(!0);try{let a=await fetch("/api/v1/appointments",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,status:t})});(await a.json()).success&&(r(),"cancelled"===t&&s())}catch(e){console.error("Error updating appointment:",e)}finally{l(!1)}};return(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md mx-4",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Appointment Details"}),(0,t.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:(0,t.jsx)("i",{className:"fas fa-times"})})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${k(e.status)}`,children:e.status})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"When"}),(0,t.jsx)("div",{className:"font-medium",children:new Date(e.startTime).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}),(0,t.jsxs)("div",{className:"text-gray-600",children:[new Date(e.startTime).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})," -",new Date(e.endTime).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),(0,t.jsxs)("span",{className:"text-gray-400 ml-2",children:["(",e.durationMinutes," min)"]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"Contact"}),(0,t.jsx)("div",{className:"font-medium",children:e.contactName}),(0,t.jsx)("div",{className:"text-gray-600",children:e.contactEmail}),e.contactPhone&&(0,t.jsx)("div",{className:"text-gray-600",children:e.contactPhone})]}),e.meetingLink&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"Meeting Link"}),(0,t.jsx)("a",{href:e.meetingLink,target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:underline",children:e.meetingLink})]}),e.notes&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-gray-500",children:"Notes"}),(0,t.jsx)("div",{className:"text-gray-700",children:e.notes})]}),(0,t.jsxs)("div",{className:"flex gap-2 pt-4 border-t",children:["scheduled"===e.status&&(0,t.jsx)("button",{onClick:()=>i("confirmed"),disabled:n,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:"Confirm"}),["scheduled","confirmed"].includes(e.status)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>i("completed"),disabled:n,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:"Complete"}),(0,t.jsx)("button",{onClick:()=>i("no_show"),disabled:n,className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 disabled:opacity-50",children:"No Show"}),(0,t.jsx)("button",{onClick:()=>{confirm("Are you sure you want to cancel this appointment?")&&i("cancelled")},disabled:n,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:"Cancel"})]})]})]})]})})})}function k(e){switch(e){case"scheduled":return"bg-yellow-100 text-yellow-800";case"confirmed":return"bg-green-100 text-green-800";case"completed":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";case"no_show":default:return"bg-gray-100 text-gray-800";case"rescheduled":return"bg-purple-100 text-purple-800"}}function C(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-[#0a0a0a] flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),children:(0,t.jsx)(u,{})})}e.s(["default",()=>C,"dynamic",0,"force-dynamic"],87973)}]);