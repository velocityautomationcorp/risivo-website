(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,71869,e=>{"use strict";var s=e.i(43476),a=e.i(71645),t=e.i(18566),l=e.i(22016);function i(){return(0,s.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-900",children:(0,s.jsxs)("div",{className:"text-center text-white",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-500 mx-auto mb-4"}),(0,s.jsx)("p",{children:"Loading dialer..."})]})})}function r(){return(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)(i,{}),children:(0,s.jsx)(n,{})})}function n(){let e,i=(0,t.useSearchParams)().get("campaign"),[r,n]=(0,a.useState)("offline"),[x,u]=(0,a.useState)(null),[g,h]=(0,a.useState)(null),[b,p]=(0,a.useState)(null),[f,j]=(0,a.useState)(null),[N,y]=(0,a.useState)(0),[v,w]=(0,a.useState)(null),[C,S]=(0,a.useState)([]),[k,I]=(0,a.useState)([]),[$,T]=(0,a.useState)(!1),[O,A]=(0,a.useState)(!1),[E,P]=(0,a.useState)(!1),[q,D]=(0,a.useState)(""),[U,_]=(0,a.useState)(null),[R,G]=(0,a.useState)(!0),[J,F]=(0,a.useState)(null),L=(0,a.useRef)(null),z="b0000000-0000-0000-0000-000000000001";(0,a.useEffect)(()=>{i?H():(F("No campaign selected"),G(!1))},[i]),(0,a.useEffect)(()=>("in_progress"===f?L.current=setInterval(()=>{y(e=>e+1)},1e3):L.current&&clearInterval(L.current),()=>{L.current&&clearInterval(L.current)}),[f]);let H=async()=>{G(!0);try{let e=await fetch(`/api/v1/dialer/campaigns?subAccountId=${z}&id=${i}`),s=await e.json();if(s.success&&(u(s.data),s.data.scriptId)){let e=await fetch(`/api/v1/dialer/scripts?subAccountId=${z}&id=${s.data.scriptId}`),a=await e.json();a.success&&w(a.data)}let a=await fetch(`/api/v1/dialer/queue?subAccountId=${z}&campaignId=${i}&status=pending`),t=await a.json();t.success&&I(t.data);let l=await fetch(`/api/v1/dialer/dispositions?subAccountId=${z}`),r=await l.json();r.success&&S(r.data)}catch(e){console.error("Error loading dialer data:",e),F("Failed to load dialer data")}finally{G(!1)}},B=(0,a.useCallback)(async()=>{if(0===k.length){let e=await fetch(`/api/v1/dialer/queue?subAccountId=${z}&campaignId=${i}&status=pending`),s=await e.json();s.success&&s.data.length>0?(I(s.data),h(s.data[0]),I(e=>e.slice(1))):h(null)}else h(k[0]),I(e=>e.slice(1))},[k,i,z]),M=async()=>{if(g){j("initiated"),n("on_call"),y(0);try{let e=await fetch("/api/v1/dialer/calls",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subAccountId:z,campaignId:i,queueItemId:g.id,contactId:g.contactId,fromNumber:x?.callerId||"+1234567890",toNumber:g.phoneNumber,agentId:"demo-agent-id",agentName:"Demo Agent",scriptId:v?.id,scriptName:v?.name})}),s=await e.json();s.success&&(p(s.data),setTimeout(()=>{j("ringing"),setTimeout(()=>{j("in_progress")},2e3)},1e3))}catch(e){console.error("Error initiating call:",e),j(null),n("available")}}},Q=async()=>{if(b){j("completed");try{await fetch("/api/v1/dialer/calls",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:b.id,subAccountId:z,status:"completed",endedAt:new Date().toISOString(),outcome:"connected",isConnected:!0})})}catch(e){console.error("Error ending call:",e)}T(!0),n("wrap_up")}},K=async()=>{if(U&&b){try{await fetch("/api/v1/dialer/calls",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:b.id,subAccountId:z,dispositionId:U.id,dispositionCode:U.code,dispositionName:U.name,dispositionNotes:q})}),g&&await fetch("/api/v1/dialer/queue",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:g.id,subAccountId:z,status:U.removesFromQueue?"completed":"pending",lastCallResult:"answered"})})}catch(e){console.error("Error submitting disposition:",e)}T(!1),_(null),D(""),p(null),h(null),j(null),y(0),n("available")}},V=async()=>{if(g)try{await fetch("/api/v1/dialer/queue",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:g.id,subAccountId:z,status:"skipped"})})}catch(e){console.error("Error skipping contact:",e)}h(null),B()};return R?(0,s.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-900",children:(0,s.jsxs)("div",{className:"text-center text-white",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-500 mx-auto mb-4"}),(0,s.jsx)("p",{children:"Loading dialer..."})]})}):J||!x?(0,s.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-900",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("i",{className:"fas fa-exclamation-triangle text-5xl text-yellow-500 mb-4"}),(0,s.jsx)("p",{className:"text-white text-lg mb-4",children:J||"Campaign not found"}),(0,s.jsx)(l.default,{href:"/sub-account/power-dialer",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Back to Power Dialer"})]})}):(0,s.jsxs)("div",{className:"h-screen bg-gray-900 text-white flex flex-col",children:[(0,s.jsxs)("div",{className:"bg-gray-800 border-b border-gray-700 px-4 py-3 flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(l.default,{href:"/sub-account/power-dialer",className:"text-gray-400 hover:text-white",children:(0,s.jsx)("i",{className:"fas fa-arrow-left"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"font-semibold",children:x.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-400",children:[k.length+ +!!g," contacts remaining"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:`w-3 h-3 rounded-full ${"available"===r?"bg-green-500":"on_call"===r?"bg-blue-500 animate-pulse":"wrap_up"===r?"bg-yellow-500":"bg-gray-500"}`}),(0,s.jsx)("span",{className:"text-sm capitalize",children:r.replace("_"," ")})]}),"offline"===r?(0,s.jsxs)("button",{onClick:()=>{n("available")},className:"px-4 py-2 bg-green-600 rounded-lg hover:bg-green-700 flex items-center gap-2",children:[(0,s.jsx)("i",{className:"fas fa-headset"}),"Go Online"]}):(0,s.jsxs)("button",{onClick:()=>{n("offline")},disabled:null!==f,className:"px-4 py-2 bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,s.jsx)("i",{className:"fas fa-sign-out-alt"}),"Go Offline"]})]})]}),(0,s.jsxs)("div",{className:"flex-1 flex",children:[(0,s.jsxs)("div",{className:"w-1/3 border-r border-gray-700 p-6 flex flex-col",children:[g?(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-2xl font-bold",children:g.contactName?.charAt(0)||"?"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:g.contactName||"Unknown"}),(0,s.jsx)("p",{className:"text-gray-400",children:g.phoneNumber})]})]}),g.contactEmail&&(0,s.jsxs)("div",{className:"text-sm text-gray-400 mb-2",children:[(0,s.jsx)("i",{className:"fas fa-envelope w-5"}),g.contactEmail]}),f&&(0,s.jsxs)("div",{className:"mt-4 p-4 bg-gray-700 rounded-lg text-center",children:["initiated"===f&&(0,s.jsxs)("div",{className:"text-yellow-400",children:[(0,s.jsx)("i",{className:"fas fa-spinner fa-spin mr-2"}),"Initiating call..."]}),"ringing"===f&&(0,s.jsxs)("div",{className:"text-blue-400",children:[(0,s.jsx)("i",{className:"fas fa-phone-volume mr-2 animate-pulse"}),"Ringing..."]}),"in_progress"===f&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-green-400 text-lg mb-2",children:[(0,s.jsx)("i",{className:"fas fa-phone-alt mr-2"}),"Connected"]}),(0,s.jsx)("div",{className:"text-3xl font-mono font-bold",children:(e=Math.floor(N/60),`${e.toString().padStart(2,"0")}:${(N%60).toString().padStart(2,"0")}`)})]})]}),(0,s.jsx)("div",{className:"mt-6 flex gap-3",children:f?"in_progress"===f?(0,s.jsxs)("button",{onClick:Q,className:"flex-1 py-3 bg-red-600 rounded-lg hover:bg-red-700 flex items-center justify-center gap-2 text-lg",children:[(0,s.jsx)("i",{className:"fas fa-phone-slash"}),"End Call"]}):(0,s.jsx)("div",{className:"flex-1 py-3 bg-gray-700 rounded-lg text-center text-gray-400",children:"Call in progress..."}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{onClick:M,disabled:"available"!==r,className:"flex-1 py-3 bg-green-600 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-lg",children:[(0,s.jsx)("i",{className:"fas fa-phone"}),"Call"]}),(0,s.jsxs)("button",{onClick:V,className:"px-4 py-3 bg-gray-700 rounded-lg hover:bg-gray-600 flex items-center justify-center gap-2",children:[(0,s.jsx)("i",{className:"fas fa-forward"}),"Skip"]})]})})]}):"available"===r?(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl p-8 text-center mb-6",children:[(0,s.jsx)("i",{className:"fas fa-user-plus text-5xl text-gray-600 mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No Contact Loaded"}),(0,s.jsx)("p",{className:"text-gray-400 text-sm mb-4",children:"Click below to get the next contact from the queue"}),(0,s.jsxs)("button",{onClick:B,className:"px-6 py-3 bg-blue-600 rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2 mx-auto",children:[(0,s.jsx)("i",{className:"fas fa-user-plus"}),"Get Next Contact"]})]}):(0,s.jsxs)("div",{className:"bg-gray-800 rounded-xl p-8 text-center mb-6",children:[(0,s.jsx)("i",{className:"fas fa-headset text-5xl text-gray-600 mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Go Online to Start"}),(0,s.jsx)("p",{className:"text-gray-400 text-sm",children:'Click "Go Online" to begin dialing'})]}),"in_progress"===f&&(0,s.jsxs)("div",{className:"space-y-3 mt-auto",children:[(0,s.jsxs)("button",{onClick:()=>A(!0),className:"w-full py-3 bg-gray-700 rounded-lg hover:bg-gray-600 flex items-center justify-center gap-2",children:[(0,s.jsx)("i",{className:"fas fa-sticky-note"}),"Add Notes"]}),(0,s.jsxs)("button",{onClick:()=>P(!0),className:"w-full py-3 bg-gray-700 rounded-lg hover:bg-gray-600 flex items-center justify-center gap-2",children:[(0,s.jsx)("i",{className:"fas fa-calendar-plus"}),"Schedule Callback"]})]}),(0,s.jsxs)("div",{className:"mt-auto",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:"Up Next"}),(0,s.jsxs)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[k.slice(0,5).map((e,a)=>(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg p-3 flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-gray-500 text-sm w-5",children:a+1}),(0,s.jsx)("div",{className:"w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center text-sm",children:e.contactName?.charAt(0)||"?"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm truncate",children:e.contactName||"Unknown"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:e.phoneNumber})]})]},e.id)),0===k.length&&(0,s.jsx)("div",{className:"text-gray-500 text-sm text-center py-4",children:"Queue is empty"})]})]})]}),(0,s.jsx)("div",{className:"flex-1 p-6 overflow-y-auto",children:v?(0,s.jsx)(c,{script:v,contact:g}):(0,s.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center text-gray-500",children:[(0,s.jsx)("i",{className:"fas fa-scroll text-5xl mb-4 opacity-50"}),(0,s.jsx)("p",{className:"text-lg",children:"No Script Assigned"}),(0,s.jsx)("p",{className:"text-sm",children:"This campaign has no call script"}),(0,s.jsx)(l.default,{href:"/sub-account/power-dialer/scripts",className:"inline-block mt-4 px-4 py-2 bg-gray-700 rounded-lg hover:bg-gray-600",children:"Manage Scripts"})]})})})]}),$&&(0,s.jsx)(d,{dispositions:C,selectedDisposition:U,onSelect:_,callNotes:q,onNotesChange:D,onSubmit:K,onClose:()=>{if(!U){let e=C.find(e=>"CALL"===e.code);e&&_(e)}K()}}),O&&(0,s.jsx)(o,{notes:q,onChange:D,onClose:()=>A(!1)}),E&&(0,s.jsx)(m,{contact:g,subAccountId:z,onClose:()=>P(!1)})]})}function c({script:e,contact:t}){let[l,i]=(0,a.useState)(0),[r,n]=(0,a.useState)([]),c=s=>{if(!s||!t)return s;let a=s;return e.dynamicFields?.forEach(e=>{let s=t.contactData?.[e.field]||e.defaultValue||"";a=a.replace(RegExp(`{{${e.placeholder}}}`,"g"),s)}),a=(a=(a=a.replace(/{{name}}/gi,t.contactName||"")).replace(/{{firstName}}/gi,t.contactName?.split(" ")[0]||"")).replace(/{{phone}}/gi,t.phoneNumber||"")};return(0,s.jsxs)("div",{className:"h-full flex flex-col",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:e.name}),e.description&&(0,s.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:e.description})]}),e.greeting&&(0,s.jsxs)("div",{className:"bg-blue-900/30 border border-blue-700 rounded-lg p-4 mb-4",children:[(0,s.jsxs)("h3",{className:"text-blue-400 text-sm font-medium mb-2",children:[(0,s.jsx)("i",{className:"fas fa-hand-wave mr-2"}),"Greeting"]}),(0,s.jsx)("p",{className:"text-white",children:c(e.greeting)})]}),e.introduction&&(0,s.jsxs)("div",{className:"bg-purple-900/30 border border-purple-700 rounded-lg p-4 mb-4",children:[(0,s.jsxs)("h3",{className:"text-purple-400 text-sm font-medium mb-2",children:[(0,s.jsx)("i",{className:"fas fa-comment mr-2"}),"Introduction"]}),(0,s.jsx)("p",{className:"text-white",children:c(e.introduction)})]}),e.sections&&e.sections.length>0&&(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto mb-4",children:[(0,s.jsx)("h3",{className:"text-gray-400 text-sm font-medium mb-3",children:"Main Script"}),(0,s.jsx)("div",{className:"space-y-3",children:e.sections.map((e,a)=>(0,s.jsxs)("div",{className:`rounded-lg p-4 cursor-pointer transition-colors ${l===a?"bg-gray-700 border border-blue-500":"bg-gray-800 hover:bg-gray-750"}`,onClick:()=>i(a),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("span",{className:"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center text-sm",children:a+1}),(0,s.jsx)("h4",{className:"font-medium",children:e.title}),"question"===e.type&&(0,s.jsx)("span",{className:"text-xs bg-yellow-600 px-2 py-0.5 rounded",children:"Question"})]}),(0,s.jsx)("p",{className:"text-gray-300 whitespace-pre-wrap",children:c(e.content)})]},e.id))})]}),e.objectionHandlers&&e.objectionHandlers.length>0&&(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("h3",{className:"text-gray-400 text-sm font-medium mb-3",children:[(0,s.jsx)("i",{className:"fas fa-shield-alt mr-2"}),"Objection Handlers"]}),(0,s.jsx)("div",{className:"space-y-2",children:e.objectionHandlers.map(e=>(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:[(0,s.jsxs)("button",{onClick:()=>n(s=>s.includes(e.id)?s.filter(s=>s!==e.id):[...s,e.id]),className:"w-full px-4 py-3 flex justify-between items-center hover:bg-gray-750",children:[(0,s.jsxs)("span",{className:"text-orange-400",children:['"',e.objection,'"']}),(0,s.jsx)("i",{className:`fas fa-chevron-${r.includes(e.id)?"up":"down"} text-gray-500`})]}),r.includes(e.id)&&(0,s.jsx)("div",{className:"px-4 pb-3 text-gray-300",children:e.response})]},e.id))})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-auto",children:[e.closingPositive&&(0,s.jsxs)("div",{className:"bg-green-900/30 border border-green-700 rounded-lg p-4",children:[(0,s.jsxs)("h3",{className:"text-green-400 text-sm font-medium mb-2",children:[(0,s.jsx)("i",{className:"fas fa-thumbs-up mr-2"}),"Positive Close"]}),(0,s.jsx)("p",{className:"text-gray-300 text-sm",children:c(e.closingPositive)})]}),e.closingNegative&&(0,s.jsxs)("div",{className:"bg-red-900/30 border border-red-700 rounded-lg p-4",children:[(0,s.jsxs)("h3",{className:"text-red-400 text-sm font-medium mb-2",children:[(0,s.jsx)("i",{className:"fas fa-thumbs-down mr-2"}),"Negative Close"]}),(0,s.jsx)("p",{className:"text-gray-300 text-sm",children:c(e.closingNegative)})]})]}),e.voicemailScript&&(0,s.jsxs)("div",{className:"mt-4 bg-gray-800 rounded-lg p-4",children:[(0,s.jsxs)("h3",{className:"text-gray-400 text-sm font-medium mb-2",children:[(0,s.jsx)("i",{className:"fas fa-voicemail mr-2"}),"Voicemail Script"]}),(0,s.jsx)("p",{className:"text-gray-300 text-sm",children:c(e.voicemailScript)})]})]})}function d({dispositions:e,selectedDisposition:a,onSelect:t,callNotes:l,onNotesChange:i,onSubmit:r,onClose:n}){let c={positive:e.filter(e=>"positive"===e.category),neutral:e.filter(e=>"neutral"===e.category),negative:e.filter(e=>"negative"===e.category),callback:e.filter(e=>"callback"===e.category)};return(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70",children:(0,s.jsx)("div",{className:"bg-gray-800 rounded-2xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Select Call Disposition"}),(0,s.jsxs)("div",{className:"space-y-4 mb-6",children:[c.positive.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-green-400 text-sm font-medium mb-2",children:"Positive Outcomes"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2",children:c.positive.map(e=>(0,s.jsxs)("button",{onClick:()=>t(e),className:`p-3 rounded-lg text-left transition-colors ${a?.id===e.id?"bg-green-600":"bg-gray-700 hover:bg-gray-600"}`,children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("i",{className:`${e.icon||"fas fa-check"} text-green-400`}),(0,s.jsx)("span",{className:"font-medium",children:e.name})]}),e.description&&(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:e.description})]},e.id))})]}),c.neutral.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-blue-400 text-sm font-medium mb-2",children:"Neutral Outcomes"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2",children:c.neutral.map(e=>(0,s.jsx)("button",{onClick:()=>t(e),className:`p-3 rounded-lg text-left transition-colors ${a?.id===e.id?"bg-blue-600":"bg-gray-700 hover:bg-gray-600"}`,children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("i",{className:`${e.icon||"fas fa-minus"} text-blue-400`}),(0,s.jsx)("span",{className:"font-medium",children:e.name})]})},e.id))})]}),c.negative.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-red-400 text-sm font-medium mb-2",children:"Negative Outcomes"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2",children:c.negative.map(e=>(0,s.jsx)("button",{onClick:()=>t(e),className:`p-3 rounded-lg text-left transition-colors ${a?.id===e.id?"bg-red-600":"bg-gray-700 hover:bg-gray-600"}`,children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("i",{className:`${e.icon||"fas fa-times"} text-red-400`}),(0,s.jsx)("span",{className:"font-medium",children:e.name})]})},e.id))})]}),c.callback.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-yellow-400 text-sm font-medium mb-2",children:"Callback"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2",children:c.callback.map(e=>(0,s.jsx)("button",{onClick:()=>t(e),className:`p-3 rounded-lg text-left transition-colors ${a?.id===e.id?"bg-yellow-600":"bg-gray-700 hover:bg-gray-600"}`,children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("i",{className:`${e.icon||"fas fa-phone-alt"} text-yellow-400`}),(0,s.jsx)("span",{className:"font-medium",children:e.name})]})},e.id))})]})]}),a?.requiresNotes&&(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["Notes ",a.requiresNotes&&(0,s.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,s.jsx)("textarea",{value:l,onChange:e=>i(e.target.value),className:"w-full px-4 py-3 bg-gray-700 rounded-lg border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Enter call notes..."})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:n,className:"flex-1 px-4 py-3 bg-gray-700 rounded-lg hover:bg-gray-600",children:"Cancel"}),(0,s.jsx)("button",{onClick:r,disabled:!a||a.requiresNotes&&!l.trim(),className:"flex-1 px-4 py-3 bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Submit Disposition"})]})]})})})}function o({notes:e,onChange:a,onClose:t}){return(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70",children:(0,s.jsx)("div",{className:"bg-gray-800 rounded-2xl w-full max-w-lg mx-4",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Call Notes"}),(0,s.jsx)("textarea",{value:e,onChange:e=>a(e.target.value),className:"w-full px-4 py-3 bg-gray-700 rounded-lg border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:6,placeholder:"Enter notes about this call...",autoFocus:!0}),(0,s.jsx)("div",{className:"flex gap-3 mt-4",children:(0,s.jsx)("button",{onClick:t,className:"flex-1 px-4 py-3 bg-blue-600 rounded-lg hover:bg-blue-700",children:"Save & Close"})})]})})})}function m({contact:e,subAccountId:t,onClose:l}){let[i,r]=(0,a.useState)(""),[n,c]=(0,a.useState)(""),[d,o]=(0,a.useState)(""),[m,x]=(0,a.useState)(!1),u=async()=>{if(e&&i&&n){x(!0);try{let s=new Date(`${i}T${n}`).toISOString();await fetch("/api/v1/dialer/queue",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id,subAccountId:t,scheduledFor:s,notes:d})}),l()}catch(e){console.error("Error scheduling callback:",e)}finally{x(!1)}}};return(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70",children:(0,s.jsx)("div",{className:"bg-gray-800 rounded-2xl w-full max-w-lg mx-4",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Schedule Callback"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Date"}),(0,s.jsx)("input",{type:"date",value:i,onChange:e=>r(e.target.value),className:"w-full px-4 py-3 bg-gray-700 rounded-lg border border-gray-600 focus:ring-2 focus:ring-blue-500",min:new Date().toISOString().split("T")[0]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Time"}),(0,s.jsx)("input",{type:"time",value:n,onChange:e=>c(e.target.value),className:"w-full px-4 py-3 bg-gray-700 rounded-lg border border-gray-600 focus:ring-2 focus:ring-blue-500"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Notes"}),(0,s.jsx)("textarea",{value:d,onChange:e=>o(e.target.value),className:"w-full px-4 py-3 bg-gray-700 rounded-lg border border-gray-600 focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Reason for callback..."})]})]}),(0,s.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,s.jsx)("button",{onClick:l,className:"flex-1 px-4 py-3 bg-gray-700 rounded-lg hover:bg-gray-600",children:"Cancel"}),(0,s.jsx)("button",{onClick:u,disabled:!i||!n||m,className:"flex-1 px-4 py-3 bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:m?"Scheduling...":"Schedule Callback"})]})]})})})}function x(){return(0,s.jsx)(a.Suspense,{fallback:(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-[#0a0a0a] flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),children:(0,s.jsx)(r,{})})}e.s(["default",()=>x,"dynamic",0,"force-dynamic"])}]);