(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,71767,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(22016);function l(){let[e,l]=(0,t.useState)([]),[c,n]=(0,t.useState)(!0),[d,o]=(0,t.useState)(null),[x,m]=(0,t.useState)(!1),[u,p]=(0,t.useState)(!1),g="b0000000-0000-0000-0000-000000000001";(0,t.useEffect)(()=>{h()},[]);let h=async()=>{n(!0);try{let e=await fetch(`/api/v1/dialer/scripts?subAccountId=${g}&activeOnly=false`),s=await e.json();s.success&&l(s.data)}catch(e){console.error("Error fetching scripts:",e)}finally{n(!1)}},b=async e=>{if(confirm("Are you sure you want to delete this script?"))try{(await fetch(`/api/v1/dialer/scripts?id=${e}&subAccountId=${g}`,{method:"DELETE"})).ok&&(l(s=>s.filter(s=>s.id!==e)),d?.id===e&&o(null))}catch(e){console.error("Error deleting script:",e)}};return(0,s.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(a.default,{href:"/sub-account/power-dialer",className:"text-gray-400 hover:text-gray-600",children:(0,s.jsx)("i",{className:"fas fa-arrow-left"})}),(0,s.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[(0,s.jsx)("i",{className:"fas fa-scroll text-green-600"}),"Call Scripts"]})]}),(0,s.jsx)("p",{className:"text-gray-500 text-sm mt-1 ml-8",children:"Create and manage scripts for your dialing campaigns"})]}),(0,s.jsxs)("button",{onClick:()=>p(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,s.jsx)("i",{className:"fas fa-plus"}),"New Script"]})]}),c?(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,s.jsxs)("div",{className:"flex gap-6",children:[(0,s.jsx)("div",{className:"w-1/3 space-y-3",children:0===e.length?(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border p-8 text-center",children:[(0,s.jsx)("i",{className:"fas fa-scroll text-4xl text-gray-300 mb-3"}),(0,s.jsx)("p",{className:"text-gray-500",children:"No scripts yet"}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"Create your first call script"})]}):e.map(e=>(0,s.jsxs)("div",{onClick:()=>{o(e),m(!1)},className:`bg-white rounded-xl shadow-sm border p-4 cursor-pointer transition-all ${d?.id===e.id?"ring-2 ring-blue-500 border-blue-500":"hover:border-gray-300"}`,children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("h3",{className:"font-medium text-gray-900",children:e.name}),e.isDefault&&(0,s.jsx)("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:"Default"})]}),(0,s.jsx)("span",{className:`text-xs px-2 py-0.5 rounded ${e.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:e.isActive?"Active":"Inactive"})]}),e.description&&(0,s.jsx)("p",{className:"text-sm text-gray-500 line-clamp-2",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center gap-4 mt-3 text-xs text-gray-400",children:[(0,s.jsxs)("span",{children:[(0,s.jsx)("i",{className:"fas fa-list-ol mr-1"}),e.sections?.length||0," sections"]}),(0,s.jsxs)("span",{children:[(0,s.jsx)("i",{className:"fas fa-shield-alt mr-1"}),e.objectionHandlers?.length||0," objections"]}),(0,s.jsxs)("span",{children:[(0,s.jsx)("i",{className:"fas fa-chart-line mr-1"}),e.timesUsed," uses"]})]})]},e.id))}),(0,s.jsx)("div",{className:"flex-1",children:d?(0,s.jsx)(i,{script:d,isEditing:x,onEdit:()=>m(!0),onSave:async e=>{try{let s=await fetch("/api/v1/dialer/scripts",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:d.id,subAccountId:g,...e})}),t=await s.json();t.success&&(o(t.data),l(e=>e.map(e=>e.id===t.data.id?t.data:e)),m(!1))}catch(e){console.error("Error saving script:",e)}},onCancel:()=>m(!1),onDelete:()=>b(d.id)}):(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border p-12 text-center",children:[(0,s.jsx)("i",{className:"fas fa-hand-pointer text-5xl text-gray-300 mb-4"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Select a script to view or edit"})]})})]}),u&&(0,s.jsx)(r,{onClose:()=>p(!1),onCreated:e=>{l(s=>[...s,e]),o(e),p(!1)},subAccountId:g})]})}function i({script:e,isEditing:a,onEdit:l,onSave:i,onCancel:r,onDelete:c}){let[n,d]=(0,t.useState)({name:e.name,description:e.description||"",category:e.category||"",isDefault:e.isDefault,isActive:e.isActive,greeting:e.greeting||"",introduction:e.introduction||"",sections:e.sections||[],objectionHandlers:e.objectionHandlers||[],closingPositive:e.closingPositive||"",closingNegative:e.closingNegative||"",voicemailScript:e.voicemailScript||"",dynamicFields:e.dynamicFields||[]}),[o,x]=(0,t.useState)("script");(0,t.useEffect)(()=>{d({name:e.name,description:e.description||"",category:e.category||"",isDefault:e.isDefault,isActive:e.isActive,greeting:e.greeting||"",introduction:e.introduction||"",sections:e.sections||[],objectionHandlers:e.objectionHandlers||[],closingPositive:e.closingPositive||"",closingNegative:e.closingNegative||"",voicemailScript:e.voicemailScript||"",dynamicFields:e.dynamicFields||[]})},[e]);let m=(e,s)=>{d(t=>({...t,sections:t.sections.map((t,a)=>a===e?{...t,...s}:t)}))},u=(e,s)=>{d(t=>({...t,objectionHandlers:t.objectionHandlers.map((t,a)=>a===e?{...t,...s}:t)}))},p=(e,s)=>{d(t=>({...t,dynamicFields:t.dynamicFields.map((t,a)=>a===e?{...t,...s}:t)}))};return(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border",children:[(0,s.jsxs)("div",{className:"p-4 border-b flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[a?(0,s.jsx)("input",{type:"text",value:n.name,onChange:e=>d({...n,name:e.target.value}),className:"text-xl font-bold text-gray-900 border-b-2 border-blue-500 focus:outline-none"}):(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:e.name}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[e.isDefault&&(0,s.jsx)("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:"Default"}),(0,s.jsx)("span",{className:`text-xs px-2 py-0.5 rounded ${e.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:e.isActive?"Active":"Inactive"})]})]}),(0,s.jsx)("div",{className:"flex gap-2",children:a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:r,className:"px-4 py-2 border rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>i(n),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save Changes"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:c,className:"px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg",children:(0,s.jsx)("i",{className:"fas fa-trash"})}),(0,s.jsxs)("button",{onClick:l,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,s.jsx)("i",{className:"fas fa-edit"}),"Edit Script"]})]})})]}),(0,s.jsx)("div",{className:"border-b px-4",children:(0,s.jsx)("div",{className:"flex gap-4",children:[{id:"script",label:"Script Content",icon:"fas fa-scroll"},{id:"objections",label:"Objection Handlers",icon:"fas fa-shield-alt"},{id:"fields",label:"Dynamic Fields",icon:"fas fa-code"}].map(e=>(0,s.jsxs)("button",{onClick:()=>x(e.id),className:`py-3 border-b-2 flex items-center gap-2 transition-colors ${o===e.id?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[(0,s.jsx)("i",{className:e.icon}),e.label]},e.id))})}),(0,s.jsxs)("div",{className:"p-6 max-h-[calc(100vh-300px)] overflow-y-auto",children:["script"===o&&(0,s.jsxs)("div",{className:"space-y-6",children:[a&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,s.jsx)("textarea",{value:n.description,onChange:e=>d({...n,description:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"Script description..."})]}),a&&(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:n.isDefault,onChange:e=>d({...n,isDefault:e.target.checked}),className:"rounded border-gray-300 text-blue-600"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Default Script"})]}),(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:n.isActive,onChange:e=>d({...n,isActive:e.target.checked}),className:"rounded border-gray-300 text-blue-600"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Active"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,s.jsx)("i",{className:"fas fa-hand-wave mr-1 text-blue-500"}),"Greeting"]}),a?(0,s.jsx)("textarea",{value:n.greeting,onChange:e=>d({...n,greeting:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"Hi, is this {{name}}?"}):(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-gray-700",children:e.greeting||(0,s.jsx)("span",{className:"text-gray-400 italic",children:"No greeting set"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,s.jsx)("i",{className:"fas fa-comment mr-1 text-purple-500"}),"Introduction"]}),a?(0,s.jsx)("textarea",{value:n.introduction,onChange:e=>d({...n,introduction:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"My name is [Agent Name] from [Company]..."}):(0,s.jsx)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3 text-gray-700",children:e.introduction||(0,s.jsx)("span",{className:"text-gray-400 italic",children:"No introduction set"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[(0,s.jsx)("i",{className:"fas fa-list-ol mr-1 text-green-500"}),"Main Script Sections"]}),a&&(0,s.jsxs)("button",{onClick:()=>{d(e=>({...e,sections:[...e.sections,{id:`section-${Date.now()}`,title:"New Section",content:"",type:"text",order:e.sections.length}]}))},className:"text-sm text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[(0,s.jsx)("i",{className:"fas fa-plus"}),"Add Section"]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[n.sections.map((e,t)=>(0,s.jsx)("div",{className:"bg-gray-50 border rounded-lg p-4",children:a?(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:e.title,onChange:e=>m(t,{title:e.target.value}),className:"flex-1 px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500",placeholder:"Section title"}),(0,s.jsxs)("select",{value:e.type,onChange:e=>m(t,{type:e.target.value}),className:"px-3 py-2 border rounded bg-white",children:[(0,s.jsx)("option",{value:"text",children:"Text"}),(0,s.jsx)("option",{value:"question",children:"Question"}),(0,s.jsx)("option",{value:"objection_handler",children:"Objection Handler"})]}),(0,s.jsx)("button",{onClick:()=>{d(e=>({...e,sections:e.sections.filter((e,s)=>s!==t)}))},className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded",children:(0,s.jsx)("i",{className:"fas fa-trash"})})]}),(0,s.jsx)("textarea",{value:e.content,onChange:e=>m(t,{content:e.target.value}),className:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Section content..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("span",{className:"w-6 h-6 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-sm font-medium",children:t+1}),(0,s.jsx)("h4",{className:"font-medium text-gray-900",children:e.title}),"text"!==e.type&&(0,s.jsx)("span",{className:"text-xs bg-yellow-100 text-yellow-700 px-2 py-0.5 rounded capitalize",children:e.type})]}),(0,s.jsx)("p",{className:"text-gray-600 whitespace-pre-wrap",children:e.content})]})},e.id)),0===n.sections.length&&(0,s.jsxs)("div",{className:"text-center py-6 text-gray-400",children:[(0,s.jsx)("p",{children:"No sections yet"}),a&&(0,s.jsx)("p",{className:"text-sm",children:'Click "Add Section" to add one'})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,s.jsx)("i",{className:"fas fa-thumbs-up mr-1 text-green-500"}),"Closing (Positive Outcome)"]}),a?(0,s.jsx)("textarea",{value:n.closingPositive,onChange:e=>d({...n,closingPositive:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"Great! Let me schedule that for you..."}):(0,s.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 text-gray-700",children:e.closingPositive||(0,s.jsx)("span",{className:"text-gray-400 italic",children:"No positive closing set"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,s.jsx)("i",{className:"fas fa-thumbs-down mr-1 text-red-500"}),"Closing (Negative Outcome)"]}),a?(0,s.jsx)("textarea",{value:n.closingNegative,onChange:e=>d({...n,closingNegative:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"I understand. Can I leave you with my contact information..."}):(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-gray-700",children:e.closingNegative||(0,s.jsx)("span",{className:"text-gray-400 italic",children:"No negative closing set"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,s.jsx)("i",{className:"fas fa-voicemail mr-1 text-orange-500"}),"Voicemail Script"]}),a?(0,s.jsx)("textarea",{value:n.voicemailScript,onChange:e=>d({...n,voicemailScript:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Hi {{name}}, this is [Agent Name] from [Company]..."}):(0,s.jsx)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3 text-gray-700",children:e.voicemailScript||(0,s.jsx)("span",{className:"text-gray-400 italic",children:"No voicemail script set"})})]})]}),"objections"===o&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Add common objections and responses to help agents handle difficult conversations."}),a&&(0,s.jsxs)("button",{onClick:()=>{d(e=>({...e,objectionHandlers:[...e.objectionHandlers,{id:`objection-${Date.now()}`,objection:"",response:""}]}))},className:"px-4 py-2 text-blue-600 border border-blue-600 rounded-lg hover:bg-blue-50 flex items-center gap-2",children:[(0,s.jsx)("i",{className:"fas fa-plus"}),"Add Objection"]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[n.objectionHandlers.map((e,t)=>(0,s.jsx)("div",{className:"bg-gray-50 border rounded-lg p-4",children:a?(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("label",{className:"text-xs text-gray-500 mb-1 block",children:"Objection"}),(0,s.jsx)("input",{type:"text",value:e.objection,onChange:e=>u(t,{objection:e.target.value}),className:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500",placeholder:'"I\'m not interested"'})]}),(0,s.jsx)("button",{onClick:()=>{d(e=>({...e,objectionHandlers:e.objectionHandlers.filter((e,s)=>s!==t)}))},className:"self-end px-3 py-2 text-red-600 hover:bg-red-50 rounded",children:(0,s.jsx)("i",{className:"fas fa-trash"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-xs text-gray-500 mb-1 block",children:"Response"}),(0,s.jsx)("textarea",{value:e.response,onChange:e=>u(t,{response:e.target.value}),className:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"I completely understand. May I ask what specifically doesn't interest you..."})]})]}):(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-orange-100 text-orange-600 rounded-full flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("i",{className:"fas fa-quote-left text-xs"})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-medium text-orange-700",children:['"',e.objection,'"']}),(0,s.jsx)("p",{className:"mt-2 text-gray-600",children:e.response})]})]})})},e.id)),0===n.objectionHandlers.length&&(0,s.jsxs)("div",{className:"text-center py-8 text-gray-400",children:[(0,s.jsx)("i",{className:"fas fa-shield-alt text-4xl mb-3 opacity-50"}),(0,s.jsx)("p",{children:"No objection handlers yet"}),a&&(0,s.jsx)("p",{className:"text-sm",children:"Add common objections to help agents"})]})]})]}),"fields"===o&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Dynamic fields are placeholders that get replaced with actual contact data."}),(0,s.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["Use ","{{placeholder}}"," syntax in your script text."]})]}),a&&(0,s.jsxs)("button",{onClick:()=>{d(e=>({...e,dynamicFields:[...e.dynamicFields,{placeholder:"",field:"",defaultValue:""}]}))},className:"px-4 py-2 text-blue-600 border border-blue-600 rounded-lg hover:bg-blue-50 flex items-center gap-2",children:[(0,s.jsx)("i",{className:"fas fa-plus"}),"Add Field"]})]}),(0,s.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-blue-700 mb-2",children:"Built-in Fields"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:[{placeholder:"{{name}}",desc:"Full name"},{placeholder:"{{firstName}}",desc:"First name"},{placeholder:"{{phone}}",desc:"Phone number"},{placeholder:"{{email}}",desc:"Email address"}].map(e=>(0,s.jsx)("code",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-sm",title:e.desc,children:e.placeholder},e.placeholder))})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[n.dynamicFields.map((e,t)=>(0,s.jsx)("div",{className:"bg-gray-50 border rounded-lg p-4",children:a?(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("label",{className:"text-xs text-gray-500 mb-1 block",children:"Placeholder"}),(0,s.jsx)("input",{type:"text",value:e.placeholder,onChange:e=>p(t,{placeholder:e.target.value}),className:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500",placeholder:"company_name"})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("label",{className:"text-xs text-gray-500 mb-1 block",children:"Contact Field"}),(0,s.jsx)("input",{type:"text",value:e.field,onChange:e=>p(t,{field:e.target.value}),className:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500",placeholder:"customFields.company"})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("label",{className:"text-xs text-gray-500 mb-1 block",children:"Default Value"}),(0,s.jsx)("input",{type:"text",value:e.defaultValue,onChange:e=>p(t,{defaultValue:e.target.value}),className:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500",placeholder:"your company"})]}),(0,s.jsx)("button",{onClick:()=>{d(e=>({...e,dynamicFields:e.dynamicFields.filter((e,s)=>s!==t)}))},className:"self-end px-3 py-2 text-red-600 hover:bg-red-50 rounded",children:(0,s.jsx)("i",{className:"fas fa-trash"})})]}):(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("code",{className:"px-2 py-1 bg-gray-200 rounded",children:`{{${e.placeholder}}}`}),(0,s.jsx)("span",{className:"text-gray-400",children:"â†’"}),(0,s.jsx)("span",{className:"text-gray-600",children:e.field}),e.defaultValue&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-gray-400",children:"|"}),(0,s.jsxs)("span",{className:"text-gray-400 text-sm",children:['default: "',e.defaultValue,'"']})]})]})},t)),0===n.dynamicFields.length&&(0,s.jsxs)("div",{className:"text-center py-6 text-gray-400",children:[(0,s.jsx)("p",{children:"No custom dynamic fields"}),a&&(0,s.jsx)("p",{className:"text-sm",children:"Add custom fields for personalization"})]})]})]})]})]})}function r({onClose:e,onCreated:a,subAccountId:l}){let[i,r]=(0,t.useState)({name:"",description:"",category:"",isDefault:!1}),[c,n]=(0,t.useState)(!1),[d,o]=(0,t.useState)(""),x=async e=>{if(e.preventDefault(),!i.name.trim())return void o("Script name is required");n(!0),o("");try{let e=await fetch("/api/v1/dialer/scripts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subAccountId:l,...i,isActive:!0,sections:[],objectionHandlers:[],dynamicFields:[]})}),s=await e.json();s.success?a(s.data):o(s.error||"Failed to create script")}catch(e){o("Network error")}finally{n(!1)}};return(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:e}),(0,s.jsx)("div",{className:"relative bg-white rounded-2xl shadow-xl w-full max-w-md mx-4",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"New Call Script"}),(0,s.jsx)("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:(0,s.jsx)("i",{className:"fas fa-times text-xl"})})]}),d&&(0,s.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:d}),(0,s.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Script Name *"}),(0,s.jsx)("input",{type:"text",value:i.name,onChange:e=>r({...i,name:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Sales Introduction Script"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,s.jsx)("textarea",{value:i.description,onChange:e=>r({...i,description:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"Brief description of this script..."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,s.jsxs)("select",{value:i.category,onChange:e=>r({...i,category:e.target.value}),className:"w-full px-4 py-2 border rounded-lg bg-white",children:[(0,s.jsx)("option",{value:"",children:"Select category"}),(0,s.jsx)("option",{value:"sales",children:"Sales"}),(0,s.jsx)("option",{value:"support",children:"Support"}),(0,s.jsx)("option",{value:"followup",children:"Follow-up"}),(0,s.jsx)("option",{value:"survey",children:"Survey"}),(0,s.jsx)("option",{value:"appointment",children:"Appointment"}),(0,s.jsx)("option",{value:"other",children:"Other"})]})]}),(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:i.isDefault,onChange:e=>r({...i,isDefault:e.target.checked}),className:"rounded border-gray-300 text-blue-600"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Set as default script"})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,s.jsx)("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 border rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:c,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:c?"Creating...":"Create Script"})]})]})]})})]})}e.s(["default",()=>l])}]);