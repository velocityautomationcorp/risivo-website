(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31882,e=>{"use strict";var s=e.i(43476),a=e.i(71645),t=e.i(22016);let l=[{id:"conversations",label:"Conversations",href:"/sub-account/conversations"},{id:"power-dialer",label:"Power Dialer",href:"/sub-account/conversations/power-dialer"},{id:"manual-actions",label:"Manual Actions",href:"/sub-account/conversations/manual-actions"},{id:"message-templates",label:"Message Templates",href:"/sub-account/conversations/message-templates"},{id:"smart-links",label:"Smart Links",href:"/sub-account/conversations/smart-links"}];function r(){let[e,r]=(0,a.useState)("dashboard"),[x,m]=(0,a.useState)([]),[u,h]=(0,a.useState)(null),[g,p]=(0,a.useState)(!0),[b,j]=(0,a.useState)(!1),[v,y]=(0,a.useState)(null),N="b0000000-0000-0000-0000-000000000001";(0,a.useEffect)(()=>{f()},[]);let f=async()=>{p(!0);try{let e=await fetch(`/api/v1/dialer/stats?subAccountId=${N}&type=dashboard`),s=await e.json();s.success&&h(s.data);let a=await fetch(`/api/v1/dialer/campaigns?subAccountId=${N}`),t=await a.json();t.success&&m(t.data)}catch(e){console.error("Error fetching dashboard data:",e)}finally{p(!1)}};return(0,s.jsxs)("div",{className:"h-[calc(100vh-8rem)] flex flex-col",children:[(0,s.jsxs)("div",{className:"flex-none bg-white border-b border-gray-200 px-6 py-4",children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Conversations"})}),(0,s.jsx)("div",{className:"flex items-center gap-6 border-b border-gray-200 -mb-4",children:l.map(e=>(0,s.jsx)(t.default,{href:e.href,className:`pb-3 px-1 text-sm font-medium border-b-2 transition-colors ${"power-dialer"===e.id?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:e.label},e.id))})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-auto bg-gray-50 p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:"ðŸ“ž Power Dialer"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"Manage outbound calling campaigns and track performance"})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(t.default,{href:"/sub-account/power-dialer/settings",className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:"âš™ï¸ Settings"}),(0,s.jsx)("button",{onClick:()=>j(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:"âž• New Campaign"})]})]}),(0,s.jsx)("div",{className:"flex gap-1 mb-6 bg-gray-100 p-1 rounded-lg w-fit",children:[{id:"dashboard",label:"Dashboard",icon:"ðŸ“Š"},{id:"campaigns",label:"Campaigns",icon:"ðŸ“¢"},{id:"active",label:"Active Dialer",icon:"ðŸŽ§"}].map(a=>(0,s.jsxs)("button",{onClick:()=>r(a.id),className:`px-4 py-2 rounded-md flex items-center gap-2 transition-colors ${e===a.id?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[a.icon," ",a.label]},a.id))}),g?(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,s.jsxs)(s.Fragment,{children:["dashboard"===e&&(0,s.jsx)(i,{stats:u,campaigns:x}),"campaigns"===e&&(0,s.jsx)(n,{campaigns:x,onSelectCampaign:y,getStatusColor:e=>{let s={draft:"bg-gray-100 text-gray-700",active:"bg-green-100 text-green-700",paused:"bg-yellow-100 text-yellow-700",completed:"bg-blue-100 text-blue-700",archived:"bg-gray-100 text-gray-500"};return s[e]||s.draft},formatDuration:e=>{let s=Math.floor(e/3600),a=Math.floor(e%3600/60),t=e%60;return s>0?`${s}h ${a}m`:a>0?`${a}m ${t}s`:`${t}s`},onRefresh:f,subAccountId:N}),"active"===e&&(0,s.jsx)(c,{campaigns:x.filter(e=>"active"===e.status),subAccountId:N})]}),b&&(0,s.jsx)(d,{onClose:()=>j(!1),onCreated:()=>{j(!1),f()},subAccountId:N}),v&&(0,s.jsx)(o,{campaign:v,onClose:()=>y(null),onUpdated:f,subAccountId:N})]})]})}function i({stats:e,campaigns:a}){if(!e)return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[{label:"Today's Calls",value:"0",icon:"ðŸ“ž",subtext:"0 answered"},{label:"Connect Rate",value:"0%",icon:"ðŸ“Š",subtext:"0/0 connected"},{label:"Avg Call Duration",value:"0s",icon:"â±ï¸",subtext:"0s total"},{label:"Active Campaigns",value:"0",icon:"ðŸ“¢",subtext:"0 contacts queued"},{label:"Active Agents",value:"0",icon:"ðŸŽ§",subtext:"0 calls in progress"},{label:"Voicemails",value:"0",icon:"ðŸ“­",subtext:"Dropped today"}].map((e,a)=>(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border p-4",children:[(0,s.jsx)("div",{className:"text-2xl mb-2",children:e.icon}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.value}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:e.label}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:e.subtext})]},a))}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)(t.default,{href:"/sub-account/power-dialer/dialer",className:"p-4 border rounded-lg hover:bg-blue-50 hover:border-blue-200 transition-colors text-center",children:[(0,s.jsx)("div",{className:"text-2xl text-blue-600 mb-2",children:"ðŸŽ§"}),(0,s.jsx)("p",{className:"font-medium text-gray-900",children:"Start Dialing"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Launch active dialer"})]}),(0,s.jsxs)(t.default,{href:"/sub-account/power-dialer/scripts",className:"p-4 border rounded-lg hover:bg-green-50 hover:border-green-200 transition-colors text-center",children:[(0,s.jsx)("div",{className:"text-2xl text-green-600 mb-2",children:"ðŸ“œ"}),(0,s.jsx)("p",{className:"font-medium text-gray-900",children:"Call Scripts"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Manage scripts"})]}),(0,s.jsxs)(t.default,{href:"/sub-account/power-dialer/analytics",className:"p-4 border rounded-lg hover:bg-purple-50 hover:border-purple-200 transition-colors text-center",children:[(0,s.jsx)("div",{className:"text-2xl text-purple-600 mb-2",children:"ðŸ“ˆ"}),(0,s.jsx)("p",{className:"font-medium text-gray-900",children:"Analytics"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"View reports"})]}),(0,s.jsxs)(t.default,{href:"/sub-account/power-dialer/settings",className:"p-4 border rounded-lg hover:bg-orange-50 hover:border-orange-200 transition-colors text-center",children:[(0,s.jsx)("div",{className:"text-2xl text-orange-600 mb-2",children:"âš™ï¸"}),(0,s.jsx)("p",{className:"font-medium text-gray-900",children:"Settings"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Configure dialer"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Recent Campaigns"}),(0,s.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,s.jsx)("div",{className:"text-3xl mb-2 opacity-50",children:"ðŸ“¢"}),(0,s.jsx)("p",{children:"No campaigns yet"}),(0,s.jsx)("p",{className:"text-sm",children:"Create your first campaign to get started"})]})]})]});let l=[{label:"Today's Calls",value:e.today.totalCalls,icon:"ðŸ“ž",subtext:`${e.today.answeredCalls} answered`},{label:"Connect Rate",value:`${e.today.connectRate}%`,icon:"ðŸ“Š",subtext:`${e.today.answeredCalls}/${e.today.totalCalls} connected`},{label:"Avg Call Duration",value:r(e.today.avgCallDuration),icon:"â±ï¸",subtext:`${r(e.today.totalTalkTime)} total`},{label:"Active Campaigns",value:e.activeCampaigns,icon:"ðŸ“¢",subtext:`${e.queuedContacts} contacts queued`},{label:"Active Agents",value:e.activeAgents,icon:"ðŸŽ§",subtext:`${e.callsInProgress} calls in progress`},{label:"Voicemails",value:e.today.voicemails,icon:"ðŸ“­",subtext:"Dropped today"}];function r(e){let s=Math.floor(e/60),a=e%60;return s>0?`${s}m ${a}s`:`${a}s`}return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:l.map((e,a)=>(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border p-4",children:[(0,s.jsx)("div",{className:"text-2xl mb-2",children:e.icon}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.value}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:e.label}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:e.subtext})]},a))}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsxs)(t.default,{href:"/sub-account/power-dialer/dialer",className:"p-4 border rounded-lg hover:bg-blue-50 hover:border-blue-200 transition-colors text-center",children:[(0,s.jsx)("div",{className:"text-2xl text-blue-600 mb-2",children:"ðŸŽ§"}),(0,s.jsx)("p",{className:"font-medium text-gray-900",children:"Start Dialing"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Launch active dialer"})]}),(0,s.jsxs)(t.default,{href:"/sub-account/power-dialer/scripts",className:"p-4 border rounded-lg hover:bg-green-50 hover:border-green-200 transition-colors text-center",children:[(0,s.jsx)("div",{className:"text-2xl text-green-600 mb-2",children:"ðŸ“œ"}),(0,s.jsx)("p",{className:"font-medium text-gray-900",children:"Call Scripts"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Manage scripts"})]}),(0,s.jsxs)(t.default,{href:"/sub-account/power-dialer/analytics",className:"p-4 border rounded-lg hover:bg-purple-50 hover:border-purple-200 transition-colors text-center",children:[(0,s.jsx)("div",{className:"text-2xl text-purple-600 mb-2",children:"ðŸ“ˆ"}),(0,s.jsx)("p",{className:"font-medium text-gray-900",children:"Analytics"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"View reports"})]}),(0,s.jsxs)(t.default,{href:"/sub-account/power-dialer/settings",className:"p-4 border rounded-lg hover:bg-orange-50 hover:border-orange-200 transition-colors text-center",children:[(0,s.jsx)("div",{className:"text-2xl text-orange-600 mb-2",children:"âš™ï¸"}),(0,s.jsx)("p",{className:"font-medium text-gray-900",children:"Settings"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Configure dialer"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[(0,s.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,s.jsx)("h3",{className:"font-semibold text-gray-900",children:"Recent Campaigns"})}),(0,s.jsxs)("div",{className:"space-y-3",children:[a.slice(0,5).map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:`w-2 h-2 rounded-full ${"active"===e.status?"bg-green-500 animate-pulse":"paused"===e.status?"bg-yellow-500":"bg-gray-400"}`}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[e.contactsRemaining," contacts remaining"]})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[e.answeredCalls,"/",e.totalCalls]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:e.totalCalls>0?`${Math.round(e.answeredCalls/e.totalCalls*100)}% connect`:"0% connect"})]})]},e.id)),0===a.length&&(0,s.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,s.jsx)("div",{className:"text-3xl mb-2 opacity-50",children:"ðŸ“¢"}),(0,s.jsx)("p",{children:"No campaigns yet"}),(0,s.jsx)("p",{className:"text-sm",children:"Create your first campaign to get started"})]})]})]})]})}function n({campaigns:e,onSelectCampaign:l,getStatusColor:r,formatDuration:i,onRefresh:n,subAccountId:c}){let[d,o]=(0,a.useState)("all"),[x,m]=(0,a.useState)(""),u=e.filter(e=>{let s="all"===d||e.status===d,a=e.name.toLowerCase().includes(x.toLowerCase());return s&&a}),h=async(e,s)=>{try{(await fetch("/api/v1/dialer/campaigns",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,subAccountId:c,status:s})})).ok&&n()}catch(e){console.error("Error updating campaign:",e)}};return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,s.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,s.jsx)("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,s.jsx)("input",{type:"text",placeholder:"Search campaigns...",value:x,onChange:e=>m(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,s.jsxs)("select",{value:d,onChange:e=>o(e.target.value),className:"px-4 py-2 border rounded-lg bg-white",children:[(0,s.jsx)("option",{value:"all",children:"All Status"}),(0,s.jsx)("option",{value:"active",children:"Active"}),(0,s.jsx)("option",{value:"paused",children:"Paused"}),(0,s.jsx)("option",{value:"draft",children:"Draft"}),(0,s.jsx)("option",{value:"completed",children:"Completed"}),(0,s.jsx)("option",{value:"archived",children:"Archived"})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border overflow-hidden",children:[(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50 border-b",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-gray-600",children:"Campaign"}),(0,s.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-gray-600",children:"Status"}),(0,s.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-gray-600",children:"Progress"}),(0,s.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-gray-600",children:"Performance"}),(0,s.jsx)("th",{className:"text-left px-4 py-3 text-sm font-medium text-gray-600",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"divide-y",children:u.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-4 py-4",children:(0,s.jsxs)("button",{onClick:()=>l(e),className:"text-left",children:[(0,s.jsx)("p",{className:"font-medium text-gray-900 hover:text-blue-600",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[e.type," â€¢ ",e.dialerMode||"preview"," mode"]})]})}),(0,s.jsx)("td",{className:"px-4 py-4",children:(0,s.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${r(e.status)}`,children:e.status})}),(0,s.jsx)("td",{className:"px-4 py-4",children:(0,s.jsxs)("div",{className:"w-32",children:[(0,s.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[(0,s.jsx)("span",{children:e.contactsDialed}),(0,s.jsx)("span",{children:e.totalContacts})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-blue-600 rounded-full h-2",style:{width:`${e.totalContacts>0?e.contactsDialed/e.totalContacts*100:0}%`}})})]})}),(0,s.jsx)("td",{className:"px-4 py-4",children:(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsxs)("p",{className:"text-gray-900",children:[e.answeredCalls,"/",e.totalCalls," answered"]}),(0,s.jsxs)("p",{className:"text-gray-500",children:["Avg: ",i(e.avgCallDuration)]})]})}),(0,s.jsx)("td",{className:"px-4 py-4",children:(0,s.jsxs)("div",{className:"flex gap-2",children:["active"===e.status&&(0,s.jsx)("button",{onClick:()=>h(e.id,"paused"),className:"p-2 text-yellow-600 hover:bg-yellow-50 rounded-lg",title:"Pause",children:"â¸ï¸"}),"paused"===e.status&&(0,s.jsx)("button",{onClick:()=>h(e.id,"active"),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg",title:"Resume",children:"â–¶ï¸"}),"draft"===e.status&&(0,s.jsx)("button",{onClick:()=>h(e.id,"active"),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg",title:"Start",children:"â–¶ï¸"}),(0,s.jsx)("button",{onClick:()=>l(e),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"View Details",children:"ðŸ‘ï¸"}),(0,s.jsx)(t.default,{href:`/sub-account/power-dialer/dialer?campaign=${e.id}`,className:"p-2 text-purple-600 hover:bg-purple-50 rounded-lg",title:"Open Dialer",children:"ðŸŽ§"})]})})]},e.id))})]}),0===u.length&&(0,s.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,s.jsx)("div",{className:"text-4xl mb-3 opacity-50",children:"ðŸ“¢"}),(0,s.jsx)("p",{className:"font-medium",children:"No campaigns found"}),(0,s.jsx)("p",{className:"text-sm",children:"Try adjusting your filters or create a new campaign"})]})]})]})}function c({campaigns:e,subAccountId:l}){let[r,i]=(0,a.useState)(e[0]?.id||null);return(0,s.jsx)("div",{className:"space-y-4",children:0===e.length?(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border p-12 text-center",children:[(0,s.jsx)("div",{className:"text-5xl text-gray-300 mb-4",children:"ðŸŽ§"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Active Campaigns"}),(0,s.jsx)("p",{className:"text-gray-500 mb-4",children:"You need at least one active campaign to start dialing."}),(0,s.jsx)("button",{onClick:()=>{},className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"ðŸ“¢ Go to Campaigns"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border p-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Campaign to Dial"}),(0,s.jsx)("select",{value:r||"",onChange:e=>i(e.target.value),className:"w-full md:w-auto px-4 py-2 border rounded-lg bg-white",children:e.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name," (",e.contactsRemaining," remaining)"]},e.id))})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 rounded-xl shadow-sm p-8 text-center text-white",children:[(0,s.jsx)("div",{className:"text-5xl mb-4",children:"ðŸŽ§"}),(0,s.jsx)("h3",{className:"text-2xl font-bold mb-2",children:"Ready to Dial"}),(0,s.jsxs)("p",{className:"text-blue-100 mb-6",children:[e.find(e=>e.id===r)?.contactsRemaining||0," contacts waiting in queue"]}),(0,s.jsx)(t.default,{href:`/sub-account/power-dialer/dialer?campaign=${r}`,className:"inline-flex items-center gap-2 px-6 py-3 bg-white text-blue-600 rounded-lg font-medium hover:bg-blue-50 transition-colors",children:"ðŸ“ž Launch Dialer"})]})]})})}function d({onClose:e,onCreated:t,subAccountId:l}){let[r,i]=(0,a.useState)({name:"",description:"",type:"outbound",dialerMode:"preview",priority:5}),[n,c]=(0,a.useState)(!1),[d,o]=(0,a.useState)(""),x=async e=>{if(e.preventDefault(),!r.name.trim())return void o("Campaign name is required");c(!0),o("");try{let e=await fetch("/api/v1/dialer/campaigns",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subAccountId:l,...r})}),s=await e.json();s.success?t():o(s.error||"Failed to create campaign")}catch(e){o("Network error")}finally{c(!1)}};return(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:e}),(0,s.jsx)("div",{className:"relative bg-white rounded-2xl shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"New Campaign"}),(0,s.jsx)("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),d&&(0,s.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:d}),(0,s.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Campaign Name *"}),(0,s.jsx)("input",{type:"text",value:r.name,onChange:e=>i({...r,name:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Q4 Sales Outreach"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,s.jsx)("textarea",{value:r.description,onChange:e=>i({...r,description:e.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Campaign description..."})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Campaign Type"}),(0,s.jsxs)("select",{value:r.type,onChange:e=>i({...r,type:e.target.value}),className:"w-full px-4 py-2 border rounded-lg bg-white",children:[(0,s.jsx)("option",{value:"outbound",children:"Outbound"}),(0,s.jsx)("option",{value:"callback",children:"Callback"}),(0,s.jsx)("option",{value:"follow_up",children:"Follow Up"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dialer Mode"}),(0,s.jsxs)("select",{value:r.dialerMode,onChange:e=>i({...r,dialerMode:e.target.value}),className:"w-full px-4 py-2 border rounded-lg bg-white",children:[(0,s.jsx)("option",{value:"preview",children:"Preview"}),(0,s.jsx)("option",{value:"progressive",children:"Progressive"}),(0,s.jsx)("option",{value:"predictive",children:"Predictive"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority (1-10)"}),(0,s.jsx)("input",{type:"range",min:"1",max:"10",value:r.priority,onChange:e=>i({...r,priority:parseInt(e.target.value)}),className:"w-full"}),(0,s.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,s.jsx)("span",{children:"Low"}),(0,s.jsx)("span",{children:r.priority}),(0,s.jsx)("span",{children:"High"})]})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,s.jsx)("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 border rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:n,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center justify-center gap-2",children:n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Creating..."]}):(0,s.jsx)(s.Fragment,{children:"âž• Create Campaign"})})]})]})]})})]})}function o({campaign:e,onClose:l,onUpdated:r,subAccountId:i}){let[n,c]=(0,a.useState)("overview"),d=e.totalCalls>0?Math.round(e.answeredCalls/e.totalCalls*100):0;return(0,s.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/30",onClick:l}),(0,s.jsxs)("div",{className:"absolute right-0 top-0 bottom-0 w-full max-w-2xl bg-white shadow-2xl overflow-y-auto",children:[(0,s.jsxs)("div",{className:"sticky top-0 bg-white border-b p-4 flex justify-between items-center z-10",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[e.type," campaign"]})]}),(0,s.jsx)("button",{onClick:l,className:"p-2 text-gray-400 hover:text-gray-600",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsx)("div",{className:"border-b px-4",children:(0,s.jsx)("div",{className:"flex gap-6",children:[{id:"overview",label:"Overview"},{id:"contacts",label:"Contacts"},{id:"stats",label:"Statistics"}].map(e=>(0,s.jsx)("button",{onClick:()=>c(e.id),className:`py-3 border-b-2 transition-colors ${n===e.id?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:e.label},e.id))})}),(0,s.jsxs)("div",{className:"p-6",children:["overview"===n&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,s.jsx)("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${"active"===e.status?"bg-green-100 text-green-700":"paused"===e.status?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:e.status.toUpperCase()}),(0,s.jsx)(t.default,{href:`/sub-account/power-dialer/dialer?campaign=${e.id}`,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:"ðŸŽ§ Open Dialer"})]}),e.description&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-500 mb-1",children:"Description"}),(0,s.jsx)("p",{className:"text-gray-700",children:e.description})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Progress"}),(0,s.jsxs)("div",{className:"bg-gray-100 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Contacts Dialed"}),(0,s.jsxs)("span",{className:"font-medium",children:[e.contactsDialed," / ",e.totalContacts]})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,s.jsx)("div",{className:"bg-blue-600 rounded-full h-3",style:{width:`${e.totalContacts>0?e.contactsDialed/e.totalContacts*100:0}%`}})}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:[e.contactsRemaining," contacts remaining"]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Key Metrics"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.totalCalls}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Total Calls"})]}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,s.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:[d,"%"]}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Connect Rate"})]}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.answeredCalls}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Answered"})]}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.voicemails}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Voicemails"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Settings"}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Dialer Mode"}),(0,s.jsx)("span",{className:"font-medium capitalize",children:e.dialerMode||"preview"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Priority"}),(0,s.jsxs)("span",{className:"font-medium",children:[e.priority,"/10"]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Type"}),(0,s.jsx)("span",{className:"font-medium capitalize",children:e.type})]})]})]})]}),"contacts"===n&&(0,s.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,s.jsx)("div",{className:"text-4xl mb-3 opacity-50",children:"ðŸ‘¥"}),(0,s.jsx)("p",{children:"Contact list management"}),(0,s.jsx)("p",{className:"text-sm",children:"Coming soon - import and manage contacts"})]}),"stats"===n&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Call Breakdown"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(x,{label:"Answered",value:e.answeredCalls,total:e.totalCalls,color:"green"}),(0,s.jsx)(x,{label:"Voicemails",value:e.voicemails,total:e.totalCalls,color:"blue"}),(0,s.jsx)(x,{label:"No Answer",value:e.noAnswers,total:e.totalCalls,color:"yellow"}),(0,s.jsx)(x,{label:"Busy",value:e.busySignals,total:e.totalCalls,color:"orange"}),(0,s.jsx)(x,{label:"Failed",value:e.failedCalls,total:e.totalCalls,color:"red"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-500 mb-2",children:"Time Statistics"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,s.jsx)("p",{className:"text-xl font-bold text-gray-900",children:m(e.avgCallDuration)}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Avg Call Duration"})]}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,s.jsx)("p",{className:"text-xl font-bold text-gray-900",children:m(e.totalTalkTime)}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Total Talk Time"})]})]})]})]})]})]})]})}function x({label:e,value:a,total:t,color:l}){let r=t>0?a/t*100:0;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,s.jsx)("span",{className:"text-gray-600",children:e}),(0,s.jsxs)("span",{className:"font-medium",children:[a," (",r.toFixed(1),"%)"]})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,s.jsx)("div",{className:`${{green:"bg-green-500",blue:"bg-blue-500",yellow:"bg-yellow-500",orange:"bg-orange-500",red:"bg-red-500"}[l]||"bg-gray-500"} rounded-full h-2`,style:{width:`${r}%`}})})]})}function m(e){let s=Math.floor(e/3600),a=Math.floor(e%3600/60),t=e%60;return s>0?`${s}h ${a}m`:a>0?`${a}m ${t}s`:`${t}s`}e.s(["default",()=>r])}]);