(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,96403,e=>{"use strict";var r=e.i(43476),t=e.i(71645);let i=(0,t.createContext)({user:null,isLoading:!0,error:null,refetch:async()=>{}});function s({children:e}){let[s,l]=(0,t.useState)(null),[o,a]=(0,t.useState)(!0),[n,u]=(0,t.useState)(null),c=(0,t.useCallback)(async()=>{try{a(!0),u(null);let e=await fetch("/api/user/profile",{credentials:"include",cache:"no-store"});if(!e.ok){if(401===e.status)return void l(null);throw Error("Failed to fetch user")}let r=await e.json();r.success&&r.profile?l({id:r.profile.id,name:`${r.profile.firstName||""} ${r.profile.lastName||""}`.trim()||"User",email:r.profile.email,role:r.profile.role,isMasterAdmin:r.profile.isMasterAdmin||!1,isDemoUser:r.profile.isDemoUser||"demo"===r.profile.role||!1,agencyId:r.profile.agencyId,agencyName:r.profile.agencyName||"",avatar:r.profile.avatar,status:r.profile.status||"active",company:r.profile.company||null}):l(null)}catch(e){console.error("[useUser] Error fetching user:",e),u(e.message||"Failed to fetch user"),l(null)}finally{a(!1)}},[]);return(0,t.useEffect)(()=>{c()},[c]),(0,r.jsx)(i.Provider,{value:{user:s,isLoading:o,error:n,refetch:c},children:e})}function l(){let e=(0,t.useContext)(i);if(!e)throw Error("useUser must be used within a UserProvider");return e}e.s(["UserProvider",()=>s,"useUser",()=>l])},96923,e=>{"use strict";var r=e.i(43476),t=e.i(96403);function i({children:e}){return(0,r.jsx)(t.UserProvider,{children:e})}e.s(["Providers",()=>i])}]);