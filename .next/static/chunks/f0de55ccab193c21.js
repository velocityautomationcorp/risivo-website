(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,16992,e=>{"use strict";var t=e.i(43476),s=e.i(71645);function r(){let e="sub-001",[r,l]=(0,s.useState)([]),[i,d]=(0,s.useState)(!0),[n,o]=(0,s.useState)(!1),[c,x]=(0,s.useState)(null),[p,m]=(0,s.useState)("");(0,s.useEffect)(()=>{u()},[]);let u=async()=>{try{d(!0);let t=await fetch(`/api/v1/custom-fields?subAccountId=${e}`),s=await t.json();s.success?l(s.data||[]):m(s.error||"Failed to load custom fields")}catch(e){console.error("Failed to fetch custom fields:",e),m("Failed to load custom fields")}finally{d(!1)}},h=async t=>{if(confirm("Are you sure you want to delete this custom field? This action cannot be undone."))try{let s=await fetch(`/api/v1/custom-fields/${t}?subAccountId=${e}`,{method:"DELETE"}),r=await s.json();r.success?u():alert(r.error||"Failed to delete field")}catch(e){console.error("Failed to delete field:",e),alert("Failed to delete field")}},g=r.reduce((e,t)=>(e[t.entityType]||(e[t.entityType]=[]),e[t.entityType].push(t),e),{});return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-6 lg:p-8",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Custom Fields"}),(0,t.jsx)("p",{className:"mt-2 text-gray-600",children:"Define custom fields to capture additional information for contacts, deals, and more."})]}),(0,t.jsx)("div",{className:"mb-6 flex gap-3",children:(0,t.jsxs)("button",{onClick:()=>o(!0),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg font-medium hover:from-purple-700 hover:to-pink-700 transition-all flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Custom Field"]})}),p&&(0,t.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg",children:p}),i?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsxs)("svg",{className:"animate-spin h-12 w-12 text-purple-600",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):(0,t.jsx)(t.Fragment,{children:0===Object.keys(g).length?(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[(0,t.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,t.jsx)("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"No Custom Fields"}),(0,t.jsx)("p",{className:"mt-2 text-gray-500",children:"Get started by creating your first custom field."}),(0,t.jsx)("button",{onClick:()=>o(!0),className:"mt-6 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg font-medium hover:from-purple-700 hover:to-pink-700 transition-all",children:"Add Custom Field"})]}):(0,t.jsx)("div",{className:"space-y-6",children:Object.entries(g).map(([e,s])=>(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:(0,t.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 capitalize",children:[e," Fields (",s.length,")"]})}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Field Label"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Field Name"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Required"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Show in List"}),(0,t.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.sort((e,t)=>e.displayOrder-t.displayOrder).map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.fieldLabel})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("div",{className:"text-sm text-gray-500 font-mono",children:e.fieldName})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:e.fieldType})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.isRequired?(0,t.jsx)("span",{className:"text-red-600",children:"Yes"}):(0,t.jsx)("span",{className:"text-gray-400",children:"No"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.showInList?(0,t.jsx)("span",{className:"text-green-600",children:"Yes"}):(0,t.jsx)("span",{className:"text-gray-400",children:"No"})}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,t.jsx)("button",{onClick:()=>x(e),className:"text-purple-600 hover:text-purple-900 mr-4",children:"Edit"}),(0,t.jsx)("button",{onClick:()=>h(e.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},e.id))})]})})]},e))})}),(n||c)&&(0,t.jsx)(a,{isOpen:!0,onClose:()=>{o(!1),x(null)},onSuccess:()=>{o(!1),x(null),u()},editField:c,subAccountId:e})]})})}function a({isOpen:e,onClose:r,onSuccess:a,editField:l,subAccountId:i}){let[d,n]=(0,s.useState)(!1),[o,c]=(0,s.useState)(""),[x,p]=(0,s.useState)({entityType:l?.entityType||"contact",fieldName:l?.fieldName||"",fieldLabel:l?.fieldLabel||"",fieldType:l?.fieldType||"text",fieldOptions:l?.fieldOptions||[],isRequired:l?.isRequired||!1,defaultValue:l?.defaultValue||"",displayOrder:l?.displayOrder||0,showInList:l?.showInList||!1}),[m,u]=(0,s.useState)(l?.fieldOptions?.map(e=>`${e.value}|${e.label}`).join("\n")||""),h=async e=>{e.preventDefault(),c(""),n(!0);try{if(!x.fieldName||!x.fieldLabel||!x.fieldType)throw Error("Field name, label, and type are required");let e=[];"dropdown"===x.fieldType&&m.trim()&&(e=m.split("\n").filter(e=>e.trim()).map(e=>{let[t,s]=e.split("|");return{value:t.trim(),label:s?.trim()||t.trim()}}));let t=l?`/api/v1/custom-fields/${l.id}?subAccountId=${i}`:"/api/v1/custom-fields",s=l?"PUT":"POST",r=await fetch(t,{method:s,headers:{"Content-Type":"application/json"},body:JSON.stringify({...x,fieldOptions:e,subAccountId:i})}),d=await r.json();if(!d.success)throw Error(d.error||"Failed to save custom field");a()}catch(e){c(e.message||"Failed to save custom field")}finally{n(!1)}};return e?(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:l?"Edit Custom Field":"Add Custom Field"}),(0,t.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsxs)("form",{onSubmit:h,className:"p-6 space-y-6",children:[o&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg",children:o}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Entity Type ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("select",{value:x.entityType,onChange:e=>p({...x,entityType:e.target.value}),disabled:!!l,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 disabled:opacity-50 disabled:bg-gray-50",children:[(0,t.jsx)("option",{value:"contact",children:"Contact"}),(0,t.jsx)("option",{value:"deal",children:"Deal"}),(0,t.jsx)("option",{value:"company",children:"Company"}),(0,t.jsx)("option",{value:"task",children:"Task"})]}),l&&(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Entity type cannot be changed after creation"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Field Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",value:x.fieldName,onChange:e=>p({...x,fieldName:e.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"_")}),disabled:!!l,required:!0,placeholder:"lead_type",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 disabled:opacity-50 disabled:bg-gray-50 font-mono text-sm"}),l&&(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Field name cannot be changed"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Field Label ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",value:x.fieldLabel,onChange:e=>p({...x,fieldLabel:e.target.value}),required:!0,placeholder:"Lead Type",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Field Type ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("select",{value:x.fieldType,onChange:e=>p({...x,fieldType:e.target.value}),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,t.jsx)("option",{value:"text",children:"Text"}),(0,t.jsx)("option",{value:"textarea",children:"Text Area"}),(0,t.jsx)("option",{value:"number",children:"Number"}),(0,t.jsx)("option",{value:"date",children:"Date"}),(0,t.jsx)("option",{value:"dropdown",children:"Dropdown"}),(0,t.jsx)("option",{value:"checkbox",children:"Checkbox"}),(0,t.jsx)("option",{value:"email",children:"Email"}),(0,t.jsx)("option",{value:"phone",children:"Phone"}),(0,t.jsx)("option",{value:"url",children:"URL"})]})]}),"dropdown"===x.fieldType&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Dropdown Options ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("textarea",{value:m,onChange:e=>u(e.target.value),rows:5,placeholder:"lead|Lead team_member|Team Member vendor|Vendor",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 font-mono text-sm resize-none"}),(0,t.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:["One option per line. Format: ",(0,t.jsx)("code",{className:"bg-gray-100 px-1 py-0.5 rounded",children:"value|Label"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsx)("div",{children:(0,t.jsxs)("label",{className:"flex items-center gap-3 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:x.isRequired,onChange:e=>p({...x,isRequired:e.target.checked}),className:"w-5 h-5 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Required Field"})]})}),(0,t.jsx)("div",{children:(0,t.jsxs)("label",{className:"flex items-center gap-3 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:x.showInList,onChange:e=>p({...x,showInList:e.target.checked}),className:"w-5 h-5 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Show in List View"})]})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Order"}),(0,t.jsx)("input",{type:"number",value:x.displayOrder,onChange:e=>p({...x,displayOrder:parseInt(e.target.value)||0}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,t.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Fields are displayed in ascending order (0, 1, 2, ...)"})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[(0,t.jsx)("button",{type:"button",onClick:r,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium transition-colors",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:d,className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg font-medium hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:d?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):(0,t.jsx)(t.Fragment,{children:l?"Update Field":"Create Field"})})]})]})]})}):null}e.s(["default",()=>r])}]);