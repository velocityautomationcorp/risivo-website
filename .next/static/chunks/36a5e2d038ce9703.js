(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,34133,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(22016),r=e.i(18566),l=e.i(95696);async function n(e,s){try{let t=await fetch(`/api/v1/revenue-engine${e}`,{headers:{"Content-Type":"application/json",...s?.headers},...s}),a=await t.json();if(!t.ok)return{success:!1,error:a.error||"Request failed"};return{success:!0,data:a.data}}catch(e){return console.error("API Error:",e),{success:!1,error:e.message||"Network error"}}}function i(e,s=[]){let[a,r]=(0,t.useState)(null),[l,n]=(0,t.useState)(!0),[c,d]=(0,t.useState)(null),o=(0,t.useCallback)(async()=>{n(!0),d(null);let s=await e();s.success&&s.data?r(s.data):d(s.error||"Failed to fetch data"),n(!1)},s);return(0,t.useEffect)(()=>{o()},[o]),{data:a,loading:l,error:c,refetch:o,setData:r}}function c({isOpen:e,onClose:a,title:r,children:l,size:n="md"}){let i=(0,t.useRef)(null);return((0,t.useEffect)(()=>{let s=e=>{"Escape"===e.key&&a()};return e&&(document.addEventListener("keydown",s),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",s),document.body.style.overflow="unset"}},[e,a]),e)?(0,s.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,s.jsxs)("div",{className:"flex min-h-full items-center justify-center p-4",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:a}),(0,s.jsxs)("div",{ref:i,className:`relative bg-white rounded-lg shadow-xl w-full ${{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-6xl"}[n]} max-h-[90vh] overflow-hidden flex flex-col`,children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:r}),(0,s.jsx)("button",{onClick:a,className:"p-1 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:(0,s.jsx)("i",{className:"fas fa-times text-lg"})})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:l})]})]})}):null}function d({subAccountId:e,initialData:a,contacts:r=[],onSubmit:l,onCancel:n,isLoading:i}){let[c,d]=(0,t.useState)({contactId:a?.contactId||"",contactName:a?.contactName||"",contactEmail:a?.contactEmail||"",dueDate:a?.dueDate||new Date(Date.now()+2592e6).toISOString().split("T")[0],items:a?.items||[{id:"1",description:"",quantity:1,unitPrice:0,total:0}],notes:a?.notes||"",currency:a?.currency||"USD",taxRate:a?.taxRate||0,discountType:a?.discountType,discountValue:a?.discountValue||0}),[o,x]=(0,t.useState)(""),[m,u]=(0,t.useState)(!1),g=r.filter(e=>`${e.firstName} ${e.lastName}`.toLowerCase().includes(o.toLowerCase())||e.email.toLowerCase().includes(o.toLowerCase())),p=c.items.reduce((e,s)=>e+s.total,0),h="percentage"===c.discountType?p*((c.discountValue||0)/100):c.discountValue||0,y=p-h,b=y*((c.taxRate||0)/100),f=y+b,j=(e,s,t)=>{let a=[...c.items];a[e]={...a[e],[s]:t},("quantity"===s||"unitPrice"===s)&&(a[e].total=a[e].quantity*a[e].unitPrice),d({...c,items:a})},N=async e=>{(e.preventDefault(),c.contactId||c.contactEmail)?c.items.every(e=>!e.description||0===e.total)?alert("Please add at least one item with a description and amount"):await l(c):alert("Please select a contact or enter an email address")};return(0,s.jsxs)("form",{onSubmit:N,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,s.jsx)("i",{className:"fas fa-user mr-2 text-gray-400"}),"Client Information"]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Select Contact"}),(0,s.jsx)("input",{type:"text",value:o,onChange:e=>{x(e.target.value),u(!0)},onFocus:()=>u(!0),placeholder:"Search contacts...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"}),m&&g.length>0&&(0,s.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:g.map(e=>(0,s.jsxs)("button",{type:"button",onClick:()=>{d({...c,contactId:e.id,contactName:`${e.firstName} ${e.lastName}`,contactEmail:e.email}),x(`${e.firstName} ${e.lastName}`),u(!1)},className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center justify-between",children:[(0,s.jsxs)("span",{className:"font-medium",children:[e.firstName," ",e.lastName]}),(0,s.jsx)("span",{className:"text-sm text-gray-500",children:e.email})]},e.id))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Email"}),(0,s.jsx)("input",{type:"email",value:c.contactEmail,onChange:e=>d({...c,contactEmail:e.target.value}),placeholder:"client@example.com",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,s.jsx)("i",{className:"fas fa-file-invoice mr-2 text-gray-400"}),"Invoice Details"]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Due Date"}),(0,s.jsx)("input",{type:"date",value:c.dueDate,onChange:e=>d({...c,dueDate:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Currency"}),(0,s.jsxs)("select",{value:c.currency,onChange:e=>d({...c,currency:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"USD",children:"USD - US Dollar"}),(0,s.jsx)("option",{value:"EUR",children:"EUR - Euro"}),(0,s.jsx)("option",{value:"GBP",children:"GBP - British Pound"}),(0,s.jsx)("option",{value:"CAD",children:"CAD - Canadian Dollar"}),(0,s.jsx)("option",{value:"AUD",children:"AUD - Australian Dollar"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Tax Rate (%)"}),(0,s.jsx)("input",{type:"number",value:c.taxRate||"",onChange:e=>d({...c,taxRate:parseFloat(e.target.value)||0}),placeholder:"0",min:"0",max:"100",step:"0.01",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,s.jsx)("i",{className:"fas fa-list mr-2 text-gray-400"}),"Line Items"]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-2 text-xs font-medium text-gray-500 uppercase",children:[(0,s.jsx)("div",{className:"col-span-5",children:"Description"}),(0,s.jsx)("div",{className:"col-span-2 text-right",children:"Quantity"}),(0,s.jsx)("div",{className:"col-span-2 text-right",children:"Unit Price"}),(0,s.jsx)("div",{className:"col-span-2 text-right",children:"Total"}),(0,s.jsx)("div",{className:"col-span-1"})]}),c.items.map((e,t)=>(0,s.jsxs)("div",{className:"grid grid-cols-12 gap-2 items-center",children:[(0,s.jsx)("div",{className:"col-span-5",children:(0,s.jsx)("input",{type:"text",value:e.description,onChange:e=>j(t,"description",e.target.value),placeholder:"Item description",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent"})}),(0,s.jsx)("div",{className:"col-span-2",children:(0,s.jsx)("input",{type:"number",value:e.quantity,onChange:e=>j(t,"quantity",parseInt(e.target.value)||0),min:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm text-right focus:ring-2 focus:ring-green-500 focus:border-transparent"})}),(0,s.jsx)("div",{className:"col-span-2",children:(0,s.jsx)("input",{type:"number",value:e.unitPrice||"",onChange:e=>j(t,"unitPrice",parseFloat(e.target.value)||0),placeholder:"0.00",min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm text-right focus:ring-2 focus:ring-green-500 focus:border-transparent"})}),(0,s.jsxs)("div",{className:"col-span-2 text-right font-medium",children:["$",e.total.toFixed(2)]}),(0,s.jsx)("div",{className:"col-span-1 text-center",children:(0,s.jsx)("button",{type:"button",onClick:()=>(e=>{if(c.items.length>1){let s=c.items.filter((s,t)=>t!==e);d({...c,items:s})}})(t),disabled:1===c.items.length,className:"p-1 text-gray-400 hover:text-red-600 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,s.jsx)("i",{className:"fas fa-trash-alt"})})})]},e.id)),(0,s.jsxs)("button",{type:"button",onClick:()=>{d({...c,items:[...c.items,{id:Date.now().toString(),description:"",quantity:1,unitPrice:0,total:0}]})},className:"flex items-center gap-2 px-3 py-2 text-sm text-green-600 hover:bg-green-50 rounded-lg",children:[(0,s.jsx)("i",{className:"fas fa-plus"}),"Add Line Item"]})]}),(0,s.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsxs)("div",{className:"w-64 space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Subtotal"}),(0,s.jsxs)("span",{className:"font-medium",children:["$",p.toFixed(2)]})]}),h>0&&(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-500",children:"Discount"}),(0,s.jsxs)("span",{className:"text-red-600",children:["-$",h.toFixed(2)]})]}),b>0&&(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsxs)("span",{className:"text-gray-500",children:["Tax (",c.taxRate,"%)"]}),(0,s.jsxs)("span",{className:"font-medium",children:["$",b.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-lg font-bold pt-2 border-t border-gray-200",children:[(0,s.jsx)("span",{children:"Total"}),(0,s.jsxs)("span",{className:"text-green-600",children:["$",f.toFixed(2)]})]})]})})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,s.jsx)("i",{className:"fas fa-sticky-note mr-2 text-gray-400"}),"Notes (Optional)"]}),(0,s.jsx)("textarea",{value:c.notes,onChange:e=>d({...c,notes:e.target.value}),placeholder:"Add any notes or payment instructions...",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent resize-none"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,s.jsx)("button",{type:"button",onClick:n,disabled:i,className:"px-6 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:i,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors",children:i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("i",{className:"fas fa-spinner fa-spin"}),(0,s.jsx)("span",{children:"Saving..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("i",{className:"fas fa-check"}),(0,s.jsx)("span",{children:"Create Invoice"})]})})]})]})}function o({subAccountId:e,initialData:a,onSubmit:r,onCancel:l,isLoading:n}){let[i,c]=(0,t.useState)({name:a?.name||"",description:a?.description||"",type:a?.type||"digital",price:a?.price||0,compareAtPrice:a?.compareAtPrice,currency:a?.currency||"USD",sku:a?.sku||"",barcode:a?.barcode||"",trackInventory:a?.trackInventory||!1,inventory:a?.inventory||0,weight:a?.weight,weightUnit:a?.weightUnit||"kg",status:a?.status||"draft",taxable:a?.taxable!==!1,images:a?.images||[],variants:a?.variants||[]}),[d,o]=(0,t.useState)(i.variants&&i.variants.length>0),[x,m]=(0,t.useState)(""),u=()=>{c({...i,variants:[...i.variants||[],{name:"",price:void 0,inventory:void 0}]})},g=(e,s,t)=>{let a=[...i.variants||[]];a[e]={...a[e],[s]:t},c({...i,variants:a})},p=async e=>{(e.preventDefault(),i.name)?i.price<0?alert("Price cannot be negative"):await r(i):alert("Please enter a product name")};return(0,s.jsxs)("form",{onSubmit:p,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,s.jsx)("i",{className:"fas fa-box mr-2 text-gray-400"}),"Basic Information"]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Product Name *"}),(0,s.jsx)("input",{type:"text",value:i.name,onChange:e=>c({...i,name:e.target.value}),placeholder:"Enter product name",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Description"}),(0,s.jsx)("textarea",{value:i.description,onChange:e=>c({...i,description:e.target.value}),placeholder:"Describe your product...",rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent resize-none"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Product Type"}),(0,s.jsxs)("select",{value:i.type,onChange:e=>c({...i,type:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"physical",children:"Physical Product"}),(0,s.jsx)("option",{value:"digital",children:"Digital Product"}),(0,s.jsx)("option",{value:"service",children:"Service"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Status"}),(0,s.jsxs)("select",{value:i.status,onChange:e=>c({...i,status:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"draft",children:"Draft"}),(0,s.jsx)("option",{value:"active",children:"Active"}),(0,s.jsx)("option",{value:"archived",children:"Archived"})]})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,s.jsx)("i",{className:"fas fa-images mr-2 text-gray-400"}),"Images"]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"url",value:x,onChange:e=>m(e.target.value),placeholder:"Enter image URL",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"}),(0,s.jsx)("button",{type:"button",onClick:()=>{x&&!i.images.includes(x)&&(c({...i,images:[...i.images,x]}),m(""))},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:(0,s.jsx)("i",{className:"fas fa-plus"})})]}),i.images.length>0&&(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:i.images.map((e,t)=>(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)("img",{src:e,alt:`Product ${t+1}`,className:"w-20 h-20 object-cover rounded-lg border border-gray-200"}),(0,s.jsx)("button",{type:"button",onClick:()=>{let e;return e=i.images.filter((e,s)=>s!==t),void c({...i,images:e})},className:"absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white rounded-full text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:(0,s.jsx)("i",{className:"fas fa-times"})})]},t))})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,s.jsx)("i",{className:"fas fa-dollar-sign mr-2 text-gray-400"}),"Pricing"]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Price *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),(0,s.jsx)("input",{type:"number",value:i.price||"",onChange:e=>c({...i,price:parseFloat(e.target.value)||0}),placeholder:"0.00",min:"0",step:"0.01",className:"w-full pl-8 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Compare at Price"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),(0,s.jsx)("input",{type:"number",value:i.compareAtPrice||"",onChange:e=>c({...i,compareAtPrice:parseFloat(e.target.value)||void 0}),placeholder:"0.00",min:"0",step:"0.01",className:"w-full pl-8 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Currency"}),(0,s.jsxs)("select",{value:i.currency,onChange:e=>c({...i,currency:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"USD",children:"USD"}),(0,s.jsx)("option",{value:"EUR",children:"EUR"}),(0,s.jsx)("option",{value:"GBP",children:"GBP"}),(0,s.jsx)("option",{value:"CAD",children:"CAD"})]})]})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:i.taxable,onChange:e=>c({...i,taxable:e.target.checked}),className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Charge tax on this product"})]})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,s.jsx)("i",{className:"fas fa-warehouse mr-2 text-gray-400"}),"Inventory"]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"SKU"}),(0,s.jsx)("input",{type:"text",value:i.sku,onChange:e=>c({...i,sku:e.target.value}),placeholder:"Stock Keeping Unit",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Barcode"}),(0,s.jsx)("input",{type:"text",value:i.barcode,onChange:e=>c({...i,barcode:e.target.value}),placeholder:"ISBN, UPC, etc.",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]}),(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:i.trackInventory,onChange:e=>c({...i,trackInventory:e.target.checked}),className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Track quantity"})]}),i.trackInventory&&(0,s.jsxs)("div",{className:"w-48",children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Quantity"}),(0,s.jsx)("input",{type:"number",value:i.inventory||"",onChange:e=>c({...i,inventory:parseInt(e.target.value)||0}),placeholder:"0",min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]})]}),"physical"===i.type&&(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,s.jsx)("i",{className:"fas fa-shipping-fast mr-2 text-gray-400"}),"Shipping"]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Weight"}),(0,s.jsx)("input",{type:"number",value:i.weight||"",onChange:e=>c({...i,weight:parseFloat(e.target.value)||void 0}),placeholder:"0.0",min:"0",step:"0.01",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Weight Unit"}),(0,s.jsxs)("select",{value:i.weightUnit,onChange:e=>c({...i,weightUnit:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"kg",children:"Kilograms (kg)"}),(0,s.jsx)("option",{value:"lb",children:"Pounds (lb)"}),(0,s.jsx)("option",{value:"oz",children:"Ounces (oz)"}),(0,s.jsx)("option",{value:"g",children:"Grams (g)"})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("h3",{className:"text-sm font-medium text-gray-900",children:[(0,s.jsx)("i",{className:"fas fa-layer-group mr-2 text-gray-400"}),"Variants"]}),!d&&(0,s.jsx)("button",{type:"button",onClick:()=>{o(!0),i.variants?.length||u()},className:"text-sm text-green-600 hover:text-green-700",children:"+ Add Variants"})]}),d&&(0,s.jsxs)("div",{className:"space-y-3",children:[i.variants?.map((e,t)=>(0,s.jsxs)("div",{className:"flex gap-3 items-start p-3 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex-1 grid grid-cols-3 gap-3",children:[(0,s.jsx)("input",{type:"text",value:e.name,onChange:e=>g(t,"name",e.target.value),placeholder:"Variant name (e.g., Size: Large)",className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"}),(0,s.jsx)("input",{type:"text",value:e.sku||"",onChange:e=>g(t,"sku",e.target.value),placeholder:"SKU",className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"}),(0,s.jsx)("input",{type:"number",value:e.price??"",onChange:e=>g(t,"price",parseFloat(e.target.value)||void 0),placeholder:"Price (optional)",className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),(0,s.jsx)("button",{type:"button",onClick:()=>{let e;return e=(i.variants||[]).filter((e,s)=>s!==t),void(c({...i,variants:e}),0===e.length&&o(!1))},className:"p-2 text-gray-400 hover:text-red-600",children:(0,s.jsx)("i",{className:"fas fa-trash-alt"})})]},t)),(0,s.jsxs)("button",{type:"button",onClick:u,className:"flex items-center gap-2 px-3 py-2 text-sm text-green-600 hover:bg-green-50 rounded-lg",children:[(0,s.jsx)("i",{className:"fas fa-plus"}),"Add Another Variant"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,s.jsx)("button",{type:"button",onClick:l,disabled:n,className:"px-6 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:n,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors",children:n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("i",{className:"fas fa-spinner fa-spin"}),(0,s.jsx)("span",{children:"Saving..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("i",{className:"fas fa-check"}),(0,s.jsx)("span",{children:a?"Update Product":"Create Product"})]})})]})]})}function x({subAccountId:e,initialData:a,contacts:r=[],onSubmit:l,onCancel:n,isLoading:i}){let[c,d]=(0,t.useState)({title:a?.title||"",description:a?.description||"",documentType:a?.documentType||"contract",content:a?.content||"",requiresSignature:a?.requiresSignature!==!1,allowDecline:a?.allowDecline!==!1,expiresAt:a?.expiresAt||"",signers:a?.signers||[],fields:a?.fields||[],attachments:a?.attachments||[]}),[o,x]=(0,t.useState)(""),[m,u]=(0,t.useState)(!1),[g,p]=(0,t.useState)("details"),h=r.filter(e=>`${e.firstName} ${e.lastName}`.toLowerCase().includes(o.toLowerCase())||e.email.toLowerCase().includes(o.toLowerCase())),y=e=>{let s={id:Date.now().toString(),name:e?`${e.firstName} ${e.lastName}`:"",email:e?.email||"",role:"signer",signingOrder:c.signers.length+1,requirePin:!1,requireIdVerification:!1,idVerificationMethods:[]};d({...c,signers:[...c.signers,s]}),x(""),u(!1)},b=(e,s,t)=>{let a=[...c.signers];a[e]={...a[e],[s]:t},d({...c,signers:a})},f=(e,s)=>{let t="up"===s?e-1:e+1;if(t<0||t>=c.signers.length)return;let a=[...c.signers],r=a[e];a[e]=a[t],a[t]=r,a.forEach((e,s)=>e.signingOrder=s+1),d({...c,signers:a})},j=(e,s,t)=>{let a=[...c.fields];a[e]={...a[e],[s]:t},d({...c,fields:a})},N=async e=>{(e.preventDefault(),c.title)?c.requiresSignature&&0===c.signers.length?alert("Please add at least one signer"):await l(c):alert("Please enter a document title")},v=[{type:"signature",label:"Signature",icon:"fa-signature"},{type:"initials",label:"Initials",icon:"fa-font"},{type:"date",label:"Date",icon:"fa-calendar"},{type:"text",label:"Text",icon:"fa-font"},{type:"checkbox",label:"Checkbox",icon:"fa-check-square"},{type:"dropdown",label:"Dropdown",icon:"fa-caret-down"}],w=[{value:"email_otp",label:"Email OTP"},{value:"sms_otp",label:"SMS OTP"},{value:"id_document",label:"ID Document Upload"},{value:"selfie",label:"Selfie Verification"},{value:"kba",label:"Knowledge-Based Authentication"}];return(0,s.jsxs)("form",{onSubmit:N,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex gap-2 border-b border-gray-200 pb-2",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>p("details"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${"details"===g?"bg-green-100 text-green-700":"text-gray-600 hover:bg-gray-100"}`,children:[(0,s.jsx)("i",{className:"fas fa-info-circle mr-2"}),"Details"]}),(0,s.jsxs)("button",{type:"button",onClick:()=>p("signers"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${"signers"===g?"bg-green-100 text-green-700":"text-gray-600 hover:bg-gray-100"}`,children:[(0,s.jsx)("i",{className:"fas fa-users mr-2"}),"Signers (",c.signers.length,")"]}),(0,s.jsxs)("button",{type:"button",onClick:()=>p("content"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${"content"===g?"bg-green-100 text-green-700":"text-gray-600 hover:bg-gray-100"}`,children:[(0,s.jsx)("i",{className:"fas fa-file-alt mr-2"}),"Content"]})]}),"details"===g&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,s.jsx)("i",{className:"fas fa-file-signature mr-2 text-gray-400"}),"Document Information"]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Document Title *"}),(0,s.jsx)("input",{type:"text",value:c.title,onChange:e=>d({...c,title:e.target.value}),placeholder:"Enter document title",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Description"}),(0,s.jsx)("textarea",{value:c.description,onChange:e=>d({...c,description:e.target.value}),placeholder:"Add a description (optional)",rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent resize-none"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"Document Type"}),(0,s.jsx)("div",{className:"grid grid-cols-5 gap-2",children:[{value:"contract",label:"Contract",icon:"fa-file-contract"},{value:"agreement",label:"Agreement",icon:"fa-handshake"},{value:"nda",label:"NDA",icon:"fa-user-secret"},{value:"proposal",label:"Proposal",icon:"fa-file-invoice"},{value:"other",label:"Other",icon:"fa-file"}].map(e=>(0,s.jsxs)("button",{type:"button",onClick:()=>d({...c,documentType:e.value}),className:`flex flex-col items-center gap-2 p-3 rounded-lg border transition-colors ${c.documentType===e.value?"border-green-500 bg-green-50 text-green-700":"border-gray-200 hover:border-gray-300"}`,children:[(0,s.jsx)("i",{className:`fas ${e.icon} text-lg`}),(0,s.jsx)("span",{className:"text-xs font-medium",children:e.label})]},e.value))})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,s.jsx)("i",{className:"fas fa-cog mr-2 text-gray-400"}),"Signature Settings"]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[(0,s.jsx)("input",{type:"checkbox",checked:c.requiresSignature,onChange:e=>d({...c,requiresSignature:e.target.checked}),className:"w-5 h-5 text-green-600 border-gray-300 rounded focus:ring-green-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Requires Signature"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Recipients must sign this document electronically"})]})]}),(0,s.jsxs)("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[(0,s.jsx)("input",{type:"checkbox",checked:c.allowDecline,onChange:e=>d({...c,allowDecline:e.target.checked}),className:"w-5 h-5 text-green-600 border-gray-300 rounded focus:ring-green-500"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Allow Decline"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Recipients can decline to sign the document"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Expiration Date (Optional)"}),(0,s.jsx)("input",{type:"date",value:c.expiresAt?.split("T")[0]||"",onChange:e=>d({...c,expiresAt:e.target.value?new Date(e.target.value).toISOString():""}),className:"w-64 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]})]})]}),"signers"===g&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,s.jsx)("i",{className:"fas fa-user-plus mr-2 text-gray-400"}),"Add Signers"]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:o,onChange:e=>{x(e.target.value),u(!0)},onFocus:()=>u(!0),placeholder:"Search contacts or enter email...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"}),(0,s.jsxs)("button",{type:"button",onClick:()=>y(),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[(0,s.jsx)("i",{className:"fas fa-plus mr-2"}),"Add Signer"]})]}),m&&h.length>0&&(0,s.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:h.map(e=>(0,s.jsxs)("button",{type:"button",onClick:()=>y(e),className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center justify-between",children:[(0,s.jsxs)("span",{className:"font-medium",children:[e.firstName," ",e.lastName]}),(0,s.jsx)("span",{className:"text-sm text-gray-500",children:e.email})]},e.id))})]})]}),c.signers.length>0&&(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,s.jsx)("i",{className:"fas fa-list-ol mr-2 text-gray-400"}),"Signing Order"]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mb-4",children:"Drag to reorder or use arrows. Signers will be notified in this order."}),(0,s.jsx)("div",{className:"space-y-3",children:c.signers.map((e,t)=>(0,s.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("button",{type:"button",onClick:()=>f(t,"up"),disabled:0===t,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30",children:(0,s.jsx)("i",{className:"fas fa-chevron-up"})}),(0,s.jsx)("span",{className:"w-6 h-6 flex items-center justify-center bg-green-100 text-green-700 rounded-full text-xs font-bold",children:t+1}),(0,s.jsx)("button",{type:"button",onClick:()=>f(t,"down"),disabled:t===c.signers.length-1,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30",children:(0,s.jsx)("i",{className:"fas fa-chevron-down"})})]}),(0,s.jsxs)("div",{className:"flex-1 grid grid-cols-3 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Name"}),(0,s.jsx)("input",{type:"text",value:e.name,onChange:e=>b(t,"name",e.target.value),placeholder:"Full name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Email"}),(0,s.jsx)("input",{type:"email",value:e.email,onChange:e=>b(t,"email",e.target.value),placeholder:"email@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Role"}),(0,s.jsxs)("select",{value:e.role,onChange:e=>b(t,"role",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"signer",children:"Signer"}),(0,s.jsx)("option",{value:"approver",children:"Approver"}),(0,s.jsx)("option",{value:"viewer",children:"Viewer"})]})]})]}),(0,s.jsx)("button",{type:"button",onClick:()=>{let e;(e=c.signers.filter((e,s)=>s!==t)).forEach((e,s)=>e.signingOrder=s+1),d({...c,signers:e})},className:"p-2 text-gray-400 hover:text-red-600",children:(0,s.jsx)("i",{className:"fas fa-trash-alt"})})]}),(0,s.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,s.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,s.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)("input",{type:"checkbox",checked:e.requirePin,onChange:e=>b(t,"requirePin",e.target.checked),className:"w-4 h-4 text-green-600 border-gray-300 rounded"}),(0,s.jsx)("span",{children:"Require PIN"})]}),(0,s.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)("input",{type:"checkbox",checked:e.requireIdVerification,onChange:e=>b(t,"requireIdVerification",e.target.checked),className:"w-4 h-4 text-green-600 border-gray-300 rounded"}),(0,s.jsx)("span",{children:"Require ID Verification"})]})]}),e.requireIdVerification&&(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)("label",{className:"block text-xs text-gray-500 mb-2",children:"Verification Methods"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:w.map(a=>(0,s.jsxs)("label",{className:"flex items-center gap-2 px-3 py-1 bg-white border border-gray-200 rounded-full text-xs cursor-pointer hover:border-green-500",children:[(0,s.jsx)("input",{type:"checkbox",checked:e.idVerificationMethods?.includes(a.value),onChange:s=>{let r=e.idVerificationMethods||[];s.target.checked?b(t,"idVerificationMethods",[...r,a.value]):b(t,"idVerificationMethods",r.filter(e=>e!==a.value))},className:"w-3 h-3 text-green-600 border-gray-300 rounded"}),a.label]},a.value))})]})]})]},e.id))})]}),0===c.signers.length&&(0,s.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg border border-dashed border-gray-300",children:[(0,s.jsx)("i",{className:"fas fa-users text-4xl text-gray-300 mb-3"}),(0,s.jsx)("p",{className:"text-gray-500",children:"No signers added yet"}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"Add signers who need to sign this document"})]})]}),"content"===g&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,s.jsx)("i",{className:"fas fa-edit mr-2 text-gray-400"}),"Document Content"]}),(0,s.jsx)("textarea",{value:c.content,onChange:e=>d({...c,content:e.target.value}),placeholder:"Enter your document content here... You can use HTML for formatting.",rows:15,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent font-mono text-sm resize-none"}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:[(0,s.jsx)("i",{className:"fas fa-info-circle mr-1"}),"Tip: You can use HTML tags for formatting. Signature fields will be added in the document editor."]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,s.jsx)("i",{className:"fas fa-signature mr-2 text-gray-400"}),"Signature Fields"]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:v.map(e=>(0,s.jsxs)("button",{type:"button",onClick:()=>{var s;let t;return s=e.type,t={id:Date.now().toString(),type:s,required:!0,pageNumber:1,positionX:100,positionY:100,width:"signature"===s?200:"initials"===s?100:150,height:"signature"===s?60:"checkbox"===s?24:40},void d({...c,fields:[...c.fields,t]})},className:"flex items-center gap-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm transition-colors",children:[(0,s.jsx)("i",{className:`fas ${e.icon} text-gray-500`}),e.label]},e.type))}),c.fields.length>0&&(0,s.jsx)("div",{className:"space-y-2",children:c.fields.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[(0,s.jsx)("i",{className:`fas ${v.find(s=>s.type===e.type)?.icon} text-gray-400`}),(0,s.jsx)("span",{className:"text-sm font-medium capitalize",children:e.type}),(0,s.jsxs)("select",{value:e.signerId||"",onChange:e=>j(t,"signerId",e.target.value||void 0),className:"px-2 py-1 border border-gray-300 rounded text-sm",children:[(0,s.jsx)("option",{value:"",children:"Any Signer"}),c.signers.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name||e.email},e.id))]}),(0,s.jsxs)("label",{className:"flex items-center gap-1 text-sm",children:[(0,s.jsx)("input",{type:"checkbox",checked:e.required,onChange:e=>j(t,"required",e.target.checked),className:"w-4 h-4 text-green-600 border-gray-300 rounded"}),"Required"]}),("text"===e.type||"dropdown"===e.type)&&(0,s.jsx)("input",{type:"text",value:e.label||"",onChange:e=>j(t,"label",e.target.value),placeholder:"Label",className:"px-2 py-1 border border-gray-300 rounded text-sm"}),(0,s.jsx)("button",{type:"button",onClick:()=>{let e;return e=c.fields.filter((e,s)=>s!==t),void d({...c,fields:e})},className:"ml-auto p-1 text-gray-400 hover:text-red-600",children:(0,s.jsx)("i",{className:"fas fa-times"})})]},e.id))}),0===c.fields.length&&(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Click the buttons above to add signature fields to your document."})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200",children:[(0,s.jsx)("button",{type:"button",onClick:n,disabled:i,className:"px-6 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:i,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors",children:i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("i",{className:"fas fa-spinner fa-spin"}),(0,s.jsx)("span",{children:"Saving..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("i",{className:"fas fa-check"}),(0,s.jsx)("span",{children:a?"Update Document":"Create Document"})]})})]})]})}function m({subAccountId:e,initialData:a,onSubmit:r,onCancel:l,isLoading:n}){let[i,c]=(0,t.useState)({name:a?.name||"",amount:a?.amount||0,currency:a?.currency||"USD",description:a?.description||"",usageLimit:a?.usageLimit,expiresAt:a?.expiresAt||"",redirectUrl:a?.redirectUrl||"",collectShipping:a?.collectShipping||!1,allowTip:a?.allowTip||!1}),d=async e=>{(e.preventDefault(),!i.name||i.amount<=0)?alert("Please enter a name and valid amount"):await r(i)};return(0,s.jsxs)("form",{onSubmit:d,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,s.jsx)("i",{className:"fas fa-link mr-2 text-gray-400"}),"Payment Link Details"]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Name *"}),(0,s.jsx)("input",{type:"text",value:i.name,onChange:e=>c({...i,name:e.target.value}),placeholder:"e.g., Consultation Booking",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Amount *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),(0,s.jsx)("input",{type:"number",value:i.amount||"",onChange:e=>c({...i,amount:parseFloat(e.target.value)||0}),placeholder:"0.00",min:"0",step:"0.01",className:"w-full pl-8 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Currency"}),(0,s.jsxs)("select",{value:i.currency,onChange:e=>c({...i,currency:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"USD",children:"USD - US Dollar"}),(0,s.jsx)("option",{value:"EUR",children:"EUR - Euro"}),(0,s.jsx)("option",{value:"GBP",children:"GBP - British Pound"}),(0,s.jsx)("option",{value:"CAD",children:"CAD - Canadian Dollar"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Description (Optional)"}),(0,s.jsx)("textarea",{value:i.description,onChange:e=>c({...i,description:e.target.value}),placeholder:"What is this payment for?",rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent resize-none"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,s.jsx)("i",{className:"fas fa-clock mr-2 text-gray-400"}),"Limits & Expiry"]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Usage Limit"}),(0,s.jsx)("input",{type:"number",value:i.usageLimit||"",onChange:e=>c({...i,usageLimit:parseInt(e.target.value)||void 0}),placeholder:"Unlimited",min:"1",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty for unlimited uses"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Expiry Date"}),(0,s.jsx)("input",{type:"date",value:i.expiresAt?i.expiresAt.split("T")[0]:"",onChange:e=>c({...i,expiresAt:e.target.value?new Date(e.target.value).toISOString():""}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty for no expiry"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,s.jsx)("i",{className:"fas fa-cog mr-2 text-gray-400"}),"Options"]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Redirect URL (Optional)"}),(0,s.jsx)("input",{type:"url",value:i.redirectUrl,onChange:e=>c({...i,redirectUrl:e.target.value}),placeholder:"https://example.com/thank-you",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Redirect customers after payment"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Collect Shipping Address"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Ask customers for their shipping address"})]}),(0,s.jsx)("button",{type:"button",onClick:()=>c({...i,collectShipping:!i.collectShipping}),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors ${i.collectShipping?"bg-green-600":"bg-gray-200"}`,children:(0,s.jsx)("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow transition ${i.collectShipping?"translate-x-5":"translate-x-0"}`})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Allow Tip"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Let customers add a tip to their payment"})]}),(0,s.jsx)("button",{type:"button",onClick:()=>c({...i,allowTip:!i.allowTip}),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors ${i.allowTip?"bg-green-600":"bg-gray-200"}`,children:(0,s.jsx)("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow transition ${i.allowTip?"translate-x-5":"translate-x-0"}`})})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,s.jsx)("button",{type:"button",onClick:l,disabled:n,className:"px-6 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:n,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors",children:n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("i",{className:"fas fa-spinner fa-spin"}),(0,s.jsx)("span",{children:"Creating..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("i",{className:"fas fa-check"}),(0,s.jsx)("span",{children:"Create Payment Link"})]})})]})]})}function u({subAccountId:e,initialData:a,products:r=[],collections:l=[],onSubmit:n,onCancel:i,isLoading:c}){let[d,o]=(0,t.useState)({code:a?.code||"",discountType:a?.discountType||"percentage",discountValue:a?.discountValue||0,currency:a?.currency||"USD",usageLimit:a?.usageLimit,validFrom:a?.validFrom,validUntil:a?.validUntil,minimumAmount:a?.minimumAmount,applyTo:a?.applyTo||"all",productIds:a?.productIds||[],collectionIds:a?.collectionIds||[]}),x=async e=>{(e.preventDefault(),!d.code||d.discountValue<=0)?alert("Please enter a coupon code and valid discount value"):"percentage"===d.discountType&&d.discountValue>100?alert("Percentage discount cannot exceed 100%"):await n(d)};return(0,s.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,s.jsx)("i",{className:"fas fa-ticket-alt mr-2 text-gray-400"}),"Coupon Code"]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)("input",{type:"text",value:d.code,onChange:e=>o({...d,code:e.target.value.toUpperCase()}),placeholder:"e.g., SUMMER20",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent font-mono uppercase",required:!0})}),(0,s.jsxs)("button",{type:"button",onClick:()=>{let e="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",s="";for(let t=0;t<8;t++)s+=e.charAt(Math.floor(Math.random()*e.length));o({...d,code:s})},className:"px-4 py-2 text-green-600 hover:bg-green-50 rounded-lg border border-green-300",children:[(0,s.jsx)("i",{className:"fas fa-random mr-2"}),"Generate"]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,s.jsx)("i",{className:"fas fa-percent mr-2 text-gray-400"}),"Discount Details"]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"Discount Type"}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"radio",checked:"percentage"===d.discountType,onChange:()=>o({...d,discountType:"percentage"}),className:"text-green-600"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Percentage"})]}),(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"radio",checked:"fixed_amount"===d.discountType,onChange:()=>o({...d,discountType:"fixed_amount"}),className:"text-green-600"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Fixed Amount"})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Discount Value *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",children:"percentage"===d.discountType?"%":"$"}),(0,s.jsx)("input",{type:"number",value:d.discountValue||"",onChange:e=>o({...d,discountValue:parseFloat(e.target.value)||0}),placeholder:"0",min:"0",max:"percentage"===d.discountType?100:void 0,step:"percentage"===d.discountType?1:.01,className:"w-full pl-8 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]})]}),"fixed_amount"===d.discountType&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Currency"}),(0,s.jsxs)("select",{value:d.currency,onChange:e=>o({...d,currency:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"USD",children:"USD - US Dollar"}),(0,s.jsx)("option",{value:"EUR",children:"EUR - Euro"}),(0,s.jsx)("option",{value:"GBP",children:"GBP - British Pound"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Minimum Purchase Amount"}),(0,s.jsxs)("div",{className:"relative w-1/2",children:[(0,s.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),(0,s.jsx)("input",{type:"number",value:d.minimumAmount||"",onChange:e=>o({...d,minimumAmount:parseFloat(e.target.value)||void 0}),placeholder:"No minimum",min:"0",step:"0.01",className:"w-full pl-8 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,s.jsx)("i",{className:"fas fa-chart-bar mr-2 text-gray-400"}),"Usage Limits"]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Total Usage Limit"}),(0,s.jsx)("input",{type:"number",value:d.usageLimit||"",onChange:e=>o({...d,usageLimit:parseInt(e.target.value)||void 0}),placeholder:"Unlimited",min:"1",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Valid From"}),(0,s.jsx)("input",{type:"date",value:d.validFrom?d.validFrom.split("T")[0]:"",onChange:e=>o({...d,validFrom:e.target.value?new Date(e.target.value).toISOString():void 0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Valid Until"}),(0,s.jsx)("input",{type:"date",value:d.validUntil?d.validUntil.split("T")[0]:"",onChange:e=>o({...d,validUntil:e.target.value?new Date(e.target.value).toISOString():void 0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,s.jsx)("i",{className:"fas fa-bullseye mr-2 text-gray-400"}),"Apply To"]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"radio",checked:"all"===d.applyTo,onChange:()=>o({...d,applyTo:"all",productIds:[],collectionIds:[]}),className:"text-green-600"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"All products"})]}),(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"radio",checked:"specific_products"===d.applyTo,onChange:()=>o({...d,applyTo:"specific_products",collectionIds:[]}),className:"text-green-600"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Specific products"})]}),(0,s.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,s.jsx)("input",{type:"radio",checked:"specific_collections"===d.applyTo,onChange:()=>o({...d,applyTo:"specific_collections",productIds:[]}),className:"text-green-600"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Specific collections"})]})]}),"specific_products"===d.applyTo&&r.length>0&&(0,s.jsxs)("div",{className:"mt-4 border-t border-gray-200 pt-4",children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"Select Products"}),(0,s.jsx)("div",{className:"max-h-40 overflow-y-auto border border-gray-200 rounded-lg p-2 space-y-1",children:r.map(e=>(0,s.jsxs)("label",{className:"flex items-center gap-2 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:d.productIds?.includes(e.id),onChange:s=>{s.target.checked?o({...d,productIds:[...d.productIds||[],e.id]}):o({...d,productIds:d.productIds?.filter(s=>s!==e.id)})},className:"rounded text-green-600"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:e.name})]},e.id))})]}),"specific_collections"===d.applyTo&&l.length>0&&(0,s.jsxs)("div",{className:"mt-4 border-t border-gray-200 pt-4",children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"Select Collections"}),(0,s.jsx)("div",{className:"max-h-40 overflow-y-auto border border-gray-200 rounded-lg p-2 space-y-1",children:l.map(e=>(0,s.jsxs)("label",{className:"flex items-center gap-2 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[(0,s.jsx)("input",{type:"checkbox",checked:d.collectionIds?.includes(e.id),onChange:s=>{s.target.checked?o({...d,collectionIds:[...d.collectionIds||[],e.id]}):o({...d,collectionIds:d.collectionIds?.filter(s=>s!==e.id)})},className:"rounded text-green-600"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:e.name})]},e.id))})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,s.jsx)("button",{type:"button",onClick:i,disabled:c,className:"px-6 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:c,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors",children:c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("i",{className:"fas fa-spinner fa-spin"}),(0,s.jsx)("span",{children:"Creating..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("i",{className:"fas fa-check"}),(0,s.jsx)("span",{children:"Create Coupon"})]})})]})]})}let g=[{type:"signature",label:"Signature",icon:"fa-signature"},{type:"initials",label:"Initials",icon:"fa-font"},{type:"date",label:"Date",icon:"fa-calendar"},{type:"text",label:"Text Field",icon:"fa-i-cursor"},{type:"checkbox",label:"Checkbox",icon:"fa-check-square"}],p=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"];function h({documentUrl:e,documentContent:a,fields:r,signers:l,onFieldsChange:n,onSignersChange:i,mode:c="edit",currentSignerId:d}){let o,[x,m]=(0,t.useState)(null),[u,h]=(0,t.useState)(l[0]?.id||null),[y,b]=(0,t.useState)(null),[f,j]=(0,t.useState)(!1),[N,v]=(0,t.useState)({x:0,y:0}),[w,C]=(0,t.useState)(1),[S]=(0,t.useState)(1),[k,P]=(0,t.useState)(100),A=(0,t.useRef)(null),[D,T]=(0,t.useState)(!1),[I,$]=(0,t.useState)(""),[F,U]=(0,t.useState)(""),E=(0,t.useCallback)(e=>{if(!x||!u||"edit"!==c)return;let s=A.current?.getBoundingClientRect();if(!s)return;let t=(e.clientX-s.left)/s.width*100,a=(e.clientY-s.top)/s.height*100,l={signature:{width:20,height:8},initials:{width:10,height:6},date:{width:15,height:4},text:{width:20,height:4},checkbox:{width:3,height:3}}[x]||{width:15,height:5},i={id:`field-${Date.now()}`,type:x,x:Math.max(0,Math.min(t-l.width/2,100-l.width)),y:Math.max(0,Math.min(a-l.height/2,100-l.height)),width:l.width,height:l.height,page:w,signerId:u,required:!0};n([...r,i]),b(i.id),m(null)},[x,u,c,w,r,n]),R=(0,t.useCallback)(e=>{if(!f||!y||"edit"!==c)return;let s=A.current?.getBoundingClientRect();if(!s)return;let t=(e.clientX-s.left-N.x)/s.width*100,a=(e.clientY-s.top-N.y)/s.height*100,l=r.find(e=>e.id===y);if(!l)return;let i=Math.max(0,Math.min(t,100-l.width)),d=Math.max(0,Math.min(a,100-l.height));n(r.map(e=>e.id===y?{...e,x:i,y:d}:e))},[f,y,c,N,r,n]),O=()=>{j(!1)},L=e=>e&&l.find(s=>s.id===e)?.color||"#9CA3AF",q=e=>e?l.find(s=>s.id===e)?.name||"Unknown":"Unassigned";return(0,s.jsxs)("div",{className:"flex h-[calc(100vh-200px)] min-h-[600px] bg-gray-100 rounded-lg overflow-hidden",children:["edit"===c&&(0,s.jsxs)("div",{className:"w-64 bg-white border-r border-gray-200 flex flex-col",children:[(0,s.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,s.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:[(0,s.jsx)("i",{className:"fas fa-users mr-2 text-gray-400"}),"Signers"]}),(0,s.jsx)("div",{className:"space-y-2",children:l.map(e=>(0,s.jsxs)("div",{onClick:()=>h(e.id),className:`flex items-center justify-between p-2 rounded-lg cursor-pointer transition-colors ${u===e.id?"bg-gray-100":"hover:bg-gray-50"}`,children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:e.email})]})]}),(0,s.jsx)("button",{onClick:s=>{var t;s.stopPropagation(),t=e.id,i(l.filter(e=>e.id!==t)),n(r.filter(e=>e.signerId!==t)),u===t&&h(l.find(e=>e.id!==t)?.id||null)},className:"p-1 text-gray-400 hover:text-red-600",children:(0,s.jsx)("i",{className:"fas fa-times text-xs"})})]},e.id))}),D?(0,s.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,s.jsx)("input",{type:"text",placeholder:"Name",value:I,onChange:e=>$(e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"}),(0,s.jsx)("input",{type:"email",placeholder:"Email",value:F,onChange:e=>U(e.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>{if(!I||!F)return;let e={id:`signer-${Date.now()}`,name:I,email:F,color:p[l.length%p.length]};i([...l,e]),$(""),U(""),T(!1),h(e.id)},className:"flex-1 px-3 py-1 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Add"}),(0,s.jsx)("button",{onClick:()=>T(!1),className:"px-3 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded-lg",children:"Cancel"})]})]}):(0,s.jsxs)("button",{onClick:()=>T(!0),className:"mt-3 w-full flex items-center justify-center gap-2 px-3 py-2 text-sm text-green-600 hover:bg-green-50 rounded-lg border border-dashed border-green-300",children:[(0,s.jsx)("i",{className:"fas fa-plus"}),"Add Signer"]})]}),(0,s.jsxs)("div",{className:"p-4 flex-1 overflow-y-auto",children:[(0,s.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:[(0,s.jsx)("i",{className:"fas fa-edit mr-2 text-gray-400"}),"Add Fields"]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"Click a field type, then click on the document to place it"}),(0,s.jsx)("div",{className:"space-y-2",children:g.map(e=>(0,s.jsxs)("button",{onClick:()=>m(x===e.type?null:e.type),className:`w-full flex items-center gap-3 px-3 py-2 text-sm rounded-lg transition-colors ${x===e.type?"bg-green-100 text-green-700 border border-green-300":"text-gray-700 hover:bg-gray-100 border border-transparent"}`,children:[(0,s.jsx)("i",{className:`fas ${e.icon} w-5 text-center`}),e.label]},e.type))})]}),y&&(0,s.jsxs)("div",{className:"p-4 border-t border-gray-200",children:[(0,s.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:[(0,s.jsx)("i",{className:"fas fa-cog mr-2 text-gray-400"}),"Field Properties"]}),(o=r.find(e=>e.id===y))?(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Assigned To"}),(0,s.jsx)("select",{value:o.signerId||"",onChange:e=>{n(r.map(s=>s.id===y?{...s,signerId:e.target.value}:s))},className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg",children:l.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",id:"field-required",checked:o.required,onChange:e=>{n(r.map(s=>s.id===y?{...s,required:e.target.checked}:s))},className:"rounded text-green-600"}),(0,s.jsx)("label",{htmlFor:"field-required",className:"text-sm text-gray-700",children:"Required"})]}),(0,s.jsxs)("button",{onClick:()=>{n(r.filter(e=>e.id!==y)),b(null)},className:"w-full px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg border border-red-200",children:[(0,s.jsx)("i",{className:"fas fa-trash mr-2"}),"Delete Field"]})]}):null]})]}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 bg-white border-b border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>C(Math.max(1,w-1)),disabled:1===w,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg disabled:opacity-50",children:(0,s.jsx)("i",{className:"fas fa-chevron-left"})}),(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:["Page ",w," of ",S]}),(0,s.jsx)("button",{onClick:()=>C(Math.min(S,w+1)),disabled:w===S,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg disabled:opacity-50",children:(0,s.jsx)("i",{className:"fas fa-chevron-right"})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>P(Math.max(50,k-10)),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:(0,s.jsx)("i",{className:"fas fa-search-minus"})}),(0,s.jsxs)("span",{className:"text-sm text-gray-600 w-12 text-center",children:[k,"%"]}),(0,s.jsx)("button",{onClick:()=>P(Math.min(200,k+10)),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:(0,s.jsx)("i",{className:"fas fa-search-plus"})})]})]}),(0,s.jsx)("div",{className:"flex-1 overflow-auto p-8 flex justify-center",children:(0,s.jsxs)("div",{ref:A,onClick:x?E:void 0,onMouseMove:f?R:void 0,onMouseUp:f?O:void 0,onMouseLeave:f?O:void 0,className:`relative bg-white shadow-lg ${x?"cursor-crosshair":""}`,style:{width:`${8.5*k}px`,height:`${11*k}px`,minHeight:"600px"},children:[e?(0,s.jsx)("img",{src:e,alt:"Document",className:"w-full h-full object-contain",draggable:!1}):a?(0,s.jsx)("div",{className:"w-full h-full p-8 prose max-w-none",dangerouslySetInnerHTML:{__html:a}}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center text-gray-400",children:[(0,s.jsx)("i",{className:"fas fa-file-alt text-6xl mb-4"}),(0,s.jsx)("p",{children:"No document loaded"}),(0,s.jsx)("p",{className:"text-sm",children:"Upload a document or create content"})]})}),r.filter(e=>e.page===w).map(e=>{let t=y===e.id,a=L(e.signerId),r="sign"===c&&e.signerId===d;return(0,s.jsxs)("div",{onClick:s=>{s.stopPropagation(),b(e.id)},onMouseDown:s=>((e,s)=>{if("edit"!==c)return;e.stopPropagation();let t=A.current?.getBoundingClientRect();if(!t)return;let a=s.x/100*t.width,r=s.y/100*t.height;v({x:e.clientX-t.left-a,y:e.clientY-t.top-r}),j(!0),b(s.id)})(s,e),className:`absolute border-2 rounded transition-all ${t?"ring-2 ring-blue-400":""} ${"edit"===c?"cursor-move":""} ${r?"cursor-pointer hover:opacity-80":""}`,style:{left:`${e.x}%`,top:`${e.y}%`,width:`${e.width}%`,height:`${e.height}%`,borderColor:a,backgroundColor:`${a}15`},children:[(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center text-xs",style:{color:a},children:e.value?"signature"===e.type||"initials"===e.type?(0,s.jsx)("img",{src:e.value,alt:"Signature",className:"max-w-full max-h-full"}):(0,s.jsx)("span",{children:e.value}):(0,s.jsxs)("span",{className:"opacity-60",children:["signature"===e.type&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("i",{className:"fas fa-signature mr-1"}),"Sign"]}),"initials"===e.type&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("i",{className:"fas fa-font mr-1"}),"Initials"]}),"date"===e.type&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("i",{className:"fas fa-calendar mr-1"}),"Date"]}),"text"===e.type&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("i",{className:"fas fa-i-cursor mr-1"}),"Text"]}),"checkbox"===e.type&&(0,s.jsx)("i",{className:"fas fa-square"})]})}),"edit"===c&&(0,s.jsx)("div",{className:"absolute -top-5 left-0 text-xs px-1 rounded-t whitespace-nowrap",style:{backgroundColor:a,color:"white"},children:q(e.signerId)})]},e.id)})]})})]}),"edit"===c&&r.length>0&&(0,s.jsxs)("div",{className:"w-64 bg-white border-l border-gray-200 p-4 overflow-y-auto",children:[(0,s.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:[(0,s.jsx)("i",{className:"fas fa-list mr-2 text-gray-400"}),"Fields (",r.length,")"]}),(0,s.jsx)("div",{className:"space-y-2",children:r.map((e,t)=>(0,s.jsxs)("div",{onClick:()=>b(e.id),className:`p-2 rounded-lg cursor-pointer transition-colors ${y===e.id?"bg-gray-100":"hover:bg-gray-50"}`,children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:L(e.signerId)}}),(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-900 capitalize",children:[e.type," ",t+1]})]}),e.required&&(0,s.jsx)("span",{className:"text-xs text-red-500",children:"Required"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:q(e.signerId)})]},e.id))})]})]})}let y=[{id:"invoices",label:"Invoices & Estimates",icon:"fa-file-invoice-dollar",href:"/sub-account/revenue-engine"},{id:"documents",label:"Documents & Contracts",icon:"fa-file-signature",href:"/sub-account/revenue-engine?tab=documents"},{id:"orders",label:"Orders",icon:"fa-shopping-cart",href:"/sub-account/revenue-engine?tab=orders"},{id:"subscriptions",label:"Subscriptions",icon:"fa-sync-alt",href:"/sub-account/revenue-engine?tab=subscriptions"},{id:"payment-links",label:"Payment Links",icon:"fa-link",href:"/sub-account/revenue-engine?tab=payment-links"},{id:"transactions",label:"Transactions",icon:"fa-exchange-alt",href:"/sub-account/revenue-engine?tab=transactions"},{id:"products",label:"Products",icon:"fa-box",href:"/sub-account/revenue-engine?tab=products"},{id:"coupons",label:"Coupons",icon:"fa-tags",href:"/sub-account/revenue-engine?tab=coupons"},{id:"settings",label:"Settings",icon:"fa-cog",href:"/sub-account/revenue-engine?tab=settings"},{id:"integrations",label:"Integrations",icon:"fa-plug",href:"/sub-account/revenue-engine?tab=integrations"}],b=[{id:"all",label:"All Invoices"},{id:"recurring",label:"Recurring Invoices"},{id:"templates",label:"Templates"},{id:"estimates",label:"Estimates"}],f=[{id:"all",label:"All Documents & Contracts"},{id:"templates",label:"Templates"}],j=[{id:"orders",label:"Orders"},{id:"abandoned",label:"Abandoned Checkouts"}],N=[{id:"products",label:"Products"},{id:"collections",label:"Collections"},{id:"inventory",label:"Inventory"}],v="default-sub-account",w=e=>({draft:"bg-gray-100 text-gray-700",sent:"bg-blue-100 text-blue-700",viewed:"bg-purple-100 text-purple-700",paid:"bg-green-100 text-green-700",overdue:"bg-red-100 text-red-700",cancelled:"bg-gray-100 text-gray-500",accepted:"bg-green-100 text-green-700",declined:"bg-red-100 text-red-700",expired:"bg-orange-100 text-orange-700",active:"bg-green-100 text-green-700",paused:"bg-yellow-100 text-yellow-700",pending:"bg-yellow-100 text-yellow-700",processing:"bg-blue-100 text-blue-700",completed:"bg-green-100 text-green-700",refunded:"bg-red-100 text-red-700",failed:"bg-red-100 text-red-700",signed:"bg-green-100 text-green-700",past_due:"bg-red-100 text-red-700",trialing:"bg-blue-100 text-blue-700",succeeded:"bg-green-100 text-green-700",inactive:"bg-gray-100 text-gray-500",connected:"bg-green-100 text-green-700",disconnected:"bg-gray-100 text-gray-500"})[e]||"bg-gray-100 text-gray-700",C=(e,s="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:s}).format(e),S=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});function k(){return(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,s.jsx)("i",{className:"fas fa-spinner fa-spin text-3xl text-theme-secondary"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Loading..."})]})})}function P(){return(0,s.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsx)("div",{className:"bg-gray-50 border-b border-gray-200 p-4",children:(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4"})}),[1,2,3,4,5].map(e=>(0,s.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/6"}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/6"}),(0,s.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/6"})]})},e))]})})}function A({message:e,onRetry:t}){return(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-center",children:[(0,s.jsx)("i",{className:"fas fa-exclamation-circle text-red-500 text-2xl mb-2"}),(0,s.jsx)("p",{className:"text-red-700 mb-3",children:e}),t&&(0,s.jsxs)("button",{onClick:t,className:"px-4 py-2 text-sm text-red-600 hover:bg-red-100 rounded-lg",children:[(0,s.jsx)("i",{className:"fas fa-redo mr-2"}),"Try Again"]})]})}function D({icon:e,title:t,description:a,action:r,onAction:l}){return(0,s.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200",children:[(0,s.jsx)("i",{className:`fas ${e} text-5xl text-gray-300 mb-4`}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:t}),(0,s.jsx)("p",{className:"text-gray-500 mb-4",children:a}),r&&l&&(0,s.jsx)("button",{onClick:l,className:"px-4 py-2 bg-theme-secondary text-white rounded-lg hover:opacity-90 btn-theme-primary",children:r})]})}function T(){return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"h-8 w-48 bg-gray-200 rounded animate-pulse"}),(0,s.jsx)("div",{className:"h-4 w-64 bg-gray-100 rounded animate-pulse mt-2"})]})}),(0,s.jsx)("div",{className:"h-12 bg-gray-100 rounded animate-pulse"}),(0,s.jsx)("div",{className:"h-64 bg-gray-50 rounded animate-pulse"})]})}function I(){let e=(0,r.useSearchParams)().get("tab")||"invoices";return(0,s.jsxs)("div",{className:"space-y-6 -m-4 sm:-m-6 lg:-m-8",children:[(0,s.jsxs)("div",{className:"flex-none bg-white border-b border-gray-200 px-4 sm:px-6 lg:px-8 pt-4 sm:pt-6 lg:pt-8 pb-0",children:[(0,s.jsx)(l.PageHeader,{title:"Revenue Engine",description:"Manage invoices, payments, subscriptions, and financial operations",icon:"fa-dollar-sign"}),(0,s.jsx)("nav",{className:"-mb-px flex space-x-6 overflow-x-auto","aria-label":"Revenue Engine tabs",children:y.map(t=>{let r=t.id===e;return(0,s.jsxs)(a.default,{href:t.href,className:`group inline-flex items-center border-b-2 py-4 px-1 text-sm font-medium whitespace-nowrap transition-colors ${r?"border-[var(--theme-secondary)] text-[var(--theme-secondary)]":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"}`,children:[(0,s.jsx)("i",{className:`fas ${t.icon} mr-2 text-base`,style:{color:r?"var(--theme-secondary)":void 0}}),t.label]},t.id)})})]}),(0,s.jsxs)("div",{className:"px-4 sm:px-6 lg:px-8 pb-4 sm:pb-6 lg:pb-8",children:["invoices"===e&&(0,s.jsx)(F,{}),"documents"===e&&(0,s.jsx)(U,{}),"orders"===e&&(0,s.jsx)(E,{}),"subscriptions"===e&&(0,s.jsx)(R,{}),"payment-links"===e&&(0,s.jsx)(O,{}),"transactions"===e&&(0,s.jsx)(L,{}),"products"===e&&(0,s.jsx)(q,{}),"coupons"===e&&(0,s.jsx)(M,{}),"settings"===e&&(0,s.jsx)(V,{}),"integrations"===e&&(0,s.jsx)(B,{})]})]})}function $(){return(0,s.jsx)(t.Suspense,{fallback:(0,s.jsx)(T,{}),children:(0,s.jsx)(I,{})})}function F(){var e;let[a,r]=(0,t.useState)("all"),[l,o]=(0,t.useState)(!1),[x,m]=(0,t.useState)(""),[u,g]=(0,t.useState)(""),{data:p,loading:h,error:y,refetch:f}=(e={search:x,status:u||void 0},i(()=>{let s;return s=new URLSearchParams({subAccountId:v,...e}),n(`/invoices?${s}`)},[v,e?.search,e?.status,e?.contactId])),{createInvoice:j,sendInvoice:N,loading:k}=function(){let[e,s]=(0,t.useState)(!1),[a,r]=(0,t.useState)(null);return{createInvoice:async e=>{s(!0),r(null);let t=await n("/invoices",{method:"POST",body:JSON.stringify(e)});return s(!1),t.success||r(t.error||"Failed to create invoice"),t},updateInvoice:async(e,t)=>{let a;s(!0),r(null);let l=await (a=e,n(`/invoices/${a}`,{method:"PUT",body:JSON.stringify(t)}));return s(!1),l.success||r(l.error||"Failed to update invoice"),l},deleteInvoice:async e=>{let t;s(!0),r(null);let a=await (t=e,n(`/invoices/${t}`,{method:"DELETE"}));return s(!1),a.success||r(a.error||"Failed to delete invoice"),a},sendInvoice:async(e,t)=>{let a;s(!0),r(null);let l=await (a=e,n(`/invoices/${a}/send`,{method:"POST",body:JSON.stringify(t||{})}));return s(!1),l.success||r(l.error||"Failed to send invoice"),l},recordPayment:async(e,t)=>{let a;s(!0),r(null);let l=await (a=e,n(`/invoices/${a}/record-payment`,{method:"POST",body:JSON.stringify(t)}));return s(!1),l.success||r(l.error||"Failed to record payment"),l},loading:e,error:a}}(),T=p?.invoices||[],I=p?.stats||{totalOutstanding:0,totalPaid:0,overdueCount:0},$=async e=>{(await j({subAccountId:v,...e})).success&&(o(!1),f())},F=async e=>{(await N(e)).success&&f()};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center gap-2 border-b border-gray-200 pb-2",children:b.map(e=>(0,s.jsx)("button",{onClick:()=>r(e.id),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${a===e.id?"bg-theme-secondary-light text-theme-secondary":"text-gray-600 hover:bg-gray-100"}`,children:e.label},e.id))}),"all"===a&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Total Invoices"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:T.length})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Outstanding"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:C(I.totalOutstanding||0)})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Paid"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-theme-success",children:C(I.totalPaid||0)})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Overdue"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-red-600",children:I.overdueCount||0})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("i",{className:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),(0,s.jsx)("input",{type:"text",value:x,onChange:e=>m(e.target.value),placeholder:"Search invoices...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-theme-secondary focus:border-transparent"})]}),(0,s.jsxs)("select",{value:u,onChange:e=>g(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg",children:[(0,s.jsx)("option",{value:"",children:"All Statuses"}),(0,s.jsx)("option",{value:"draft",children:"Draft"}),(0,s.jsx)("option",{value:"sent",children:"Sent"}),(0,s.jsx)("option",{value:"paid",children:"Paid"}),(0,s.jsx)("option",{value:"overdue",children:"Overdue"})]})]}),(0,s.jsxs)("button",{onClick:()=>o(!0),className:"flex items-center gap-2 px-4 py-2 bg-theme-secondary text-white rounded-lg hover:opacity-90 btn-theme-primary",children:[(0,s.jsx)("i",{className:"fas fa-plus"}),(0,s.jsx)("span",{children:"Create Invoice"})]})]}),h?(0,s.jsx)(P,{}):y?(0,s.jsx)(A,{message:y,onRetry:f}):0===T.length?(0,s.jsx)(D,{icon:"fa-file-invoice-dollar",title:"No Invoices Yet",description:"Create your first invoice to start getting paid",action:"Create Invoice",onAction:()=>o(!0)}):(0,s.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Invoice"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Client"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Due Date"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-200",children:T.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsxs)("td",{className:"px-4 py-3",children:[(0,s.jsx)("div",{className:"font-medium text-gray-900",children:e.invoiceNumber}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:S(e.issueDate||e.createdAt)})]}),(0,s.jsxs)("td",{className:"px-4 py-3",children:[(0,s.jsx)("div",{className:"text-sm text-gray-900",children:e.contactName}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:e.contactEmail})]}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsx)("div",{className:"font-medium text-gray-900",children:C(e.amount||e.total,e.currency)})}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${w(e.status)}`,children:e.status})}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:e.dueDate?S(e.dueDate):"-"}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{className:"p-1 text-gray-400 hover:text-blue-600",title:"View",children:(0,s.jsx)("i",{className:"fas fa-eye"})}),(0,s.jsx)("button",{className:"p-1 text-gray-400 hover:text-theme-secondary",title:"Edit",children:(0,s.jsx)("i",{className:"fas fa-edit"})}),"draft"===e.status&&(0,s.jsx)("button",{onClick:()=>F(e.id),className:"p-1 text-gray-400 hover:text-purple-600",title:"Send",children:(0,s.jsx)("i",{className:"fas fa-paper-plane"})}),(0,s.jsx)("button",{className:"p-1 text-gray-400 hover:text-gray-600",title:"Download",children:(0,s.jsx)("i",{className:"fas fa-download"})})]})})]},e.id))})]})})]}),"recurring"===a&&(0,s.jsx)(D,{icon:"fa-redo",title:"Recurring Invoices",description:"Set up recurring invoices for subscription-based billing",action:"Create Recurring Invoice",onAction:()=>{}}),"templates"===a&&(0,s.jsx)(D,{icon:"fa-file-alt",title:"Invoice Templates",description:"Create reusable invoice templates for faster billing",action:"Create Template",onAction:()=>{}}),"estimates"===a&&(0,s.jsx)(D,{icon:"fa-file-invoice",title:"Estimates",description:"Send professional estimates to potential clients",action:"Create Estimate",onAction:()=>{}}),l&&(0,s.jsx)(c,{isOpen:l,onClose:()=>o(!1),title:"Create Invoice",size:"xl",children:(0,s.jsx)(d,{subAccountId:v,contacts:[],onSubmit:$,onCancel:()=>o(!1),isLoading:k})})]})}function U(){var e;let[a,r]=(0,t.useState)("all"),[l,d]=(0,t.useState)(!1),[o,m]=(0,t.useState)(!1),[u,g]=(0,t.useState)(null),[p,y]=(0,t.useState)(""),{data:b,loading:j,error:N,refetch:C}=(e={search:p},i(()=>{let s;return s=new URLSearchParams({subAccountId:v,...e}),n(`/documents?${s}`)},[v,e?.search,e?.status,e?.documentType,e?.requiresSignature])),{createDocument:k,sendDocument:T,loading:I}=function(){let[e,s]=(0,t.useState)(!1),[a,r]=(0,t.useState)(null);return{createDocument:async e=>{s(!0),r(null);let t=await n("/documents",{method:"POST",body:JSON.stringify(e)});return s(!1),t.success||r(t.error||"Failed to create document"),t},updateDocument:async(e,t)=>{let a;s(!0),r(null);let l=await (a=e,n(`/documents/${a}`,{method:"PUT",body:JSON.stringify(t)}));return s(!1),l.success||r(l.error||"Failed to update document"),l},deleteDocument:async e=>{let t;s(!0),r(null);let a=await (t=e,n(`/documents/${t}`,{method:"DELETE"}));return s(!1),a.success||r(a.error||"Failed to delete document"),a},sendDocument:async(e,t)=>{let a;s(!0),r(null);let l=await (a=e,n(`/documents/${a}/send`,{method:"POST",body:JSON.stringify(t||{})}));return s(!1),l.success||r(l.error||"Failed to send document"),l},signDocument:async(e,t)=>{let a;s(!0),r(null);let l=await (a=e,n(`/documents/${a}/sign`,{method:"POST",body:JSON.stringify(t)}));return s(!1),l.success||r(l.error||"Failed to sign document"),l},remindSigners:async(e,t)=>{let a;s(!0),r(null);let l=await (a=e,n(`/documents/${a}/remind`,{method:"POST",body:JSON.stringify(t||{})}));return s(!1),l.success||r(l.error||"Failed to send reminder"),l},voidDocument:async(e,t)=>{let a;s(!0),r(null);let l=await (a=e,n(`/documents/${a}/void`,{method:"POST",body:JSON.stringify(t||{})}));return s(!1),l.success||r(l.error||"Failed to void document"),l},loading:e,error:a}}(),$=b?.documents||[],F=b?.stats||{},U=async e=>{let s=await k({subAccountId:v,...e});s.success&&(d(!1),g(s.data?.document),m(!0),C())},E=async e=>{(await T(e)).success&&C()};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center gap-2 border-b border-gray-200 pb-2",children:f.map(e=>(0,s.jsx)("button",{onClick:()=>r(e.id),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${a===e.id?"bg-theme-secondary-light text-theme-secondary":"text-gray-600 hover:bg-gray-100"}`,children:e.label},e.id))}),"all"===a&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Total Documents"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:$.length})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Awaiting Signature"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:F.awaitingSignature||0})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Signed"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-theme-success",children:F.signed||0})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Expired"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:F.expired||0})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("i",{className:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),(0,s.jsx)("input",{type:"text",value:p,onChange:e=>y(e.target.value),placeholder:"Search documents...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-theme-secondary focus:border-transparent"})]}),(0,s.jsxs)("button",{onClick:()=>d(!0),className:"flex items-center gap-2 px-4 py-2 bg-theme-secondary text-white rounded-lg hover:opacity-90 btn-theme-primary",children:[(0,s.jsx)("i",{className:"fas fa-plus"}),(0,s.jsx)("span",{children:"Create Document"})]})]}),j?(0,s.jsx)(P,{}):N?(0,s.jsx)(A,{message:N,onRetry:C}):0===$.length?(0,s.jsx)(D,{icon:"fa-file-signature",title:"No Documents Yet",description:"Create contracts, agreements, and documents with e-signature",action:"Create Document",onAction:()=>d(!0)}):(0,s.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Document"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Recipient"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sent"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-200",children:$.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("i",{className:"fas fa-file-signature text-2xl text-gray-400"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium text-gray-900",children:e.title}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:["Created ",S(e.createdAt)]})]})]})}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:e.contactName||"No recipient"}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${w(e.status)}`,children:e.status})}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:e.sentAt?S(e.sentAt):"-"}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{className:"p-1 text-gray-400 hover:text-blue-600",children:(0,s.jsx)("i",{className:"fas fa-eye"})}),(0,s.jsx)("button",{onClick:()=>{g(e),m(!0)},className:"p-1 text-gray-400 hover:text-theme-secondary",children:(0,s.jsx)("i",{className:"fas fa-edit"})}),"draft"===e.status&&(0,s.jsx)("button",{onClick:()=>E(e.id),className:"p-1 text-gray-400 hover:text-purple-600",children:(0,s.jsx)("i",{className:"fas fa-paper-plane"})}),(0,s.jsx)("button",{className:"p-1 text-gray-400 hover:text-gray-600",children:(0,s.jsx)("i",{className:"fas fa-download"})})]})})]},e.id))})]})})]}),"templates"===a&&(0,s.jsx)(D,{icon:"fa-file-contract",title:"Document Templates",description:"Create reusable templates for contracts, agreements, and more",action:"Create Template",onAction:()=>{}}),l&&(0,s.jsx)(c,{isOpen:l,onClose:()=>d(!1),title:"Create Document",size:"xl",children:(0,s.jsx)(x,{subAccountId:v,contacts:[],onSubmit:U,onCancel:()=>d(!1),isLoading:I})}),o&&u&&(0,s.jsx)(c,{isOpen:o,onClose:()=>{m(!1),g(null)},title:`Edit: ${u.title}`,size:"full",children:(0,s.jsx)(h,{documentContent:u.content,fields:u.signatureFields||[],signers:u.signers?.map((e,s)=>({id:e.id||`signer-${s}`,name:e.name,email:e.email,color:["#3B82F6","#10B981","#F59E0B","#EF4444"][s%4]}))||[],onFieldsChange:e=>{},onSignersChange:e=>{},mode:"edit"})})]})}function E(){var e;let[a,r]=(0,t.useState)("orders"),{data:l,loading:c,error:d,refetch:o}=i(()=>{let s;return s=new URLSearchParams({subAccountId:e,...void 0}),n(`/orders?${s}`)},[e=v,void 0,void 0,void 0]),x=l?.orders||[],m=l?.stats||{};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center gap-2 border-b border-gray-200 pb-2",children:j.map(e=>(0,s.jsx)("button",{onClick:()=>r(e.id),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${a===e.id?"bg-theme-secondary-light text-theme-secondary":"text-gray-600 hover:bg-gray-100"}`,children:e.label},e.id))}),"orders"===a&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Total Orders"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:x.length})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Completed"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-theme-success",children:m.completed||0})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Processing"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:m.processing||0})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Total Revenue"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:C(m.totalRevenue||0)})]})]}),c?(0,s.jsx)(P,{}):d?(0,s.jsx)(A,{message:d,onRetry:o}):0===x.length?(0,s.jsx)(D,{icon:"fa-shopping-cart",title:"No Orders Yet",description:"Orders will appear here when customers make purchases"}):(0,s.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Order"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Customer"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Items"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Payment"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-200",children:x.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsxs)("td",{className:"px-4 py-3",children:[(0,s.jsx)("div",{className:"font-medium text-gray-900",children:e.orderNumber}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:S(e.createdAt)})]}),(0,s.jsxs)("td",{className:"px-4 py-3",children:[(0,s.jsx)("div",{className:"text-sm text-gray-900",children:e.contactName}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:e.contactEmail})]}),(0,s.jsxs)("td",{className:"px-4 py-3 text-sm text-gray-500",children:[e.items?.length||0," item(s)"]}),(0,s.jsx)("td",{className:"px-4 py-3 font-medium text-gray-900",children:C(e.total,e.currency)}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${w(e.status)}`,children:e.status})}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${w(e.paymentStatus)}`,children:e.paymentStatus})}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{className:"p-1 text-gray-400 hover:text-blue-600",children:(0,s.jsx)("i",{className:"fas fa-eye"})}),(0,s.jsx)("button",{className:"p-1 text-gray-400 hover:text-theme-secondary",children:(0,s.jsx)("i",{className:"fas fa-edit"})})]})})]},e.id))})]})})]}),"abandoned"===a&&(0,s.jsx)(D,{icon:"fa-shopping-cart",title:"No Abandoned Checkouts",description:"When customers abandon their checkout, they'll appear here"})]})}function R(){var e;let{data:a,loading:r,error:l,refetch:c}=i(()=>{let s;return s=new URLSearchParams({subAccountId:e,...void 0}),n(`/subscriptions?${s}`)},[e=v,void 0,void 0]),{cancelSubscription:d,loading:o}=function(){let[e,s]=(0,t.useState)(!1),[a,r]=(0,t.useState)(null);return{createSubscription:async e=>{s(!0),r(null);let t=await n("/subscriptions",{method:"POST",body:JSON.stringify(e)});return s(!1),t.success||r(t.error||"Failed to create subscription"),t},updateSubscription:async(e,t)=>{let a;s(!0),r(null);let l=await (a=e,n(`/subscriptions/${a}`,{method:"PUT",body:JSON.stringify(t)}));return s(!1),l.success||r(l.error||"Failed to update subscription"),l},cancelSubscription:async(e,t)=>{let a;s(!0),r(null);let l=await (a=e,n(`/subscriptions/${a}`,{method:"PUT",body:JSON.stringify({status:"cancelled",...t})}));return s(!1),l.success||r(l.error||"Failed to cancel subscription"),l},loading:e,error:a}}(),x=a?.subscriptions||[],m=a?.stats||{},u=async e=>{confirm("Are you sure you want to cancel this subscription?")&&(await d(e,{cancelAtPeriodEnd:!0})).success&&c()};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Total Subscriptions"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:x.length})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Active"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-theme-success",children:m.active||0})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"MRR"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:C(m.mrr||0)})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Churn Rate"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[m.churnRate||0,"%"]})]})]}),r?(0,s.jsx)(P,{}):l?(0,s.jsx)(A,{message:l,onRetry:c}):0===x.length?(0,s.jsx)(D,{icon:"fa-sync-alt",title:"No Subscriptions Yet",description:"Subscriptions will appear here when customers subscribe to your plans"}):(0,s.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Customer"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Plan"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Current Period"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-200",children:x.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsxs)("td",{className:"px-4 py-3",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.contactName}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:e.contactEmail})]}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:e.planName}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsxs)("div",{className:"font-medium text-gray-900",children:[C(e.amount,e.currency),"/","monthly"===e.interval?"mo":"yr"]})}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${w(e.status)}`,children:e.status.replace("_"," ")})}),(0,s.jsxs)("td",{className:"px-4 py-3 text-sm text-gray-500",children:[S(e.currentPeriodStart)," - ",S(e.currentPeriodEnd)]}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{className:"p-1 text-gray-400 hover:text-blue-600",children:(0,s.jsx)("i",{className:"fas fa-eye"})}),"active"===e.status&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"p-1 text-gray-400 hover:text-yellow-600",children:(0,s.jsx)("i",{className:"fas fa-pause"})}),(0,s.jsx)("button",{onClick:()=>u(e.id),className:"p-1 text-gray-400 hover:text-red-600",children:(0,s.jsx)("i",{className:"fas fa-times"})})]})]})})]},e.id))})]})})]})}function O(){var e;let[a,r]=(0,t.useState)(!1),{data:l,loading:d,error:o,refetch:x}=i(()=>{let s;return s=new URLSearchParams({subAccountId:e,...void 0}),n(`/payment-links?${s}`)},[e=v,void 0]),{createPaymentLink:u,deletePaymentLink:g,loading:p}=function(){let[e,s]=(0,t.useState)(!1),[a,r]=(0,t.useState)(null);return{createPaymentLink:async e=>{s(!0),r(null);let t=await n("/payment-links",{method:"POST",body:JSON.stringify(e)});return s(!1),t.success||r(t.error||"Failed to create payment link"),t},updatePaymentLink:async(e,t)=>{let a;s(!0),r(null);let l=await (a=e,n(`/payment-links/${a}`,{method:"PUT",body:JSON.stringify(t)}));return s(!1),l.success||r(l.error||"Failed to update payment link"),l},deletePaymentLink:async e=>{let t;s(!0),r(null);let a=await (t=e,n(`/payment-links/${t}`,{method:"DELETE"}));return s(!1),a.success||r(a.error||"Failed to delete payment link"),a},loading:e,error:a}}(),h=l?.paymentLinks||[],y=async e=>{(await u({subAccountId:v,...e})).success&&(r(!1),x())},b=async e=>{confirm("Are you sure you want to delete this payment link?")&&(await g(e)).success&&x()};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Payment Links"}),(0,s.jsxs)("button",{onClick:()=>r(!0),className:"flex items-center gap-2 px-4 py-2 bg-theme-secondary text-white rounded-lg hover:opacity-90 btn-theme-primary",children:[(0,s.jsx)("i",{className:"fas fa-plus"}),(0,s.jsx)("span",{children:"Create Payment Link"})]})]}),d?(0,s.jsx)(k,{}):o?(0,s.jsx)(A,{message:o,onRetry:x}):0===h.length?(0,s.jsx)(D,{icon:"fa-link",title:"No Payment Links Yet",description:"Create shareable payment links for quick payments",action:"Create Payment Link",onAction:()=>r(!0)}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(e=>(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(0,s.jsx)("p",{className:"text-2xl font-bold text-theme-secondary mt-1",children:C(e.amount,e.currency)})]}),(0,s.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${w(e.status)}`,children:e.status})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3 p-2 bg-gray-50 rounded-lg",children:[(0,s.jsx)("input",{type:"text",value:e.url,readOnly:!0,className:"flex-1 text-sm text-gray-600 bg-transparent border-none focus:ring-0 truncate"}),(0,s.jsx)("button",{onClick:()=>{var s;return s=e.url,void(navigator.clipboard.writeText(s),alert("Link copied to clipboard!"))},className:"p-1 text-gray-400 hover:text-gray-600",children:(0,s.jsx)("i",{className:"fas fa-copy"})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,s.jsxs)("span",{children:["Used ",e.usageCount,e.usageLimit?`/${e.usageLimit}`:""," times"]}),e.expiresAt&&(0,s.jsxs)("span",{children:["Expires ",S(e.expiresAt)]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-gray-200",children:[(0,s.jsxs)("button",{className:"flex-1 px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg",children:[(0,s.jsx)("i",{className:"fas fa-edit mr-1"})," Edit"]}),(0,s.jsxs)("button",{className:"flex-1 px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg",children:[(0,s.jsx)("i",{className:"fas fa-chart-bar mr-1"})," Stats"]}),(0,s.jsx)("button",{onClick:()=>b(e.id),className:"px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg",children:(0,s.jsx)("i",{className:"fas fa-trash"})})]})]},e.id))}),a&&(0,s.jsx)(c,{isOpen:a,onClose:()=>r(!1),title:"Create Payment Link",size:"lg",children:(0,s.jsx)(m,{subAccountId:v,onSubmit:y,onCancel:()=>r(!1),isLoading:p})})]})}function L(){var e;let[a,r]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),{data:d,loading:o,error:x,refetch:m}=(e={status:a||void 0},i(()=>{let s;return s=new URLSearchParams({subAccountId:v,...e}),n(`/payments?${s}`)},[v,e?.status,e?.paymentMethod,e?.startDate,e?.endDate])),{refundPayment:u,loading:g}=function(){let[e,s]=(0,t.useState)(!1),[a,r]=(0,t.useState)(null);return{createPayment:async e=>{s(!0),r(null);let t=await n("/payments",{method:"POST",body:JSON.stringify(e)});return s(!1),t.success||r(t.error||"Failed to record payment"),t},refundPayment:async(e,t)=>{let a;s(!0),r(null);let l=await (a=e,n(`/payments/${a}`,{method:"POST",body:JSON.stringify(t)}));return s(!1),l.success||r(l.error||"Failed to process refund"),l},loading:e,error:a}}(),p=d?.payments||[],h=d?.summary||{},y=async e=>{confirm("Are you sure you want to refund this payment?")&&(await u(e,{})).success&&m()};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Total Transactions"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:p.length})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Payments"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-theme-success",children:C(h.totalPayments||0)})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Refunds"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-red-600",children:C(h.totalRefunds||0)})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Net Revenue"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:C(h.netRevenue||0)})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("select",{value:l,onChange:e=>c(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg",children:[(0,s.jsx)("option",{value:"",children:"All Types"}),(0,s.jsx)("option",{value:"payment",children:"Payments"}),(0,s.jsx)("option",{value:"refund",children:"Refunds"}),(0,s.jsx)("option",{value:"payout",children:"Payouts"})]}),(0,s.jsxs)("select",{value:a,onChange:e=>r(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg",children:[(0,s.jsx)("option",{value:"",children:"All Statuses"}),(0,s.jsx)("option",{value:"succeeded",children:"Succeeded"}),(0,s.jsx)("option",{value:"pending",children:"Pending"}),(0,s.jsx)("option",{value:"failed",children:"Failed"})]})]}),o?(0,s.jsx)(P,{}):x?(0,s.jsx)(A,{message:x,onRetry:m}):0===p.length?(0,s.jsx)(D,{icon:"fa-exchange-alt",title:"No Transactions Yet",description:"Transactions will appear here when payments are processed"}):(0,s.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Customer"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-200",children:p.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("i",{className:`fas ${{payment:"fa-arrow-down text-green-500",refund:"fa-arrow-up text-red-500",payout:"fa-arrow-up text-blue-500",fee:"fa-minus text-gray-500"}[e.type]||"fa-circle text-gray-500"}`}),(0,s.jsx)("span",{className:"text-sm capitalize",children:e.type})]})}),(0,s.jsxs)("td",{className:"px-4 py-3",children:[(0,s.jsx)("div",{className:"text-sm text-gray-900",children:e.description}),e.paymentMethod&&(0,s.jsx)("div",{className:"text-xs text-gray-500",children:e.paymentMethod})]}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:e.contactName||"-"}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsxs)("span",{className:`font-medium ${e.amount>=0?"text-green-600":"text-red-600"}`,children:[e.amount>=0?"+":"",C(Math.abs(e.amount),e.currency)]})}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${w(e.status)}`,children:e.status})}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:S(e.createdAt)}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{className:"p-1 text-gray-400 hover:text-blue-600",children:(0,s.jsx)("i",{className:"fas fa-eye"})}),"payment"===e.type&&"succeeded"===e.status&&(0,s.jsx)("button",{onClick:()=>y(e.id),className:"p-1 text-gray-400 hover:text-red-600",title:"Refund",children:(0,s.jsx)("i",{className:"fas fa-undo"})})]})})]},e.id))})]})})]})}function q(){var e;let[a,r]=(0,t.useState)("products"),[l,d]=(0,t.useState)(!1),[x,m]=(0,t.useState)(""),{data:u,loading:g,error:p,refetch:h}=(e={search:x},i(()=>{let s;return s=new URLSearchParams({subAccountId:v,...e}),n(`/products?${s}`)},[v,e?.search,e?.status,e?.type])),{createProduct:y,deleteProduct:b,loading:f}=function(){let[e,s]=(0,t.useState)(!1),[a,r]=(0,t.useState)(null);return{createProduct:async e=>{s(!0),r(null);let t=await n("/products",{method:"POST",body:JSON.stringify(e)});return s(!1),t.success||r(t.error||"Failed to create product"),t},updateProduct:async(e,t)=>{let a;s(!0),r(null);let l=await (a=e,n(`/products/${a}`,{method:"PUT",body:JSON.stringify(t)}));return s(!1),l.success||r(l.error||"Failed to update product"),l},deleteProduct:async e=>{let t;s(!0),r(null);let a=await (t=e,n(`/products/${t}`,{method:"DELETE"}));return s(!1),a.success||r(a.error||"Failed to delete product"),a},loading:e,error:a}}(),j=u?.products||[],S=async e=>{(await y({subAccountId:v,...e})).success&&(d(!1),h())},P=async e=>{confirm("Are you sure you want to delete this product?")&&(await b(e)).success&&h()};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center gap-2 border-b border-gray-200 pb-2",children:N.map(e=>(0,s.jsx)("button",{onClick:()=>r(e.id),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${a===e.id?"bg-theme-secondary-light text-theme-secondary":"text-gray-600 hover:bg-gray-100"}`,children:e.label},e.id))}),"products"===a&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("i",{className:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),(0,s.jsx)("input",{type:"text",value:x,onChange:e=>m(e.target.value),placeholder:"Search products...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg"})]}),(0,s.jsxs)("button",{onClick:()=>d(!0),className:"flex items-center gap-2 px-4 py-2 bg-theme-secondary text-white rounded-lg hover:opacity-90 btn-theme-primary",children:[(0,s.jsx)("i",{className:"fas fa-plus"}),(0,s.jsx)("span",{children:"Add Product"})]})]}),g?(0,s.jsx)(k,{}):p?(0,s.jsx)(A,{message:p,onRetry:h}):0===j.length?(0,s.jsx)(D,{icon:"fa-box",title:"No Products Yet",description:"Add products to start selling",action:"Add Product",onAction:()=>d(!0)}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.map(e=>(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow",children:[(0,s.jsx)("div",{className:"h-32 bg-gray-100 flex items-center justify-center",children:e.images?.[0]?(0,s.jsx)("img",{src:e.images[0],alt:e.name,className:"w-full h-full object-cover"}):(0,s.jsx)("i",{className:`fas ${"digital"===e.type?"fa-download":"service"===e.type?"fa-concierge-bell":"fa-box"} text-4xl text-gray-400`})}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(0,s.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${w(e.status)}`,children:e.status})]}),e.description&&(0,s.jsx)("p",{className:"text-sm text-gray-500 mb-2 line-clamp-2",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-lg font-bold text-theme-secondary",children:C(e.price,e.currency)}),(0,s.jsx)("span",{className:"text-xs text-gray-500 capitalize",children:e.type})]}),e.sku&&(0,s.jsxs)("div",{className:"text-xs text-gray-400 mt-2",children:["SKU: ",e.sku]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-gray-200",children:[(0,s.jsxs)("button",{className:"flex-1 px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg",children:[(0,s.jsx)("i",{className:"fas fa-edit mr-1"})," Edit"]}),(0,s.jsx)("button",{onClick:()=>P(e.id),className:"px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg",children:(0,s.jsx)("i",{className:"fas fa-trash"})})]})]})]},e.id))})]}),"collections"===a&&(0,s.jsx)(D,{icon:"fa-folder",title:"Collections",description:"Organize your products into collections",action:"Create Collection",onAction:()=>{}}),"inventory"===a&&(0,s.jsx)(D,{icon:"fa-warehouse",title:"Inventory Management",description:"Track stock levels for physical products",action:"Configure Inventory",onAction:()=>{}}),l&&(0,s.jsx)(c,{isOpen:l,onClose:()=>d(!1),title:"Add Product",size:"xl",children:(0,s.jsx)(o,{subAccountId:v,onSubmit:S,onCancel:()=>d(!1),isLoading:f})})]})}function M(){var e;let[a,r]=(0,t.useState)(!1),{data:l,loading:d,error:o,refetch:x}=i(()=>{let s;return s=new URLSearchParams({subAccountId:e,...void 0}),n(`/coupons?${s}`)},[e=v,void 0,void 0]),{createCoupon:m,deleteCoupon:g,loading:p}=function(){let[e,s]=(0,t.useState)(!1),[a,r]=(0,t.useState)(null);return{createCoupon:async e=>{s(!0),r(null);let t=await n("/coupons",{method:"POST",body:JSON.stringify(e)});return s(!1),t.success||r(t.error||"Failed to create coupon"),t},updateCoupon:async(e,t)=>{let a;s(!0),r(null);let l=await (a=e,n(`/coupons/${a}`,{method:"PUT",body:JSON.stringify(t)}));return s(!1),l.success||r(l.error||"Failed to update coupon"),l},deleteCoupon:async e=>{let t;s(!0),r(null);let a=await (t=e,n(`/coupons/${t}`,{method:"DELETE"}));return s(!1),a.success||r(a.error||"Failed to delete coupon"),a},loading:e,error:a}}(),h=l?.coupons||[],y=async e=>{(await m({subAccountId:v,...e})).success&&(r(!1),x())},b=async e=>{confirm("Are you sure you want to delete this coupon?")&&(await g(e)).success&&x()};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Discount Coupons"}),(0,s.jsxs)("button",{onClick:()=>r(!0),className:"flex items-center gap-2 px-4 py-2 bg-theme-secondary text-white rounded-lg hover:opacity-90 btn-theme-primary",children:[(0,s.jsx)("i",{className:"fas fa-plus"}),(0,s.jsx)("span",{children:"Create Coupon"})]})]}),d?(0,s.jsx)(P,{}):o?(0,s.jsx)(A,{message:o,onRetry:x}):0===h.length?(0,s.jsx)(D,{icon:"fa-tags",title:"No Coupons Yet",description:"Create discount coupons to boost sales",action:"Create Coupon",onAction:()=>r(!0)}):(0,s.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Code"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Discount"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Usage"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Valid Until"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-200",children:h.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsx)("code",{className:"px-2 py-1 bg-gray-100 rounded text-sm font-mono",children:e.code})}),(0,s.jsx)("td",{className:"px-4 py-3 font-medium text-gray-900",children:"percentage"===e.discountType?`${e.discountValue}% off`:C(e.discountValue,e.currency)+" off"}),(0,s.jsxs)("td",{className:"px-4 py-3 text-sm text-gray-500",children:[e.usageCount,e.usageLimit?`/${e.usageLimit}`:""," used"]}),(0,s.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:e.validUntil?S(e.validUntil):"No expiry"}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${w(e.status)}`,children:e.status})}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{className:"p-1 text-gray-400 hover:text-blue-600",children:(0,s.jsx)("i",{className:"fas fa-eye"})}),(0,s.jsx)("button",{className:"p-1 text-gray-400 hover:text-theme-secondary",children:(0,s.jsx)("i",{className:"fas fa-edit"})}),(0,s.jsx)("button",{onClick:()=>b(e.id),className:"p-1 text-gray-400 hover:text-red-600",children:(0,s.jsx)("i",{className:"fas fa-trash"})})]})})]},e.id))})]})}),a&&(0,s.jsx)(c,{isOpen:a,onClose:()=>r(!1),title:"Create Coupon",size:"lg",children:(0,s.jsx)(u,{subAccountId:v,onSubmit:y,onCancel:()=>r(!1),isLoading:p})})]})}function V(){var e;let{data:a,loading:r,error:l,refetch:c}=i(()=>{let s;return s=new URLSearchParams({subAccountId:e}),n(`/settings?${s}`)},[e=v]),{updateSettings:d,addTaxRate:o,loading:x}=function(){let[e,s]=(0,t.useState)(!1),[a,r]=(0,t.useState)(null);return{updateSettings:async e=>{s(!0),r(null);let t=await n("/settings",{method:"PUT",body:JSON.stringify(e)});return s(!1),t.success||r(t.error||"Failed to update settings"),t},addTaxRate:async e=>{s(!0),r(null);let t=await n("/settings",{method:"POST",body:JSON.stringify(e)});return s(!1),t.success||r(t.error||"Failed to add tax rate"),t},loading:e,error:a}}(),[m,u]=(0,t.useState)({currency:"USD",taxEnabled:!0,taxRate:10,invoicePrefix:"INV",estimatePrefix:"EST",orderPrefix:"ORD",paymentTerms:30,autoReminders:!0});(0,t.useEffect)(()=>{a?.settings&&u(e=>({...e,...a.settings}))},[a]);let g=async()=>{(await d({subAccountId:v,...m})).success&&(alert("Settings saved successfully!"),c())};return r?(0,s.jsx)(k,{}):l?(0,s.jsx)(A,{message:l,onRetry:c}):(0,s.jsxs)("div",{className:"space-y-6 max-w-3xl",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"General Settings"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Currency"}),(0,s.jsxs)("select",{value:m.currency,onChange:e=>u({...m,currency:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[(0,s.jsx)("option",{value:"USD",children:"USD - US Dollar"}),(0,s.jsx)("option",{value:"EUR",children:"EUR - Euro"}),(0,s.jsx)("option",{value:"GBP",children:"GBP - British Pound"}),(0,s.jsx)("option",{value:"CAD",children:"CAD - Canadian Dollar"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Payment Terms (days)"}),(0,s.jsx)("input",{type:"number",value:m.paymentTerms,onChange:e=>u({...m,paymentTerms:parseInt(e.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tax Settings"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Enable Tax"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Add tax to invoices and orders"})]}),(0,s.jsx)("button",{type:"button",onClick:()=>u({...m,taxEnabled:!m.taxEnabled}),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors ${m.taxEnabled?"bg-theme-secondary":"bg-gray-200"}`,children:(0,s.jsx)("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow transition ${m.taxEnabled?"translate-x-5":"translate-x-0"}`})})]}),m.taxEnabled&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Tax Rate (%)"}),(0,s.jsx)("input",{type:"number",value:m.taxRate,onChange:e=>u({...m,taxRate:parseFloat(e.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Number Prefixes"}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Invoice Prefix"}),(0,s.jsx)("input",{type:"text",value:m.invoicePrefix,onChange:e=>u({...m,invoicePrefix:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimate Prefix"}),(0,s.jsx)("input",{type:"text",value:m.estimatePrefix,onChange:e=>u({...m,estimatePrefix:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order Prefix"}),(0,s.jsx)("input",{type:"text",value:m.orderPrefix,onChange:e=>u({...m,orderPrefix:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Reminders"}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Auto Reminders"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Automatically send payment reminders"})]}),(0,s.jsx)("button",{type:"button",onClick:()=>u({...m,autoReminders:!m.autoReminders}),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors ${m.autoReminders?"bg-theme-secondary":"bg-gray-200"}`,children:(0,s.jsx)("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow transition ${m.autoReminders?"translate-x-5":"translate-x-0"}`})})]})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{onClick:g,disabled:x,className:"px-6 py-2 bg-theme-secondary text-white rounded-lg hover:opacity-90 disabled:opacity-50 btn-theme-primary",children:x?(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[(0,s.jsx)("i",{className:"fas fa-spinner fa-spin"}),"Saving..."]}):"Save Settings"})})]})}function B(){let[e,a]=(0,t.useState)([{id:"stripe",name:"Stripe",provider:"stripe",status:"disconnected",isDefault:!1},{id:"paypal",name:"PayPal",provider:"paypal",status:"disconnected",isDefault:!1}]),r=async e=>{alert(`Connect to ${e} - This would open the authentication flow`)},l=async e=>{confirm(`Are you sure you want to disconnect ${e}?`)&&a(s=>s.map(s=>s.provider===e?{...s,status:"disconnected",isDefault:!1}:s))};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Payment Integrations"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Connect your payment gateways to accept payments"})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{provider:"stripe",name:"Stripe",icon:"fab fa-stripe",color:"#6772E5",description:"Accept credit cards, Apple Pay, Google Pay, and more"},{provider:"paypal",name:"PayPal",icon:"fab fa-paypal",color:"#003087",description:"Accept PayPal payments worldwide"},{provider:"authorize_net",name:"Authorize.net",icon:"fas fa-credit-card",color:"#1A4596",description:"Accept payments via Authorize.net gateway"},{provider:"nmi",name:"NMI",icon:"fas fa-credit-card",color:"#00A1E0",description:"Network Merchants payment gateway"},{provider:"square",name:"Square",icon:"fas fa-square",color:"#000000",description:"Accept payments with Square"},{provider:"paytabs",name:"PayTabs",icon:"fas fa-credit-card",color:"#1E88E5",description:"Middle East & Africa payment gateway"},{provider:"paymob",name:"PayMob",icon:"fas fa-credit-card",color:"#FF5722",description:"Egypt & MENA payment solutions"},{provider:"payplus",name:"PayPlus",icon:"fas fa-credit-card",color:"#4CAF50",description:"Israeli payment gateway"}].map(t=>{var n;let i,c=(n=t.provider,i=e.find(e=>e.provider===n),i?.status||"disconnected"),d="connected"===c,o=e.find(e=>e.provider===t.provider);return(0,s.jsxs)("div",{className:`bg-white rounded-lg border p-4 ${d?"border-green-200 bg-green-50/50":"border-gray-200"}`,children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center",style:{backgroundColor:`${t.color}15`},children:(0,s.jsx)("i",{className:`${t.icon} text-xl`,style:{color:t.color}})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900",children:t.name}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:t.description})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[o?.isDefault&&(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-700 rounded-full",children:"Default"}),(0,s.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${w(c)}`,children:c})]})]}),(0,s.jsx)("div",{className:"flex items-center gap-2 mt-4",children:d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{className:"flex-1 px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg border border-gray-200",children:[(0,s.jsx)("i",{className:"fas fa-cog mr-1"})," Settings"]}),!o?.isDefault&&(0,s.jsx)("button",{onClick:()=>{var e;return e=t.provider,void a(s=>s.map(s=>({...s,isDefault:s.provider===e})))},className:"px-3 py-2 text-sm text-green-600 hover:bg-green-50 rounded-lg border border-green-200",children:"Set Default"}),(0,s.jsx)("button",{onClick:()=>l(t.provider),className:"px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg border border-red-200",children:"Disconnect"})]}):(0,s.jsxs)("button",{onClick:()=>r(t.provider),className:"flex-1 px-3 py-2 text-sm text-white bg-theme-secondary hover:opacity-90 rounded-lg btn-theme-primary",children:[(0,s.jsx)("i",{className:"fas fa-plug mr-1"})," Connect"]})})]},t.provider)})})]})}function z(){return(0,s.jsx)(t.Suspense,{fallback:(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-[#0a0a0a] flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),children:(0,s.jsx)($,{})})}e.s(["default",()=>z,"dynamic",0,"force-dynamic"],34133)}]);