(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,83457,e=>{"use strict";var s=e.i(43476),a=e.i(71645),t=e.i(22016);function l(){let[e,l]=(0,a.useState)("provider"),[c,o]=(0,a.useState)(null),[m,x]=(0,a.useState)([]),[u,g]=(0,a.useState)(!0),[p,h]=(0,a.useState)(!1),[b,y]=(0,a.useState)(null),j="b0000000-0000-0000-0000-000000000001";(0,a.useEffect)(()=>{f(),N()},[]);let f=async()=>{g(!0);try{let e=await fetch(`/api/v1/dialer/settings?subAccountId=${j}`),s=await e.json();s.success&&s.data?o(s.data):o(v())}catch(e){console.error("Error fetching settings:",e),o(v())}finally{g(!1)}},N=async()=>{try{let e=await fetch(`/api/v1/dialer/dispositions?subAccountId=${j}&activeOnly=false`),s=await e.json();s.success&&x(s.data)}catch(e){console.error("Error fetching dispositions:",e)}},v=()=>({id:"",subAccountId:j,provider:"twilio",outboundCallerIds:[],dialerMode:"preview",maxConcurrentCalls:1,callTimeout:30,wrapUpTime:30,autoDialDelay:3,recordCalls:!0,recordingRetentionDays:90,amdEnabled:!0,amdTimeout:5,amdAction:"drop_voicemail",workingHoursEnabled:!0,workingHoursStart:"09:00",workingHoursEnd:"17:00",workingDays:[1,2,3,4,5],timezone:"America/New_York",dncListEnabled:!0,maxCallAttemptsPerDay:3,maxCallAttemptsTotal:10,minTimeBetweenAttempts:60,aiTranscriptionEnabled:!1,aiSentimentAnalysis:!1,aiCallSummary:!1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),w=async()=>{if(c){h(!0),y(null);try{let e=c.id?"PUT":"POST",s=await fetch("/api/v1/dialer/settings",{method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify({...c,subAccountId:j})}),a=await s.json();a.success?(o(a.data),y({type:"success",text:"Settings saved successfully!"})):y({type:"error",text:a.error||"Failed to save settings"})}catch(e){y({type:"error",text:"Network error"})}finally{h(!1)}}};return u?(0,s.jsx)("div",{className:"p-6 max-w-4xl mx-auto",children:(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):(0,s.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(t.default,{href:"/sub-account/power-dialer",className:"text-gray-400 hover:text-gray-600",children:(0,s.jsx)("i",{className:"fas fa-arrow-left"})}),(0,s.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[(0,s.jsx)("i",{className:"fas fa-cog text-orange-600"}),"Dialer Settings"]})]}),(0,s.jsx)("p",{className:"text-gray-500 text-sm mt-1 ml-8",children:"Configure your power dialer and VoIP settings"})]}),(0,s.jsx)("button",{onClick:w,disabled:p,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:p?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Saving..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("i",{className:"fas fa-save"}),"Save Settings"]})})]}),b&&(0,s.jsxs)("div",{className:`mb-6 p-4 rounded-lg ${"success"===b.type?"bg-green-50 border border-green-200 text-green-700":"bg-red-50 border border-red-200 text-red-700"}`,children:[(0,s.jsx)("i",{className:`fas ${"success"===b.type?"fa-check-circle":"fa-exclamation-circle"} mr-2`}),b.text]}),(0,s.jsx)("div",{className:"flex gap-1 mb-6 bg-gray-100 p-1 rounded-lg w-fit",children:[{id:"provider",label:"VoIP Provider",icon:"fas fa-phone"},{id:"dialer",label:"Dialer Settings",icon:"fas fa-sliders-h"},{id:"dispositions",label:"Dispositions",icon:"fas fa-tags"},{id:"compliance",label:"Compliance",icon:"fas fa-shield-alt"}].map(a=>(0,s.jsxs)("button",{onClick:()=>l(a.id),className:`px-4 py-2 rounded-md flex items-center gap-2 transition-colors ${e===a.id?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[(0,s.jsx)("i",{className:a.icon}),a.label]},a.id))}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border",children:["provider"===e&&c&&(0,s.jsx)(r,{settings:c,onChange:o}),"dialer"===e&&c&&(0,s.jsx)(i,{settings:c,onChange:o}),"dispositions"===e&&(0,s.jsx)(n,{dispositions:m,onUpdate:N,subAccountId:j}),"compliance"===e&&c&&(0,s.jsx)(d,{settings:c,onChange:o})]})]})}function r({settings:e,onChange:t}){let[l,r]=(0,a.useState)(!1),[i,n]=(0,a.useState)("");return(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"VoIP Provider"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{id:"twilio",name:"Twilio",icon:"ðŸ”µ"},{id:"vonage",name:"Vonage",icon:"ðŸŸ£"},{id:"plivo",name:"Plivo",icon:"ðŸŸ¢"},{id:"custom",name:"Custom/Other",icon:"âš™ï¸"}].map(a=>(0,s.jsxs)("button",{onClick:()=>t({...e,provider:a.id}),className:`p-4 rounded-lg border-2 text-center transition-all ${e.provider===a.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[(0,s.jsx)("span",{className:"text-2xl mb-2 block",children:a.icon}),(0,s.jsx)("span",{className:"font-medium text-gray-900",children:a.name})]},a.id))})]}),(0,s.jsxs)("div",{className:"border-t pt-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"API Credentials"}),(0,s.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("i",{className:"fas fa-exclamation-triangle text-yellow-600 mt-1"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-yellow-800",children:"Important"}),(0,s.jsx)("p",{className:"text-sm text-yellow-700",children:"Your API credentials are encrypted and stored securely. Never share these credentials publicly."})]})]})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account SID"}),(0,s.jsx)("input",{type:"text",value:e.accountSid||"",onChange:s=>t({...e,accountSid:s.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Auth Token"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:l?"text":"password",value:e.authToken||"",onChange:s=>t({...e,authToken:s.target.value}),className:"w-full px-4 py-2 pr-12 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"}),(0,s.jsx)("button",{type:"button",onClick:()=>r(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:(0,s.jsx)("i",{className:`fas ${l?"fa-eye-slash":"fa-eye"}`})})]})]})]})]}),(0,s.jsxs)("div",{className:"border-t pt-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Outbound Caller IDs"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Add verified phone numbers to use as caller ID for outbound calls."}),(0,s.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,s.jsx)("input",{type:"tel",value:i,onChange:e=>n(e.target.value),className:"flex-1 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"+1 (555) 123-4567"}),(0,s.jsx)("button",{onClick:()=>{i&&!e.outboundCallerIds.includes(i)&&(t({...e,outboundCallerIds:[...e.outboundCallerIds,i]}),n(""))},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[e.outboundCallerIds.map((a,l)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("i",{className:"fas fa-phone text-gray-400"}),(0,s.jsx)("span",{children:a}),0===l&&(0,s.jsx)("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:"Default"})]}),(0,s.jsx)("button",{onClick:()=>{t({...e,outboundCallerIds:e.outboundCallerIds.filter(e=>e!==a)})},className:"text-red-500 hover:text-red-700",children:(0,s.jsx)("i",{className:"fas fa-trash"})})]},l)),0===e.outboundCallerIds.length&&(0,s.jsx)("div",{className:"text-center py-4 text-gray-400",children:"No caller IDs added yet"})]})]})]})}function i({settings:e,onChange:a}){return(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Dialer Mode"}),(0,s.jsx)("div",{className:"space-y-3",children:[{id:"preview",name:"Preview Dialer",description:"Agent reviews contact info before initiating the call. Best for quality conversations."},{id:"progressive",name:"Progressive Dialer",description:"Automatically dials the next number when agent becomes available. Balanced efficiency."},{id:"predictive",name:"Predictive Dialer",description:"Uses algorithms to dial multiple numbers simultaneously. Maximum efficiency."}].map(t=>(0,s.jsx)("label",{className:`block p-4 rounded-lg border-2 cursor-pointer transition-all ${e.dialerMode===t.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("input",{type:"radio",name:"dialerMode",value:t.id,checked:e.dialerMode===t.id,onChange:()=>a({...e,dialerMode:t.id}),className:"mt-1"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:t.name}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:t.description})]})]})},t.id))})]}),(0,s.jsxs)("div",{className:"border-t pt-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Call Settings"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Call Timeout (seconds)"}),(0,s.jsx)("input",{type:"number",value:e.callTimeout,onChange:s=>a({...e,callTimeout:parseInt(s.target.value)||30}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",min:"10",max:"120"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Time to wait for answer"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Wrap-up Time (seconds)"}),(0,s.jsx)("input",{type:"number",value:e.wrapUpTime,onChange:s=>a({...e,wrapUpTime:parseInt(s.target.value)||30}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",min:"0",max:"300"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Time for disposition after call"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Auto-dial Delay (seconds)"}),(0,s.jsx)("input",{type:"number",value:e.autoDialDelay,onChange:s=>a({...e,autoDialDelay:parseInt(s.target.value)||3}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",min:"0",max:"30"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Delay before auto-dialing next"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Concurrent Calls"}),(0,s.jsx)("input",{type:"number",value:e.maxConcurrentCalls,onChange:s=>a({...e,maxConcurrentCalls:parseInt(s.target.value)||1}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",min:"1",max:"10"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"For predictive mode"})]})]})]}),(0,s.jsxs)("div",{className:"border-t pt-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recording Settings"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("label",{className:"flex items-center gap-3",children:[(0,s.jsx)("input",{type:"checkbox",checked:e.recordCalls,onChange:s=>a({...e,recordCalls:s.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-blue-600"}),(0,s.jsx)("span",{className:"text-gray-700",children:"Record all calls"})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Recording Retention (days)"}),(0,s.jsx)("input",{type:"number",value:e.recordingRetentionDays,onChange:s=>a({...e,recordingRetentionDays:parseInt(s.target.value)||90}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",min:"7",max:"365",disabled:!e.recordCalls})]})})]})]}),(0,s.jsxs)("div",{className:"border-t pt-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Answering Machine Detection (AMD)"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("label",{className:"flex items-center gap-3",children:[(0,s.jsx)("input",{type:"checkbox",checked:e.amdEnabled,onChange:s=>a({...e,amdEnabled:s.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-blue-600"}),(0,s.jsx)("span",{className:"text-gray-700",children:"Enable AMD"})]}),e.amdEnabled&&(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 pl-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Detection Timeout (seconds)"}),(0,s.jsx)("input",{type:"number",value:e.amdTimeout,onChange:s=>a({...e,amdTimeout:parseInt(s.target.value)||5}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",min:"1",max:"15"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"On Machine Detection"}),(0,s.jsx)("select",{value:e.amdAction,onChange:s=>a({...e,amdAction:s.target.value}),className:"w-full px-4 py-2 border rounded-lg bg-white",children:[{id:"hangup",name:"Hang up"},{id:"drop_voicemail",name:"Drop voicemail"},{id:"continue",name:"Continue to agent"}].map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))})]})]})]})]}),(0,s.jsxs)("div",{className:"border-t pt-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"AI Features"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("label",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"Call Transcription"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Automatically transcribe recorded calls"})]}),(0,s.jsx)("input",{type:"checkbox",checked:e.aiTranscriptionEnabled,onChange:s=>a({...e,aiTranscriptionEnabled:s.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-blue-600"})]}),(0,s.jsxs)("label",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"Sentiment Analysis"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Analyze call sentiment automatically"})]}),(0,s.jsx)("input",{type:"checkbox",checked:e.aiSentimentAnalysis,onChange:s=>a({...e,aiSentimentAnalysis:s.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-blue-600"})]}),(0,s.jsxs)("label",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"Call Summary"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Generate AI summaries of calls"})]}),(0,s.jsx)("input",{type:"checkbox",checked:e.aiCallSummary,onChange:s=>a({...e,aiCallSummary:s.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-blue-600"})]})]})]})]})}function n({dispositions:e,onUpdate:t,subAccountId:l}){let[r,i]=(0,a.useState)(!1),n=async e=>{if(confirm("Are you sure you want to delete this disposition?"))try{(await fetch(`/api/v1/dialer/dispositions?id=${e}&subAccountId=${l}`,{method:"DELETE"})).ok&&t()}catch(e){console.error("Error deleting disposition:",e)}},d={positive:"bg-green-100 text-green-700",neutral:"bg-blue-100 text-blue-700",negative:"bg-red-100 text-red-700",callback:"bg-yellow-100 text-yellow-700"};return(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Call Dispositions"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Manage call outcome options for agents"})]}),(0,s.jsxs)("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,s.jsx)("i",{className:"fas fa-plus"}),"Add Disposition"]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[e.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:e.color+"20",color:e.color},children:(0,s.jsx)("i",{className:e.icon||"fas fa-tag"})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:e.name}),(0,s.jsx)("code",{className:"text-xs bg-gray-200 px-2 py-0.5 rounded",children:e.code}),(0,s.jsx)("span",{className:`text-xs px-2 py-0.5 rounded ${d[e.category]}`,children:e.category}),e.isSystem&&(0,s.jsx)("span",{className:"text-xs bg-gray-300 text-gray-600 px-2 py-0.5 rounded",children:"System"})]}),e.description&&(0,s.jsx)("p",{className:"text-sm text-gray-500",children:e.description}),(0,s.jsxs)("div",{className:"flex gap-3 mt-1 text-xs text-gray-400",children:[e.requiresNotes&&(0,s.jsxs)("span",{children:[(0,s.jsx)("i",{className:"fas fa-sticky-note mr-1"}),"Requires notes"]}),e.requiresCallback&&(0,s.jsxs)("span",{children:[(0,s.jsx)("i",{className:"fas fa-calendar mr-1"}),"Requires callback"]}),e.removesFromQueue&&(0,s.jsxs)("span",{children:[(0,s.jsx)("i",{className:"fas fa-check mr-1"}),"Removes from queue"]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-400",children:[e.timesUsed," uses"]}),!e.isSystem&&(0,s.jsx)("button",{onClick:()=>n(e.id),className:"text-red-500 hover:text-red-700",children:(0,s.jsx)("i",{className:"fas fa-trash"})})]})]},e.id)),0===e.length&&(0,s.jsxs)("div",{className:"text-center py-8 text-gray-400",children:[(0,s.jsx)("i",{className:"fas fa-tags text-4xl mb-3 opacity-50"}),(0,s.jsx)("p",{children:"No dispositions configured"})]})]}),r&&(0,s.jsx)(c,{onClose:()=>i(!1),onAdded:()=>{i(!1),t()},subAccountId:l})]})}function c({onClose:e,onAdded:t,subAccountId:l}){let[r,i]=(0,a.useState)({name:"",code:"",description:"",category:"neutral",color:"#3B82F6",icon:"fas fa-tag",requiresNotes:!1,requiresCallback:!1,removesFromQueue:!1}),[n,c]=(0,a.useState)(!1),d=async e=>{if(e.preventDefault(),r.name&&r.code){c(!0);try{(await fetch("/api/v1/dialer/dispositions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subAccountId:l,...r,isActive:!0})})).ok&&t()}catch(e){console.error("Error adding disposition:",e)}finally{c(!1)}}};return(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:e}),(0,s.jsx)("div",{className:"relative bg-white rounded-2xl shadow-xl w-full max-w-md mx-4",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Add Disposition"}),(0,s.jsxs)("form",{onSubmit:d,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),(0,s.jsx)("input",{type:"text",value:r.name,onChange:e=>i({...r,name:e.target.value}),className:"w-full px-4 py-2 border rounded-lg",placeholder:"Interested"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code *"}),(0,s.jsx)("input",{type:"text",value:r.code,onChange:e=>i({...r,code:e.target.value.toUpperCase()}),className:"w-full px-4 py-2 border rounded-lg font-mono",placeholder:"INT",maxLength:10})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,s.jsx)("input",{type:"text",value:r.description,onChange:e=>i({...r,description:e.target.value}),className:"w-full px-4 py-2 border rounded-lg",placeholder:"Prospect showed interest"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,s.jsxs)("select",{value:r.category,onChange:e=>i({...r,category:e.target.value}),className:"w-full px-4 py-2 border rounded-lg bg-white",children:[(0,s.jsx)("option",{value:"positive",children:"Positive"}),(0,s.jsx)("option",{value:"neutral",children:"Neutral"}),(0,s.jsx)("option",{value:"negative",children:"Negative"}),(0,s.jsx)("option",{value:"callback",children:"Callback"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color"}),(0,s.jsx)("input",{type:"color",value:r.color,onChange:e=>i({...r,color:e.target.value}),className:"w-full h-10 border rounded-lg cursor-pointer"})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:r.requiresNotes,onChange:e=>i({...r,requiresNotes:e.target.checked}),className:"rounded"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Requires notes"})]}),(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:r.requiresCallback,onChange:e=>i({...r,requiresCallback:e.target.checked}),className:"rounded"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Requires callback scheduling"})]}),(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:r.removesFromQueue,onChange:e=>i({...r,removesFromQueue:e.target.checked}),className:"rounded"}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Removes contact from queue"})]})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,s.jsx)("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 border rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:n||!r.name||!r.code,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:n?"Adding...":"Add Disposition"})]})]})]})})]})}function d({settings:e,onChange:a}){return(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Working Hours"}),(0,s.jsxs)("label",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("input",{type:"checkbox",checked:e.workingHoursEnabled,onChange:s=>a({...e,workingHoursEnabled:s.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-blue-600"}),(0,s.jsx)("span",{className:"text-gray-700",children:"Restrict calls to working hours"})]}),e.workingHoursEnabled&&(0,s.jsxs)("div",{className:"space-y-4 pl-8",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Time"}),(0,s.jsx)("input",{type:"time",value:e.workingHoursStart,onChange:s=>a({...e,workingHoursStart:s.target.value}),className:"w-full px-4 py-2 border rounded-lg"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Time"}),(0,s.jsx)("input",{type:"time",value:e.workingHoursEnd,onChange:s=>a({...e,workingHoursEnd:s.target.value}),className:"w-full px-4 py-2 border rounded-lg"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Working Days"}),(0,s.jsx)("div",{className:"flex gap-2",children:[{id:0,name:"Sun"},{id:1,name:"Mon"},{id:2,name:"Tue"},{id:3,name:"Wed"},{id:4,name:"Thu"},{id:5,name:"Fri"},{id:6,name:"Sat"}].map(t=>(0,s.jsx)("button",{type:"button",onClick:()=>{var s;let l,r;return s=t.id,r=(l=e.workingDays||[]).includes(s)?l.filter(e=>e!==s):[...l,s].sort(),void a({...e,workingDays:r})},className:`w-12 h-12 rounded-lg font-medium transition-colors ${e.workingDays?.includes(t.id)?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:t.name},t.id))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Timezone"}),(0,s.jsxs)("select",{value:e.timezone,onChange:s=>a({...e,timezone:s.target.value}),className:"w-full px-4 py-2 border rounded-lg bg-white",children:[(0,s.jsx)("option",{value:"America/New_York",children:"Eastern Time (ET)"}),(0,s.jsx)("option",{value:"America/Chicago",children:"Central Time (CT)"}),(0,s.jsx)("option",{value:"America/Denver",children:"Mountain Time (MT)"}),(0,s.jsx)("option",{value:"America/Los_Angeles",children:"Pacific Time (PT)"}),(0,s.jsx)("option",{value:"UTC",children:"UTC"})]})]})]})]}),(0,s.jsxs)("div",{className:"border-t pt-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Do Not Call (DNC) List"}),(0,s.jsxs)("label",{className:"flex items-center gap-3 mb-4",children:[(0,s.jsx)("input",{type:"checkbox",checked:e.dncListEnabled,onChange:s=>a({...e,dncListEnabled:s.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-blue-600"}),(0,s.jsx)("span",{className:"text-gray-700",children:"Enable DNC list checking"})]})]}),(0,s.jsxs)("div",{className:"border-t pt-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Call Attempt Limits"}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max per Day"}),(0,s.jsx)("input",{type:"number",value:e.maxCallAttemptsPerDay,onChange:s=>a({...e,maxCallAttemptsPerDay:parseInt(s.target.value)||3}),className:"w-full px-4 py-2 border rounded-lg",min:"1",max:"10"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Total"}),(0,s.jsx)("input",{type:"number",value:e.maxCallAttemptsTotal,onChange:s=>a({...e,maxCallAttemptsTotal:parseInt(s.target.value)||10}),className:"w-full px-4 py-2 border rounded-lg",min:"1",max:"50"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Between (mins)"}),(0,s.jsx)("input",{type:"number",value:e.minTimeBetweenAttempts,onChange:s=>a({...e,minTimeBetweenAttempts:parseInt(s.target.value)||60}),className:"w-full px-4 py-2 border rounded-lg",min:"5",max:"1440"})]})]}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"These limits help ensure compliance with calling regulations and prevent over-contacting prospects."})]})]})}e.s(["default",()=>l])}]);