(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,50669,e=>{"use strict";var t=e.i(43476),a=e.i(71645);function s({subAccountId:e,selectedTags:s,onChange:l,placeholder:n="Search or create tags...",disabled:r=!1,maxTags:i,allowCreate:o=!0}){let c,[d,p]=(0,a.useState)(""),[m,u]=(0,a.useState)([]),[x,g]=(0,a.useState)(!1),[h,b]=(0,a.useState)(!1),[y,f]=(0,a.useState)(-1),[j,v]=(0,a.useState)(!1),N=(0,a.useRef)(null),k=(0,a.useRef)(null),w=(0,a.useCallback)(async t=>{b(!0);try{let a=`/api/v1/tags?subAccountId=${e}&search=${encodeURIComponent(t)}&limit=10`,l=await fetch(a),n=await l.json();if(n.success){let e=(n.data||[]).filter(e=>!s.some(t=>t.id===e.id));if(u(e),t.trim()&&o){let e=(n.data||[]).some(e=>e.name.toLowerCase()===t.toLowerCase());v(!e)}else v(!1)}}catch(e){console.error("Error fetching tags:",e),u([])}finally{b(!1)}},[e,s,o]);(0,a.useEffect)(()=>{if(!x)return;let e=setTimeout(()=>{w(d)},200);return()=>clearTimeout(e)},[d,x,w]),(0,a.useEffect)(()=>{let e=e=>{!k.current||k.current.contains(e.target)||N.current?.contains(e.target)||(g(!1),f(-1))};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let C=e=>{i&&s.length>=i||(l([...s,e]),p(""),f(-1),g(!1),N.current?.focus())},_=async()=>{if(d.trim()){b(!0);try{let t=await fetch("/api/v1/tags",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subAccountId:e,name:d.trim()})}),a=await t.json();a.success&&a.data&&C(a.data)}catch(e){console.error("Error creating tag:",e)}finally{b(!1)}}};return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("div",{className:`flex flex-wrap gap-1.5 p-2 border rounded-lg bg-white min-h-[42px] ${r?"bg-gray-100 cursor-not-allowed":"cursor-text"} ${x?"border-blue-500 ring-2 ring-blue-500/20":"border-gray-300"}`,onClick:()=>{r||(N.current?.focus(),g(!0))},children:[s.map(e=>(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-sm font-medium",style:{backgroundColor:`${e.color}20`,color:e.color,border:`1px solid ${e.color}40`},children:[(0,t.jsx)("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.color}}),e.name,!r&&(0,t.jsx)("button",{type:"button",onClick:t=>{var a;t.stopPropagation(),a=e.id,l(s.filter(e=>e.id!==a))},className:"ml-1 hover:opacity-70",children:(0,t.jsx)("i",{className:"fas fa-times text-xs"})})]},e.id)),(!i||s.length<i)&&(0,t.jsx)("input",{ref:N,type:"text",value:d,onChange:e=>{p(e.target.value),x||g(!0)},onFocus:()=>{g(!0),w(d)},onKeyDown:e=>{let t=m.length+ +!!j;switch(e.key){case"ArrowDown":e.preventDefault(),f(e=>e<t-1?e+1:0);break;case"ArrowUp":e.preventDefault(),f(e=>e>0?e-1:t-1);break;case"Enter":e.preventDefault(),y>=0?y<m.length?C(m[y]):j&&_():j&&d.trim()&&_();break;case"Escape":g(!1),f(-1);break;case"Backspace":!d&&s.length>0&&l(s.slice(0,-1))}},disabled:r,placeholder:0===s.length?n:"",className:"flex-1 min-w-[120px] outline-none bg-transparent text-sm disabled:cursor-not-allowed"})]}),x&&!r&&(0,t.jsx)("div",{ref:k,className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:h?(0,t.jsxs)("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:[(0,t.jsx)("i",{className:"fas fa-spinner fa-spin mr-2"}),"Searching..."]}):(0,t.jsxs)(t.Fragment,{children:[m.map((e,a)=>(0,t.jsxs)("button",{type:"button",onClick:()=>C(e),className:`w-full text-left px-4 py-2.5 flex items-center gap-3 hover:bg-gray-50 ${a===y?"bg-blue-50":""}`,children:[(0,t.jsx)("span",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:e.color}}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.name}),e.description&&(0,t.jsx)("p",{className:"text-xs text-gray-500 truncate",children:e.description})]}),void 0!==e.usage_count&&e.usage_count>0&&(0,t.jsxs)("span",{className:"text-xs text-gray-400",children:[e.usage_count," uses"]})]},e.id)),j&&d.trim()&&(0,t.jsxs)("button",{type:"button",onClick:_,className:`w-full text-left px-4 py-2.5 flex items-center gap-3 hover:bg-blue-50 border-t ${y===m.length?"bg-blue-50":""}`,children:[(0,t.jsx)("span",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:(c=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#14B8A6","#F97316"])[d.split("").reduce((e,t)=>e+t.charCodeAt(0),0)%c.length]}}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("p",{className:"text-sm font-medium text-blue-600",children:[(0,t.jsx)("i",{className:"fas fa-plus mr-1"}),'Create "',d.trim(),'"']}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Add as a new tag"})]})]}),0===m.length&&!j&&(0,t.jsx)("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:d?"No tags found":"Type to search or create tags"})]})}),i&&s.length>=i&&(0,t.jsxs)("p",{className:"text-xs text-amber-600 mt-1",children:[(0,t.jsx)("i",{className:"fas fa-info-circle mr-1"}),"Maximum of ",i," tags allowed"]})]})}let l={contact:{label:"Contact",icon:"user",variables:[{key:"contact.id",label:"Contact ID"},{key:"contact.firstName",label:"First Name"},{key:"contact.lastName",label:"Last Name"},{key:"contact.name",label:"Full Name"},{key:"contact.email",label:"Email"},{key:"contact.phone",label:"Phone"},{key:"contact.company",label:"Company"},{key:"contact.address",label:"Address"},{key:"contact.city",label:"City"},{key:"contact.state",label:"State"},{key:"contact.country",label:"Country"},{key:"contact.postalCode",label:"Postal Code"},{key:"contact.source",label:"Source"},{key:"contact.dateAdded",label:"Date Added"}]},opportunity:{label:"Opportunity",icon:"funnel-dollar",variables:[{key:"opportunity.id",label:"Opportunity ID"},{key:"opportunity.name",label:"Opportunity Name"},{key:"opportunity.value",label:"Opportunity Value"},{key:"opportunity.status",label:"Status"},{key:"opportunity.pipeline",label:"Pipeline"},{key:"opportunity.stage",label:"Pipeline Stage"},{key:"opportunity.source",label:"Source"},{key:"opportunity.createdAt",label:"Created Date"}]},user:{label:"User",icon:"user-tie",variables:[{key:"user.id",label:"User ID"},{key:"user.name",label:"User Name"},{key:"user.email",label:"User Email"},{key:"user.phone",label:"User Phone"}]},appointment:{label:"Appointment",icon:"calendar-check",variables:[{key:"appointment.id",label:"Appointment ID"},{key:"appointment.title",label:"Title"},{key:"appointment.startTime",label:"Start Time"},{key:"appointment.endTime",label:"End Time"},{key:"appointment.status",label:"Status"},{key:"appointment.calendar",label:"Calendar Name"}]},calendar:{label:"Calendar",icon:"calendar-alt",variables:[{key:"calendar.id",label:"Calendar ID"},{key:"calendar.name",label:"Calendar Name"}]},account:{label:"Account",icon:"building",variables:[{key:"account.id",label:"Account ID"},{key:"account.name",label:"Account Name"},{key:"account.email",label:"Account Email"},{key:"account.phone",label:"Account Phone"}]},trigger:{label:"Trigger Data",icon:"bolt",variables:[{key:"trigger.data",label:"Trigger Data (JSON)"},{key:"trigger.type",label:"Trigger Type"},{key:"trigger.timestamp",label:"Trigger Timestamp"}]},datetime:{label:"Date & Time",icon:"clock",variables:[{key:"now.date",label:"Current Date"},{key:"now.time",label:"Current Time"},{key:"now.datetime",label:"Current Date & Time"},{key:"now.timestamp",label:"Unix Timestamp"},{key:"now.year",label:"Current Year"},{key:"now.month",label:"Current Month"},{key:"now.day",label:"Current Day"}]}};function n({onSelect:e,onClose:s}){let[n,r]=(0,a.useState)(""),[i,o]=(0,a.useState)("contact"),c=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=e=>{c.current&&!c.current.contains(e.target)&&s()};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[s]);let d=Object.entries(l).map(([e,t])=>({key:e,...t,variables:t.variables.filter(e=>e.label.toLowerCase().includes(n.toLowerCase())||e.key.toLowerCase().includes(n.toLowerCase()))})).filter(e=>e.variables.length>0||!n);return(0,t.jsxs)("div",{ref:c,className:"absolute right-0 top-full mt-1 w-72 bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-80 overflow-hidden flex flex-col",children:[(0,t.jsx)("div",{className:"p-2 border-b",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("i",{className:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"}),(0,t.jsx)("input",{type:"text",value:n,onChange:e=>r(e.target.value),placeholder:"Search variables...",className:"w-full pl-9 pr-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0})]})}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto",children:d.map(a=>(0,t.jsxs)("div",{className:"border-b border-gray-100 last:border-0",children:[(0,t.jsxs)("button",{onClick:()=>o(i===a.key?null:a.key),className:"w-full px-3 py-2 flex items-center justify-between text-sm font-medium text-gray-700 hover:bg-gray-50",children:[(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)("i",{className:`fas fa-${a.icon} text-gray-400 w-4`}),a.label]}),(0,t.jsx)("i",{className:`fas fa-chevron-${i===a.key?"down":"right"} text-gray-400 text-xs`})]}),i===a.key&&(0,t.jsx)("div",{className:"bg-gray-50 py-1",children:a.variables.map(a=>(0,t.jsxs)("button",{onClick:()=>{e(`{{${a.key}}}`),s()},className:"w-full px-4 py-1.5 text-left text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-700 flex items-center justify-between group",children:[(0,t.jsx)("span",{children:a.label}),(0,t.jsx)("code",{className:"text-xs text-gray-400 group-hover:text-blue-500 font-mono",children:`{{${a.key}}}`})]},a.key))})]},a.key))})]})}function r({value:e,onChange:s,placeholder:l,disabled:r,type:i="text",className:o=""}){let[c,d]=(0,a.useState)(!1),p=(0,a.useRef)(null);return(0,t.jsxs)("div",{className:`relative ${o}`,children:[(0,t.jsx)("input",{ref:p,type:i,value:e,onChange:e=>s(e.target.value),disabled:r,placeholder:l,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm pr-10 bg-white"}),(0,t.jsx)("button",{type:"button",onClick:()=>d(!c),disabled:r,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-blue-600 p-1",title:"Insert variable",children:(0,t.jsx)("i",{className:"fas fa-code text-sm"})}),c&&(0,t.jsx)(n,{onSelect:t=>{if(p.current){let a=p.current.selectionStart||e.length,l=p.current.selectionEnd||e.length;s(e.substring(0,a)+t+e.substring(l))}else s(e+t)},onClose:()=>d(!1)})]})}let i=["find_opportunity","if_else","find_contact","split","goal_event"],o={contact:{label:"Contact Events",icon:"user",triggers:[{type:"contact_created",label:"Contact Created",icon:"user-plus",description:"When a new contact is created"},{type:"contact_changed",label:"Contact Changed",icon:"user-edit",description:"When contact details are updated"},{type:"contact_tag",label:"Tag Added/Removed",icon:"tag",description:"When a tag is added or removed from a contact"},{type:"contact_dnd",label:"DND Status Changed",icon:"bell-slash",description:"When Do Not Disturb status changes"},{type:"birthday_reminder",label:"Birthday Reminder",icon:"birthday-cake",description:"Days before a contact birthday"},{type:"custom_date_reminder",label:"Custom Date Reminder",icon:"calendar-day",description:"Reminder for custom date fields"},{type:"note_added_changed",label:"Note Added",icon:"sticky-note",description:"When a note is added to a contact"},{type:"task_added_completed",label:"Task Event",icon:"tasks",description:"When a task is created or completed"},{type:"contact_engagement_score",label:"Engagement Score",icon:"chart-line",description:"When engagement score reaches threshold"}]},event:{label:"Event Triggers",icon:"bolt",triggers:[{type:"form_submitted",label:"Form Submitted",icon:"file-alt",description:"When a form is submitted"},{type:"inbound_webhook",label:"Inbound Webhook",icon:"plug",description:"Triggered by external webhook"},{type:"call_status",label:"Call Status",icon:"phone",description:"When a call status changes"},{type:"email_events",label:"Email Event",icon:"envelope",description:"Email opened, clicked, bounced, etc."},{type:"trigger_links_clicked",label:"Link Clicked",icon:"link",description:"When a trigger link is clicked"},{type:"facebook_lead_form",label:"Facebook Lead",icon:"facebook",description:"New lead from Facebook form"},{type:"instagram_lead_form",label:"Instagram Lead",icon:"instagram",description:"New lead from Instagram form"},{type:"video_tracking",label:"Video Tracking",icon:"video",description:"Video watch events"}]},appointment:{label:"Appointment Triggers",icon:"calendar-check",triggers:[{type:"customer_booked_appointment",label:"Appointment Booked",icon:"calendar-plus",description:"When appointment is booked"},{type:"appointment_status",label:"Appointment Status",icon:"calendar-check",description:"When appointment status changes"}]},opportunity:{label:"Opportunity Triggers",icon:"funnel-dollar",triggers:[{type:"opportunity_created",label:"Opportunity Created",icon:"plus-circle",description:"When a new opportunity is created"},{type:"opportunity_status_change",label:"Status Changed",icon:"exchange-alt",description:"When opportunity status changes"},{type:"opportunity_changed",label:"Opportunity Changed",icon:"edit",description:"When opportunity details are updated"},{type:"pipeline_stage_changed",label:"Pipeline Stage Changed",icon:"columns",description:"When pipeline stage changes"},{type:"stale_opportunity",label:"Stale Opportunity",icon:"hourglass-end",description:"No activity for specified days"}]},payment:{label:"Payment Triggers",icon:"credit-card",triggers:[{type:"payment_received",label:"Payment Received",icon:"dollar-sign",description:"When a payment is received"},{type:"invoice",label:"Invoice Event",icon:"file-invoice-dollar",description:"Invoice sent, paid, overdue"},{type:"order_submitted",label:"Order Submitted",icon:"shopping-cart",description:"When an order is submitted"},{type:"subscription_status_change",label:"Subscription Changed",icon:"sync-alt",description:"Subscription status changes"},{type:"refund",label:"Refund Issued",icon:"undo",description:"When a refund is processed"}]},ecommerce:{label:"E-commerce Triggers",icon:"shopping-bag",triggers:[{type:"shopify_abandoned_cart",label:"Abandoned Cart",icon:"cart-arrow-down",description:"Shopify cart abandoned"},{type:"order_form_submission",label:"Order Form Submitted",icon:"file-contract",description:"Order form submission"}]}},c={communication:{label:"Communication",icon:"comment",actions:[{type:"send_email",label:"Send Email",icon:"envelope",description:"Send an email to the contact"},{type:"send_sms",label:"Send SMS",icon:"sms",description:"Send a text message"},{type:"call",label:"Make Call",icon:"phone",description:"Initiate a phone call"},{type:"whatsapp",label:"WhatsApp Message",icon:"whatsapp",description:"Send WhatsApp message"},{type:"messenger_facebook",label:"Facebook Messenger",icon:"facebook-messenger",description:"Send Facebook message"},{type:"instagram_dm",label:"Instagram DM",icon:"instagram",description:"Send Instagram direct message"},{type:"send_slack_message",label:"Slack Message",icon:"slack",description:"Send Slack notification"},{type:"send_internal_notification",label:"Internal Notification",icon:"bell",description:"Notify team members"},{type:"send_review_request",label:"Review Request",icon:"star",description:"Request a review from contact"},{type:"manual_action",label:"Manual Action",icon:"hand-paper",description:"Create manual task for team"}]},contact:{label:"Contact Management",icon:"user-cog",actions:[{type:"create_contact",label:"Create Contact",icon:"user-plus",description:"Create a new contact"},{type:"update_contact_field",label:"Update Contact Field",icon:"user-edit",description:"Update contact information"},{type:"add_contact_tag",label:"Add Tag",icon:"tag",description:"Add a tag to contact"},{type:"remove_contact_tag",label:"Remove Tag",icon:"times-circle",description:"Remove a tag from contact"},{type:"assign_to_user",label:"Assign to User",icon:"user-check",description:"Assign contact to team member"},{type:"remove_assigned_user",label:"Remove Assignment",icon:"user-minus",description:"Remove user assignment"},{type:"add_note",label:"Add Note",icon:"sticky-note",description:"Add a note to contact"},{type:"add_task",label:"Add Task",icon:"tasks",description:"Create a task for contact"},{type:"disable_enable_dnd",label:"Toggle DND",icon:"bell-slash",description:"Enable/disable Do Not Disturb"},{type:"delete_contact",label:"Delete Contact",icon:"trash",description:"Delete the contact"}]},logic:{label:"Logic & Flow",icon:"project-diagram",actions:[{type:"if_else",label:"If/Else Condition",icon:"code-branch",description:"Branch based on conditions"},{type:"wait_step",label:"Wait",icon:"clock",description:"Wait for specified time"},{type:"goal_event",label:"Goal",icon:"bullseye",description:"Track conversion goals"},{type:"split",label:"A/B Split",icon:"random",description:"Split traffic for testing"},{type:"go_to",label:"Go To",icon:"redo",description:"Jump to another workflow"},{type:"remove_from_workflow",label:"Remove from Workflow",icon:"sign-out-alt",description:"Exit the workflow"},{type:"drip_mode",label:"Drip Mode",icon:"tint",description:"Gradual drip actions"},{type:"custom_code",label:"Custom Code",icon:"code",description:"Execute custom JavaScript"}]},ai:{label:"AI Actions",icon:"brain",actions:[{type:"ai_prompt",label:"AI Prompt",icon:"robot",description:"Use AI to generate content"},{type:"conversation_ai",label:"Conversation AI",icon:"comments",description:"AI-powered conversation"},{type:"eliza_ai_booking",label:"AI Booking",icon:"calendar-alt",description:"AI appointment booking"},{type:"send_to_eliza_agent",label:"AI Agent",icon:"user-robot",description:"Hand off to AI agent"}]},opportunity:{label:"Opportunities",icon:"funnel-dollar",actions:[{type:"find_opportunity",label:"Find Opportunity",icon:"search",description:"Find opportunity with matching values",branches:["found","not_found"]},{type:"create_opportunity",label:"Create Opportunity",icon:"plus-circle",description:"Create a new opportunity"},{type:"update_opportunity",label:"Update Opportunity",icon:"edit",description:"Update an existing opportunity"},{type:"remove_opportunity",label:"Remove Opportunity",icon:"trash-alt",description:"Remove opportunity"},{type:"update_appointment_status",label:"Update Appointment",icon:"calendar-check",description:"Update appointment status"},{type:"generate_booking_link",label:"Generate Booking Link",icon:"link",description:"Create personalized booking link"}]},data:{label:"Data & Integration",icon:"database",actions:[{type:"webhook",label:"HTTP Webhook",icon:"globe",description:"Send HTTP request"},{type:"google_sheets",label:"Google Sheets",icon:"table",description:"Add/update Google Sheets"},{type:"update_custom_value",label:"Update Custom Value",icon:"edit",description:"Set custom field value"},{type:"text_formatter",label:"Text Formatter",icon:"font",description:"Format text values"},{type:"arrays",label:"Array Operations",icon:"list",description:"Work with arrays"}]},payment:{label:"Payment Actions",icon:"credit-card",actions:[{type:"stripe_charge",label:"Stripe Charge",icon:"stripe",description:"Charge via Stripe"},{type:"send_invoice",label:"Send Invoice",icon:"file-invoice-dollar",description:"Send an invoice"},{type:"send_documents_contracts",label:"Send Contract",icon:"file-signature",description:"Send documents for signing"}]},marketing:{label:"Marketing",icon:"bullhorn",actions:[{type:"google_analytics",label:"Google Analytics",icon:"chart-bar",description:"Track GA events"},{type:"google_ads",label:"Google Ads",icon:"google",description:"Google Ads conversions"},{type:"facebook_custom_audience",label:"FB Custom Audience",icon:"facebook",description:"Add to Facebook audience"},{type:"facebook_conversion_api",label:"FB Conversion API",icon:"facebook-f",description:"Track FB conversions"}]}},d=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),p=e=>{for(let t of Object.values(o)){let a=t.triggers.find(t=>t.type===e);if(a)return a.label}return e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())},m=e=>{for(let t of Object.values(c)){let a=t.actions.find(t=>t.type===e);if(a)return a.label}return e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())},u=e=>{for(let t of Object.values(c)){let a=t.actions.find(t=>t.type===e);if(a)return a.icon}return"cog"};function x({workflowId:e,subAccountId:s="b0000000-0000-0000-0000-000000000001",initialTrigger:l,initialActions:n,onSave:r,onCancel:c,readOnly:x=!1}){let y,f,[j,v]=(0,a.useState)([]),[N,k]=(0,a.useState)([]),[w,C]=(0,a.useState)(null),[_,S]=(0,a.useState)(1),[A,T]=(0,a.useState)({x:0,y:0}),[E,I]=(0,a.useState)(!1),[F,O]=(0,a.useState)(!1),[D,P]=(0,a.useState)(!1),[W,$]=(0,a.useState)(!1),[B,L]=(0,a.useState)({x:0,y:0}),[M,R]=(0,a.useState)(null),U=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=[],t=[];if(l&&e.push({id:"trigger",type:"trigger",triggerType:l.type,name:p(l.type),config:l.config,conditions:l.filters,x:400,y:50}),n&&n.length>0){let a="trigger",s=0,l=n.filter(e=>!e.config?.branchId),r=n.filter(e=>e.config?.branchId);l.forEach((l,n)=>{let r=l.id||d(),o=i.includes(l.type);e.push({id:r,type:"action",actionType:l.type,name:l.name||m(l.type),config:l.config,conditions:l.conditions,delay:l.delay,continueOnError:l.continueOnError,x:400,y:50+(s+1)*150}),a&&t.push({from:a,to:r,type:"main"}),a=r,s++,o&&(s+=2)}),r.forEach(t=>{let a=t.id||d(),s=t.config?.branchId,l=t.config?.parentBranchNodeId||s?.replace(/-yes$/,"").replace(/-no$/,""),n=e.find(e=>e.id===l),r=s?.endsWith("-yes"),i=e.filter(e=>e.branchId===s);e.push({id:a,type:"action",actionType:t.type,name:t.name||m(t.type),config:t.config,conditions:t.conditions,delay:t.delay,continueOnError:t.continueOnError,x:n?r?n.x-160:n.x+160:400,y:n?n.y+260+80*i.length:400,branchId:s,parentBranchNodeId:l})})}v(e),k(t)},[l,n]);let G=(0,a.useCallback)(e=>{(e.target===U.current||e.target.classList.contains("canvas-background"))&&($(!0),L({x:e.clientX-A.x,y:e.clientY-A.y}),C(null))},[A]),z=(0,a.useCallback)(e=>{W&&T({x:e.clientX-B.x,y:e.clientY-B.y})},[W,B]),q=(0,a.useCallback)(()=>{$(!1)},[]),J=(0,a.useCallback)(e=>{S(t=>Math.max(.25,Math.min(2,t+e)))},[]),V=(0,a.useCallback)(e=>{let t={id:"trigger",type:"trigger",triggerType:e,name:p(e),config:{},x:400,y:50};v(e=>[...e.filter(e=>"trigger"!==e.type),t]),I(!1),C("trigger"),P(!0)},[]),Y=(0,a.useCallback)(e=>{let t,a,s=d(),l=M&&(M.endsWith("-yes")||M.endsWith("-no")),n=400,r=j.length>0?Math.max(...j.map(e=>e.y))+150:200;if(l&&M){t=M,a=M.replace(/-yes$/,"").replace(/-no$/,"");let e=j.find(e=>e.id===a);if(e){n=M.endsWith("-yes")?e.x-160:e.x+160;let a=j.filter(e=>e.branchId===t);r=a.length>0?Math.max(...a.map(e=>e.y))+100:e.y+260}}let i={id:s,type:"action",actionType:e,name:m(e),config:{},continueOnError:!0,x:n,y:r,branchId:t,parentBranchNodeId:a};if(v(e=>[...e,i]),M&&!l)k(e=>[...e,{from:M,to:s,type:"main"}]);else if(!l&&j.length>0){let e=j.filter(e=>!e.branchId);if(e.length>0){let t=e[e.length-1];k(e=>[...e,{from:t.id,to:s,type:"main"}])}}O(!1),R(null),C(s),P(!0)},[j,M]),H=(0,a.useCallback)(e=>{"trigger"===e?alert("Cannot delete trigger. Create a new workflow to change the trigger."):(v(t=>t.filter(t=>t.id!==e)),k(t=>{let a=t.find(t=>t.to===e),s=t.find(t=>t.from===e),l=t.filter(t=>t.from!==e&&t.to!==e);return a&&s?[...l,{...a,to:s.to}]:l}),C(null),P(!1))},[]),K=(0,a.useCallback)((e,t)=>{v(a=>a.map(a=>a.id===e?{...a,...t}:a))},[]),X=(0,a.useCallback)(()=>{let e=j.find(e=>"trigger"===e.type);if(!e||!e.triggerType)return void alert("Please add a trigger to your workflow");let t={type:e.triggerType,config:e.config,filters:e.conditions},a=j.filter(e=>"action"===e.type),s=[];a.sort((e,t)=>e.y-t.y),a.forEach((e,t)=>{e.actionType&&s.push({id:e.id,type:e.actionType,name:e.name,config:{...e.config,branchId:e.branchId,parentBranchNodeId:e.parentBranchNodeId},delay:e.delay,continueOnError:e.continueOnError??!0,order:t,conditions:e.conditions})}),r(t,s)},[j,r]),Q=j.find(e=>"trigger"===e.type),Z=j.filter(e=>"action"===e.type&&!e.branchId);return j.filter(e=>"action"===e.type),(0,t.jsxs)("div",{className:"h-full min-h-[600px] flex flex-col bg-gray-100",children:[(0,t.jsxs)("div",{className:"bg-white border-b px-4 py-3 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("button",{onClick:c,className:"text-gray-600 hover:text-gray-800 flex items-center gap-2",children:[(0,t.jsx)("i",{className:"fas fa-arrow-left"}),"Back"]}),(0,t.jsx)("div",{className:"h-6 w-px bg-gray-300"}),(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:e?"Edit Workflow":"New Workflow"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 bg-gray-100 rounded-lg px-3 py-1",children:[(0,t.jsx)("button",{onClick:()=>J(-.1),className:"text-gray-600 hover:text-gray-800",children:(0,t.jsx)("i",{className:"fas fa-minus text-sm"})}),(0,t.jsxs)("span",{className:"text-sm text-gray-600 w-12 text-center",children:[Math.round(100*_),"%"]}),(0,t.jsx)("button",{onClick:()=>J(.1),className:"text-gray-600 hover:text-gray-800",children:(0,t.jsx)("i",{className:"fas fa-plus text-sm"})})]}),(0,t.jsx)("button",{onClick:()=>S(1),className:"px-3 py-1 text-sm text-gray-600 hover:text-gray-800",children:"Reset"}),(0,t.jsx)("div",{className:"h-6 w-px bg-gray-300"}),!x&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:c,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,t.jsxs)("button",{onClick:X,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,t.jsx)("i",{className:"fas fa-save"}),"Save Workflow"]})]})]})]}),(0,t.jsxs)("div",{className:"flex-1 flex overflow-hidden min-h-[500px]",children:[(0,t.jsxs)("div",{ref:U,className:"flex-1 relative overflow-hidden cursor-grab active:cursor-grabbing",onMouseDown:G,onMouseMove:z,onMouseUp:q,onMouseLeave:q,children:[(0,t.jsx)("div",{className:"absolute inset-0 canvas-background",style:{backgroundImage:`
                linear-gradient(to right, #e5e7eb 1px, transparent 1px),
                linear-gradient(to bottom, #e5e7eb 1px, transparent 1px)
              `,backgroundSize:`${20*_}px ${20*_}px`,backgroundPosition:`${A.x}px ${A.y}px`}}),(0,t.jsxs)("div",{className:"absolute",style:{transform:`translate(${A.x}px, ${A.y}px) scale(${_})`,transformOrigin:"0 0"},children:[(0,t.jsx)("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",style:{overflow:"visible"},children:N.map((e,a)=>{let s=j.find(t=>t.id===e.from),l=j.find(t=>t.id===e.to);if(!s||!l)return null;let n=s.x+140,r=s.y+80,i=l.x+140,o=l.y,c=(r+o)/2;return(0,t.jsxs)("g",{children:[(0,t.jsx)("path",{d:`M ${n} ${r} C ${n} ${c}, ${i} ${c}, ${i} ${o}`,fill:"none",stroke:"yes"===e.type?"#22c55e":"no"===e.type?"#ef4444":"#94a3b8",strokeWidth:"2",strokeDasharray:"main"!==e.type?"5,5":void 0}),(0,t.jsx)("circle",{cx:i,cy:o,r:"4",fill:"yes"===e.type?"#22c55e":"no"===e.type?"#ef4444":"#94a3b8"})]},a)})}),Q?(0,t.jsxs)("div",{className:`absolute bg-white rounded-xl shadow-lg border-2 w-[280px] cursor-pointer transition-all ${w===Q.id?"border-blue-500 shadow-blue-100":"border-gray-200 hover:border-gray-300"}`,style:{left:Q.x,top:Q.y},onClick:()=>{C(Q.id),x||P(!0)},children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white px-4 py-3 rounded-t-xl",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center",children:(0,t.jsx)("i",{className:`fas fa-${(e=>{for(let t of Object.values(o)){let a=t.triggers.find(t=>t.type===e);if(a)return a.icon}return"bolt"})(Q.triggerType)} text-sm`})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs font-medium text-blue-100",children:"TRIGGER"}),(0,t.jsx)("p",{className:"font-semibold",children:Q.name})]})]})}),(0,t.jsxs)("div",{className:"px-4 py-3",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"When this happens..."}),Q.conditions&&Q.conditions.length>0&&(0,t.jsxs)("div",{className:"mt-2 flex items-center gap-1",children:[(0,t.jsx)("i",{className:"fas fa-filter text-xs text-gray-400"}),(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:[Q.conditions.length," filters"]})]})]})]}):(0,t.jsxs)("div",{className:"absolute w-[280px] border-2 border-dashed border-gray-300 rounded-xl bg-white/50 p-8 text-center cursor-pointer hover:border-blue-400 hover:bg-blue-50/50 transition-colors",style:{left:400,top:50},onClick:()=>!x&&I(!0),children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,t.jsx)("i",{className:"fas fa-bolt text-blue-600 text-xl"})}),(0,t.jsx)("p",{className:"font-medium text-gray-700",children:"Add Trigger"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Start with what kicks off your workflow"})]}),Z.map(e=>{let a=i.includes(e.actionType),s=a?(e=>{switch(e){case"find_opportunity":return{yes:"Opportunity Found",no:"Opportunity Not Found"};case"find_contact":return{yes:"Contact Found",no:"Contact Not Found"};case"if_else":return{yes:"Yes (Condition Met)",no:"No (Condition Not Met)"};case"split":return{yes:"Path A",no:"Path B"};case"goal_event":return{yes:"Goal Achieved",no:"Goal Not Achieved"};default:return{yes:"Yes",no:"No"}}})(e.actionType):null,l=`${e.id}-yes`,n=`${e.id}-no`,r=j.filter(e=>e.branchId===l),o=j.filter(e=>e.branchId===n);return r.length,o.length,(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:`absolute bg-white rounded-xl shadow-lg border-2 w-[280px] cursor-pointer transition-all ${w===e.id?"border-purple-500 shadow-purple-100":"border-gray-200 hover:border-gray-300"}`,style:{left:e.x,top:e.y},onClick:()=>{C(e.id),x||P(!0)},children:[(0,t.jsx)("div",{className:`bg-gradient-to-r ${a?"from-cyan-500 to-cyan-600":"from-purple-500 to-purple-600"} text-white px-4 py-3 rounded-t-xl`,children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center",children:(0,t.jsx)("i",{className:`fas fa-${u(e.actionType)} text-sm`})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-xs font-medium opacity-80",children:"ACTION"}),(0,t.jsx)("p",{className:"font-semibold truncate",children:e.name})]}),!x&&(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),H(e.id)},className:"text-white/60 hover:text-white",children:(0,t.jsx)("i",{className:"fas fa-times"})})]})}),(0,t.jsxs)("div",{className:"px-4 py-3",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:a?"Check condition...":"Then do this..."}),(0,t.jsxs)("div",{className:"mt-2 flex items-center gap-3 text-xs text-gray-400",children:[e.delay&&e.delay>0&&(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)("i",{className:"fas fa-clock"}),"Wait ",e.delay,"m"]}),e.conditions&&e.conditions.length>0&&(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)("i",{className:"fas fa-filter"}),e.conditions.length," conditions"]}),a&&(0,t.jsxs)("span",{className:"flex items-center gap-1 text-cyan-600",children:[(0,t.jsx)("i",{className:"fas fa-code-branch"}),"2 Branches"]})]})]})]}),a&&s&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{className:"absolute pointer-events-none z-0",style:{left:e.x+140,top:e.y+105,overflow:"visible"},width:"400",height:"80",children:[(0,t.jsx)("line",{x1:"0",y1:"0",x2:"0",y2:"25",stroke:"#94a3b8",strokeWidth:"2"}),(0,t.jsx)("line",{x1:"-160",y1:"25",x2:"160",y2:"25",stroke:"#94a3b8",strokeWidth:"2"}),(0,t.jsx)("line",{x1:"-160",y1:"25",x2:"-160",y2:"55",stroke:"#22c55e",strokeWidth:"3"}),(0,t.jsx)("line",{x1:"160",y1:"25",x2:"160",y2:"55",stroke:"#f97316",strokeWidth:"3"})]}),(0,t.jsxs)("div",{className:"absolute z-10",style:{left:e.x-160,top:e.y+160},children:[(0,t.jsx)("div",{className:"w-[280px] text-center mb-3",children:(0,t.jsxs)("span",{className:"px-4 py-1.5 bg-green-100 text-green-700 text-xs font-medium rounded-full border border-green-200",children:[(0,t.jsx)("i",{className:"fas fa-check mr-1"}),s.yes]})}),r.map((e,a)=>(0,t.jsxs)("div",{className:`w-[280px] mb-3 bg-white rounded-xl shadow-lg border-2 cursor-pointer transition-all ${w===e.id?"border-green-500 shadow-green-100":"border-green-200 hover:border-green-300"}`,onClick:()=>{C(e.id),x||P(!0)},children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-green-600 text-white px-3 py-2 rounded-t-xl",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("i",{className:`fas fa-${u(e.actionType)} text-sm`}),(0,t.jsx)("span",{className:"font-medium text-sm truncate",children:e.name}),!x&&(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),H(e.id)},className:"ml-auto text-white/60 hover:text-white",children:(0,t.jsx)("i",{className:"fas fa-times text-xs"})})]})}),(0,t.jsx)("div",{className:"px-3 py-2 text-xs text-gray-500",children:"Then do this..."})]},e.id)),!x&&(0,t.jsxs)("div",{className:"w-[280px] border-2 border-dashed border-green-300 rounded-xl bg-green-50/50 p-4 text-center cursor-pointer hover:border-green-400 hover:bg-green-100/50 transition-colors",onClick:()=>{R(l),O(!0)},children:[(0,t.jsx)("i",{className:"fas fa-plus text-green-600 mb-1"}),(0,t.jsx)("p",{className:"text-sm font-medium text-green-700",children:"Add Action"})]}),(0,t.jsx)("div",{className:"w-[280px] mt-3 text-center",children:(0,t.jsx)("span",{className:"px-4 py-1.5 bg-green-50 text-green-600 text-xs font-medium rounded-full border border-green-200",children:"END"})})]}),(0,t.jsxs)("div",{className:"absolute z-10",style:{left:e.x+160,top:e.y+160},children:[(0,t.jsx)("div",{className:"w-[280px] text-center mb-3",children:(0,t.jsxs)("span",{className:"px-4 py-1.5 bg-orange-100 text-orange-700 text-xs font-medium rounded-full border border-orange-200",children:[(0,t.jsx)("i",{className:"fas fa-times mr-1"}),s.no]})}),o.map((e,a)=>(0,t.jsxs)("div",{className:`w-[280px] mb-3 bg-white rounded-xl shadow-lg border-2 cursor-pointer transition-all ${w===e.id?"border-orange-500 shadow-orange-100":"border-orange-200 hover:border-orange-300"}`,onClick:()=>{C(e.id),x||P(!0)},children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white px-3 py-2 rounded-t-xl",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("i",{className:`fas fa-${u(e.actionType)} text-sm`}),(0,t.jsx)("span",{className:"font-medium text-sm truncate",children:e.name}),!x&&(0,t.jsx)("button",{onClick:t=>{t.stopPropagation(),H(e.id)},className:"ml-auto text-white/60 hover:text-white",children:(0,t.jsx)("i",{className:"fas fa-times text-xs"})})]})}),(0,t.jsx)("div",{className:"px-3 py-2 text-xs text-gray-500",children:"Then do this..."})]},e.id)),!x&&(0,t.jsxs)("div",{className:"w-[280px] border-2 border-dashed border-orange-300 rounded-xl bg-orange-50/50 p-4 text-center cursor-pointer hover:border-orange-400 hover:bg-orange-100/50 transition-colors",onClick:()=>{R(n),O(!0)},children:[(0,t.jsx)("i",{className:"fas fa-plus text-orange-600 mb-1"}),(0,t.jsx)("p",{className:"text-sm font-medium text-orange-700",children:"Add Action"})]}),(0,t.jsx)("div",{className:"w-[280px] mt-3 text-center",children:(0,t.jsx)("span",{className:"px-4 py-1.5 bg-orange-50 text-orange-600 text-xs font-medium rounded-full border border-orange-200",children:"END"})})]})]})]},e.id)}),Q&&!x&&((f=(y=j.filter(e=>!e.branchId))[y.length-1])&&i.includes(f.actionType)?null:(0,t.jsxs)("div",{className:"absolute w-[280px] border-2 border-dashed border-gray-300 rounded-xl bg-white/50 p-6 text-center cursor-pointer hover:border-purple-400 hover:bg-purple-50/50 transition-colors",style:{left:400,top:y.length>0?Math.max(...y.map(e=>e.y))+150:200},onClick:()=>{R(null),O(!0)},children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-2",children:(0,t.jsx)("i",{className:"fas fa-plus text-purple-600"})}),(0,t.jsx)("p",{className:"font-medium text-gray-700",children:"Add Action"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Add the next step"})]}))]})]}),D&&w&&(0,t.jsx)(b,{node:j.find(e=>e.id===w),subAccountId:s,onUpdate:e=>K(w,e),onClose:()=>P(!1),onDelete:()=>H(w),readOnly:x})]}),E&&(0,t.jsx)(g,{onSelect:V,onClose:()=>I(!1)}),F&&(0,t.jsx)(h,{onSelect:Y,onClose:()=>O(!1)})]})}function g({onSelect:e,onClose:s}){let[l,n]=(0,a.useState)(""),[r,i]=(0,a.useState)(null),c=Object.entries(o).map(([e,t])=>({key:e,...t,triggers:t.triggers.filter(e=>e.label.toLowerCase().includes(l.toLowerCase())||e.description.toLowerCase().includes(l.toLowerCase()))})).filter(e=>e.triggers.length>0);return(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-3xl max-h-[80vh] flex flex-col mx-4",children:[(0,t.jsxs)("div",{className:"px-6 py-4 border-b",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Select a Trigger"}),(0,t.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:(0,t.jsx)("i",{className:"fas fa-times text-xl"})})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"text",value:l,onChange:e=>n(e.target.value),placeholder:"Search triggers...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,t.jsx)("i",{className:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"})]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:c.map(a=>(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("h4",{className:"flex items-center gap-2 text-sm font-semibold text-gray-500 mb-3",children:[(0,t.jsx)("i",{className:`fas fa-${a.icon}`}),a.label]}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-3",children:a.triggers.map(a=>(0,t.jsxs)("button",{onClick:()=>e(a.type),className:"flex items-start gap-3 p-4 border border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors text-left",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,t.jsx)("i",{className:`fas fa-${a.icon} text-blue-600`})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:a.label}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-0.5",children:a.description})]})]},a.type))})]},a.key))})]})})}function h({onSelect:e,onClose:s}){let[l,n]=(0,a.useState)(""),[r,i]=(0,a.useState)(null),o=Object.entries(c).map(([e,t])=>({key:e,...t,actions:t.actions.filter(e=>e.label.toLowerCase().includes(l.toLowerCase())||e.description.toLowerCase().includes(l.toLowerCase()))})).filter(e=>e.actions.length>0);return(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[80vh] flex flex-col mx-4",children:[(0,t.jsxs)("div",{className:"px-6 py-4 border-b",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Add an Action"}),(0,t.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:(0,t.jsx)("i",{className:"fas fa-times text-xl"})})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"text",value:l,onChange:e=>n(e.target.value),placeholder:"Search actions...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"}),(0,t.jsx)("i",{className:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"})]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:o.map(a=>(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsxs)("h4",{className:"flex items-center gap-2 text-sm font-semibold text-gray-500 mb-3",children:[(0,t.jsx)("i",{className:`fas fa-${a.icon}`}),a.label]}),(0,t.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-3",children:a.actions.map(a=>(0,t.jsxs)("button",{onClick:()=>e(a.type),className:"flex items-start gap-3 p-4 border border-gray-200 rounded-lg hover:border-purple-500 hover:bg-purple-50 transition-colors text-left",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,t.jsx)("i",{className:`fas fa-${a.icon} text-purple-600`})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:a.label}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-0.5 line-clamp-2",children:a.description})]})]},a.type))})]},a.key))})]})})}function b({node:e,subAccountId:s,onUpdate:l,onClose:n,onDelete:r,readOnly:i}){let[o,c]=(0,a.useState)(e.config||{}),[d,p]=(0,a.useState)(e.name),[m,u]=(0,a.useState)(e.delay||0),[x,g]=(0,a.useState)(e.continueOnError??!0);(0,a.useEffect)(()=>{c(e.config||{}),p(e.name),u(e.delay||0),g(e.continueOnError??!0)},[e]);let[h,b]=(0,a.useState)(!1);return(0,t.jsxs)("div",{className:"w-96 bg-white border-l flex flex-col",children:[(0,t.jsxs)("div",{className:"px-4 py-3 border-b flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:"trigger"===e.type?"Configure Trigger":"Configure Action"}),(0,t.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:(0,t.jsx)("i",{className:"fas fa-times"})})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,t.jsx)("input",{type:"text",value:d,onChange:e=>p(e.target.value),disabled:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100"})]}),"trigger"===e.type&&e.triggerType&&(0,t.jsx)(y,{type:e.triggerType,config:o,onChange:c,readOnly:i}),"action"===e.type&&e.actionType&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f,{type:e.actionType,config:o,onChange:c,subAccountId:s,readOnly:i}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,t.jsx)("i",{className:"fas fa-clock mr-2 text-gray-400"}),"Delay (minutes)"]}),(0,t.jsx)("input",{type:"number",min:"0",value:m,onChange:e=>u(parseInt(e.target.value)||0),disabled:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Wait before executing this action"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("input",{type:"checkbox",id:"continueOnError",checked:x,onChange:e=>g(e.target.checked),disabled:i,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,t.jsx)("label",{htmlFor:"continueOnError",className:"text-sm text-gray-700",children:"Continue workflow on error"})]})]})]}),!i&&(0,t.jsxs)("div",{className:"px-4 py-3 border-t flex items-center justify-between",children:["trigger"!==e.type&&(0,t.jsxs)("button",{onClick:r,className:"text-red-600 hover:text-red-700 text-sm",children:[(0,t.jsx)("i",{className:"fas fa-trash mr-1"}),"Delete"]}),(0,t.jsx)("div",{className:"flex-1"}),(0,t.jsx)("button",{onClick:()=>{l({name:d,config:o,delay:m,continueOnError:x}),b(!0),setTimeout(()=>b(!1),2e3)},className:`px-4 py-2 rounded-lg transition-all ${h?"bg-green-600 text-white":"bg-blue-600 text-white hover:bg-blue-700"}`,children:h?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("i",{className:"fas fa-check mr-2"}),"Applied!"]}):"Apply Changes"})]})]})}function y({type:e,config:a,onChange:s,readOnly:l}){let n=(e,t)=>{s({...a,[e]:t})};switch(e){case"contact_tag":return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tag Operation"}),(0,t.jsxs)("select",{value:a.tagOperation||"added",onChange:e=>n("tagOperation",e.target.value),disabled:l,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,t.jsx)("option",{value:"added",children:"Tag Added"}),(0,t.jsx)("option",{value:"removed",children:"Tag Removed"}),(0,t.jsx)("option",{value:"any",children:"Any Change"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tag IDs (comma separated)"}),(0,t.jsx)("input",{type:"text",value:(a.tagIds||[]).join(", "),onChange:e=>n("tagIds",e.target.value.split(",").map(e=>e.trim()).filter(Boolean)),disabled:l,placeholder:"tag-id-1, tag-id-2",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]});case"appointment_status":case"customer_booked_appointment":return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Calendar IDs (optional)"}),(0,t.jsx)("input",{type:"text",value:(a.calendarIds||[]).join(", "),onChange:e=>n("calendarIds",e.target.value.split(",").map(e=>e.trim()).filter(Boolean)),disabled:l,placeholder:"Leave empty for all calendars",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),"appointment_status"===e&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status Filter"}),["scheduled","rescheduled","no_show","cancelled","completed"].map(e=>(0,t.jsxs)("label",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:(a.appointmentStatuses||[]).includes(e),onChange:t=>{let s=a.appointmentStatuses||[];t.target.checked?n("appointmentStatuses",[...s,e]):n("appointmentStatuses",s.filter(t=>t!==e))},disabled:l,className:"w-4 h-4"}),(0,t.jsx)("span",{className:"text-sm capitalize",children:e.replace("_"," ")})]},e))]})]});case"form_submitted":return(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Form ID (optional)"}),(0,t.jsx)("input",{type:"text",value:a.formId||"",onChange:e=>n("formId",e.target.value),disabled:l,placeholder:"Leave empty for all forms",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]});case"email_events":return(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Events"}),["opened","clicked","bounced","unsubscribed"].map(e=>(0,t.jsxs)("label",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:(a.emailEvents||[]).includes(e),onChange:t=>{let s=a.emailEvents||[];t.target.checked?n("emailEvents",[...s,e]):n("emailEvents",s.filter(t=>t!==e))},disabled:l,className:"w-4 h-4"}),(0,t.jsx)("span",{className:"text-sm capitalize",children:e})]},e))]});case"inbound_webhook":return(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Webhook URL"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"text",value:a.webhookUrl||"",readOnly:!0,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg bg-gray-50",placeholder:"URL will be generated on save"}),(0,t.jsx)("button",{className:"px-3 py-2 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200",children:(0,t.jsx)("i",{className:"fas fa-copy"})})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"This URL will receive POST requests to trigger the workflow"})]});case"birthday_reminder":case"custom_date_reminder":return(0,t.jsxs)("div",{className:"space-y-4",children:["custom_date_reminder"===e&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custom Date Field"}),(0,t.jsx)("input",{type:"text",value:a.customDateField||"",onChange:e=>n("customDateField",e.target.value),disabled:l,placeholder:"e.g., anniversary_date",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Days Before Reminder"}),(0,t.jsx)("input",{type:"number",min:"0",value:a.daysBeforeReminder||0,onChange:e=>n("daysBeforeReminder",parseInt(e.target.value)||0),disabled:l,className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]});default:return(0,t.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg",children:(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[(0,t.jsx)("i",{className:"fas fa-info-circle mr-2"}),"Additional configuration options will be available based on your selections."]})})}}function f({type:e,config:l,onChange:n,subAccountId:i,readOnly:o}){let[c,d]=(0,a.useState)([]),[p,m]=(0,a.useState)([]),[u,x]=(0,a.useState)(!1);(0,a.useEffect)(()=>{["create_opportunity","update_opportunity","find_opportunity"].includes(e)&&i&&(x(!0),fetch(`/api/v1/pipelines?subAccountId=${i}&includeStages=true`).then(e=>e.json()).then(e=>{console.log("[ActionConfigEditor] Pipelines API response:",e),e.success&&e.data&&(m(e.data),console.log("[ActionConfigEditor] Loaded pipelines with stages:",e.data.map(e=>({id:e.id,name:e.name,stageCount:e.stages?.length||0}))))}).catch(e=>console.error("Failed to fetch pipelines:",e)).finally(()=>x(!1)))},[e,i]);let g=p.find(e=>e.id===l.opportunityPipelineId),h=g?.stages||[];(0,a.useEffect)(()=>{l.opportunityPipelineId&&(console.log("[ActionConfigEditor] Selected pipeline ID:",l.opportunityPipelineId),console.log("[ActionConfigEditor] Selected pipeline:",g?.name),console.log("[ActionConfigEditor] Available stages:",h))},[l.opportunityPipelineId,g,h]),(0,a.useEffect)(()=>{l.tags&&Array.isArray(l.tags)?d(l.tags):l.tagIds&&Array.isArray(l.tagIds)&&d(l.tagIds.map(e=>({id:e,name:e,slug:e,color:"#3B82F6"})))},[]);let b=(e,t)=>{n({...l,[e]:t})},y=e=>{console.log("[ActionConfigEditor] Pipeline changed to:",e);let t=p.find(t=>t.id===e);console.log("[ActionConfigEditor] Found pipeline:",t?.name,"with stages:",t?.stages?.length),n({...l,opportunityPipelineId:e,opportunityStageId:""})};switch(e){case"send_email":return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),(0,t.jsx)("input",{type:"text",value:l.emailSubject||"",onChange:e=>b("emailSubject",e.target.value),disabled:o,placeholder:"Email subject line",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Email"}),(0,t.jsx)("input",{type:"email",value:l.emailFrom||"",onChange:e=>b("emailFrom",e.target.value),disabled:o,placeholder:"noreply@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Body"}),(0,t.jsx)("textarea",{value:l.emailBody||"",onChange:e=>b("emailBody",e.target.value),disabled:o,rows:6,placeholder:"Email content... Use {{contact.firstName}} for personalization",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Use variables: ","{{contact.firstName}}, {{contact.email}}, {{contact.phone}}"]})]})]});case"send_sms":return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Number"}),(0,t.jsx)("input",{type:"text",value:l.smsFrom||"",onChange:e=>b("smsFrom",e.target.value),disabled:o,placeholder:"+1234567890",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Message"}),(0,t.jsx)("textarea",{value:l.smsMessage||"",onChange:e=>b("smsMessage",e.target.value),disabled:o,rows:4,placeholder:"SMS message... Use {{contact.firstName}} for personalization",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[(l.smsMessage||"").length,"/160 characters"]})]})]});case"add_contact_tag":case"remove_contact_tag":return(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,t.jsx)("i",{className:`fas fa-${"add_contact_tag"===e?"tag":"tags"} mr-2 text-gray-400`}),"add_contact_tag"===e?"Tags to Add":"Tags to Remove"]}),(0,t.jsx)(s,{subAccountId:i,selectedTags:c,onChange:e=>{d(e),n({...l,tags:e,tagIds:e.map(e=>e.id)})},placeholder:"add_contact_tag"===e?"Search or create tags to add...":"Search tags to remove...",disabled:o,allowCreate:"add_contact_tag"===e}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"add_contact_tag"===e?"Type to search existing tags or create new ones":"Select tags to remove from the contact"})]}),c.length>0&&(0,t.jsxs)("div",{className:"text-xs text-gray-400 bg-gray-50 px-2 py-1 rounded",children:["IDs: ",c.map(e=>e.id).join(", ")]})]});case"update_contact_field":return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Set contact field values. Add fields below:"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fields (JSON)"}),(0,t.jsx)("textarea",{value:JSON.stringify(l.contactFields||{},null,2),onChange:e=>{try{b("contactFields",JSON.parse(e.target.value))}catch{}},disabled:o,rows:6,placeholder:'{"firstName": "John", "status": "qualified"}',className:"w-full px-3 py-2 border border-gray-300 rounded-lg font-mono text-sm"})]})]});case"wait_step":return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Wait Duration"}),(0,t.jsx)("input",{type:"number",min:"1",value:l.waitDuration||1,onChange:e=>b("waitDuration",parseInt(e.target.value)||1),disabled:o,className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),(0,t.jsxs)("select",{value:l.waitUnit||"minutes",onChange:e=>b("waitUnit",e.target.value),disabled:o,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,t.jsx)("option",{value:"minutes",children:"Minutes"}),(0,t.jsx)("option",{value:"hours",children:"Hours"}),(0,t.jsx)("option",{value:"days",children:"Days"}),(0,t.jsx)("option",{value:"weeks",children:"Weeks"})]})]})]});case"if_else":return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Add conditions to branch your workflow:"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Conditions (JSON)"}),(0,t.jsx)("textarea",{value:JSON.stringify(l.ifElseConditions||[],null,2),onChange:e=>{try{b("ifElseConditions",JSON.parse(e.target.value))}catch{}},disabled:o,rows:6,placeholder:'[{"field": "contact.tag", "operator": "contains", "value": "VIP"}]',className:"w-full px-3 py-2 border border-gray-300 rounded-lg font-mono text-sm"})]})]});case"webhook":return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Webhook URL"}),(0,t.jsx)("input",{type:"url",value:l.webhookUrl||"",onChange:e=>b("webhookUrl",e.target.value),disabled:o,placeholder:"https://api.example.com/webhook",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Method"}),(0,t.jsxs)("select",{value:l.webhookMethod||"POST",onChange:e=>b("webhookMethod",e.target.value),disabled:o,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,t.jsx)("option",{value:"GET",children:"GET"}),(0,t.jsx)("option",{value:"POST",children:"POST"}),(0,t.jsx)("option",{value:"PUT",children:"PUT"}),(0,t.jsx)("option",{value:"DELETE",children:"DELETE"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Body (JSON)"}),(0,t.jsx)("textarea",{value:JSON.stringify(l.webhookBody||{},null,2),onChange:e=>{try{b("webhookBody",JSON.parse(e.target.value))}catch{}},disabled:o,rows:4,placeholder:'{"contactId": "{{contact.id}}"}',className:"w-full px-3 py-2 border border-gray-300 rounded-lg font-mono text-sm"})]})]});case"add_note":return(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Note Content"}),(0,t.jsx)("textarea",{value:l.noteContent||"",onChange:e=>b("noteContent",e.target.value),disabled:o,rows:4,placeholder:"Enter the note content...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]});case"add_task":return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Task Title"}),(0,t.jsx)("input",{type:"text",value:l.taskTitle||"",onChange:e=>b("taskTitle",e.target.value),disabled:o,placeholder:"Follow up with contact",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date (relative)"}),(0,t.jsx)("input",{type:"text",value:l.taskDueDate||"",onChange:e=>b("taskDueDate",e.target.value),disabled:o,placeholder:"+3 days",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]});case"ai_prompt":return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AI Prompt"}),(0,t.jsx)("textarea",{value:l.aiPrompt||"",onChange:e=>b("aiPrompt",e.target.value),disabled:o,rows:6,placeholder:"Write a personalized follow-up email for {{contact.firstName}}...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"}),(0,t.jsxs)("select",{value:l.aiModel||"gpt-4",onChange:e=>b("aiModel",e.target.value),disabled:o,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,t.jsx)("option",{value:"gpt-4",children:"GPT-4"}),(0,t.jsx)("option",{value:"gpt-3.5-turbo",children:"GPT-3.5 Turbo"}),(0,t.jsx)("option",{value:"claude-3",children:"Claude 3"}),(0,t.jsx)("option",{value:"gemini-pro",children:"Gemini Pro"})]})]})]});case"manual_action":return(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructions for Team"}),(0,t.jsx)("textarea",{value:l.manualActionInstructions||"",onChange:e=>b("manualActionInstructions",e.target.value),disabled:o,rows:4,placeholder:"Instructions for the team member...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]});case"find_opportunity":return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Opportunity to be Found"}),(0,t.jsxs)("select",{value:l.opportunitySearchType||"most_recent",onChange:e=>b("opportunitySearchType",e.target.value),disabled:o,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,t.jsx)("option",{value:"most_recent",children:"Most recently created opportunity"}),(0,t.jsx)("option",{value:"by_name",children:"By opportunity name"}),(0,t.jsx)("option",{value:"by_id",children:"By opportunity ID"}),(0,t.jsx)("option",{value:"by_fields",children:"By custom fields"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fields"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(l.opportunitySearchFields||[]).map((e,a)=>(0,t.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsxs)("select",{value:e.field||"",onChange:t=>{let s=[...l.opportunitySearchFields||[]];s[a]={...e,field:t.target.value},b("opportunitySearchFields",s)},disabled:o,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm bg-white",children:[(0,t.jsx)("option",{value:"",children:"Select field..."}),(0,t.jsxs)("optgroup",{label:"Standard Fields",children:[(0,t.jsx)("option",{value:"opportunity_id",children:"Opportunity ID"}),(0,t.jsx)("option",{value:"opportunity_name",children:"Opportunity Name"}),(0,t.jsx)("option",{value:"pipeline",children:"Pipeline"}),(0,t.jsx)("option",{value:"pipeline_stage",children:"Pipeline Stage"}),(0,t.jsx)("option",{value:"opportunity_value",children:"Opportunity Value"}),(0,t.jsx)("option",{value:"status",children:"Status"}),(0,t.jsx)("option",{value:"opportunity_source",children:"Opportunity Source"})]})]}),(0,t.jsx)("button",{type:"button",onClick:()=>{b("opportunitySearchFields",(l.opportunitySearchFields||[]).filter((e,t)=>t!==a))},disabled:o,className:"p-2 text-gray-400 hover:text-red-500",children:(0,t.jsx)("i",{className:"fas fa-times"})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("select",{value:e.operator||"is",onChange:t=>{let s=[...l.opportunitySearchFields||[]];s[a]={...e,operator:t.target.value},b("opportunitySearchFields",s)},disabled:o,className:"w-28 px-3 py-2 border border-gray-300 rounded-lg text-sm bg-white",children:[(0,t.jsx)("option",{value:"is",children:"Is"}),(0,t.jsx)("option",{value:"is_not",children:"Is not"}),(0,t.jsx)("option",{value:"contains",children:"Contains"}),(0,t.jsx)("option",{value:"starts_with",children:"Starts with"}),(0,t.jsx)("option",{value:"greater_than",children:"Greater than"}),(0,t.jsx)("option",{value:"less_than",children:"Less than"})]}),"status"===e.field?(0,t.jsxs)("select",{value:e.value||"Open",onChange:t=>{let s=[...l.opportunitySearchFields||[]];s[a]={...e,value:t.target.value},b("opportunitySearchFields",s)},disabled:o,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm bg-white",children:[(0,t.jsx)("option",{value:"Open",children:"Open"}),(0,t.jsx)("option",{value:"Won",children:"Won"}),(0,t.jsx)("option",{value:"Lost",children:"Lost"}),(0,t.jsx)("option",{value:"Abandoned",children:"Abandoned"})]}):(0,t.jsx)(r,{value:e.value||"",onChange:t=>{let s=[...l.opportunitySearchFields||[]];s[a]={...e,value:t},b("opportunitySearchFields",s)},disabled:o,placeholder:"Enter value or select variable",className:"flex-1"})]})]},a)),(0,t.jsxs)("button",{type:"button",onClick:()=>{b("opportunitySearchFields",[...l.opportunitySearchFields||[],{field:"",operator:"is",value:""}])},disabled:o,className:"flex items-center gap-2 text-sm text-blue-600 hover:text-blue-700 mt-2",children:[(0,t.jsx)("i",{className:"fas fa-plus-circle"}),"Add field"]})]})]}),(0,t.jsx)("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:(0,t.jsxs)("p",{className:"text-sm text-blue-700",children:[(0,t.jsx)("i",{className:"fas fa-info-circle mr-2"}),"This action creates two branches: ",(0,t.jsx)("strong",{children:"Opportunity Found"})," and ",(0,t.jsx)("strong",{children:"Opportunity Not Found"})]})})]});case"create_opportunity":return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Pipeline ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("select",{value:l.opportunityPipelineId||"",onChange:e=>y(e.target.value),disabled:o||u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-white",children:[(0,t.jsx)("option",{value:"",children:u?"Loading pipelines...":"Select a pipeline"}),p.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]}),0===p.length&&!u&&(0,t.jsxs)("p",{className:"text-xs text-amber-600 mt-1",children:[(0,t.jsx)("i",{className:"fas fa-exclamation-triangle mr-1"}),"No pipelines found. Create a pipeline first."]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Duplicate opportunity"}),(0,t.jsx)("span",{className:"px-2 py-1 text-xs bg-red-100 text-red-600 rounded",children:"Disabled"})]}),(0,t.jsx)("div",{className:"text-xs text-gray-500 uppercase font-medium mt-4",children:"Fields"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Opportunity Name"}),(0,t.jsx)(r,{value:l.opportunityName||"",onChange:e=>b("opportunityName",e),disabled:o,placeholder:"Enter name or select variable"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pipeline Stage"}),(0,t.jsxs)("select",{value:l.opportunityStageId||"",onChange:e=>b("opportunityStageId",e.target.value),disabled:o||!l.opportunityPipelineId,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-white",children:[(0,t.jsx)("option",{value:"",children:l.opportunityPipelineId?0===h.length?"No stages available":"Select a stage":"Select a pipeline first"}),h.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Opportunity Value"}),(0,t.jsx)(r,{value:l.opportunityValue?.toString()||"",onChange:e=>b("opportunityValue",e),disabled:o,placeholder:"Enter value or select variable"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Opportunity Source"}),(0,t.jsx)(r,{value:l.opportunitySource||"",onChange:e=>b("opportunitySource",e),disabled:o,placeholder:"Enter source or select variable"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,t.jsxs)("select",{value:l.opportunityStatus||"open",onChange:e=>b("opportunityStatus",e.target.value),disabled:o,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,t.jsx)("option",{value:"open",children:"Open"}),(0,t.jsx)("option",{value:"won",children:"Won"}),(0,t.jsx)("option",{value:"lost",children:"Lost"}),(0,t.jsx)("option",{value:"abandoned",children:"Abandoned"})]})]})]});case"update_opportunity":return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[(0,t.jsx)("input",{type:"checkbox",checked:l.forceStageMove||!1,onChange:e=>b("forceStageMove",e.target.checked),disabled:o,className:"mt-1"}),(0,t.jsx)("div",{className:"text-sm",children:(0,t.jsx)("p",{className:"text-gray-700",children:"When toggled on, opportunity will be moved to the selected stage even if the stage is before the opportunity's current stage."})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Duplicate opportunity"}),(0,t.jsx)("span",{className:"px-2 py-1 text-xs bg-red-100 text-red-600 rounded",children:"Disabled"})]}),(0,t.jsx)("div",{className:"text-xs text-gray-500 uppercase font-medium mt-4",children:"Fields"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pipeline"}),(0,t.jsxs)("select",{value:l.opportunityPipelineId||"",onChange:e=>y(e.target.value),disabled:o||u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-white",children:[(0,t.jsx)("option",{value:"",children:u?"Loading pipelines...":"Select a pipeline"}),p.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Opportunity Name"}),(0,t.jsx)(r,{value:l.opportunityName||"",onChange:e=>b("opportunityName",e),disabled:o,placeholder:"Enter name or select variable"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pipeline Stage"}),(0,t.jsxs)("select",{value:l.opportunityStageId||"",onChange:e=>b("opportunityStageId",e.target.value),disabled:o||!l.opportunityPipelineId,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-white",children:[(0,t.jsx)("option",{value:"",children:l.opportunityPipelineId?0===h.length?"No stages available":"Select a stage":"Select a pipeline first"}),h.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Opportunity Value"}),(0,t.jsx)(r,{value:l.opportunityValue?.toString()||"",onChange:e=>b("opportunityValue",e),disabled:o,placeholder:"Enter value or select variable"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Opportunity Source"}),(0,t.jsx)(r,{value:l.opportunitySource||"",onChange:e=>b("opportunitySource",e),disabled:o,placeholder:"Enter source or select variable"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,t.jsxs)("select",{value:l.opportunityStatus||"open",onChange:e=>b("opportunityStatus",e.target.value),disabled:o,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,t.jsx)("option",{value:"open",children:"Open"}),(0,t.jsx)("option",{value:"won",children:"Won"}),(0,t.jsx)("option",{value:"lost",children:"Lost"}),(0,t.jsx)("option",{value:"abandoned",children:"Abandoned"})]})]})]});case"find_contact":return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact to be Found"}),(0,t.jsxs)("select",{value:l.contactSearchType||"most_recent",onChange:e=>b("contactSearchType",e.target.value),disabled:o,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,t.jsx)("option",{value:"most_recent",children:"Most recently created contact"}),(0,t.jsx)("option",{value:"by_email",children:"By email address"}),(0,t.jsx)("option",{value:"by_phone",children:"By phone number"}),(0,t.jsx)("option",{value:"by_id",children:"By contact ID"}),(0,t.jsx)("option",{value:"by_fields",children:"By custom fields"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Criteria"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(l.contactSearchFields||[]).map((e,a)=>(0,t.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsxs)("select",{value:e.field||"",onChange:t=>{let s=[...l.contactSearchFields||[]];s[a]={...e,field:t.target.value},b("contactSearchFields",s)},disabled:o,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm bg-white",children:[(0,t.jsx)("option",{value:"",children:"Select field..."}),(0,t.jsxs)("optgroup",{label:"Standard Fields",children:[(0,t.jsx)("option",{value:"contact_id",children:"Contact ID"}),(0,t.jsx)("option",{value:"email",children:"Email"}),(0,t.jsx)("option",{value:"phone",children:"Phone"}),(0,t.jsx)("option",{value:"first_name",children:"First Name"}),(0,t.jsx)("option",{value:"last_name",children:"Last Name"}),(0,t.jsx)("option",{value:"full_name",children:"Full Name"}),(0,t.jsx)("option",{value:"company",children:"Company"}),(0,t.jsx)("option",{value:"source",children:"Source"}),(0,t.jsx)("option",{value:"city",children:"City"}),(0,t.jsx)("option",{value:"state",children:"State"})]})]}),(0,t.jsx)("button",{type:"button",onClick:()=>{b("contactSearchFields",(l.contactSearchFields||[]).filter((e,t)=>t!==a))},disabled:o,className:"p-2 text-gray-400 hover:text-red-500",children:(0,t.jsx)("i",{className:"fas fa-times"})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("select",{value:e.operator||"is",onChange:t=>{let s=[...l.contactSearchFields||[]];s[a]={...e,operator:t.target.value},b("contactSearchFields",s)},disabled:o,className:"w-28 px-3 py-2 border border-gray-300 rounded-lg text-sm bg-white",children:[(0,t.jsx)("option",{value:"is",children:"Is"}),(0,t.jsx)("option",{value:"is_not",children:"Is not"}),(0,t.jsx)("option",{value:"contains",children:"Contains"}),(0,t.jsx)("option",{value:"starts_with",children:"Starts with"}),(0,t.jsx)("option",{value:"ends_with",children:"Ends with"}),(0,t.jsx)("option",{value:"is_empty",children:"Is empty"}),(0,t.jsx)("option",{value:"is_not_empty",children:"Is not empty"})]}),(0,t.jsx)(r,{value:e.value||"",onChange:t=>{let s=[...l.contactSearchFields||[]];s[a]={...e,value:t},b("contactSearchFields",s)},disabled:o,placeholder:"Enter value or select variable",className:"flex-1"})]})]},a)),(0,t.jsxs)("button",{type:"button",onClick:()=>{b("contactSearchFields",[...l.contactSearchFields||[],{field:"",operator:"is",value:""}])},disabled:o,className:"flex items-center gap-2 text-sm text-blue-600 hover:text-blue-700 mt-2",children:[(0,t.jsx)("i",{className:"fas fa-plus-circle"}),"Add search field"]})]})]}),(0,t.jsx)("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:(0,t.jsxs)("p",{className:"text-sm text-blue-700",children:[(0,t.jsx)("i",{className:"fas fa-info-circle mr-2"}),"This action creates two branches: ",(0,t.jsx)("strong",{children:"Contact Found"})," and ",(0,t.jsx)("strong",{children:"Contact Not Found"})]})})]});case"if_else":return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Condition Rules"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:'Define conditions to evaluate. Contact takes the "Yes" path if conditions are met.'}),(0,t.jsxs)("div",{className:"space-y-3",children:[(l.ifElseConditions||[]).map((e,a)=>(0,t.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[a>0&&(0,t.jsxs)("select",{value:e.logic||"AND",onChange:t=>{let s=[...l.ifElseConditions||[]];s[a]={...e,logic:t.target.value},b("ifElseConditions",s)},disabled:o,className:"mb-2 px-2 py-1 border border-gray-300 rounded text-xs bg-white",children:[(0,t.jsx)("option",{value:"AND",children:"AND"}),(0,t.jsx)("option",{value:"OR",children:"OR"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsxs)("select",{value:e.field||"",onChange:t=>{let s=[...l.ifElseConditions||[]];s[a]={...e,field:t.target.value},b("ifElseConditions",s)},disabled:o,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm bg-white",children:[(0,t.jsx)("option",{value:"",children:"Select field..."}),(0,t.jsxs)("optgroup",{label:"Contact Fields",children:[(0,t.jsx)("option",{value:"contact.firstName",children:"First Name"}),(0,t.jsx)("option",{value:"contact.lastName",children:"Last Name"}),(0,t.jsx)("option",{value:"contact.email",children:"Email"}),(0,t.jsx)("option",{value:"contact.phone",children:"Phone"}),(0,t.jsx)("option",{value:"contact.company",children:"Company"}),(0,t.jsx)("option",{value:"contact.source",children:"Source"}),(0,t.jsx)("option",{value:"contact.city",children:"City"}),(0,t.jsx)("option",{value:"contact.state",children:"State"})]}),(0,t.jsxs)("optgroup",{label:"Opportunity Fields",children:[(0,t.jsx)("option",{value:"opportunity.name",children:"Opportunity Name"}),(0,t.jsx)("option",{value:"opportunity.value",children:"Opportunity Value"}),(0,t.jsx)("option",{value:"opportunity.status",children:"Opportunity Status"}),(0,t.jsx)("option",{value:"opportunity.stage",children:"Pipeline Stage"})]}),(0,t.jsxs)("optgroup",{label:"Custom Fields",children:[(0,t.jsx)("option",{value:"custom.field1",children:"Custom Field 1"}),(0,t.jsx)("option",{value:"custom.field2",children:"Custom Field 2"})]})]}),(0,t.jsx)("button",{type:"button",onClick:()=>{b("ifElseConditions",(l.ifElseConditions||[]).filter((e,t)=>t!==a))},disabled:o,className:"p-2 text-gray-400 hover:text-red-500",children:(0,t.jsx)("i",{className:"fas fa-times"})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("select",{value:e.operator||"equals",onChange:t=>{let s=[...l.ifElseConditions||[]];s[a]={...e,operator:t.target.value},b("ifElseConditions",s)},disabled:o,className:"w-32 px-3 py-2 border border-gray-300 rounded-lg text-sm bg-white",children:[(0,t.jsx)("option",{value:"equals",children:"Equals"}),(0,t.jsx)("option",{value:"not_equals",children:"Does not equal"}),(0,t.jsx)("option",{value:"contains",children:"Contains"}),(0,t.jsx)("option",{value:"not_contains",children:"Does not contain"}),(0,t.jsx)("option",{value:"starts_with",children:"Starts with"}),(0,t.jsx)("option",{value:"ends_with",children:"Ends with"}),(0,t.jsx)("option",{value:"greater_than",children:"Greater than"}),(0,t.jsx)("option",{value:"less_than",children:"Less than"}),(0,t.jsx)("option",{value:"is_empty",children:"Is empty"}),(0,t.jsx)("option",{value:"is_not_empty",children:"Is not empty"})]}),(0,t.jsx)(r,{value:e.value||"",onChange:t=>{let s=[...l.ifElseConditions||[]];s[a]={...e,value:t},b("ifElseConditions",s)},disabled:o,placeholder:"Enter value...",className:"flex-1"})]})]},a)),(0,t.jsxs)("button",{type:"button",onClick:()=>{b("ifElseConditions",[...l.ifElseConditions||[],{field:"",operator:"equals",value:"",logic:"AND"}])},disabled:o,className:"flex items-center gap-2 text-sm text-blue-600 hover:text-blue-700 mt-2",children:[(0,t.jsx)("i",{className:"fas fa-plus-circle"}),"Add condition"]})]})]}),(0,t.jsx)("div",{className:"mt-4 p-3 bg-cyan-50 rounded-lg",children:(0,t.jsxs)("p",{className:"text-sm text-cyan-700",children:[(0,t.jsx)("i",{className:"fas fa-code-branch mr-2"}),(0,t.jsx)("strong",{children:"Yes (Condition Met):"})," Contact goes here if ALL conditions are true",(0,t.jsx)("br",{}),(0,t.jsx)("strong",{children:"No (Condition Not Met):"})," Contact goes here if conditions are false"]})})]});case"split":return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Split Type"}),(0,t.jsxs)("select",{value:l.splitType||"percentage",onChange:e=>b("splitType",e.target.value),disabled:o,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,t.jsx)("option",{value:"percentage",children:"By Percentage"}),(0,t.jsx)("option",{value:"equal",children:"Equal Split (50/50)"}),(0,t.jsx)("option",{value:"random",children:"Random Distribution"})]})]}),"percentage"===l.splitType&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Path A Percentage"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"range",min:"0",max:"100",value:l.splitPercentage||50,onChange:e=>b("splitPercentage",parseInt(e.target.value)),disabled:o,className:"flex-1"}),(0,t.jsxs)("span",{className:"text-sm font-medium w-16 text-right",children:[l.splitPercentage||50,"%"]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,t.jsxs)("span",{className:"text-green-600",children:["Path A: ",l.splitPercentage||50,"%"]}),(0,t.jsxs)("span",{className:"text-orange-600",children:["Path B: ",100-(l.splitPercentage||50),"%"]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Test Name (Optional)"}),(0,t.jsx)("input",{type:"text",value:l.splitTestName||"",onChange:e=>b("splitTestName",e.target.value),disabled:o,placeholder:"e.g., Email Subject Test A/B",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Give your A/B test a name to track results"})]}),(0,t.jsx)("div",{className:"mt-4 p-3 bg-purple-50 rounded-lg",children:(0,t.jsxs)("p",{className:"text-sm text-purple-700",children:[(0,t.jsx)("i",{className:"fas fa-random mr-2"}),"This action splits contacts into two paths for A/B testing:",(0,t.jsx)("br",{}),(0,t.jsx)("span",{className:"text-green-600 font-medium",children:"Path A"})," and ",(0,t.jsx)("span",{className:"text-orange-600 font-medium",children:"Path B"})]})})]});case"goal_event":return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Goal Type"}),(0,t.jsxs)("select",{value:l.goalType||"conversion",onChange:e=>b("goalType",e.target.value),disabled:o,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,t.jsx)("option",{value:"conversion",children:"Conversion Goal"}),(0,t.jsx)("option",{value:"purchase",children:"Purchase Made"}),(0,t.jsx)("option",{value:"appointment",children:"Appointment Booked"}),(0,t.jsx)("option",{value:"form_submit",children:"Form Submitted"}),(0,t.jsx)("option",{value:"tag_applied",children:"Tag Applied"}),(0,t.jsx)("option",{value:"custom",children:"Custom Event"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Goal Name"}),(0,t.jsx)("input",{type:"text",value:l.goalName||"",onChange:e=>b("goalName",e.target.value),disabled:o,placeholder:"e.g., Completed Purchase",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Wait Duration"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"number",min:"1",value:l.goalWaitDuration||7,onChange:e=>b("goalWaitDuration",parseInt(e.target.value)),disabled:o,className:"w-24 px-3 py-2 border border-gray-300 rounded-lg"}),(0,t.jsxs)("select",{value:l.goalWaitUnit||"days",onChange:e=>b("goalWaitUnit",e.target.value),disabled:o,className:"px-3 py-2 border border-gray-300 rounded-lg",children:[(0,t.jsx)("option",{value:"minutes",children:"Minutes"}),(0,t.jsx)("option",{value:"hours",children:"Hours"}),(0,t.jsx)("option",{value:"days",children:"Days"})]})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"How long to wait for the goal to be achieved"})]}),(0,t.jsx)("div",{className:"mt-4 p-3 bg-yellow-50 rounded-lg",children:(0,t.jsxs)("p",{className:"text-sm text-yellow-700",children:[(0,t.jsx)("i",{className:"fas fa-bullseye mr-2"}),(0,t.jsx)("strong",{children:"Goal Achieved:"})," Contact completes the goal within the wait time",(0,t.jsx)("br",{}),(0,t.jsx)("strong",{children:"Goal Not Achieved:"})," Contact does not complete the goal in time"]})})]});default:return(0,t.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg",children:(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:[(0,t.jsx)("i",{className:"fas fa-info-circle mr-2"}),"Configuration options for this action type will be available in a future update."]})})}}e.s(["default",()=>x],50669)}]);