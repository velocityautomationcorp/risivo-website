module.exports=[55564,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(33840);function f(){let a=(0,d.useRouter)(),f=(0,d.useSearchParams)().get("template"),[g,h]=(0,c.useState)("details"),[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)([]),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(null),y="b0000000-0000-0000-0000-000000000001";(0,c.useEffect)(()=>{z(),f&&A(f)},[f]);let z=async()=>{try{let a=await fetch(`/api/v1/workflows/folders?subAccountId=${y}`),b=await a.json();b.success&&p(b.data||[])}catch(a){console.error("Error loading folders:",a)}},A=async a=>{t(!0);try{let b=await fetch(`/api/v1/workflows/templates?id=${a}`),c=await b.json();c.success&&c.data&&(r(c.data),j(c.data.name+" (Copy)"),l(c.data.description||""))}catch(a){console.error("Error loading template:",a)}finally{t(!1)}},B=async(b,c)=>{v(!0),x(null);try{let d=await fetch("/api/v1/workflows",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subAccountId:y,name:i,description:k,folderId:m||void 0,trigger:b,actions:c.map(a=>({type:a.type,name:a.name,config:a.config,delay:a.delay,continueOnError:a.continueOnError,order:a.order,conditions:a.conditions})),status:"draft"})}),e=await d.json();e.success&&e.data?a.push(`/sub-account/accelerators/${e.data.id}`):x(e.error||"Failed to create workflow")}catch(a){console.error("Error saving workflow:",a),x("Failed to save workflow")}finally{v(!1)}},C=()=>{"builder"===g?confirm("Are you sure you want to discard your changes?")&&a.push("/sub-account/accelerators"):a.push("/sub-account/accelerators")};return s?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Loading template..."})]})}):"details"===g?(0,b.jsxs)("div",{className:"max-w-2xl mx-auto py-12 px-4",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)("button",{onClick:C,className:"text-gray-600 hover:text-gray-800 flex items-center gap-2 mb-4",children:[(0,b.jsx)("i",{className:"fas fa-arrow-left"}),"Back to Workflows"]}),(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:q?"Create from Template":"Create New Workflow"}),(0,b.jsx)("p",{className:"text-gray-600 mt-2",children:q?`You're creating a workflow based on "${q.name}"`:"Give your workflow a name and configure its basic settings"})]}),q&&(0,b.jsx)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-100 rounded-xl",children:(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,b.jsx)("i",{className:"fas fa-magic text-blue-600 text-xl"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900",children:q.name}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:q.description}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,b.jsx)("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs rounded",children:q.category.replace(/_/g," ")}),(0,b.jsxs)("span",{className:"text-xs text-gray-500",children:["Used ",q.usageCount?.toLocaleString()||0," times"]})]})]})]})}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 space-y-6",children:[w&&(0,b.jsx)("div",{className:"p-4 bg-red-50 border border-red-100 rounded-lg",children:(0,b.jsx)("p",{className:"text-red-600 text-sm",children:w})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Workflow Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",value:i,onChange:a=>j(a.target.value),placeholder:"e.g., Lead Follow-up Sequence",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,b.jsx)("textarea",{value:k,onChange:a=>l(a.target.value),placeholder:"Describe what this workflow does...",rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Folder (optional)"}),(0,b.jsxs)("select",{value:m||"",onChange:a=>n(a.target.value||null),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"",children:"No folder"}),o.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]}),(0,b.jsxs)("div",{className:"pt-4 flex justify-end gap-3",children:[(0,b.jsx)("button",{onClick:C,className:"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,b.jsxs)("button",{onClick:()=>{i.trim()?(x(null),h("builder")):x("Please enter a workflow name")},className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:["Continue to Builder",(0,b.jsx)("i",{className:"fas fa-arrow-right"})]})]})]})]}):(0,b.jsxs)("div",{className:"h-[calc(100vh-64px)]",children:[(0,b.jsx)(e.default,{initialTrigger:q?.trigger,initialActions:q?.actions?.map((a,b)=>({...a,id:`action-${b}`,order:b,continueOnError:a.continueOnError??!0})),onSave:B,onCancel:C}),u&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl p-8 text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Creating workflow..."})]})}),w&&(0,b.jsx)("div",{className:"fixed bottom-4 right-4 bg-red-600 text-white px-4 py-3 rounded-lg shadow-lg z-50",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("i",{className:"fas fa-exclamation-circle"}),(0,b.jsx)("span",{children:w}),(0,b.jsx)("button",{onClick:()=>x(null),className:"ml-2",children:(0,b.jsx)("i",{className:"fas fa-times"})})]})})]})}function g(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-[#0a0a0a] flex items-center justify-center",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),children:(0,b.jsx)(f,{})})}a.s(["default",()=>g,"dynamic",0,"force-dynamic"])}];

//# sourceMappingURL=app_sub-account_accelerators_new_page_tsx_fe1f3bf1._.js.map