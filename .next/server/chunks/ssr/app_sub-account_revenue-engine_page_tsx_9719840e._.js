module.exports=[59741,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(50944),f=a.i(86377);async function g(a,b){try{let c=await fetch(`/api/v1/revenue-engine${a}`,{headers:{"Content-Type":"application/json",...b?.headers},...b}),d=await c.json();if(!c.ok)return{success:!1,error:d.error||"Request failed"};return{success:!0,data:d.data}}catch(a){return console.error("API Error:",a),{success:!1,error:a.message||"Network error"}}}function h(a,b=[]){let[d,e]=(0,c.useState)(null),[f,g]=(0,c.useState)(!0),[i,j]=(0,c.useState)(null),k=(0,c.useCallback)(async()=>{g(!0),j(null);let b=await a();b.success&&b.data?e(b.data):j(b.error||"Failed to fetch data"),g(!1)},b);return(0,c.useEffect)(()=>{k()},[k]),{data:d,loading:f,error:i,refetch:k,setData:e}}function i({isOpen:a,onClose:d,title:e,children:f,size:g="md"}){let h=(0,c.useRef)(null);return((0,c.useEffect)(()=>{let b=a=>{"Escape"===a.key&&d()};return a&&(document.addEventListener("keydown",b),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",b),document.body.style.overflow="unset"}},[a,d]),a)?(0,b.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,b.jsxs)("div",{className:"flex min-h-full items-center justify-center p-4",children:[(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:d}),(0,b.jsxs)("div",{ref:h,className:`relative bg-white rounded-lg shadow-xl w-full ${{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-6xl"}[g]} max-h-[90vh] overflow-hidden flex flex-col`,children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:e}),(0,b.jsx)("button",{onClick:d,className:"p-1 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:(0,b.jsx)("i",{className:"fas fa-times text-lg"})})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:f})]})]})}):null}function j({subAccountId:a,initialData:d,contacts:e=[],onSubmit:f,onCancel:g,isLoading:h}){let[i,j]=(0,c.useState)({contactId:d?.contactId||"",contactName:d?.contactName||"",contactEmail:d?.contactEmail||"",dueDate:d?.dueDate||new Date(Date.now()+2592e6).toISOString().split("T")[0],items:d?.items||[{id:"1",description:"",quantity:1,unitPrice:0,total:0}],notes:d?.notes||"",currency:d?.currency||"USD",taxRate:d?.taxRate||0,discountType:d?.discountType,discountValue:d?.discountValue||0}),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(!1),o=e.filter(a=>`${a.firstName} ${a.lastName}`.toLowerCase().includes(k.toLowerCase())||a.email.toLowerCase().includes(k.toLowerCase())),p=i.items.reduce((a,b)=>a+b.total,0),q="percentage"===i.discountType?p*((i.discountValue||0)/100):i.discountValue||0,r=p-q,s=r*((i.taxRate||0)/100),t=r+s,u=(a,b,c)=>{let d=[...i.items];d[a]={...d[a],[b]:c},("quantity"===b||"unitPrice"===b)&&(d[a].total=d[a].quantity*d[a].unitPrice),j({...i,items:d})},v=async a=>{(a.preventDefault(),i.contactId||i.contactEmail)?i.items.every(a=>!a.description||0===a.total)?alert("Please add at least one item with a description and amount"):await f(i):alert("Please select a contact or enter an email address")};return(0,b.jsxs)("form",{onSubmit:v,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,b.jsx)("i",{className:"fas fa-user mr-2 text-gray-400"}),"Client Information"]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Select Contact"}),(0,b.jsx)("input",{type:"text",value:k,onChange:a=>{l(a.target.value),n(!0)},onFocus:()=>n(!0),placeholder:"Search contacts...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"}),m&&o.length>0&&(0,b.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:o.map(a=>(0,b.jsxs)("button",{type:"button",onClick:()=>{j({...i,contactId:a.id,contactName:`${a.firstName} ${a.lastName}`,contactEmail:a.email}),l(`${a.firstName} ${a.lastName}`),n(!1)},className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center justify-between",children:[(0,b.jsxs)("span",{className:"font-medium",children:[a.firstName," ",a.lastName]}),(0,b.jsx)("span",{className:"text-sm text-gray-500",children:a.email})]},a.id))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Email"}),(0,b.jsx)("input",{type:"email",value:i.contactEmail,onChange:a=>j({...i,contactEmail:a.target.value}),placeholder:"client@example.com",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,b.jsx)("i",{className:"fas fa-file-invoice mr-2 text-gray-400"}),"Invoice Details"]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Due Date"}),(0,b.jsx)("input",{type:"date",value:i.dueDate,onChange:a=>j({...i,dueDate:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Currency"}),(0,b.jsxs)("select",{value:i.currency,onChange:a=>j({...i,currency:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"USD",children:"USD - US Dollar"}),(0,b.jsx)("option",{value:"EUR",children:"EUR - Euro"}),(0,b.jsx)("option",{value:"GBP",children:"GBP - British Pound"}),(0,b.jsx)("option",{value:"CAD",children:"CAD - Canadian Dollar"}),(0,b.jsx)("option",{value:"AUD",children:"AUD - Australian Dollar"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Tax Rate (%)"}),(0,b.jsx)("input",{type:"number",value:i.taxRate||"",onChange:a=>j({...i,taxRate:parseFloat(a.target.value)||0}),placeholder:"0",min:"0",max:"100",step:"0.01",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,b.jsx)("i",{className:"fas fa-list mr-2 text-gray-400"}),"Line Items"]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"grid grid-cols-12 gap-2 text-xs font-medium text-gray-500 uppercase",children:[(0,b.jsx)("div",{className:"col-span-5",children:"Description"}),(0,b.jsx)("div",{className:"col-span-2 text-right",children:"Quantity"}),(0,b.jsx)("div",{className:"col-span-2 text-right",children:"Unit Price"}),(0,b.jsx)("div",{className:"col-span-2 text-right",children:"Total"}),(0,b.jsx)("div",{className:"col-span-1"})]}),i.items.map((a,c)=>(0,b.jsxs)("div",{className:"grid grid-cols-12 gap-2 items-center",children:[(0,b.jsx)("div",{className:"col-span-5",children:(0,b.jsx)("input",{type:"text",value:a.description,onChange:a=>u(c,"description",a.target.value),placeholder:"Item description",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent"})}),(0,b.jsx)("div",{className:"col-span-2",children:(0,b.jsx)("input",{type:"number",value:a.quantity,onChange:a=>u(c,"quantity",parseInt(a.target.value)||0),min:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm text-right focus:ring-2 focus:ring-green-500 focus:border-transparent"})}),(0,b.jsx)("div",{className:"col-span-2",children:(0,b.jsx)("input",{type:"number",value:a.unitPrice||"",onChange:a=>u(c,"unitPrice",parseFloat(a.target.value)||0),placeholder:"0.00",min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm text-right focus:ring-2 focus:ring-green-500 focus:border-transparent"})}),(0,b.jsxs)("div",{className:"col-span-2 text-right font-medium",children:["$",a.total.toFixed(2)]}),(0,b.jsx)("div",{className:"col-span-1 text-center",children:(0,b.jsx)("button",{type:"button",onClick:()=>(a=>{if(i.items.length>1){let b=i.items.filter((b,c)=>c!==a);j({...i,items:b})}})(c),disabled:1===i.items.length,className:"p-1 text-gray-400 hover:text-red-600 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,b.jsx)("i",{className:"fas fa-trash-alt"})})})]},a.id)),(0,b.jsxs)("button",{type:"button",onClick:()=>{j({...i,items:[...i.items,{id:Date.now().toString(),description:"",quantity:1,unitPrice:0,total:0}]})},className:"flex items-center gap-2 px-3 py-2 text-sm text-green-600 hover:bg-green-50 rounded-lg",children:[(0,b.jsx)("i",{className:"fas fa-plus"}),"Add Line Item"]})]}),(0,b.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsxs)("div",{className:"w-64 space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Subtotal"}),(0,b.jsxs)("span",{className:"font-medium",children:["$",p.toFixed(2)]})]}),q>0&&(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Discount"}),(0,b.jsxs)("span",{className:"text-red-600",children:["-$",q.toFixed(2)]})]}),s>0&&(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsxs)("span",{className:"text-gray-500",children:["Tax (",i.taxRate,"%)"]}),(0,b.jsxs)("span",{className:"font-medium",children:["$",s.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-lg font-bold pt-2 border-t border-gray-200",children:[(0,b.jsx)("span",{children:"Total"}),(0,b.jsxs)("span",{className:"text-green-600",children:["$",t.toFixed(2)]})]})]})})})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,b.jsx)("i",{className:"fas fa-sticky-note mr-2 text-gray-400"}),"Notes (Optional)"]}),(0,b.jsx)("textarea",{value:i.notes,onChange:a=>j({...i,notes:a.target.value}),placeholder:"Add any notes or payment instructions...",rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent resize-none"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,b.jsx)("button",{type:"button",onClick:g,disabled:h,className:"px-6 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:h,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors",children:h?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("i",{className:"fas fa-spinner fa-spin"}),(0,b.jsx)("span",{children:"Saving..."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("i",{className:"fas fa-check"}),(0,b.jsx)("span",{children:"Create Invoice"})]})})]})]})}function k({subAccountId:a,initialData:d,onSubmit:e,onCancel:f,isLoading:g}){let[h,i]=(0,c.useState)({name:d?.name||"",description:d?.description||"",type:d?.type||"digital",price:d?.price||0,compareAtPrice:d?.compareAtPrice,currency:d?.currency||"USD",sku:d?.sku||"",barcode:d?.barcode||"",trackInventory:d?.trackInventory||!1,inventory:d?.inventory||0,weight:d?.weight,weightUnit:d?.weightUnit||"kg",status:d?.status||"draft",taxable:d?.taxable!==!1,images:d?.images||[],variants:d?.variants||[]}),[j,k]=(0,c.useState)(h.variants&&h.variants.length>0),[l,m]=(0,c.useState)(""),n=()=>{i({...h,variants:[...h.variants||[],{name:"",price:void 0,inventory:void 0}]})},o=(a,b,c)=>{let d=[...h.variants||[]];d[a]={...d[a],[b]:c},i({...h,variants:d})},p=async a=>{(a.preventDefault(),h.name)?h.price<0?alert("Price cannot be negative"):await e(h):alert("Please enter a product name")};return(0,b.jsxs)("form",{onSubmit:p,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,b.jsx)("i",{className:"fas fa-box mr-2 text-gray-400"}),"Basic Information"]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Product Name *"}),(0,b.jsx)("input",{type:"text",value:h.name,onChange:a=>i({...h,name:a.target.value}),placeholder:"Enter product name",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Description"}),(0,b.jsx)("textarea",{value:h.description,onChange:a=>i({...h,description:a.target.value}),placeholder:"Describe your product...",rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent resize-none"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Product Type"}),(0,b.jsxs)("select",{value:h.type,onChange:a=>i({...h,type:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"physical",children:"Physical Product"}),(0,b.jsx)("option",{value:"digital",children:"Digital Product"}),(0,b.jsx)("option",{value:"service",children:"Service"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Status"}),(0,b.jsxs)("select",{value:h.status,onChange:a=>i({...h,status:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"draft",children:"Draft"}),(0,b.jsx)("option",{value:"active",children:"Active"}),(0,b.jsx)("option",{value:"archived",children:"Archived"})]})]})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,b.jsx)("i",{className:"fas fa-images mr-2 text-gray-400"}),"Images"]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:"url",value:l,onChange:a=>m(a.target.value),placeholder:"Enter image URL",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"}),(0,b.jsx)("button",{type:"button",onClick:()=>{l&&!h.images.includes(l)&&(i({...h,images:[...h.images,l]}),m(""))},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:(0,b.jsx)("i",{className:"fas fa-plus"})})]}),h.images.length>0&&(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:h.images.map((a,c)=>(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)("img",{src:a,alt:`Product ${c+1}`,className:"w-20 h-20 object-cover rounded-lg border border-gray-200"}),(0,b.jsx)("button",{type:"button",onClick:()=>{let a;return a=h.images.filter((a,b)=>b!==c),void i({...h,images:a})},className:"absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white rounded-full text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:(0,b.jsx)("i",{className:"fas fa-times"})})]},c))})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,b.jsx)("i",{className:"fas fa-dollar-sign mr-2 text-gray-400"}),"Pricing"]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Price *"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),(0,b.jsx)("input",{type:"number",value:h.price||"",onChange:a=>i({...h,price:parseFloat(a.target.value)||0}),placeholder:"0.00",min:"0",step:"0.01",className:"w-full pl-8 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Compare at Price"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),(0,b.jsx)("input",{type:"number",value:h.compareAtPrice||"",onChange:a=>i({...h,compareAtPrice:parseFloat(a.target.value)||void 0}),placeholder:"0.00",min:"0",step:"0.01",className:"w-full pl-8 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Currency"}),(0,b.jsxs)("select",{value:h.currency,onChange:a=>i({...h,currency:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"USD",children:"USD"}),(0,b.jsx)("option",{value:"EUR",children:"EUR"}),(0,b.jsx)("option",{value:"GBP",children:"GBP"}),(0,b.jsx)("option",{value:"CAD",children:"CAD"})]})]})]}),(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:h.taxable,onChange:a=>i({...h,taxable:a.target.checked}),className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),(0,b.jsx)("span",{className:"text-sm text-gray-700",children:"Charge tax on this product"})]})})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,b.jsx)("i",{className:"fas fa-warehouse mr-2 text-gray-400"}),"Inventory"]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"SKU"}),(0,b.jsx)("input",{type:"text",value:h.sku,onChange:a=>i({...h,sku:a.target.value}),placeholder:"Stock Keeping Unit",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Barcode"}),(0,b.jsx)("input",{type:"text",value:h.barcode,onChange:a=>i({...h,barcode:a.target.value}),placeholder:"ISBN, UPC, etc.",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]}),(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:h.trackInventory,onChange:a=>i({...h,trackInventory:a.target.checked}),className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),(0,b.jsx)("span",{className:"text-sm text-gray-700",children:"Track quantity"})]}),h.trackInventory&&(0,b.jsxs)("div",{className:"w-48",children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Quantity"}),(0,b.jsx)("input",{type:"number",value:h.inventory||"",onChange:a=>i({...h,inventory:parseInt(a.target.value)||0}),placeholder:"0",min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]})]}),"physical"===h.type&&(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,b.jsx)("i",{className:"fas fa-shipping-fast mr-2 text-gray-400"}),"Shipping"]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Weight"}),(0,b.jsx)("input",{type:"number",value:h.weight||"",onChange:a=>i({...h,weight:parseFloat(a.target.value)||void 0}),placeholder:"0.0",min:"0",step:"0.01",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Weight Unit"}),(0,b.jsxs)("select",{value:h.weightUnit,onChange:a=>i({...h,weightUnit:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"kg",children:"Kilograms (kg)"}),(0,b.jsx)("option",{value:"lb",children:"Pounds (lb)"}),(0,b.jsx)("option",{value:"oz",children:"Ounces (oz)"}),(0,b.jsx)("option",{value:"g",children:"Grams (g)"})]})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsxs)("h3",{className:"text-sm font-medium text-gray-900",children:[(0,b.jsx)("i",{className:"fas fa-layer-group mr-2 text-gray-400"}),"Variants"]}),!j&&(0,b.jsx)("button",{type:"button",onClick:()=>{k(!0),h.variants?.length||n()},className:"text-sm text-green-600 hover:text-green-700",children:"+ Add Variants"})]}),j&&(0,b.jsxs)("div",{className:"space-y-3",children:[h.variants?.map((a,c)=>(0,b.jsxs)("div",{className:"flex gap-3 items-start p-3 bg-gray-50 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex-1 grid grid-cols-3 gap-3",children:[(0,b.jsx)("input",{type:"text",value:a.name,onChange:a=>o(c,"name",a.target.value),placeholder:"Variant name (e.g., Size: Large)",className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"}),(0,b.jsx)("input",{type:"text",value:a.sku||"",onChange:a=>o(c,"sku",a.target.value),placeholder:"SKU",className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"}),(0,b.jsx)("input",{type:"number",value:a.price??"",onChange:a=>o(c,"price",parseFloat(a.target.value)||void 0),placeholder:"Price (optional)",className:"px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),(0,b.jsx)("button",{type:"button",onClick:()=>{let a;return a=(h.variants||[]).filter((a,b)=>b!==c),void(i({...h,variants:a}),0===a.length&&k(!1))},className:"p-2 text-gray-400 hover:text-red-600",children:(0,b.jsx)("i",{className:"fas fa-trash-alt"})})]},c)),(0,b.jsxs)("button",{type:"button",onClick:n,className:"flex items-center gap-2 px-3 py-2 text-sm text-green-600 hover:bg-green-50 rounded-lg",children:[(0,b.jsx)("i",{className:"fas fa-plus"}),"Add Another Variant"]})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,b.jsx)("button",{type:"button",onClick:f,disabled:g,className:"px-6 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:g,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors",children:g?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("i",{className:"fas fa-spinner fa-spin"}),(0,b.jsx)("span",{children:"Saving..."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("i",{className:"fas fa-check"}),(0,b.jsx)("span",{children:d?"Update Product":"Create Product"})]})})]})]})}function l({subAccountId:a,initialData:d,contacts:e=[],onSubmit:f,onCancel:g,isLoading:h}){let[i,j]=(0,c.useState)({title:d?.title||"",description:d?.description||"",documentType:d?.documentType||"contract",content:d?.content||"",requiresSignature:d?.requiresSignature!==!1,allowDecline:d?.allowDecline!==!1,expiresAt:d?.expiresAt||"",signers:d?.signers||[],fields:d?.fields||[],attachments:d?.attachments||[]}),[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)("details"),q=e.filter(a=>`${a.firstName} ${a.lastName}`.toLowerCase().includes(k.toLowerCase())||a.email.toLowerCase().includes(k.toLowerCase())),r=a=>{let b={id:Date.now().toString(),name:a?`${a.firstName} ${a.lastName}`:"",email:a?.email||"",role:"signer",signingOrder:i.signers.length+1,requirePin:!1,requireIdVerification:!1,idVerificationMethods:[]};j({...i,signers:[...i.signers,b]}),l(""),n(!1)},s=(a,b,c)=>{let d=[...i.signers];d[a]={...d[a],[b]:c},j({...i,signers:d})},t=(a,b)=>{let c="up"===b?a-1:a+1;if(c<0||c>=i.signers.length)return;let d=[...i.signers],e=d[a];d[a]=d[c],d[c]=e,d.forEach((a,b)=>a.signingOrder=b+1),j({...i,signers:d})},u=(a,b,c)=>{let d=[...i.fields];d[a]={...d[a],[b]:c},j({...i,fields:d})},v=async a=>{(a.preventDefault(),i.title)?i.requiresSignature&&0===i.signers.length?alert("Please add at least one signer"):await f(i):alert("Please enter a document title")},w=[{type:"signature",label:"Signature",icon:"fa-signature"},{type:"initials",label:"Initials",icon:"fa-font"},{type:"date",label:"Date",icon:"fa-calendar"},{type:"text",label:"Text",icon:"fa-font"},{type:"checkbox",label:"Checkbox",icon:"fa-check-square"},{type:"dropdown",label:"Dropdown",icon:"fa-caret-down"}],x=[{value:"email_otp",label:"Email OTP"},{value:"sms_otp",label:"SMS OTP"},{value:"id_document",label:"ID Document Upload"},{value:"selfie",label:"Selfie Verification"},{value:"kba",label:"Knowledge-Based Authentication"}];return(0,b.jsxs)("form",{onSubmit:v,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex gap-2 border-b border-gray-200 pb-2",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>p("details"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${"details"===o?"bg-green-100 text-green-700":"text-gray-600 hover:bg-gray-100"}`,children:[(0,b.jsx)("i",{className:"fas fa-info-circle mr-2"}),"Details"]}),(0,b.jsxs)("button",{type:"button",onClick:()=>p("signers"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${"signers"===o?"bg-green-100 text-green-700":"text-gray-600 hover:bg-gray-100"}`,children:[(0,b.jsx)("i",{className:"fas fa-users mr-2"}),"Signers (",i.signers.length,")"]}),(0,b.jsxs)("button",{type:"button",onClick:()=>p("content"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${"content"===o?"bg-green-100 text-green-700":"text-gray-600 hover:bg-gray-100"}`,children:[(0,b.jsx)("i",{className:"fas fa-file-alt mr-2"}),"Content"]})]}),"details"===o&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,b.jsx)("i",{className:"fas fa-file-signature mr-2 text-gray-400"}),"Document Information"]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Document Title *"}),(0,b.jsx)("input",{type:"text",value:i.title,onChange:a=>j({...i,title:a.target.value}),placeholder:"Enter document title",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Description"}),(0,b.jsx)("textarea",{value:i.description,onChange:a=>j({...i,description:a.target.value}),placeholder:"Add a description (optional)",rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent resize-none"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"Document Type"}),(0,b.jsx)("div",{className:"grid grid-cols-5 gap-2",children:[{value:"contract",label:"Contract",icon:"fa-file-contract"},{value:"agreement",label:"Agreement",icon:"fa-handshake"},{value:"nda",label:"NDA",icon:"fa-user-secret"},{value:"proposal",label:"Proposal",icon:"fa-file-invoice"},{value:"other",label:"Other",icon:"fa-file"}].map(a=>(0,b.jsxs)("button",{type:"button",onClick:()=>j({...i,documentType:a.value}),className:`flex flex-col items-center gap-2 p-3 rounded-lg border transition-colors ${i.documentType===a.value?"border-green-500 bg-green-50 text-green-700":"border-gray-200 hover:border-gray-300"}`,children:[(0,b.jsx)("i",{className:`fas ${a.icon} text-lg`}),(0,b.jsx)("span",{className:"text-xs font-medium",children:a.label})]},a.value))})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,b.jsx)("i",{className:"fas fa-cog mr-2 text-gray-400"}),"Signature Settings"]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[(0,b.jsx)("input",{type:"checkbox",checked:i.requiresSignature,onChange:a=>j({...i,requiresSignature:a.target.checked}),className:"w-5 h-5 text-green-600 border-gray-300 rounded focus:ring-green-500"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Requires Signature"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Recipients must sign this document electronically"})]})]}),(0,b.jsxs)("label",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[(0,b.jsx)("input",{type:"checkbox",checked:i.allowDecline,onChange:a=>j({...i,allowDecline:a.target.checked}),className:"w-5 h-5 text-green-600 border-gray-300 rounded focus:ring-green-500"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Allow Decline"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Recipients can decline to sign the document"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Expiration Date (Optional)"}),(0,b.jsx)("input",{type:"date",value:i.expiresAt?.split("T")[0]||"",onChange:a=>j({...i,expiresAt:a.target.value?new Date(a.target.value).toISOString():""}),className:"w-64 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]})]})]}),"signers"===o&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,b.jsx)("i",{className:"fas fa-user-plus mr-2 text-gray-400"}),"Add Signers"]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:"text",value:k,onChange:a=>{l(a.target.value),n(!0)},onFocus:()=>n(!0),placeholder:"Search contacts or enter email...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"}),(0,b.jsxs)("button",{type:"button",onClick:()=>r(),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[(0,b.jsx)("i",{className:"fas fa-plus mr-2"}),"Add Signer"]})]}),m&&q.length>0&&(0,b.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:q.map(a=>(0,b.jsxs)("button",{type:"button",onClick:()=>r(a),className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center justify-between",children:[(0,b.jsxs)("span",{className:"font-medium",children:[a.firstName," ",a.lastName]}),(0,b.jsx)("span",{className:"text-sm text-gray-500",children:a.email})]},a.id))})]})]}),i.signers.length>0&&(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,b.jsx)("i",{className:"fas fa-list-ol mr-2 text-gray-400"}),"Signing Order"]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mb-4",children:"Drag to reorder or use arrows. Signers will be notified in this order."}),(0,b.jsx)("div",{className:"space-y-3",children:i.signers.map((a,c)=>(0,b.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsx)("button",{type:"button",onClick:()=>t(c,"up"),disabled:0===c,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30",children:(0,b.jsx)("i",{className:"fas fa-chevron-up"})}),(0,b.jsx)("span",{className:"w-6 h-6 flex items-center justify-center bg-green-100 text-green-700 rounded-full text-xs font-bold",children:c+1}),(0,b.jsx)("button",{type:"button",onClick:()=>t(c,"down"),disabled:c===i.signers.length-1,className:"p-1 text-gray-400 hover:text-gray-600 disabled:opacity-30",children:(0,b.jsx)("i",{className:"fas fa-chevron-down"})})]}),(0,b.jsxs)("div",{className:"flex-1 grid grid-cols-3 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Name"}),(0,b.jsx)("input",{type:"text",value:a.name,onChange:a=>s(c,"name",a.target.value),placeholder:"Full name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Email"}),(0,b.jsx)("input",{type:"email",value:a.email,onChange:a=>s(c,"email",a.target.value),placeholder:"email@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Role"}),(0,b.jsxs)("select",{value:a.role,onChange:a=>s(c,"role",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,b.jsx)("option",{value:"signer",children:"Signer"}),(0,b.jsx)("option",{value:"approver",children:"Approver"}),(0,b.jsx)("option",{value:"viewer",children:"Viewer"})]})]})]}),(0,b.jsx)("button",{type:"button",onClick:()=>{let a;(a=i.signers.filter((a,b)=>b!==c)).forEach((a,b)=>a.signingOrder=b+1),j({...i,signers:a})},className:"p-2 text-gray-400 hover:text-red-600",children:(0,b.jsx)("i",{className:"fas fa-trash-alt"})})]}),(0,b.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,b.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,b.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)("input",{type:"checkbox",checked:a.requirePin,onChange:a=>s(c,"requirePin",a.target.checked),className:"w-4 h-4 text-green-600 border-gray-300 rounded"}),(0,b.jsx)("span",{children:"Require PIN"})]}),(0,b.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)("input",{type:"checkbox",checked:a.requireIdVerification,onChange:a=>s(c,"requireIdVerification",a.target.checked),className:"w-4 h-4 text-green-600 border-gray-300 rounded"}),(0,b.jsx)("span",{children:"Require ID Verification"})]})]}),a.requireIdVerification&&(0,b.jsxs)("div",{className:"mt-3",children:[(0,b.jsx)("label",{className:"block text-xs text-gray-500 mb-2",children:"Verification Methods"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:x.map(d=>(0,b.jsxs)("label",{className:"flex items-center gap-2 px-3 py-1 bg-white border border-gray-200 rounded-full text-xs cursor-pointer hover:border-green-500",children:[(0,b.jsx)("input",{type:"checkbox",checked:a.idVerificationMethods?.includes(d.value),onChange:b=>{let e=a.idVerificationMethods||[];b.target.checked?s(c,"idVerificationMethods",[...e,d.value]):s(c,"idVerificationMethods",e.filter(a=>a!==d.value))},className:"w-3 h-3 text-green-600 border-gray-300 rounded"}),d.label]},d.value))})]})]})]},a.id))})]}),0===i.signers.length&&(0,b.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg border border-dashed border-gray-300",children:[(0,b.jsx)("i",{className:"fas fa-users text-4xl text-gray-300 mb-3"}),(0,b.jsx)("p",{className:"text-gray-500",children:"No signers added yet"}),(0,b.jsx)("p",{className:"text-sm text-gray-400",children:"Add signers who need to sign this document"})]})]}),"content"===o&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,b.jsx)("i",{className:"fas fa-edit mr-2 text-gray-400"}),"Document Content"]}),(0,b.jsx)("textarea",{value:i.content,onChange:a=>j({...i,content:a.target.value}),placeholder:"Enter your document content here... You can use HTML for formatting.",rows:15,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent font-mono text-sm resize-none"}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:[(0,b.jsx)("i",{className:"fas fa-info-circle mr-1"}),"Tip: You can use HTML tags for formatting. Signature fields will be added in the document editor."]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,b.jsx)("i",{className:"fas fa-signature mr-2 text-gray-400"}),"Signature Fields"]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:w.map(a=>(0,b.jsxs)("button",{type:"button",onClick:()=>{var b;let c;return b=a.type,c={id:Date.now().toString(),type:b,required:!0,pageNumber:1,positionX:100,positionY:100,width:"signature"===b?200:"initials"===b?100:150,height:"signature"===b?60:"checkbox"===b?24:40},void j({...i,fields:[...i.fields,c]})},className:"flex items-center gap-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm transition-colors",children:[(0,b.jsx)("i",{className:`fas ${a.icon} text-gray-500`}),a.label]},a.type))}),i.fields.length>0&&(0,b.jsx)("div",{className:"space-y-2",children:i.fields.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[(0,b.jsx)("i",{className:`fas ${w.find(b=>b.type===a.type)?.icon} text-gray-400`}),(0,b.jsx)("span",{className:"text-sm font-medium capitalize",children:a.type}),(0,b.jsxs)("select",{value:a.signerId||"",onChange:a=>u(c,"signerId",a.target.value||void 0),className:"px-2 py-1 border border-gray-300 rounded text-sm",children:[(0,b.jsx)("option",{value:"",children:"Any Signer"}),i.signers.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name||a.email},a.id))]}),(0,b.jsxs)("label",{className:"flex items-center gap-1 text-sm",children:[(0,b.jsx)("input",{type:"checkbox",checked:a.required,onChange:a=>u(c,"required",a.target.checked),className:"w-4 h-4 text-green-600 border-gray-300 rounded"}),"Required"]}),("text"===a.type||"dropdown"===a.type)&&(0,b.jsx)("input",{type:"text",value:a.label||"",onChange:a=>u(c,"label",a.target.value),placeholder:"Label",className:"px-2 py-1 border border-gray-300 rounded text-sm"}),(0,b.jsx)("button",{type:"button",onClick:()=>{let a;return a=i.fields.filter((a,b)=>b!==c),void j({...i,fields:a})},className:"ml-auto p-1 text-gray-400 hover:text-red-600",children:(0,b.jsx)("i",{className:"fas fa-times"})})]},a.id))}),0===i.fields.length&&(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Click the buttons above to add signature fields to your document."})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200",children:[(0,b.jsx)("button",{type:"button",onClick:g,disabled:h,className:"px-6 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:h,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors",children:h?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("i",{className:"fas fa-spinner fa-spin"}),(0,b.jsx)("span",{children:"Saving..."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("i",{className:"fas fa-check"}),(0,b.jsx)("span",{children:d?"Update Document":"Create Document"})]})})]})]})}function m({subAccountId:a,initialData:d,onSubmit:e,onCancel:f,isLoading:g}){let[h,i]=(0,c.useState)({name:d?.name||"",amount:d?.amount||0,currency:d?.currency||"USD",description:d?.description||"",usageLimit:d?.usageLimit,expiresAt:d?.expiresAt||"",redirectUrl:d?.redirectUrl||"",collectShipping:d?.collectShipping||!1,allowTip:d?.allowTip||!1}),j=async a=>{(a.preventDefault(),!h.name||h.amount<=0)?alert("Please enter a name and valid amount"):await e(h)};return(0,b.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,b.jsx)("i",{className:"fas fa-link mr-2 text-gray-400"}),"Payment Link Details"]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Name *"}),(0,b.jsx)("input",{type:"text",value:h.name,onChange:a=>i({...h,name:a.target.value}),placeholder:"e.g., Consultation Booking",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Amount *"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),(0,b.jsx)("input",{type:"number",value:h.amount||"",onChange:a=>i({...h,amount:parseFloat(a.target.value)||0}),placeholder:"0.00",min:"0",step:"0.01",className:"w-full pl-8 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Currency"}),(0,b.jsxs)("select",{value:h.currency,onChange:a=>i({...h,currency:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"USD",children:"USD - US Dollar"}),(0,b.jsx)("option",{value:"EUR",children:"EUR - Euro"}),(0,b.jsx)("option",{value:"GBP",children:"GBP - British Pound"}),(0,b.jsx)("option",{value:"CAD",children:"CAD - Canadian Dollar"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Description (Optional)"}),(0,b.jsx)("textarea",{value:h.description,onChange:a=>i({...h,description:a.target.value}),placeholder:"What is this payment for?",rows:2,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent resize-none"})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,b.jsx)("i",{className:"fas fa-clock mr-2 text-gray-400"}),"Limits & Expiry"]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Usage Limit"}),(0,b.jsx)("input",{type:"number",value:h.usageLimit||"",onChange:a=>i({...h,usageLimit:parseInt(a.target.value)||void 0}),placeholder:"Unlimited",min:"1",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty for unlimited uses"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Expiry Date"}),(0,b.jsx)("input",{type:"date",value:h.expiresAt?h.expiresAt.split("T")[0]:"",onChange:a=>i({...h,expiresAt:a.target.value?new Date(a.target.value).toISOString():""}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty for no expiry"})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,b.jsx)("i",{className:"fas fa-cog mr-2 text-gray-400"}),"Options"]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Redirect URL (Optional)"}),(0,b.jsx)("input",{type:"url",value:h.redirectUrl,onChange:a=>i({...h,redirectUrl:a.target.value}),placeholder:"https://example.com/thank-you",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Redirect customers after payment"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Collect Shipping Address"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Ask customers for their shipping address"})]}),(0,b.jsx)("button",{type:"button",onClick:()=>i({...h,collectShipping:!h.collectShipping}),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors ${h.collectShipping?"bg-green-600":"bg-gray-200"}`,children:(0,b.jsx)("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow transition ${h.collectShipping?"translate-x-5":"translate-x-0"}`})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Allow Tip"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Let customers add a tip to their payment"})]}),(0,b.jsx)("button",{type:"button",onClick:()=>i({...h,allowTip:!h.allowTip}),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors ${h.allowTip?"bg-green-600":"bg-gray-200"}`,children:(0,b.jsx)("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow transition ${h.allowTip?"translate-x-5":"translate-x-0"}`})})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,b.jsx)("button",{type:"button",onClick:f,disabled:g,className:"px-6 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:g,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors",children:g?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("i",{className:"fas fa-spinner fa-spin"}),(0,b.jsx)("span",{children:"Creating..."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("i",{className:"fas fa-check"}),(0,b.jsx)("span",{children:"Create Payment Link"})]})})]})]})}function n({subAccountId:a,initialData:d,products:e=[],collections:f=[],onSubmit:g,onCancel:h,isLoading:i}){let[j,k]=(0,c.useState)({code:d?.code||"",discountType:d?.discountType||"percentage",discountValue:d?.discountValue||0,currency:d?.currency||"USD",usageLimit:d?.usageLimit,validFrom:d?.validFrom,validUntil:d?.validUntil,minimumAmount:d?.minimumAmount,applyTo:d?.applyTo||"all",productIds:d?.productIds||[],collectionIds:d?.collectionIds||[]}),l=async a=>{(a.preventDefault(),!j.code||j.discountValue<=0)?alert("Please enter a coupon code and valid discount value"):"percentage"===j.discountType&&j.discountValue>100?alert("Percentage discount cannot exceed 100%"):await g(j)};return(0,b.jsxs)("form",{onSubmit:l,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,b.jsx)("i",{className:"fas fa-ticket-alt mr-2 text-gray-400"}),"Coupon Code"]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)("input",{type:"text",value:j.code,onChange:a=>k({...j,code:a.target.value.toUpperCase()}),placeholder:"e.g., SUMMER20",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent font-mono uppercase",required:!0})}),(0,b.jsxs)("button",{type:"button",onClick:()=>{let a="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",b="";for(let c=0;c<8;c++)b+=a.charAt(Math.floor(Math.random()*a.length));k({...j,code:b})},className:"px-4 py-2 text-green-600 hover:bg-green-50 rounded-lg border border-green-300",children:[(0,b.jsx)("i",{className:"fas fa-random mr-2"}),"Generate"]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,b.jsx)("i",{className:"fas fa-percent mr-2 text-gray-400"}),"Discount Details"]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"Discount Type"}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)("input",{type:"radio",checked:"percentage"===j.discountType,onChange:()=>k({...j,discountType:"percentage"}),className:"text-green-600"}),(0,b.jsx)("span",{className:"text-sm text-gray-700",children:"Percentage"})]}),(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)("input",{type:"radio",checked:"fixed_amount"===j.discountType,onChange:()=>k({...j,discountType:"fixed_amount"}),className:"text-green-600"}),(0,b.jsx)("span",{className:"text-sm text-gray-700",children:"Fixed Amount"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Discount Value *"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",children:"percentage"===j.discountType?"%":"$"}),(0,b.jsx)("input",{type:"number",value:j.discountValue||"",onChange:a=>k({...j,discountValue:parseFloat(a.target.value)||0}),placeholder:"0",min:"0",max:"percentage"===j.discountType?100:void 0,step:"percentage"===j.discountType?1:.01,className:"w-full pl-8 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]})]}),"fixed_amount"===j.discountType&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Currency"}),(0,b.jsxs)("select",{value:j.currency,onChange:a=>k({...j,currency:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"USD",children:"USD - US Dollar"}),(0,b.jsx)("option",{value:"EUR",children:"EUR - Euro"}),(0,b.jsx)("option",{value:"GBP",children:"GBP - British Pound"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Minimum Purchase Amount"}),(0,b.jsxs)("div",{className:"relative w-1/2",children:[(0,b.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),(0,b.jsx)("input",{type:"number",value:j.minimumAmount||"",onChange:a=>k({...j,minimumAmount:parseFloat(a.target.value)||void 0}),placeholder:"No minimum",min:"0",step:"0.01",className:"w-full pl-8 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,b.jsx)("i",{className:"fas fa-chart-bar mr-2 text-gray-400"}),"Usage Limits"]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Total Usage Limit"}),(0,b.jsx)("input",{type:"number",value:j.usageLimit||"",onChange:a=>k({...j,usageLimit:parseInt(a.target.value)||void 0}),placeholder:"Unlimited",min:"1",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Valid From"}),(0,b.jsx)("input",{type:"date",value:j.validFrom?j.validFrom.split("T")[0]:"",onChange:a=>k({...j,validFrom:a.target.value?new Date(a.target.value).toISOString():void 0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Valid Until"}),(0,b.jsx)("input",{type:"date",value:j.validUntil?j.validUntil.split("T")[0]:"",onChange:a=>k({...j,validUntil:a.target.value?new Date(a.target.value).toISOString():void 0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:[(0,b.jsx)("i",{className:"fas fa-bullseye mr-2 text-gray-400"}),"Apply To"]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)("input",{type:"radio",checked:"all"===j.applyTo,onChange:()=>k({...j,applyTo:"all",productIds:[],collectionIds:[]}),className:"text-green-600"}),(0,b.jsx)("span",{className:"text-sm text-gray-700",children:"All products"})]}),(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)("input",{type:"radio",checked:"specific_products"===j.applyTo,onChange:()=>k({...j,applyTo:"specific_products",collectionIds:[]}),className:"text-green-600"}),(0,b.jsx)("span",{className:"text-sm text-gray-700",children:"Specific products"})]}),(0,b.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,b.jsx)("input",{type:"radio",checked:"specific_collections"===j.applyTo,onChange:()=>k({...j,applyTo:"specific_collections",productIds:[]}),className:"text-green-600"}),(0,b.jsx)("span",{className:"text-sm text-gray-700",children:"Specific collections"})]})]}),"specific_products"===j.applyTo&&e.length>0&&(0,b.jsxs)("div",{className:"mt-4 border-t border-gray-200 pt-4",children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"Select Products"}),(0,b.jsx)("div",{className:"max-h-40 overflow-y-auto border border-gray-200 rounded-lg p-2 space-y-1",children:e.map(a=>(0,b.jsxs)("label",{className:"flex items-center gap-2 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:j.productIds?.includes(a.id),onChange:b=>{b.target.checked?k({...j,productIds:[...j.productIds||[],a.id]}):k({...j,productIds:j.productIds?.filter(b=>b!==a.id)})},className:"rounded text-green-600"}),(0,b.jsx)("span",{className:"text-sm text-gray-700",children:a.name})]},a.id))})]}),"specific_collections"===j.applyTo&&f.length>0&&(0,b.jsxs)("div",{className:"mt-4 border-t border-gray-200 pt-4",children:[(0,b.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"Select Collections"}),(0,b.jsx)("div",{className:"max-h-40 overflow-y-auto border border-gray-200 rounded-lg p-2 space-y-1",children:f.map(a=>(0,b.jsxs)("label",{className:"flex items-center gap-2 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:j.collectionIds?.includes(a.id),onChange:b=>{b.target.checked?k({...j,collectionIds:[...j.collectionIds||[],a.id]}):k({...j,collectionIds:j.collectionIds?.filter(b=>b!==a.id)})},className:"rounded text-green-600"}),(0,b.jsx)("span",{className:"text-sm text-gray-700",children:a.name})]},a.id))})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,b.jsx)("button",{type:"button",onClick:h,disabled:i,className:"px-6 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:i,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors",children:i?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("i",{className:"fas fa-spinner fa-spin"}),(0,b.jsx)("span",{children:"Creating..."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("i",{className:"fas fa-check"}),(0,b.jsx)("span",{children:"Create Coupon"})]})})]})]})}let o=[{type:"signature",label:"Signature",icon:"fa-signature"},{type:"initials",label:"Initials",icon:"fa-font"},{type:"date",label:"Date",icon:"fa-calendar"},{type:"text",label:"Text Field",icon:"fa-i-cursor"},{type:"checkbox",label:"Checkbox",icon:"fa-check-square"}],p=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"];function q({documentUrl:a,documentContent:d,fields:e,signers:f,onFieldsChange:g,onSignersChange:h,mode:i="edit",currentSignerId:j}){let k,[l,m]=(0,c.useState)(null),[n,q]=(0,c.useState)(f[0]?.id||null),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)({x:0,y:0}),[x,y]=(0,c.useState)(1),[z]=(0,c.useState)(1),[A,B]=(0,c.useState)(100),C=(0,c.useRef)(null),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(""),[H,I]=(0,c.useState)(""),J=(0,c.useCallback)(a=>{if(!l||!n||"edit"!==i)return;let b=C.current?.getBoundingClientRect();if(!b)return;let c=(a.clientX-b.left)/b.width*100,d=(a.clientY-b.top)/b.height*100,f={signature:{width:20,height:8},initials:{width:10,height:6},date:{width:15,height:4},text:{width:20,height:4},checkbox:{width:3,height:3}}[l]||{width:15,height:5},h={id:`field-${Date.now()}`,type:l,x:Math.max(0,Math.min(c-f.width/2,100-f.width)),y:Math.max(0,Math.min(d-f.height/2,100-f.height)),width:f.width,height:f.height,page:x,signerId:n,required:!0};g([...e,h]),s(h.id),m(null)},[l,n,i,x,e,g]),K=(0,c.useCallback)(a=>{if(!t||!r||"edit"!==i)return;let b=C.current?.getBoundingClientRect();if(!b)return;let c=(a.clientX-b.left-v.x)/b.width*100,d=(a.clientY-b.top-v.y)/b.height*100,f=e.find(a=>a.id===r);if(!f)return;let h=Math.max(0,Math.min(c,100-f.width)),j=Math.max(0,Math.min(d,100-f.height));g(e.map(a=>a.id===r?{...a,x:h,y:j}:a))},[t,r,i,v,e,g]),L=()=>{u(!1)},M=a=>a&&f.find(b=>b.id===a)?.color||"#9CA3AF",N=a=>a?f.find(b=>b.id===a)?.name||"Unknown":"Unassigned";return(0,b.jsxs)("div",{className:"flex h-[calc(100vh-200px)] min-h-[600px] bg-gray-100 rounded-lg overflow-hidden",children:["edit"===i&&(0,b.jsxs)("div",{className:"w-64 bg-white border-r border-gray-200 flex flex-col",children:[(0,b.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,b.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:[(0,b.jsx)("i",{className:"fas fa-users mr-2 text-gray-400"}),"Signers"]}),(0,b.jsx)("div",{className:"space-y-2",children:f.map(a=>(0,b.jsxs)("div",{onClick:()=>q(a.id),className:`flex items-center justify-between p-2 rounded-lg cursor-pointer transition-colors ${n===a.id?"bg-gray-100":"hover:bg-gray-50"}`,children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:a.color}}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:a.email})]})]}),(0,b.jsx)("button",{onClick:b=>{var c;b.stopPropagation(),c=a.id,h(f.filter(a=>a.id!==c)),g(e.filter(a=>a.signerId!==c)),n===c&&q(f.find(a=>a.id!==c)?.id||null)},className:"p-1 text-gray-400 hover:text-red-600",children:(0,b.jsx)("i",{className:"fas fa-times text-xs"})})]},a.id))}),D?(0,b.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,b.jsx)("input",{type:"text",placeholder:"Name",value:F,onChange:a=>G(a.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"}),(0,b.jsx)("input",{type:"email",placeholder:"Email",value:H,onChange:a=>I(a.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>{if(!F||!H)return;let a={id:`signer-${Date.now()}`,name:F,email:H,color:p[f.length%p.length]};h([...f,a]),G(""),I(""),E(!1),q(a.id)},className:"flex-1 px-3 py-1 text-sm bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Add"}),(0,b.jsx)("button",{onClick:()=>E(!1),className:"px-3 py-1 text-sm text-gray-600 hover:bg-gray-100 rounded-lg",children:"Cancel"})]})]}):(0,b.jsxs)("button",{onClick:()=>E(!0),className:"mt-3 w-full flex items-center justify-center gap-2 px-3 py-2 text-sm text-green-600 hover:bg-green-50 rounded-lg border border-dashed border-green-300",children:[(0,b.jsx)("i",{className:"fas fa-plus"}),"Add Signer"]})]}),(0,b.jsxs)("div",{className:"p-4 flex-1 overflow-y-auto",children:[(0,b.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:[(0,b.jsx)("i",{className:"fas fa-edit mr-2 text-gray-400"}),"Add Fields"]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"Click a field type, then click on the document to place it"}),(0,b.jsx)("div",{className:"space-y-2",children:o.map(a=>(0,b.jsxs)("button",{onClick:()=>m(l===a.type?null:a.type),className:`w-full flex items-center gap-3 px-3 py-2 text-sm rounded-lg transition-colors ${l===a.type?"bg-green-100 text-green-700 border border-green-300":"text-gray-700 hover:bg-gray-100 border border-transparent"}`,children:[(0,b.jsx)("i",{className:`fas ${a.icon} w-5 text-center`}),a.label]},a.type))})]}),r&&(0,b.jsxs)("div",{className:"p-4 border-t border-gray-200",children:[(0,b.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:[(0,b.jsx)("i",{className:"fas fa-cog mr-2 text-gray-400"}),"Field Properties"]}),(k=e.find(a=>a.id===r))?(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Assigned To"}),(0,b.jsx)("select",{value:k.signerId||"",onChange:a=>{g(e.map(b=>b.id===r?{...b,signerId:a.target.value}:b))},className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg",children:f.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"field-required",checked:k.required,onChange:a=>{g(e.map(b=>b.id===r?{...b,required:a.target.checked}:b))},className:"rounded text-green-600"}),(0,b.jsx)("label",{htmlFor:"field-required",className:"text-sm text-gray-700",children:"Required"})]}),(0,b.jsxs)("button",{onClick:()=>{g(e.filter(a=>a.id!==r)),s(null)},className:"w-full px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg border border-red-200",children:[(0,b.jsx)("i",{className:"fas fa-trash mr-2"}),"Delete Field"]})]}):null]})]}),(0,b.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 bg-white border-b border-gray-200",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>y(Math.max(1,x-1)),disabled:1===x,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg disabled:opacity-50",children:(0,b.jsx)("i",{className:"fas fa-chevron-left"})}),(0,b.jsxs)("span",{className:"text-sm text-gray-600",children:["Page ",x," of ",z]}),(0,b.jsx)("button",{onClick:()=>y(Math.min(z,x+1)),disabled:x===z,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg disabled:opacity-50",children:(0,b.jsx)("i",{className:"fas fa-chevron-right"})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>B(Math.max(50,A-10)),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:(0,b.jsx)("i",{className:"fas fa-search-minus"})}),(0,b.jsxs)("span",{className:"text-sm text-gray-600 w-12 text-center",children:[A,"%"]}),(0,b.jsx)("button",{onClick:()=>B(Math.min(200,A+10)),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:(0,b.jsx)("i",{className:"fas fa-search-plus"})})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-auto p-8 flex justify-center",children:(0,b.jsxs)("div",{ref:C,onClick:l?J:void 0,onMouseMove:t?K:void 0,onMouseUp:t?L:void 0,onMouseLeave:t?L:void 0,className:`relative bg-white shadow-lg ${l?"cursor-crosshair":""}`,style:{width:`${8.5*A}px`,height:`${11*A}px`,minHeight:"600px"},children:[a?(0,b.jsx)("img",{src:a,alt:"Document",className:"w-full h-full object-contain",draggable:!1}):d?(0,b.jsx)("div",{className:"w-full h-full p-8 prose max-w-none",dangerouslySetInnerHTML:{__html:d}}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center text-gray-400",children:[(0,b.jsx)("i",{className:"fas fa-file-alt text-6xl mb-4"}),(0,b.jsx)("p",{children:"No document loaded"}),(0,b.jsx)("p",{className:"text-sm",children:"Upload a document or create content"})]})}),e.filter(a=>a.page===x).map(a=>{let c=r===a.id,d=M(a.signerId),e="sign"===i&&a.signerId===j;return(0,b.jsxs)("div",{onClick:b=>{b.stopPropagation(),s(a.id)},onMouseDown:b=>((a,b)=>{if("edit"!==i)return;a.stopPropagation();let c=C.current?.getBoundingClientRect();if(!c)return;let d=b.x/100*c.width,e=b.y/100*c.height;w({x:a.clientX-c.left-d,y:a.clientY-c.top-e}),u(!0),s(b.id)})(b,a),className:`absolute border-2 rounded transition-all ${c?"ring-2 ring-blue-400":""} ${"edit"===i?"cursor-move":""} ${e?"cursor-pointer hover:opacity-80":""}`,style:{left:`${a.x}%`,top:`${a.y}%`,width:`${a.width}%`,height:`${a.height}%`,borderColor:d,backgroundColor:`${d}15`},children:[(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center text-xs",style:{color:d},children:a.value?"signature"===a.type||"initials"===a.type?(0,b.jsx)("img",{src:a.value,alt:"Signature",className:"max-w-full max-h-full"}):(0,b.jsx)("span",{children:a.value}):(0,b.jsxs)("span",{className:"opacity-60",children:["signature"===a.type&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("i",{className:"fas fa-signature mr-1"}),"Sign"]}),"initials"===a.type&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("i",{className:"fas fa-font mr-1"}),"Initials"]}),"date"===a.type&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("i",{className:"fas fa-calendar mr-1"}),"Date"]}),"text"===a.type&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("i",{className:"fas fa-i-cursor mr-1"}),"Text"]}),"checkbox"===a.type&&(0,b.jsx)("i",{className:"fas fa-square"})]})}),"edit"===i&&(0,b.jsx)("div",{className:"absolute -top-5 left-0 text-xs px-1 rounded-t whitespace-nowrap",style:{backgroundColor:d,color:"white"},children:N(a.signerId)})]},a.id)})]})})]}),"edit"===i&&e.length>0&&(0,b.jsxs)("div",{className:"w-64 bg-white border-l border-gray-200 p-4 overflow-y-auto",children:[(0,b.jsxs)("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:[(0,b.jsx)("i",{className:"fas fa-list mr-2 text-gray-400"}),"Fields (",e.length,")"]}),(0,b.jsx)("div",{className:"space-y-2",children:e.map((a,c)=>(0,b.jsxs)("div",{onClick:()=>s(a.id),className:`p-2 rounded-lg cursor-pointer transition-colors ${r===a.id?"bg-gray-100":"hover:bg-gray-50"}`,children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:M(a.signerId)}}),(0,b.jsxs)("span",{className:"text-sm font-medium text-gray-900 capitalize",children:[a.type," ",c+1]})]}),a.required&&(0,b.jsx)("span",{className:"text-xs text-red-500",children:"Required"})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:N(a.signerId)})]},a.id))})]})]})}let r=[{id:"invoices",label:"Invoices & Estimates",icon:"fa-file-invoice-dollar",href:"/sub-account/revenue-engine"},{id:"documents",label:"Documents & Contracts",icon:"fa-file-signature",href:"/sub-account/revenue-engine?tab=documents"},{id:"orders",label:"Orders",icon:"fa-shopping-cart",href:"/sub-account/revenue-engine?tab=orders"},{id:"subscriptions",label:"Subscriptions",icon:"fa-sync-alt",href:"/sub-account/revenue-engine?tab=subscriptions"},{id:"payment-links",label:"Payment Links",icon:"fa-link",href:"/sub-account/revenue-engine?tab=payment-links"},{id:"transactions",label:"Transactions",icon:"fa-exchange-alt",href:"/sub-account/revenue-engine?tab=transactions"},{id:"products",label:"Products",icon:"fa-box",href:"/sub-account/revenue-engine?tab=products"},{id:"coupons",label:"Coupons",icon:"fa-tags",href:"/sub-account/revenue-engine?tab=coupons"},{id:"settings",label:"Settings",icon:"fa-cog",href:"/sub-account/revenue-engine?tab=settings"},{id:"integrations",label:"Integrations",icon:"fa-plug",href:"/sub-account/revenue-engine?tab=integrations"}],s=[{id:"all",label:"All Invoices"},{id:"recurring",label:"Recurring Invoices"},{id:"templates",label:"Templates"},{id:"estimates",label:"Estimates"}],t=[{id:"all",label:"All Documents & Contracts"},{id:"templates",label:"Templates"}],u=[{id:"orders",label:"Orders"},{id:"abandoned",label:"Abandoned Checkouts"}],v=[{id:"products",label:"Products"},{id:"collections",label:"Collections"},{id:"inventory",label:"Inventory"}],w="default-sub-account",x=a=>({draft:"bg-gray-100 text-gray-700",sent:"bg-blue-100 text-blue-700",viewed:"bg-purple-100 text-purple-700",paid:"bg-green-100 text-green-700",overdue:"bg-red-100 text-red-700",cancelled:"bg-gray-100 text-gray-500",accepted:"bg-green-100 text-green-700",declined:"bg-red-100 text-red-700",expired:"bg-orange-100 text-orange-700",active:"bg-green-100 text-green-700",paused:"bg-yellow-100 text-yellow-700",pending:"bg-yellow-100 text-yellow-700",processing:"bg-blue-100 text-blue-700",completed:"bg-green-100 text-green-700",refunded:"bg-red-100 text-red-700",failed:"bg-red-100 text-red-700",signed:"bg-green-100 text-green-700",past_due:"bg-red-100 text-red-700",trialing:"bg-blue-100 text-blue-700",succeeded:"bg-green-100 text-green-700",inactive:"bg-gray-100 text-gray-500",connected:"bg-green-100 text-green-700",disconnected:"bg-gray-100 text-gray-500"})[a]||"bg-gray-100 text-gray-700",y=(a,b="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:b}).format(a),z=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});function A(){return(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,b.jsx)("i",{className:"fas fa-spinner fa-spin text-3xl text-theme-secondary"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Loading..."})]})})}function B(){return(0,b.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:(0,b.jsxs)("div",{className:"animate-pulse",children:[(0,b.jsx)("div",{className:"bg-gray-50 border-b border-gray-200 p-4",children:(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4"})}),[1,2,3,4,5].map(a=>(0,b.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/6"}),(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/6"}),(0,b.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/6"})]})},a))]})})}function C({message:a,onRetry:c}){return(0,b.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-center",children:[(0,b.jsx)("i",{className:"fas fa-exclamation-circle text-red-500 text-2xl mb-2"}),(0,b.jsx)("p",{className:"text-red-700 mb-3",children:a}),c&&(0,b.jsxs)("button",{onClick:c,className:"px-4 py-2 text-sm text-red-600 hover:bg-red-100 rounded-lg",children:[(0,b.jsx)("i",{className:"fas fa-redo mr-2"}),"Try Again"]})]})}function D({icon:a,title:c,description:d,action:e,onAction:f}){return(0,b.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200",children:[(0,b.jsx)("i",{className:`fas ${a} text-5xl text-gray-300 mb-4`}),(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:c}),(0,b.jsx)("p",{className:"text-gray-500 mb-4",children:d}),e&&f&&(0,b.jsx)("button",{onClick:f,className:"px-4 py-2 bg-theme-secondary text-white rounded-lg hover:opacity-90 btn-theme-primary",children:e})]})}function E(){return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"h-8 w-48 bg-gray-200 rounded animate-pulse"}),(0,b.jsx)("div",{className:"h-4 w-64 bg-gray-100 rounded animate-pulse mt-2"})]})}),(0,b.jsx)("div",{className:"h-12 bg-gray-100 rounded animate-pulse"}),(0,b.jsx)("div",{className:"h-64 bg-gray-50 rounded animate-pulse"})]})}function F(){let a=(0,e.useSearchParams)().get("tab")||"invoices";return(0,b.jsxs)("div",{className:"space-y-6 -m-4 sm:-m-6 lg:-m-8",children:[(0,b.jsxs)("div",{className:"flex-none bg-white border-b border-gray-200 px-4 sm:px-6 lg:px-8 pt-4 sm:pt-6 lg:pt-8 pb-0",children:[(0,b.jsx)(f.PageHeader,{title:"Revenue Engine",description:"Manage invoices, payments, subscriptions, and financial operations",icon:"fa-dollar-sign"}),(0,b.jsx)("nav",{className:"-mb-px flex space-x-6 overflow-x-auto","aria-label":"Revenue Engine tabs",children:r.map(c=>{let e=c.id===a;return(0,b.jsxs)(d.default,{href:c.href,className:`group inline-flex items-center border-b-2 py-4 px-1 text-sm font-medium whitespace-nowrap transition-colors ${e?"border-[var(--theme-secondary)] text-[var(--theme-secondary)]":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"}`,children:[(0,b.jsx)("i",{className:`fas ${c.icon} mr-2 text-base`,style:{color:e?"var(--theme-secondary)":void 0}}),c.label]},c.id)})})]}),(0,b.jsxs)("div",{className:"px-4 sm:px-6 lg:px-8 pb-4 sm:pb-6 lg:pb-8",children:["invoices"===a&&(0,b.jsx)(H,{}),"documents"===a&&(0,b.jsx)(I,{}),"orders"===a&&(0,b.jsx)(J,{}),"subscriptions"===a&&(0,b.jsx)(K,{}),"payment-links"===a&&(0,b.jsx)(L,{}),"transactions"===a&&(0,b.jsx)(M,{}),"products"===a&&(0,b.jsx)(N,{}),"coupons"===a&&(0,b.jsx)(O,{}),"settings"===a&&(0,b.jsx)(P,{}),"integrations"===a&&(0,b.jsx)(Q,{})]})]})}function G(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)(E,{}),children:(0,b.jsx)(F,{})})}function H(){var a;let[d,e]=(0,c.useState)("all"),[f,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(""),{data:p,loading:q,error:r,refetch:t}=(a={search:l,status:n||void 0},h(()=>{let b;return b=new URLSearchParams({subAccountId:w,...a}),g(`/invoices?${b}`)},[w,a?.search,a?.status,a?.contactId])),{createInvoice:u,sendInvoice:v,loading:A}=function(){let[a,b]=(0,c.useState)(!1),[d,e]=(0,c.useState)(null);return{createInvoice:async a=>{b(!0),e(null);let c=await g("/invoices",{method:"POST",body:JSON.stringify(a)});return b(!1),c.success||e(c.error||"Failed to create invoice"),c},updateInvoice:async(a,c)=>{let d;b(!0),e(null);let f=await (d=a,g(`/invoices/${d}`,{method:"PUT",body:JSON.stringify(c)}));return b(!1),f.success||e(f.error||"Failed to update invoice"),f},deleteInvoice:async a=>{let c;b(!0),e(null);let d=await (c=a,g(`/invoices/${c}`,{method:"DELETE"}));return b(!1),d.success||e(d.error||"Failed to delete invoice"),d},sendInvoice:async(a,c)=>{let d;b(!0),e(null);let f=await (d=a,g(`/invoices/${d}/send`,{method:"POST",body:JSON.stringify(c||{})}));return b(!1),f.success||e(f.error||"Failed to send invoice"),f},recordPayment:async(a,c)=>{let d;b(!0),e(null);let f=await (d=a,g(`/invoices/${d}/record-payment`,{method:"POST",body:JSON.stringify(c)}));return b(!1),f.success||e(f.error||"Failed to record payment"),f},loading:a,error:d}}(),E=p?.invoices||[],F=p?.stats||{totalOutstanding:0,totalPaid:0,overdueCount:0},G=async a=>{(await u({subAccountId:w,...a})).success&&(k(!1),t())},H=async a=>{(await v(a)).success&&t()};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center gap-2 border-b border-gray-200 pb-2",children:s.map(a=>(0,b.jsx)("button",{onClick:()=>e(a.id),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${d===a.id?"bg-theme-secondary-light text-theme-secondary":"text-gray-600 hover:bg-gray-100"}`,children:a.label},a.id))}),"all"===d&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Total Invoices"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:E.length})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Outstanding"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:y(F.totalOutstanding||0)})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Paid"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-theme-success",children:y(F.totalPaid||0)})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Overdue"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-red-600",children:F.overdueCount||0})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("i",{className:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),(0,b.jsx)("input",{type:"text",value:l,onChange:a=>m(a.target.value),placeholder:"Search invoices...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-theme-secondary focus:border-transparent"})]}),(0,b.jsxs)("select",{value:n,onChange:a=>o(a.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"",children:"All Statuses"}),(0,b.jsx)("option",{value:"draft",children:"Draft"}),(0,b.jsx)("option",{value:"sent",children:"Sent"}),(0,b.jsx)("option",{value:"paid",children:"Paid"}),(0,b.jsx)("option",{value:"overdue",children:"Overdue"})]})]}),(0,b.jsxs)("button",{onClick:()=>k(!0),className:"flex items-center gap-2 px-4 py-2 bg-theme-secondary text-white rounded-lg hover:opacity-90 btn-theme-primary",children:[(0,b.jsx)("i",{className:"fas fa-plus"}),(0,b.jsx)("span",{children:"Create Invoice"})]})]}),q?(0,b.jsx)(B,{}):r?(0,b.jsx)(C,{message:r,onRetry:t}):0===E.length?(0,b.jsx)(D,{icon:"fa-file-invoice-dollar",title:"No Invoices Yet",description:"Create your first invoice to start getting paid",action:"Create Invoice",onAction:()=>k(!0)}):(0,b.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Invoice"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Client"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Due Date"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200",children:E.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsxs)("td",{className:"px-4 py-3",children:[(0,b.jsx)("div",{className:"font-medium text-gray-900",children:a.invoiceNumber}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:z(a.issueDate||a.createdAt)})]}),(0,b.jsxs)("td",{className:"px-4 py-3",children:[(0,b.jsx)("div",{className:"text-sm text-gray-900",children:a.contactName}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:a.contactEmail})]}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("div",{className:"font-medium text-gray-900",children:y(a.amount||a.total,a.currency)})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${x(a.status)}`,children:a.status})}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:a.dueDate?z(a.dueDate):"-"}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{className:"p-1 text-gray-400 hover:text-blue-600",title:"View",children:(0,b.jsx)("i",{className:"fas fa-eye"})}),(0,b.jsx)("button",{className:"p-1 text-gray-400 hover:text-theme-secondary",title:"Edit",children:(0,b.jsx)("i",{className:"fas fa-edit"})}),"draft"===a.status&&(0,b.jsx)("button",{onClick:()=>H(a.id),className:"p-1 text-gray-400 hover:text-purple-600",title:"Send",children:(0,b.jsx)("i",{className:"fas fa-paper-plane"})}),(0,b.jsx)("button",{className:"p-1 text-gray-400 hover:text-gray-600",title:"Download",children:(0,b.jsx)("i",{className:"fas fa-download"})})]})})]},a.id))})]})})]}),"recurring"===d&&(0,b.jsx)(D,{icon:"fa-redo",title:"Recurring Invoices",description:"Set up recurring invoices for subscription-based billing",action:"Create Recurring Invoice",onAction:()=>{}}),"templates"===d&&(0,b.jsx)(D,{icon:"fa-file-alt",title:"Invoice Templates",description:"Create reusable invoice templates for faster billing",action:"Create Template",onAction:()=>{}}),"estimates"===d&&(0,b.jsx)(D,{icon:"fa-file-invoice",title:"Estimates",description:"Send professional estimates to potential clients",action:"Create Estimate",onAction:()=>{}}),f&&(0,b.jsx)(i,{isOpen:f,onClose:()=>k(!1),title:"Create Invoice",size:"xl",children:(0,b.jsx)(j,{subAccountId:w,contacts:[],onSubmit:G,onCancel:()=>k(!1),isLoading:A})})]})}function I(){var a;let[d,e]=(0,c.useState)("all"),[f,j]=(0,c.useState)(!1),[k,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(null),[p,r]=(0,c.useState)(""),{data:s,loading:u,error:v,refetch:y}=(a={search:p},h(()=>{let b;return b=new URLSearchParams({subAccountId:w,...a}),g(`/documents?${b}`)},[w,a?.search,a?.status,a?.documentType,a?.requiresSignature])),{createDocument:A,sendDocument:E,loading:F}=function(){let[a,b]=(0,c.useState)(!1),[d,e]=(0,c.useState)(null);return{createDocument:async a=>{b(!0),e(null);let c=await g("/documents",{method:"POST",body:JSON.stringify(a)});return b(!1),c.success||e(c.error||"Failed to create document"),c},updateDocument:async(a,c)=>{let d;b(!0),e(null);let f=await (d=a,g(`/documents/${d}`,{method:"PUT",body:JSON.stringify(c)}));return b(!1),f.success||e(f.error||"Failed to update document"),f},deleteDocument:async a=>{let c;b(!0),e(null);let d=await (c=a,g(`/documents/${c}`,{method:"DELETE"}));return b(!1),d.success||e(d.error||"Failed to delete document"),d},sendDocument:async(a,c)=>{let d;b(!0),e(null);let f=await (d=a,g(`/documents/${d}/send`,{method:"POST",body:JSON.stringify(c||{})}));return b(!1),f.success||e(f.error||"Failed to send document"),f},signDocument:async(a,c)=>{let d;b(!0),e(null);let f=await (d=a,g(`/documents/${d}/sign`,{method:"POST",body:JSON.stringify(c)}));return b(!1),f.success||e(f.error||"Failed to sign document"),f},remindSigners:async(a,c)=>{let d;b(!0),e(null);let f=await (d=a,g(`/documents/${d}/remind`,{method:"POST",body:JSON.stringify(c||{})}));return b(!1),f.success||e(f.error||"Failed to send reminder"),f},voidDocument:async(a,c)=>{let d;b(!0),e(null);let f=await (d=a,g(`/documents/${d}/void`,{method:"POST",body:JSON.stringify(c||{})}));return b(!1),f.success||e(f.error||"Failed to void document"),f},loading:a,error:d}}(),G=s?.documents||[],H=s?.stats||{},I=async a=>{let b=await A({subAccountId:w,...a});b.success&&(j(!1),o(b.data?.document),m(!0),y())},J=async a=>{(await E(a)).success&&y()};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center gap-2 border-b border-gray-200 pb-2",children:t.map(a=>(0,b.jsx)("button",{onClick:()=>e(a.id),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${d===a.id?"bg-theme-secondary-light text-theme-secondary":"text-gray-600 hover:bg-gray-100"}`,children:a.label},a.id))}),"all"===d&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Total Documents"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:G.length})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Awaiting Signature"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:H.awaitingSignature||0})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Signed"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-theme-success",children:H.signed||0})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Expired"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:H.expired||0})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("i",{className:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),(0,b.jsx)("input",{type:"text",value:p,onChange:a=>r(a.target.value),placeholder:"Search documents...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-theme-secondary focus:border-transparent"})]}),(0,b.jsxs)("button",{onClick:()=>j(!0),className:"flex items-center gap-2 px-4 py-2 bg-theme-secondary text-white rounded-lg hover:opacity-90 btn-theme-primary",children:[(0,b.jsx)("i",{className:"fas fa-plus"}),(0,b.jsx)("span",{children:"Create Document"})]})]}),u?(0,b.jsx)(B,{}):v?(0,b.jsx)(C,{message:v,onRetry:y}):0===G.length?(0,b.jsx)(D,{icon:"fa-file-signature",title:"No Documents Yet",description:"Create contracts, agreements, and documents with e-signature",action:"Create Document",onAction:()=>j(!0)}):(0,b.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Document"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Recipient"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sent"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200",children:G.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("i",{className:"fas fa-file-signature text-2xl text-gray-400"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium text-gray-900",children:a.title}),(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:["Created ",z(a.createdAt)]})]})]})}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:a.contactName||"No recipient"}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${x(a.status)}`,children:a.status})}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:a.sentAt?z(a.sentAt):"-"}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{className:"p-1 text-gray-400 hover:text-blue-600",children:(0,b.jsx)("i",{className:"fas fa-eye"})}),(0,b.jsx)("button",{onClick:()=>{o(a),m(!0)},className:"p-1 text-gray-400 hover:text-theme-secondary",children:(0,b.jsx)("i",{className:"fas fa-edit"})}),"draft"===a.status&&(0,b.jsx)("button",{onClick:()=>J(a.id),className:"p-1 text-gray-400 hover:text-purple-600",children:(0,b.jsx)("i",{className:"fas fa-paper-plane"})}),(0,b.jsx)("button",{className:"p-1 text-gray-400 hover:text-gray-600",children:(0,b.jsx)("i",{className:"fas fa-download"})})]})})]},a.id))})]})})]}),"templates"===d&&(0,b.jsx)(D,{icon:"fa-file-contract",title:"Document Templates",description:"Create reusable templates for contracts, agreements, and more",action:"Create Template",onAction:()=>{}}),f&&(0,b.jsx)(i,{isOpen:f,onClose:()=>j(!1),title:"Create Document",size:"xl",children:(0,b.jsx)(l,{subAccountId:w,contacts:[],onSubmit:I,onCancel:()=>j(!1),isLoading:F})}),k&&n&&(0,b.jsx)(i,{isOpen:k,onClose:()=>{m(!1),o(null)},title:`Edit: ${n.title}`,size:"full",children:(0,b.jsx)(q,{documentContent:n.content,fields:n.signatureFields||[],signers:n.signers?.map((a,b)=>({id:a.id||`signer-${b}`,name:a.name,email:a.email,color:["#3B82F6","#10B981","#F59E0B","#EF4444"][b%4]}))||[],onFieldsChange:a=>{},onSignersChange:a=>{},mode:"edit"})})]})}function J(){var a;let[d,e]=(0,c.useState)("orders"),{data:f,loading:i,error:j,refetch:k}=h(()=>{let b;return b=new URLSearchParams({subAccountId:a,...void 0}),g(`/orders?${b}`)},[a=w,void 0,void 0,void 0]),l=f?.orders||[],m=f?.stats||{};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center gap-2 border-b border-gray-200 pb-2",children:u.map(a=>(0,b.jsx)("button",{onClick:()=>e(a.id),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${d===a.id?"bg-theme-secondary-light text-theme-secondary":"text-gray-600 hover:bg-gray-100"}`,children:a.label},a.id))}),"orders"===d&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Total Orders"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:l.length})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Completed"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-theme-success",children:m.completed||0})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Processing"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:m.processing||0})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Total Revenue"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:y(m.totalRevenue||0)})]})]}),i?(0,b.jsx)(B,{}):j?(0,b.jsx)(C,{message:j,onRetry:k}):0===l.length?(0,b.jsx)(D,{icon:"fa-shopping-cart",title:"No Orders Yet",description:"Orders will appear here when customers make purchases"}):(0,b.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Order"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Customer"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Items"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Payment"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200",children:l.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsxs)("td",{className:"px-4 py-3",children:[(0,b.jsx)("div",{className:"font-medium text-gray-900",children:a.orderNumber}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:z(a.createdAt)})]}),(0,b.jsxs)("td",{className:"px-4 py-3",children:[(0,b.jsx)("div",{className:"text-sm text-gray-900",children:a.contactName}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:a.contactEmail})]}),(0,b.jsxs)("td",{className:"px-4 py-3 text-sm text-gray-500",children:[a.items?.length||0," item(s)"]}),(0,b.jsx)("td",{className:"px-4 py-3 font-medium text-gray-900",children:y(a.total,a.currency)}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${x(a.status)}`,children:a.status})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${x(a.paymentStatus)}`,children:a.paymentStatus})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{className:"p-1 text-gray-400 hover:text-blue-600",children:(0,b.jsx)("i",{className:"fas fa-eye"})}),(0,b.jsx)("button",{className:"p-1 text-gray-400 hover:text-theme-secondary",children:(0,b.jsx)("i",{className:"fas fa-edit"})})]})})]},a.id))})]})})]}),"abandoned"===d&&(0,b.jsx)(D,{icon:"fa-shopping-cart",title:"No Abandoned Checkouts",description:"When customers abandon their checkout, they'll appear here"})]})}function K(){var a;let{data:d,loading:e,error:f,refetch:i}=h(()=>{let b;return b=new URLSearchParams({subAccountId:a,...void 0}),g(`/subscriptions?${b}`)},[a=w,void 0,void 0]),{cancelSubscription:j,loading:k}=function(){let[a,b]=(0,c.useState)(!1),[d,e]=(0,c.useState)(null);return{createSubscription:async a=>{b(!0),e(null);let c=await g("/subscriptions",{method:"POST",body:JSON.stringify(a)});return b(!1),c.success||e(c.error||"Failed to create subscription"),c},updateSubscription:async(a,c)=>{let d;b(!0),e(null);let f=await (d=a,g(`/subscriptions/${d}`,{method:"PUT",body:JSON.stringify(c)}));return b(!1),f.success||e(f.error||"Failed to update subscription"),f},cancelSubscription:async(a,c)=>{let d;b(!0),e(null);let f=await (d=a,g(`/subscriptions/${d}`,{method:"PUT",body:JSON.stringify({status:"cancelled",...c})}));return b(!1),f.success||e(f.error||"Failed to cancel subscription"),f},loading:a,error:d}}(),l=d?.subscriptions||[],m=d?.stats||{},n=async a=>{confirm("Are you sure you want to cancel this subscription?")&&(await j(a,{cancelAtPeriodEnd:!0})).success&&i()};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Total Subscriptions"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:l.length})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Active"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-theme-success",children:m.active||0})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"MRR"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:y(m.mrr||0)})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Churn Rate"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[m.churnRate||0,"%"]})]})]}),e?(0,b.jsx)(B,{}):f?(0,b.jsx)(C,{message:f,onRetry:i}):0===l.length?(0,b.jsx)(D,{icon:"fa-sync-alt",title:"No Subscriptions Yet",description:"Subscriptions will appear here when customers subscribe to your plans"}):(0,b.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Customer"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Plan"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Current Period"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200",children:l.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsxs)("td",{className:"px-4 py-3",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a.contactName}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:a.contactEmail})]}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:a.planName}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"font-medium text-gray-900",children:[y(a.amount,a.currency),"/","monthly"===a.interval?"mo":"yr"]})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${x(a.status)}`,children:a.status.replace("_"," ")})}),(0,b.jsxs)("td",{className:"px-4 py-3 text-sm text-gray-500",children:[z(a.currentPeriodStart)," - ",z(a.currentPeriodEnd)]}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{className:"p-1 text-gray-400 hover:text-blue-600",children:(0,b.jsx)("i",{className:"fas fa-eye"})}),"active"===a.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{className:"p-1 text-gray-400 hover:text-yellow-600",children:(0,b.jsx)("i",{className:"fas fa-pause"})}),(0,b.jsx)("button",{onClick:()=>n(a.id),className:"p-1 text-gray-400 hover:text-red-600",children:(0,b.jsx)("i",{className:"fas fa-times"})})]})]})})]},a.id))})]})})]})}function L(){var a;let[d,e]=(0,c.useState)(!1),{data:f,loading:j,error:k,refetch:l}=h(()=>{let b;return b=new URLSearchParams({subAccountId:a,...void 0}),g(`/payment-links?${b}`)},[a=w,void 0]),{createPaymentLink:n,deletePaymentLink:o,loading:p}=function(){let[a,b]=(0,c.useState)(!1),[d,e]=(0,c.useState)(null);return{createPaymentLink:async a=>{b(!0),e(null);let c=await g("/payment-links",{method:"POST",body:JSON.stringify(a)});return b(!1),c.success||e(c.error||"Failed to create payment link"),c},updatePaymentLink:async(a,c)=>{let d;b(!0),e(null);let f=await (d=a,g(`/payment-links/${d}`,{method:"PUT",body:JSON.stringify(c)}));return b(!1),f.success||e(f.error||"Failed to update payment link"),f},deletePaymentLink:async a=>{let c;b(!0),e(null);let d=await (c=a,g(`/payment-links/${c}`,{method:"DELETE"}));return b(!1),d.success||e(d.error||"Failed to delete payment link"),d},loading:a,error:d}}(),q=f?.paymentLinks||[],r=async a=>{(await n({subAccountId:w,...a})).success&&(e(!1),l())},s=async a=>{confirm("Are you sure you want to delete this payment link?")&&(await o(a)).success&&l()};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Payment Links"}),(0,b.jsxs)("button",{onClick:()=>e(!0),className:"flex items-center gap-2 px-4 py-2 bg-theme-secondary text-white rounded-lg hover:opacity-90 btn-theme-primary",children:[(0,b.jsx)("i",{className:"fas fa-plus"}),(0,b.jsx)("span",{children:"Create Payment Link"})]})]}),j?(0,b.jsx)(A,{}):k?(0,b.jsx)(C,{message:k,onRetry:l}):0===q.length?(0,b.jsx)(D,{icon:"fa-link",title:"No Payment Links Yet",description:"Create shareable payment links for quick payments",action:"Create Payment Link",onAction:()=>e(!0)}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:q.map(a=>(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-medium text-gray-900",children:a.name}),(0,b.jsx)("p",{className:"text-2xl font-bold text-theme-secondary mt-1",children:y(a.amount,a.currency)})]}),(0,b.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${x(a.status)}`,children:a.status})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3 p-2 bg-gray-50 rounded-lg",children:[(0,b.jsx)("input",{type:"text",value:a.url,readOnly:!0,className:"flex-1 text-sm text-gray-600 bg-transparent border-none focus:ring-0 truncate"}),(0,b.jsx)("button",{onClick:()=>{var b;return b=a.url,void(navigator.clipboard.writeText(b),alert("Link copied to clipboard!"))},className:"p-1 text-gray-400 hover:text-gray-600",children:(0,b.jsx)("i",{className:"fas fa-copy"})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,b.jsxs)("span",{children:["Used ",a.usageCount,a.usageLimit?`/${a.usageLimit}`:""," times"]}),a.expiresAt&&(0,b.jsxs)("span",{children:["Expires ",z(a.expiresAt)]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-gray-200",children:[(0,b.jsxs)("button",{className:"flex-1 px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg",children:[(0,b.jsx)("i",{className:"fas fa-edit mr-1"})," Edit"]}),(0,b.jsxs)("button",{className:"flex-1 px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg",children:[(0,b.jsx)("i",{className:"fas fa-chart-bar mr-1"})," Stats"]}),(0,b.jsx)("button",{onClick:()=>s(a.id),className:"px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg",children:(0,b.jsx)("i",{className:"fas fa-trash"})})]})]},a.id))}),d&&(0,b.jsx)(i,{isOpen:d,onClose:()=>e(!1),title:"Create Payment Link",size:"lg",children:(0,b.jsx)(m,{subAccountId:w,onSubmit:r,onCancel:()=>e(!1),isLoading:p})})]})}function M(){var a;let[d,e]=(0,c.useState)(""),[f,i]=(0,c.useState)(""),{data:j,loading:k,error:l,refetch:m}=(a={status:d||void 0},h(()=>{let b;return b=new URLSearchParams({subAccountId:w,...a}),g(`/payments?${b}`)},[w,a?.status,a?.paymentMethod,a?.startDate,a?.endDate])),{refundPayment:n,loading:o}=function(){let[a,b]=(0,c.useState)(!1),[d,e]=(0,c.useState)(null);return{createPayment:async a=>{b(!0),e(null);let c=await g("/payments",{method:"POST",body:JSON.stringify(a)});return b(!1),c.success||e(c.error||"Failed to record payment"),c},refundPayment:async(a,c)=>{let d;b(!0),e(null);let f=await (d=a,g(`/payments/${d}`,{method:"POST",body:JSON.stringify(c)}));return b(!1),f.success||e(f.error||"Failed to process refund"),f},loading:a,error:d}}(),p=j?.payments||[],q=j?.summary||{},r=async a=>{confirm("Are you sure you want to refund this payment?")&&(await n(a,{})).success&&m()};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Total Transactions"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:p.length})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Payments"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-theme-success",children:y(q.totalPayments||0)})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Refunds"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-red-600",children:y(q.totalRefunds||0)})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Net Revenue"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:y(q.netRevenue||0)})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("select",{value:f,onChange:a=>i(a.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"",children:"All Types"}),(0,b.jsx)("option",{value:"payment",children:"Payments"}),(0,b.jsx)("option",{value:"refund",children:"Refunds"}),(0,b.jsx)("option",{value:"payout",children:"Payouts"})]}),(0,b.jsxs)("select",{value:d,onChange:a=>e(a.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"",children:"All Statuses"}),(0,b.jsx)("option",{value:"succeeded",children:"Succeeded"}),(0,b.jsx)("option",{value:"pending",children:"Pending"}),(0,b.jsx)("option",{value:"failed",children:"Failed"})]})]}),k?(0,b.jsx)(B,{}):l?(0,b.jsx)(C,{message:l,onRetry:m}):0===p.length?(0,b.jsx)(D,{icon:"fa-exchange-alt",title:"No Transactions Yet",description:"Transactions will appear here when payments are processed"}):(0,b.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Customer"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200",children:p.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("i",{className:`fas ${{payment:"fa-arrow-down text-green-500",refund:"fa-arrow-up text-red-500",payout:"fa-arrow-up text-blue-500",fee:"fa-minus text-gray-500"}[a.type]||"fa-circle text-gray-500"}`}),(0,b.jsx)("span",{className:"text-sm capitalize",children:a.type})]})}),(0,b.jsxs)("td",{className:"px-4 py-3",children:[(0,b.jsx)("div",{className:"text-sm text-gray-900",children:a.description}),a.paymentMethod&&(0,b.jsx)("div",{className:"text-xs text-gray-500",children:a.paymentMethod})]}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:a.contactName||"-"}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("span",{className:`font-medium ${a.amount>=0?"text-green-600":"text-red-600"}`,children:[a.amount>=0?"+":"",y(Math.abs(a.amount),a.currency)]})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${x(a.status)}`,children:a.status})}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:z(a.createdAt)}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{className:"p-1 text-gray-400 hover:text-blue-600",children:(0,b.jsx)("i",{className:"fas fa-eye"})}),"payment"===a.type&&"succeeded"===a.status&&(0,b.jsx)("button",{onClick:()=>r(a.id),className:"p-1 text-gray-400 hover:text-red-600",title:"Refund",children:(0,b.jsx)("i",{className:"fas fa-undo"})})]})})]},a.id))})]})})]})}function N(){var a;let[d,e]=(0,c.useState)("products"),[f,j]=(0,c.useState)(!1),[l,m]=(0,c.useState)(""),{data:n,loading:o,error:p,refetch:q}=(a={search:l},h(()=>{let b;return b=new URLSearchParams({subAccountId:w,...a}),g(`/products?${b}`)},[w,a?.search,a?.status,a?.type])),{createProduct:r,deleteProduct:s,loading:t}=function(){let[a,b]=(0,c.useState)(!1),[d,e]=(0,c.useState)(null);return{createProduct:async a=>{b(!0),e(null);let c=await g("/products",{method:"POST",body:JSON.stringify(a)});return b(!1),c.success||e(c.error||"Failed to create product"),c},updateProduct:async(a,c)=>{let d;b(!0),e(null);let f=await (d=a,g(`/products/${d}`,{method:"PUT",body:JSON.stringify(c)}));return b(!1),f.success||e(f.error||"Failed to update product"),f},deleteProduct:async a=>{let c;b(!0),e(null);let d=await (c=a,g(`/products/${c}`,{method:"DELETE"}));return b(!1),d.success||e(d.error||"Failed to delete product"),d},loading:a,error:d}}(),u=n?.products||[],z=async a=>{(await r({subAccountId:w,...a})).success&&(j(!1),q())},B=async a=>{confirm("Are you sure you want to delete this product?")&&(await s(a)).success&&q()};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center gap-2 border-b border-gray-200 pb-2",children:v.map(a=>(0,b.jsx)("button",{onClick:()=>e(a.id),className:`px-4 py-2 text-sm font-medium rounded-lg transition-colors ${d===a.id?"bg-theme-secondary-light text-theme-secondary":"text-gray-600 hover:bg-gray-100"}`,children:a.label},a.id))}),"products"===d&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("i",{className:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),(0,b.jsx)("input",{type:"text",value:l,onChange:a=>m(a.target.value),placeholder:"Search products...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg"})]}),(0,b.jsxs)("button",{onClick:()=>j(!0),className:"flex items-center gap-2 px-4 py-2 bg-theme-secondary text-white rounded-lg hover:opacity-90 btn-theme-primary",children:[(0,b.jsx)("i",{className:"fas fa-plus"}),(0,b.jsx)("span",{children:"Add Product"})]})]}),o?(0,b.jsx)(A,{}):p?(0,b.jsx)(C,{message:p,onRetry:q}):0===u.length?(0,b.jsx)(D,{icon:"fa-box",title:"No Products Yet",description:"Add products to start selling",action:"Add Product",onAction:()=>j(!0)}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map(a=>(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow",children:[(0,b.jsx)("div",{className:"h-32 bg-gray-100 flex items-center justify-center",children:a.images?.[0]?(0,b.jsx)("img",{src:a.images[0],alt:a.name,className:"w-full h-full object-cover"}):(0,b.jsx)("i",{className:`fas ${"digital"===a.type?"fa-download":"service"===a.type?"fa-concierge-bell":"fa-box"} text-4xl text-gray-400`})}),(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,b.jsx)("h4",{className:"font-medium text-gray-900",children:a.name}),(0,b.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${x(a.status)}`,children:a.status})]}),a.description&&(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-2 line-clamp-2",children:a.description}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-lg font-bold text-theme-secondary",children:y(a.price,a.currency)}),(0,b.jsx)("span",{className:"text-xs text-gray-500 capitalize",children:a.type})]}),a.sku&&(0,b.jsxs)("div",{className:"text-xs text-gray-400 mt-2",children:["SKU: ",a.sku]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-gray-200",children:[(0,b.jsxs)("button",{className:"flex-1 px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg",children:[(0,b.jsx)("i",{className:"fas fa-edit mr-1"})," Edit"]}),(0,b.jsx)("button",{onClick:()=>B(a.id),className:"px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg",children:(0,b.jsx)("i",{className:"fas fa-trash"})})]})]})]},a.id))})]}),"collections"===d&&(0,b.jsx)(D,{icon:"fa-folder",title:"Collections",description:"Organize your products into collections",action:"Create Collection",onAction:()=>{}}),"inventory"===d&&(0,b.jsx)(D,{icon:"fa-warehouse",title:"Inventory Management",description:"Track stock levels for physical products",action:"Configure Inventory",onAction:()=>{}}),f&&(0,b.jsx)(i,{isOpen:f,onClose:()=>j(!1),title:"Add Product",size:"xl",children:(0,b.jsx)(k,{subAccountId:w,onSubmit:z,onCancel:()=>j(!1),isLoading:t})})]})}function O(){var a;let[d,e]=(0,c.useState)(!1),{data:f,loading:j,error:k,refetch:l}=h(()=>{let b;return b=new URLSearchParams({subAccountId:a,...void 0}),g(`/coupons?${b}`)},[a=w,void 0,void 0]),{createCoupon:m,deleteCoupon:o,loading:p}=function(){let[a,b]=(0,c.useState)(!1),[d,e]=(0,c.useState)(null);return{createCoupon:async a=>{b(!0),e(null);let c=await g("/coupons",{method:"POST",body:JSON.stringify(a)});return b(!1),c.success||e(c.error||"Failed to create coupon"),c},updateCoupon:async(a,c)=>{let d;b(!0),e(null);let f=await (d=a,g(`/coupons/${d}`,{method:"PUT",body:JSON.stringify(c)}));return b(!1),f.success||e(f.error||"Failed to update coupon"),f},deleteCoupon:async a=>{let c;b(!0),e(null);let d=await (c=a,g(`/coupons/${c}`,{method:"DELETE"}));return b(!1),d.success||e(d.error||"Failed to delete coupon"),d},loading:a,error:d}}(),q=f?.coupons||[],r=async a=>{(await m({subAccountId:w,...a})).success&&(e(!1),l())},s=async a=>{confirm("Are you sure you want to delete this coupon?")&&(await o(a)).success&&l()};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Discount Coupons"}),(0,b.jsxs)("button",{onClick:()=>e(!0),className:"flex items-center gap-2 px-4 py-2 bg-theme-secondary text-white rounded-lg hover:opacity-90 btn-theme-primary",children:[(0,b.jsx)("i",{className:"fas fa-plus"}),(0,b.jsx)("span",{children:"Create Coupon"})]})]}),j?(0,b.jsx)(B,{}):k?(0,b.jsx)(C,{message:k,onRetry:l}):0===q.length?(0,b.jsx)(D,{icon:"fa-tags",title:"No Coupons Yet",description:"Create discount coupons to boost sales",action:"Create Coupon",onAction:()=>e(!0)}):(0,b.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Code"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Discount"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Usage"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Valid Until"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200",children:q.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("code",{className:"px-2 py-1 bg-gray-100 rounded text-sm font-mono",children:a.code})}),(0,b.jsx)("td",{className:"px-4 py-3 font-medium text-gray-900",children:"percentage"===a.discountType?`${a.discountValue}% off`:y(a.discountValue,a.currency)+" off"}),(0,b.jsxs)("td",{className:"px-4 py-3 text-sm text-gray-500",children:[a.usageCount,a.usageLimit?`/${a.usageLimit}`:""," used"]}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-gray-500",children:a.validUntil?z(a.validUntil):"No expiry"}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${x(a.status)}`,children:a.status})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{className:"p-1 text-gray-400 hover:text-blue-600",children:(0,b.jsx)("i",{className:"fas fa-eye"})}),(0,b.jsx)("button",{className:"p-1 text-gray-400 hover:text-theme-secondary",children:(0,b.jsx)("i",{className:"fas fa-edit"})}),(0,b.jsx)("button",{onClick:()=>s(a.id),className:"p-1 text-gray-400 hover:text-red-600",children:(0,b.jsx)("i",{className:"fas fa-trash"})})]})})]},a.id))})]})}),d&&(0,b.jsx)(i,{isOpen:d,onClose:()=>e(!1),title:"Create Coupon",size:"lg",children:(0,b.jsx)(n,{subAccountId:w,onSubmit:r,onCancel:()=>e(!1),isLoading:p})})]})}function P(){var a;let{data:d,loading:e,error:f,refetch:i}=h(()=>{let b;return b=new URLSearchParams({subAccountId:a}),g(`/settings?${b}`)},[a=w]),{updateSettings:j,addTaxRate:k,loading:l}=function(){let[a,b]=(0,c.useState)(!1),[d,e]=(0,c.useState)(null);return{updateSettings:async a=>{b(!0),e(null);let c=await g("/settings",{method:"PUT",body:JSON.stringify(a)});return b(!1),c.success||e(c.error||"Failed to update settings"),c},addTaxRate:async a=>{b(!0),e(null);let c=await g("/settings",{method:"POST",body:JSON.stringify(a)});return b(!1),c.success||e(c.error||"Failed to add tax rate"),c},loading:a,error:d}}(),[m,n]=(0,c.useState)({currency:"USD",taxEnabled:!0,taxRate:10,invoicePrefix:"INV",estimatePrefix:"EST",orderPrefix:"ORD",paymentTerms:30,autoReminders:!0});(0,c.useEffect)(()=>{d?.settings&&n(a=>({...a,...d.settings}))},[d]);let o=async()=>{(await j({subAccountId:w,...m})).success&&(alert("Settings saved successfully!"),i())};return e?(0,b.jsx)(A,{}):f?(0,b.jsx)(C,{message:f,onRetry:i}):(0,b.jsxs)("div",{className:"space-y-6 max-w-3xl",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"General Settings"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Currency"}),(0,b.jsxs)("select",{value:m.currency,onChange:a=>n({...m,currency:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"USD",children:"USD - US Dollar"}),(0,b.jsx)("option",{value:"EUR",children:"EUR - Euro"}),(0,b.jsx)("option",{value:"GBP",children:"GBP - British Pound"}),(0,b.jsx)("option",{value:"CAD",children:"CAD - Canadian Dollar"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Payment Terms (days)"}),(0,b.jsx)("input",{type:"number",value:m.paymentTerms,onChange:a=>n({...m,paymentTerms:parseInt(a.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tax Settings"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Enable Tax"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Add tax to invoices and orders"})]}),(0,b.jsx)("button",{type:"button",onClick:()=>n({...m,taxEnabled:!m.taxEnabled}),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors ${m.taxEnabled?"bg-theme-secondary":"bg-gray-200"}`,children:(0,b.jsx)("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow transition ${m.taxEnabled?"translate-x-5":"translate-x-0"}`})})]}),m.taxEnabled&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Tax Rate (%)"}),(0,b.jsx)("input",{type:"number",value:m.taxRate,onChange:a=>n({...m,taxRate:parseFloat(a.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Number Prefixes"}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Invoice Prefix"}),(0,b.jsx)("input",{type:"text",value:m.invoicePrefix,onChange:a=>n({...m,invoicePrefix:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimate Prefix"}),(0,b.jsx)("input",{type:"text",value:m.estimatePrefix,onChange:a=>n({...m,estimatePrefix:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order Prefix"}),(0,b.jsx)("input",{type:"text",value:m.orderPrefix,onChange:a=>n({...m,orderPrefix:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Reminders"}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Auto Reminders"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Automatically send payment reminders"})]}),(0,b.jsx)("button",{type:"button",onClick:()=>n({...m,autoReminders:!m.autoReminders}),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors ${m.autoReminders?"bg-theme-secondary":"bg-gray-200"}`,children:(0,b.jsx)("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow transition ${m.autoReminders?"translate-x-5":"translate-x-0"}`})})]})]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsx)("button",{onClick:o,disabled:l,className:"px-6 py-2 bg-theme-secondary text-white rounded-lg hover:opacity-90 disabled:opacity-50 btn-theme-primary",children:l?(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-spinner fa-spin"}),"Saving..."]}):"Save Settings"})})]})}function Q(){let[a,d]=(0,c.useState)([{id:"stripe",name:"Stripe",provider:"stripe",status:"disconnected",isDefault:!1},{id:"paypal",name:"PayPal",provider:"paypal",status:"disconnected",isDefault:!1}]),e=async a=>{alert(`Connect to ${a} - This would open the authentication flow`)},f=async a=>{confirm(`Are you sure you want to disconnect ${a}?`)&&d(b=>b.map(b=>b.provider===a?{...b,status:"disconnected",isDefault:!1}:b))};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Payment Integrations"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Connect your payment gateways to accept payments"})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[{provider:"stripe",name:"Stripe",icon:"fab fa-stripe",color:"#6772E5",description:"Accept credit cards, Apple Pay, Google Pay, and more"},{provider:"paypal",name:"PayPal",icon:"fab fa-paypal",color:"#003087",description:"Accept PayPal payments worldwide"},{provider:"authorize_net",name:"Authorize.net",icon:"fas fa-credit-card",color:"#1A4596",description:"Accept payments via Authorize.net gateway"},{provider:"nmi",name:"NMI",icon:"fas fa-credit-card",color:"#00A1E0",description:"Network Merchants payment gateway"},{provider:"square",name:"Square",icon:"fas fa-square",color:"#000000",description:"Accept payments with Square"},{provider:"paytabs",name:"PayTabs",icon:"fas fa-credit-card",color:"#1E88E5",description:"Middle East & Africa payment gateway"},{provider:"paymob",name:"PayMob",icon:"fas fa-credit-card",color:"#FF5722",description:"Egypt & MENA payment solutions"},{provider:"payplus",name:"PayPlus",icon:"fas fa-credit-card",color:"#4CAF50",description:"Israeli payment gateway"}].map(c=>{var g;let h,i=(g=c.provider,h=a.find(a=>a.provider===g),h?.status||"disconnected"),j="connected"===i,k=a.find(a=>a.provider===c.provider);return(0,b.jsxs)("div",{className:`bg-white rounded-lg border p-4 ${j?"border-green-200 bg-green-50/50":"border-gray-200"}`,children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center",style:{backgroundColor:`${c.color}15`},children:(0,b.jsx)("i",{className:`${c.icon} text-xl`,style:{color:c.color}})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-medium text-gray-900",children:c.name}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:c.description})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[k?.isDefault&&(0,b.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-700 rounded-full",children:"Default"}),(0,b.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${x(i)}`,children:i})]})]}),(0,b.jsx)("div",{className:"flex items-center gap-2 mt-4",children:j?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("button",{className:"flex-1 px-3 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg border border-gray-200",children:[(0,b.jsx)("i",{className:"fas fa-cog mr-1"})," Settings"]}),!k?.isDefault&&(0,b.jsx)("button",{onClick:()=>{var a;return a=c.provider,void d(b=>b.map(b=>({...b,isDefault:b.provider===a})))},className:"px-3 py-2 text-sm text-green-600 hover:bg-green-50 rounded-lg border border-green-200",children:"Set Default"}),(0,b.jsx)("button",{onClick:()=>f(c.provider),className:"px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg border border-red-200",children:"Disconnect"})]}):(0,b.jsxs)("button",{onClick:()=>e(c.provider),className:"flex-1 px-3 py-2 text-sm text-white bg-theme-secondary hover:opacity-90 rounded-lg btn-theme-primary",children:[(0,b.jsx)("i",{className:"fas fa-plug mr-1"})," Connect"]})})]},c.provider)})})]})}function R(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-[#0a0a0a] flex items-center justify-center",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),children:(0,b.jsx)(G,{})})}a.s(["default",()=>R,"dynamic",0,"force-dynamic"],59741)}];

//# sourceMappingURL=app_sub-account_revenue-engine_page_tsx_9719840e._.js.map