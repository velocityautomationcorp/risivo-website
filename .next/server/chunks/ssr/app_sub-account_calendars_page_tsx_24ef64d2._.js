module.exports=[59491,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(50944);function f({calendarId:a,onClose:d,onUpdated:e}){let[f,l]=(0,c.useState)("general"),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)([]),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)(null);(0,c.useEffect)(()=>{y(),z(),A()},[a]);let y=async()=>{try{let b=await fetch(`/api/v1/calendars/${a}/settings`),c=await b.json();c.success?r(c.data):x(c.error)}catch(a){x("Failed to load settings")}finally{n(!1)}},z=async()=>{try{let b=await fetch(`/api/v1/calendars/${a}/members`),c=await b.json();c.success&&t(c.data.members||[])}catch(a){console.error("Failed to load members:",a)}},A=async()=>{try{let b=await fetch(`/api/v1/calendars/${a}/appointment-types?activeOnly=false`),c=await b.json();c.success&&v(c.data||[])}catch(a){console.error("Failed to load appointment types:",a)}},B=async()=>{if(q){p(!0),x(null);try{let b=await fetch(`/api/v1/calendars/${a}/settings`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...q.calendar,...q.bookingSettings,...q.reschedulingSettings,workingHours:q.workingHours,dateOverrides:q.dateOverrides})}),c=await b.json();c.success?(e(),alert("Settings saved successfully!")):x(c.error||"Failed to save settings")}catch(a){x("Failed to save settings")}finally{p(!1)}}};return m?(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl p-8",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto"}),(0,b.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading settings..."})]})}):q?(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Calendar Settings"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:q.calendar.name})]}),(0,b.jsx)("button",{onClick:d,className:"text-gray-400 hover:text-gray-600",children:(0,b.jsx)("i",{className:"fas fa-times text-xl"})})]}),(0,b.jsx)("div",{className:"flex border-b px-6",children:[{id:"general",label:"General",icon:"cog"},{id:"availability",label:"Availability",icon:"clock"},{id:"booking",label:"Booking Rules",icon:"calendar-check"},{id:"team",label:"Team Members",icon:"users"},{id:"types",label:"Appointment Types",icon:"list"}].map(a=>(0,b.jsxs)("button",{onClick:()=>l(a.id),className:`px-4 py-3 text-sm font-medium border-b-2 -mb-px ${f===a.id?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[(0,b.jsx)("i",{className:`fas fa-${a.icon} mr-2`}),a.label]},a.id))}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:[w&&(0,b.jsx)("div",{className:"mb-4 p-4 bg-red-50 text-red-700 rounded-lg",children:w}),"general"===f&&(0,b.jsx)(g,{settings:q,onUpdate:a=>r({...q,calendar:{...q.calendar,...a}})}),"availability"===f&&(0,b.jsx)(h,{workingHours:q.workingHours,dateOverrides:q.dateOverrides,onUpdateWorkingHours:a=>r({...q,workingHours:a}),onUpdateDateOverrides:a=>r({...q,dateOverrides:a})}),"booking"===f&&(0,b.jsx)(i,{bookingSettings:q.bookingSettings,reschedulingSettings:q.reschedulingSettings,onUpdateBooking:a=>r({...q,bookingSettings:{...q.bookingSettings,...a}}),onUpdateRescheduling:a=>r({...q,reschedulingSettings:{...q.reschedulingSettings,...a}})}),"team"===f&&(0,b.jsx)(j,{calendarId:a,calendarType:q.calendar.calendarType||"individual",members:s,onRefresh:z}),"types"===f&&(0,b.jsx)(k,{calendarId:a,types:u,onRefresh:A})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-t bg-gray-50",children:[(0,b.jsx)("button",{onClick:d,className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),(0,b.jsx)("button",{onClick:B,disabled:o,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:o?"Saving...":"Save Changes"})]})]})}):(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl p-8 max-w-md",children:[(0,b.jsx)("p",{className:"text-red-600",children:w||"Failed to load settings"}),(0,b.jsx)("button",{onClick:d,className:"mt-4 px-4 py-2 bg-gray-100 rounded-lg",children:"Close"})]})})}function g({settings:a,onUpdate:c}){return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Calendar Name"}),(0,b.jsx)("input",{type:"text",value:a.calendar.name||"",onChange:a=>c({name:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,b.jsx)("textarea",{value:a.calendar.description||"",onChange:a=>c({description:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:3})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Timezone"}),(0,b.jsxs)("select",{value:a.calendar.timezone||"UTC",onChange:a=>c({timezone:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"America/New_York",children:"Eastern Time (ET)"}),(0,b.jsx)("option",{value:"America/Chicago",children:"Central Time (CT)"}),(0,b.jsx)("option",{value:"America/Denver",children:"Mountain Time (MT)"}),(0,b.jsx)("option",{value:"America/Los_Angeles",children:"Pacific Time (PT)"}),(0,b.jsx)("option",{value:"UTC",children:"UTC"}),(0,b.jsx)("option",{value:"Europe/London",children:"London"}),(0,b.jsx)("option",{value:"Europe/Paris",children:"Paris"}),(0,b.jsx)("option",{value:"Asia/Tokyo",children:"Tokyo"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:"color",value:a.calendar.color||"#3B82F6",onChange:a=>c({color:a.target.value}),className:"w-12 h-10 border border-gray-300 rounded-lg cursor-pointer"}),(0,b.jsx)("input",{type:"text",value:a.calendar.color||"#3B82F6",onChange:a=>c({color:a.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Booking Page URL"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"/book/"}),(0,b.jsx)("input",{type:"text",value:a.calendar.slug||"",disabled:!0,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg bg-gray-50"}),(0,b.jsx)("button",{onClick:()=>navigator.clipboard.writeText(`${window.location.origin}/book/${a.calendar.slug}`),className:"px-4 py-2 bg-gray-100 rounded-lg hover:bg-gray-200",children:(0,b.jsx)("i",{className:"fas fa-copy"})})]})]})]})}function h({workingHours:a,dateOverrides:d,onUpdateWorkingHours:e,onUpdateDateOverrides:f}){let g=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)("blocked"),[l,m]=(0,c.useState)(""),n=b=>{let c=a.find(a=>a.dayOfWeek===b);return c||{id:`temp-${b}`,calendarId:"",dayOfWeek:b,isAvailable:b>=1&&b<=5,timeBlocks:b>=1&&b<=5?[{startTime:"09:00",endTime:"17:00"}]:[],createdAt:"",updatedAt:""}},o=(b,c,d)=>{let f=a.findIndex(a=>a.dayOfWeek===b),g=n(b),h={...g,isAvailable:c,timeBlocks:void 0!==d?d:g.timeBlocks};if(f>=0){let b=[...a];b[f]=h,e(b)}else e([...a,h])},p=(a,b,c,d)=>{let e=n(a),f=[...e.timeBlocks];f[b]={...f[b],[c]:d},o(a,e.isAvailable,f)};return(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Working Hours"}),(0,b.jsx)("div",{className:"space-y-3",children:[0,1,2,3,4,5,6].map(a=>{let c=n(a);return(0,b.jsxs)("div",{className:"flex items-start gap-4 p-3 bg-gray-50 rounded-lg",children:[(0,b.jsx)("div",{className:"w-28",children:(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:c.isAvailable,onChange:b=>o(a,b.target.checked),className:"rounded border-gray-300"}),(0,b.jsx)("span",{className:"font-medium text-sm",children:g[a]})]})}),c.isAvailable?(0,b.jsxs)("div",{className:"flex-1 space-y-2",children:[c.timeBlocks.map((d,e)=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"time",value:d.startTime,onChange:b=>p(a,e,"startTime",b.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm"}),(0,b.jsx)("span",{className:"text-gray-400",children:"to"}),(0,b.jsx)("input",{type:"time",value:d.endTime,onChange:b=>p(a,e,"endTime",b.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm"}),c.timeBlocks.length>1&&(0,b.jsx)("button",{onClick:()=>{let b;return b=n(a).timeBlocks.filter((a,b)=>b!==e),void o(a,b.length>0,b)},className:"p-1 text-red-500 hover:text-red-700",children:(0,b.jsx)("i",{className:"fas fa-times"})})]},e)),(0,b.jsxs)("button",{onClick:()=>{let b;return b=[...n(a).timeBlocks,{startTime:"09:00",endTime:"17:00"}],void o(a,!0,b)},className:"text-sm text-blue-600 hover:text-blue-800",children:[(0,b.jsx)("i",{className:"fas fa-plus mr-1"}),"Add time block"]})]}):(0,b.jsx)("span",{className:"text-gray-400 text-sm",children:"Unavailable"})]},a)})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Date Overrides"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Block specific dates or set custom hours"}),(0,b.jsxs)("div",{className:"flex gap-3 mb-4 p-4 bg-gray-50 rounded-lg",children:[(0,b.jsx)("input",{type:"date",value:h,onChange:a=>i(a.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg"}),(0,b.jsxs)("select",{value:j,onChange:a=>k(a.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"blocked",children:"Blocked"}),(0,b.jsx)("option",{value:"holiday",children:"Holiday"})]}),(0,b.jsx)("input",{type:"text",value:l,onChange:a=>m(a.target.value),placeholder:"Reason (optional)",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg"}),(0,b.jsx)("button",{onClick:()=>{h&&(f([...d,{id:`temp-${Date.now()}`,calendarId:"",overrideDate:h,overrideType:j,reason:l,isRecurring:!1,createdAt:""}]),i(""),m(""))},disabled:!h,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:"Add"})]}),(0,b.jsx)("div",{className:"space-y-2",children:0===d.length?(0,b.jsx)("p",{className:"text-gray-400 text-sm",children:"No date overrides set"}):d.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white border rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:`px-2 py-1 rounded text-xs font-medium ${"holiday"===a.overrideType?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:a.overrideType}),(0,b.jsx)("span",{className:"font-medium",children:new Date(a.overrideDate+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"})}),a.reason&&(0,b.jsxs)("span",{className:"text-gray-500 text-sm",children:["- ",a.reason]})]}),(0,b.jsx)("button",{onClick:()=>{var b;return b=a.overrideDate,void f(d.filter(a=>a.overrideDate!==b))},className:"text-red-500 hover:text-red-700",children:(0,b.jsx)("i",{className:"fas fa-trash"})})]},a.overrideDate))})]})]})}function i({bookingSettings:a,reschedulingSettings:c,onUpdateBooking:d,onUpdateRescheduling:e}){return(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Booking Settings"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Default Duration"}),(0,b.jsxs)("select",{value:a.durationMinutes,onChange:a=>d({durationMinutes:parseInt(a.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"15",children:"15 minutes"}),(0,b.jsx)("option",{value:"30",children:"30 minutes"}),(0,b.jsx)("option",{value:"45",children:"45 minutes"}),(0,b.jsx)("option",{value:"60",children:"1 hour"}),(0,b.jsx)("option",{value:"90",children:"1.5 hours"}),(0,b.jsx)("option",{value:"120",children:"2 hours"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slot Interval"}),(0,b.jsxs)("select",{value:a.slotIntervalMinutes,onChange:a=>d({slotIntervalMinutes:parseInt(a.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"5",children:"5 minutes"}),(0,b.jsx)("option",{value:"10",children:"10 minutes"}),(0,b.jsx)("option",{value:"15",children:"15 minutes"}),(0,b.jsx)("option",{value:"30",children:"30 minutes"}),(0,b.jsx)("option",{value:"60",children:"60 minutes"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Buffer Before"}),(0,b.jsxs)("select",{value:a.bufferBeforeMinutes,onChange:a=>d({bufferBeforeMinutes:parseInt(a.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"0",children:"None"}),(0,b.jsx)("option",{value:"5",children:"5 minutes"}),(0,b.jsx)("option",{value:"10",children:"10 minutes"}),(0,b.jsx)("option",{value:"15",children:"15 minutes"}),(0,b.jsx)("option",{value:"30",children:"30 minutes"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Buffer After"}),(0,b.jsxs)("select",{value:a.bufferAfterMinutes,onChange:a=>d({bufferAfterMinutes:parseInt(a.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"0",children:"None"}),(0,b.jsx)("option",{value:"5",children:"5 minutes"}),(0,b.jsx)("option",{value:"10",children:"10 minutes"}),(0,b.jsx)("option",{value:"15",children:"15 minutes"}),(0,b.jsx)("option",{value:"30",children:"30 minutes"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Notice"}),(0,b.jsxs)("select",{value:a.minimumNoticeHours,onChange:a=>d({minimumNoticeHours:parseInt(a.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"0",children:"None"}),(0,b.jsx)("option",{value:"1",children:"1 hour"}),(0,b.jsx)("option",{value:"4",children:"4 hours"}),(0,b.jsx)("option",{value:"24",children:"24 hours"}),(0,b.jsx)("option",{value:"48",children:"48 hours"}),(0,b.jsx)("option",{value:"72",children:"72 hours"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Book Up To"}),(0,b.jsxs)("select",{value:a.maximumBookingDays,onChange:a=>d({maximumBookingDays:parseInt(a.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"7",children:"1 week"}),(0,b.jsx)("option",{value:"14",children:"2 weeks"}),(0,b.jsx)("option",{value:"30",children:"30 days"}),(0,b.jsx)("option",{value:"60",children:"60 days"}),(0,b.jsx)("option",{value:"90",children:"90 days"}),(0,b.jsx)("option",{value:"180",children:"6 months"}),(0,b.jsx)("option",{value:"365",children:"1 year"})]})]})]}),(0,b.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:a.autoConfirm,onChange:a=>d({autoConfirm:a.target.checked}),className:"rounded border-gray-300"}),(0,b.jsx)("span",{className:"text-sm",children:"Auto-confirm appointments"})]}),(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:a.waitlistEnabled,onChange:a=>d({waitlistEnabled:a.target.checked}),className:"rounded border-gray-300"}),(0,b.jsx)("span",{className:"text-sm",children:"Enable waitlist when fully booked"})]}),(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:a.allowGuests??!1,onChange:a=>d({allowGuests:a.target.checked}),className:"rounded border-gray-300"}),(0,b.jsx)("span",{className:"text-sm",children:"Allow guests"}),(0,b.jsx)("span",{className:"text-xs text-gray-400",children:"(Let invitees add additional attendees)"})]}),a.allowGuests&&(0,b.jsxs)("div",{className:"ml-6",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum guests per booking"}),(0,b.jsxs)("select",{value:a.maxGuests??5,onChange:a=>d({maxGuests:parseInt(a.target.value)}),className:"w-48 px-4 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"1",children:"1 guest"}),(0,b.jsx)("option",{value:"2",children:"2 guests"}),(0,b.jsx)("option",{value:"3",children:"3 guests"}),(0,b.jsx)("option",{value:"5",children:"5 guests"}),(0,b.jsx)("option",{value:"10",children:"10 guests"})]})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Rescheduling & Cancellation"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:c.allowReschedule,onChange:a=>e({allowReschedule:a.target.checked}),className:"rounded border-gray-300"}),(0,b.jsx)("span",{className:"text-sm",children:"Allow rescheduling"})]}),c.allowReschedule&&(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 ml-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reschedule Deadline"}),(0,b.jsxs)("select",{value:c.rescheduleDeadlineHours||0,onChange:a=>e({rescheduleDeadlineHours:parseInt(a.target.value)||void 0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"0",children:"Any time"}),(0,b.jsx)("option",{value:"1",children:"1 hour before"}),(0,b.jsx)("option",{value:"4",children:"4 hours before"}),(0,b.jsx)("option",{value:"24",children:"24 hours before"}),(0,b.jsx)("option",{value:"48",children:"48 hours before"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Reschedules"}),(0,b.jsxs)("select",{value:c.maxReschedules||0,onChange:a=>e({maxReschedules:parseInt(a.target.value)||void 0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"0",children:"Unlimited"}),(0,b.jsx)("option",{value:"1",children:"1 time"}),(0,b.jsx)("option",{value:"2",children:"2 times"}),(0,b.jsx)("option",{value:"3",children:"3 times"})]})]})]}),(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:c.allowCancellation,onChange:a=>e({allowCancellation:a.target.checked}),className:"rounded border-gray-300"}),(0,b.jsx)("span",{className:"text-sm",children:"Allow cancellation"})]}),c.allowCancellation&&(0,b.jsxs)("div",{className:"ml-6",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cancellation Deadline"}),(0,b.jsxs)("select",{value:c.cancellationDeadlineHours||0,onChange:a=>e({cancellationDeadlineHours:parseInt(a.target.value)||void 0}),className:"w-full max-w-xs px-4 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"0",children:"Any time"}),(0,b.jsx)("option",{value:"1",children:"1 hour before"}),(0,b.jsx)("option",{value:"4",children:"4 hours before"}),(0,b.jsx)("option",{value:"24",children:"24 hours before"}),(0,b.jsx)("option",{value:"48",children:"48 hours before"})]})]})]})]})]})}function j({calendarId:a,calendarType:d,members:e,onRefresh:f}){let[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)("member"),[m,n]=(0,c.useState)(!1),o=async()=>{if(i){n(!0);try{let b=await fetch(`/api/v1/calendars/${a}/members`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,role:k})}),c=await b.json();c.success?(f(),h(!1),j("")):alert(c.error||"Failed to add member")}catch(a){alert("Failed to add member")}finally{n(!1)}}},p=async b=>{if(confirm("Are you sure you want to remove this member?"))try{let c=await fetch(`/api/v1/calendars/${a}/members?memberId=${b}`,{method:"DELETE"}),d=await c.json();d.success?f():alert(d.error||"Failed to remove member")}catch(a){alert("Failed to remove member")}},q=async(b,c)=>{try{await fetch(`/api/v1/calendars/${a}/members`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({memberId:b,isActive:c})}),f()}catch(a){console.error("Failed to update member:",a)}};return["team","round_robin","collective"].includes(d)?(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Team Members"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"round_robin"===d?"Members will be assigned appointments in rotation":"Members can manage appointments on this calendar"})]}),(0,b.jsxs)("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,b.jsx)("i",{className:"fas fa-plus mr-2"}),"Add Member"]})]}),0===e.length?(0,b.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[(0,b.jsx)("i",{className:"fas fa-users text-4xl text-gray-300 mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"No team members"}),(0,b.jsx)("p",{className:"text-gray-500 mb-4",children:"Add team members to enable team scheduling"}),(0,b.jsx)("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add First Member"})]}):(0,b.jsx)("div",{className:"space-y-2",children:e.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white border rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("span",{className:"text-gray-400 text-sm",children:["#",c+1]}),(0,b.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:a.user?.avatar?(0,b.jsx)("img",{src:a.user.avatar,alt:"",className:"w-10 h-10 rounded-full"}):(0,b.jsx)("i",{className:"fas fa-user text-gray-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:a.user?.name||"Unknown"}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:a.user?.email})]}),(0,b.jsx)("span",{className:`px-2 py-1 rounded text-xs font-medium ${"owner"===a.role?"bg-purple-100 text-purple-800":"member"===a.role?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:a.role}),a.isPrimaryOwner&&(0,b.jsx)("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded text-xs font-medium",children:"Primary"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:a.isActive,onChange:b=>q(a.id,b.target.checked),className:"rounded border-gray-300"}),(0,b.jsx)("span",{className:"text-sm",children:"Active"})]}),!a.isPrimaryOwner&&(0,b.jsx)("button",{onClick:()=>p(a.id),className:"text-red-500 hover:text-red-700",children:(0,b.jsx)("i",{className:"fas fa-trash"})})]})]},a.id))}),g&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md mx-4 p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-bold mb-4",children:"Add Team Member"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,b.jsx)("input",{type:"email",value:i,onChange:a=>j(a.target.value),placeholder:"team@example.com",className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),(0,b.jsxs)("select",{value:k,onChange:a=>l(a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"member",children:"Member - Can manage appointments"}),(0,b.jsx)("option",{value:"owner",children:"Owner - Full access"}),(0,b.jsx)("option",{value:"viewer",children:"Viewer - Read only"})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,b.jsx)("button",{onClick:()=>h(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,b.jsx)("button",{onClick:o,disabled:m||!i,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:m?"Adding...":"Add Member"})]})]})})]}):(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("i",{className:"fas fa-user text-4xl text-gray-300 mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Individual Calendar"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Team members are only available for Team, Round Robin, or Collective calendars."})]})}function k({calendarId:a,types:d,onRefresh:e}){let[f,g]=(0,c.useState)(!1),[h,i]=(0,c.useState)(null),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)({name:"",description:"",durationMinutes:30,defaultLocationType:"video",price:"",requirePayment:!1}),n=()=>{m({name:"",description:"",durationMinutes:30,defaultLocationType:"video",price:"",requirePayment:!1}),i(null)},o=async()=>{if(l.name){k(!0);try{let b={...h?{id:h.id}:{},name:l.name,description:l.description,durationMinutes:l.durationMinutes,defaultLocationType:l.defaultLocationType,price:l.price?parseFloat(l.price):null,requirePayment:l.requirePayment},c=await fetch(`/api/v1/calendars/${a}/appointment-types`,{method:h?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),d=await c.json();d.success?(e(),g(!1),n()):alert(d.error||"Failed to save appointment type")}catch(a){alert("Failed to save appointment type")}finally{k(!1)}}},p=async(b,c)=>{try{await fetch(`/api/v1/calendars/${a}/appointment-types`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:b,isActive:c})}),e()}catch(a){console.error("Failed to update type:",a)}},q=async b=>{if(confirm("Are you sure you want to delete this appointment type?"))try{let c=await fetch(`/api/v1/calendars/${a}/appointment-types?id=${b}&permanent=true`,{method:"DELETE"}),d=await c.json();d.success?e():alert(d.error||"Failed to delete appointment type")}catch(a){alert("Failed to delete appointment type")}};return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Appointment Types"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Create different types of appointments with custom durations and pricing"})]}),(0,b.jsxs)("button",{onClick:()=>{n(),g(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,b.jsx)("i",{className:"fas fa-plus mr-2"}),"Add Type"]})]}),0===d.length?(0,b.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[(0,b.jsx)("i",{className:"fas fa-list text-4xl text-gray-300 mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"No appointment types"}),(0,b.jsx)("p",{className:"text-gray-500 mb-4",children:"Create appointment types to offer different services"}),(0,b.jsx)("button",{onClick:()=>{n(),g(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create First Type"})]}):(0,b.jsx)("div",{className:"space-y-2",children:d.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white border rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:a.color||"#3B82F6"}}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-medium",children:a.name}),(0,b.jsxs)("div",{className:"text-sm text-gray-500",children:[a.durationMinutes," min",a.price&&` • $${a.price}`,a.defaultLocationType&&` • ${a.defaultLocationType}`]})]}),!a.isActive&&(0,b.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs",children:"Inactive"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("button",{onClick:()=>{i(a),m({name:a.name,description:a.description||"",durationMinutes:a.durationMinutes,defaultLocationType:a.defaultLocationType||"video",price:a.price?.toString()||"",requirePayment:a.requirePayment}),g(!0)},className:"text-gray-400 hover:text-gray-600",children:(0,b.jsx)("i",{className:"fas fa-edit"})}),(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:a.isActive,onChange:b=>p(a.id,b.target.checked),className:"rounded border-gray-300"}),(0,b.jsx)("span",{className:"text-sm",children:"Active"})]}),(0,b.jsx)("button",{onClick:()=>q(a.id),className:"text-red-500 hover:text-red-700",children:(0,b.jsx)("i",{className:"fas fa-trash"})})]})]},a.id))}),f&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md mx-4 p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-bold mb-4",children:h?"Edit Appointment Type":"Create Appointment Type"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),(0,b.jsx)("input",{type:"text",value:l.name,onChange:a=>m({...l,name:a.target.value}),placeholder:"e.g., Discovery Call",className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,b.jsx)("textarea",{value:l.description,onChange:a=>m({...l,description:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",rows:2})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration"}),(0,b.jsxs)("select",{value:l.durationMinutes,onChange:a=>m({...l,durationMinutes:parseInt(a.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"15",children:"15 minutes"}),(0,b.jsx)("option",{value:"30",children:"30 minutes"}),(0,b.jsx)("option",{value:"45",children:"45 minutes"}),(0,b.jsx)("option",{value:"60",children:"1 hour"}),(0,b.jsx)("option",{value:"90",children:"1.5 hours"}),(0,b.jsx)("option",{value:"120",children:"2 hours"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location Type"}),(0,b.jsxs)("select",{value:l.defaultLocationType,onChange:a=>m({...l,defaultLocationType:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"video",children:"Video Call"}),(0,b.jsx)("option",{value:"phone",children:"Phone Call"}),(0,b.jsx)("option",{value:"physical",children:"In Person"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price (USD)"}),(0,b.jsx)("input",{type:"number",value:l.price,onChange:a=>m({...l,price:a.target.value}),placeholder:"0.00",className:"w-full px-4 py-2 border border-gray-300 rounded-lg"})]}),l.price&&parseFloat(l.price)>0&&(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:l.requirePayment,onChange:a=>m({...l,requirePayment:a.target.checked}),className:"rounded border-gray-300"}),(0,b.jsx)("span",{className:"text-sm",children:"Require payment to book"})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,b.jsx)("button",{onClick:()=>{g(!1),n()},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,b.jsx)("button",{onClick:o,disabled:j||!l.name,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:j?"Saving...":h?"Save Changes":"Create Type"})]})]})})]})}var l=a.i(86377);let m=[{id:"calendar",label:"Calendar View",icon:"fa-calendar-alt",href:"/sub-account/calendars"},{id:"appointments",label:"Appointment List",icon:"fa-list-alt",href:"/sub-account/calendars?tab=appointments"},{id:"settings",label:"Calendar Settings",icon:"fa-cog",href:"/sub-account/calendars?tab=settings"}];function n(){(0,e.usePathname)();let a=(0,e.useSearchParams)().get("tab")||"calendar",[g,h]=(0,c.useState)([]),[i,j]=(0,c.useState)([]),[k,n]=(0,c.useState)(null),[r,s]=(0,c.useState)(new Date),[t,u]=(0,c.useState)("month"),[v,y]=(0,c.useState)(!0),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(!1),J="b0000000-0000-0000-0000-000000000001";(0,c.useEffect)(()=>{K()},[]),(0,c.useEffect)(()=>{g.length>0&&L()},[g,r,t]);let K=async()=>{try{let a=await fetch(`/api/v1/calendars?subAccountId=${J}`),b=await a.json();b.success?(h(b.data||[]),b.data&&0!==b.data.length||y(!1)):(console.error("Error loading calendars:",b.error),y(!1))}catch(a){console.error("Error loading calendars:",a),y(!1)}},L=async()=>{y(!0);try{let{startDate:a,endDate:b}=M(),c=k?`&calendarId=${k.id}`:"",d=await fetch(`/api/v1/appointments?subAccountId=${J}&startDate=${a}&endDate=${b}${c}&limit=1000`),e=await d.json();e.success&&j(e.data)}catch(a){console.error("Error loading appointments:",a)}finally{y(!1)}},M=()=>{let a,b,c=new Date(r);switch(t){case"day":a=new Date(c.setHours(0,0,0,0)),b=new Date(c.setHours(23,59,59,999));break;case"week":let d=c.getDay();(a=new Date(c)).setDate(c.getDate()-d),a.setHours(0,0,0,0),(b=new Date(a)).setDate(a.getDate()+6),b.setHours(23,59,59,999);break;case"agenda":(a=new Date).setHours(0,0,0,0),(b=new Date).setDate(b.getDate()+30),b.setHours(23,59,59,999);break;default:a=new Date(c.getFullYear(),c.getMonth(),1),b=new Date(c.getFullYear(),c.getMonth()+1,0,23,59,59,999)}return{startDate:a.toISOString().split("T")[0],endDate:b.toISOString().split("T")[0]}},N=(0,c.useMemo)(()=>i.map(a=>({id:a.id,title:a.appointmentType?.name||a.contactName,start:new Date(a.startTime),end:new Date(a.endTime),color:function(a){switch(a){case"scheduled":return"#F59E0B";case"confirmed":default:return"#10B981";case"completed":return"#3B82F6";case"cancelled":return"#EF4444";case"no_show":return"#6B7280";case"rescheduled":return"#8B5CF6"}}(a.status),status:a.status,contactName:a.contactName,contactEmail:a.contactEmail,calendarName:a.calendar?.name,appointmentType:a.appointmentType?.name})),[i]);return(0,b.jsxs)("div",{className:"space-y-6 -m-4 sm:-m-6 lg:-m-8",children:[(0,b.jsxs)("div",{className:"flex-none bg-white border-b border-gray-200 px-4 sm:px-6 lg:px-8 pt-4 sm:pt-6 lg:pt-8 pb-0",children:[(0,b.jsx)(l.PageHeader,{title:"Calendars",description:"Manage appointments, bookings, and scheduling for your team",icon:"fa-calendar-alt"}),(0,b.jsx)("nav",{className:"-mb-px flex space-x-8","aria-label":"Calendar tabs",children:m.map(c=>{let e=c.id===a;return(0,b.jsxs)(d.default,{href:c.href,className:`group inline-flex items-center border-b-2 py-4 px-1 text-sm font-medium transition-colors ${e?"border-[var(--theme-secondary)] text-[var(--theme-secondary)]":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700"}`,children:[(0,b.jsx)("i",{className:`fas ${c.icon} mr-2 text-base`,style:{color:e?"var(--theme-secondary)":void 0}}),c.label]},c.id)})})]}),(0,b.jsxs)("div",{className:"px-4 sm:px-6 lg:px-8 pb-4 sm:pb-6 lg:pb-8",children:["calendar"===a&&(0,b.jsx)(o,{calendars:g,appointments:i,events:N,selectedCalendar:k,setSelectedCalendar:n,selectedDate:r,setSelectedDate:s,viewMode:t,setViewMode:u,loading:v,sidebarCollapsed:F,setSidebarCollapsed:G,onEventClick:a=>{let b=i.find(b=>b.id===a.id);b&&(E(b),C(!0))},navigatePrev:()=>{let a=new Date(r);switch(t){case"day":a.setDate(a.getDate()-1);break;case"week":a.setDate(a.getDate()-7);break;default:a.setMonth(a.getMonth()-1)}s(a)},navigateNext:()=>{let a=new Date(r);switch(t){case"day":a.setDate(a.getDate()+1);break;case"week":a.setDate(a.getDate()+7);break;default:a.setMonth(a.getMonth()+1)}s(a)},goToToday:()=>{s(new Date)},getHeaderText:()=>{let a=["January","February","March","April","May","June","July","August","September","October","November","December"];switch(t){case"day":return r.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});case"week":let b=new Date(r);b.setDate(r.getDate()-r.getDay());let c=new Date(b);return c.setDate(b.getDate()+6),`${a[b.getMonth()]} ${b.getDate()} - ${c.getDate()}, ${b.getFullYear()}`;case"agenda":return"Upcoming Appointments";default:return`${a[r.getMonth()]} ${r.getFullYear()}`}},setShowCreateModal:A,setShowSettingsModal:I}),"appointments"===a&&(0,b.jsx)(p,{appointments:i,calendars:g,loading:v,onAppointmentClick:a=>{E(a),C(!0)},onRefresh:L}),"settings"===a&&(0,b.jsx)(q,{calendars:g,onCalendarUpdated:K,subAccountId:J})]}),z&&(0,b.jsx)(w,{subAccountId:J,onClose:()=>A(!1),onCreated:()=>{A(!1),K()}}),B&&D&&(0,b.jsx)(x,{appointment:D,onClose:()=>{C(!1),E(null)},onUpdated:()=>{L()}}),H&&k&&(0,b.jsx)(f,{calendarId:k.id,onClose:()=>I(!1),onUpdated:()=>{K(),I(!1)}})]})}function o({calendars:a,appointments:c,events:d,selectedCalendar:e,setSelectedCalendar:f,selectedDate:g,setSelectedDate:h,viewMode:i,setViewMode:j,loading:k,sidebarCollapsed:l,setSidebarCollapsed:m,onEventClick:n,navigatePrev:o,navigateNext:p,goToToday:q,getHeaderText:w,setShowCreateModal:x,setShowSettingsModal:y}){var z,A;let B,C,D,E;return(0,b.jsxs)("div",{className:"h-[calc(100vh-12rem)] flex -mx-4 sm:-mx-6 lg:-mx-8 -mb-4 sm:-mb-6 lg:-mb-8",children:[(0,b.jsxs)("div",{className:`${l?"w-12":"w-64"} border-r border-gray-200 bg-white transition-all duration-200 flex flex-col`,children:[(0,b.jsx)("button",{onClick:()=>m(!l),className:"p-3 hover:bg-gray-50 border-b border-gray-200",children:(0,b.jsx)("i",{className:`fas fa-${l?"chevron-right":"chevron-left"} text-gray-500`})}),!l&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"p-4",children:(0,b.jsxs)("button",{onClick:()=>x(!0),className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center justify-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-plus"}),"New Calendar"]})}),(0,b.jsx)("div",{className:"px-4 mb-4",children:(0,b.jsx)(r,{selectedDate:g,onDateSelect:h,events:d})}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto px-4",children:[(0,b.jsx)("h3",{className:"text-xs font-semibold text-gray-500 uppercase mb-2",children:"My Calendars"}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("button",{onClick:()=>f(null),className:`w-full text-left px-3 py-2 rounded-lg text-sm flex items-center gap-2 ${!e?"bg-green-50 text-green-700":"hover:bg-gray-100"}`,children:[(0,b.jsx)("span",{className:"w-3 h-3 rounded-full bg-green-500"}),"All Calendars"]}),a.map(a=>(0,b.jsxs)("div",{className:`w-full text-left px-3 py-2 rounded-lg text-sm flex items-center gap-2 cursor-pointer ${e?.id===a.id?"bg-green-50 text-green-700":"hover:bg-gray-100"}`,onClick:()=>f(a),children:[(0,b.jsx)("span",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:a.color||"#10B981"}}),(0,b.jsx)("span",{className:"truncate flex-1",children:a.name}),(0,b.jsx)("span",{className:"text-xs text-gray-400 capitalize mr-1",children:a.calendarType.replace("_"," ")}),(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),f(a),y(!0)},className:"p-1 hover:bg-gray-200 rounded text-gray-400 hover:text-gray-600",title:"Calendar Settings",children:(0,b.jsx)("i",{className:"fas fa-cog text-xs"})})]},a.id))]})]}),(0,b.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,b.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,b.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,b.jsx)("span",{children:"Today's appointments"}),(0,b.jsx)("span",{className:"font-medium",children:(z=d,B=new Date().toDateString(),z.filter(a=>a.start.toDateString()===B).length)})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"This week"}),(0,b.jsx)("span",{className:"font-medium",children:(A=d,(D=new Date(C=new Date)).setDate(C.getDate()-C.getDay()),D.setHours(0,0,0,0),(E=new Date(D)).setDate(D.getDate()+6),E.setHours(23,59,59,999),A.filter(a=>a.start>=D&&a.start<=E).length)})]})]})})]})]}),(0,b.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,b.jsxs)("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("button",{onClick:q,className:"px-3 py-1.5 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm",children:"Today"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:o,className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,b.jsx)("i",{className:"fas fa-chevron-left text-gray-500"})}),(0,b.jsx)("button",{onClick:p,className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,b.jsx)("i",{className:"fas fa-chevron-right text-gray-500"})})]}),(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:w()})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex bg-gray-100 rounded-lg p-1",children:["month","week","day","agenda"].map(a=>(0,b.jsx)("button",{onClick:()=>j(a),className:`px-3 py-1.5 rounded-md text-sm capitalize ${i===a?"bg-white shadow text-gray-900":"text-gray-600 hover:text-gray-900"}`,children:a},a))}),e?(0,b.jsxs)("button",{onClick:()=>y(!0),className:"px-3 py-1.5 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-cog text-gray-500"}),(0,b.jsx)("span",{children:"Settings"})]}):(0,b.jsx)("button",{disabled:!0,className:"p-2 rounded-lg opacity-50 cursor-not-allowed",title:"Select a calendar first",children:(0,b.jsx)("i",{className:"fas fa-cog text-gray-400"})})]})]}),e&&(0,b.jsxs)("div",{className:"bg-green-50 border-b border-green-100 px-6 py-2 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color||"#10B981"}}),(0,b.jsx)("span",{className:"font-medium text-green-900",children:e.name}),(0,b.jsx)("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded capitalize",children:e.calendarType.replace("_"," ")})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("button",{onClick:()=>navigator.clipboard.writeText(`${window.location.origin}/book/${e.slug}`),className:"text-xs text-green-600 hover:text-green-800 flex items-center gap-1",children:[(0,b.jsx)("i",{className:"fas fa-link"}),"Copy Booking Link"]}),(0,b.jsx)("span",{className:"text-gray-300",children:"|"}),(0,b.jsxs)("button",{onClick:()=>y(!0),className:"text-xs text-green-600 hover:text-green-800 flex items-center gap-1",children:[(0,b.jsx)("i",{className:"fas fa-cog"}),"Configure Calendar"]})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-auto bg-gray-50 p-6",children:k?(0,b.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"})}):(0,b.jsxs)(b.Fragment,{children:["month"===i&&(0,b.jsx)(s,{date:g,events:d,onEventClick:n,onDateClick:a=>{h(a),j("day")}}),"week"===i&&(0,b.jsx)(t,{date:g,events:d,onEventClick:n}),"day"===i&&(0,b.jsx)(u,{date:g,events:d,onEventClick:n}),"agenda"===i&&(0,b.jsx)(v,{events:d,onEventClick:n})]})})]})]})}function p({appointments:a,calendars:d,loading:e,onAppointmentClick:f,onRefresh:g}){let[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)("all"),[p,q]=(0,c.useState)("date"),[r,s]=(0,c.useState)("asc"),t=(0,c.useMemo)(()=>{let b=[...a];if(h){let a=h.toLowerCase();b=b.filter(b=>b.contactName.toLowerCase().includes(a)||b.contactEmail.toLowerCase().includes(a)||b.appointmentType?.name?.toLowerCase().includes(a))}j&&(b=b.filter(a=>a.status===j)),l&&(b=b.filter(a=>a.calendarId===l));let c=new Date;if("today"===n){let a=c.toDateString();b=b.filter(b=>new Date(b.startTime).toDateString()===a)}else if("week"===n){let a=new Date(c);a.setDate(c.getDate()-c.getDay()),a.setHours(0,0,0,0);let d=new Date(a);d.setDate(a.getDate()+6),d.setHours(23,59,59,999),b=b.filter(b=>{let c=new Date(b.startTime);return c>=a&&c<=d})}else if("month"===n){let a=new Date(c.getFullYear(),c.getMonth(),1),d=new Date(c.getFullYear(),c.getMonth()+1,0,23,59,59,999);b=b.filter(b=>{let c=new Date(b.startTime);return c>=a&&c<=d})}return b.sort((a,b)=>{let c=0;return"date"===p?c=new Date(a.startTime).getTime()-new Date(b.startTime).getTime():"contact"===p?c=a.contactName.localeCompare(b.contactName):"status"===p&&(c=a.status.localeCompare(b.status)),"asc"===r?c:-c}),b},[a,h,j,l,n,p,r]),u=(0,c.useMemo)(()=>({total:a.length,scheduled:a.filter(a=>"scheduled"===a.status).length,confirmed:a.filter(a=>"confirmed"===a.status).length,completed:a.filter(a=>"completed"===a.status).length,cancelled:a.filter(a=>"cancelled"===a.status).length}),[a]);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"Total Appointments"}),(0,b.jsx)("div",{className:"text-2xl font-bold text-gray-900 mt-1",children:u.total})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"Scheduled"}),(0,b.jsx)("div",{className:"text-2xl font-bold text-yellow-600 mt-1",children:u.scheduled})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"Confirmed"}),(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600 mt-1",children:u.confirmed})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"Completed"}),(0,b.jsx)("div",{className:"text-2xl font-bold text-blue-600 mt-1",children:u.completed})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"Cancelled"}),(0,b.jsx)("div",{className:"text-2xl font-bold text-red-600 mt-1",children:u.cancelled})]})]}),(0,b.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,b.jsxs)("div",{className:"flex flex-wrap gap-4 items-center",children:[(0,b.jsx)("div",{className:"flex-1 min-w-[200px]",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("i",{className:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),(0,b.jsx)("input",{type:"text",placeholder:"Search by name, email, or type...",value:h,onChange:a=>i(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})}),(0,b.jsxs)("select",{value:n,onChange:a=>o(a.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"all",children:"All Dates"}),(0,b.jsx)("option",{value:"today",children:"Today"}),(0,b.jsx)("option",{value:"week",children:"This Week"}),(0,b.jsx)("option",{value:"month",children:"This Month"})]}),(0,b.jsxs)("select",{value:j,onChange:a=>k(a.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"",children:"All Status"}),(0,b.jsx)("option",{value:"scheduled",children:"Scheduled"}),(0,b.jsx)("option",{value:"confirmed",children:"Confirmed"}),(0,b.jsx)("option",{value:"completed",children:"Completed"}),(0,b.jsx)("option",{value:"cancelled",children:"Cancelled"}),(0,b.jsx)("option",{value:"no_show",children:"No Show"}),(0,b.jsx)("option",{value:"rescheduled",children:"Rescheduled"})]}),(0,b.jsxs)("select",{value:l,onChange:a=>m(a.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"",children:"All Calendars"}),d.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]}),(0,b.jsx)("button",{onClick:g,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg",title:"Refresh",children:(0,b.jsx)("i",{className:"fas fa-sync-alt"})})]})}),(0,b.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:e?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"})}):0===t.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("i",{className:"fas fa-calendar-times text-4xl text-gray-300 mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No appointments found"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Try adjusting your filters"})]}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>{"date"===p?s("asc"===r?"desc":"asc"):(q("date"),s("asc"))},children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:["Date & Time","date"===p&&(0,b.jsx)("i",{className:`fas fa-sort-${"asc"===r?"up":"down"} text-green-500`})]})}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>{"contact"===p?s("asc"===r?"desc":"asc"):(q("contact"),s("asc"))},children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:["Contact","contact"===p&&(0,b.jsx)("i",{className:`fas fa-sort-${"asc"===r?"up":"down"} text-green-500`})]})}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type / Calendar"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>{"status"===p?s("asc"===r?"desc":"asc"):(q("status"),s("asc"))},children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:["Status","status"===p&&(0,b.jsx)("i",{className:`fas fa-sort-${"asc"===r?"up":"down"} text-green-500`})]})}),(0,b.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200",children:t.map(a=>{let c=d.find(b=>b.id===a.calendarId);return(0,b.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>f(a),children:[(0,b.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-gray-900",children:new Date(a.startTime).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),(0,b.jsxs)("div",{className:"text-sm text-gray-500",children:[new Date(a.startTime).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})," - ",new Date(a.endTime).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})]})]}),(0,b.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a.contactName}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:a.contactEmail})]}),(0,b.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,b.jsx)("div",{className:"text-sm text-gray-900",children:a.appointmentType?.name||"N/A"}),(0,b.jsxs)("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[(0,b.jsx)("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:c?.color||"#10B981"}}),c?.name||"Unknown"]})]}),(0,b.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[a.durationMinutes," min"]}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${y(a.status)}`,children:a.status})}),(0,b.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm",children:[(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),f(a)},className:"text-green-600 hover:text-green-800 mr-3",children:(0,b.jsx)("i",{className:"fas fa-eye"})}),a.meetingLink&&(0,b.jsx)("a",{href:a.meetingLink,target:"_blank",rel:"noopener noreferrer",onClick:a=>a.stopPropagation(),className:"text-blue-600 hover:text-blue-800",children:(0,b.jsx)("i",{className:"fas fa-video"})})]})]},a.id)})})]})})})]})}function q({calendars:a,onCalendarUpdated:d,subAccountId:e}){let[f,g]=(0,c.useState)(a[0]?.id||""),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)({defaultDuration:30,defaultView:"week",weekStartDay:0,timeFormat:"12h",dateFormat:"MM/DD/YYYY",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,reminderDefault:24,allowDoubleBooking:!1,requireApproval:!1}),[n,o]=(0,c.useState)({emailNotifications:!0,smsNotifications:!1,notifyOnNew:!0,notifyOnCancel:!0,notifyOnReschedule:!0,sendReminders:!0,reminderTiming:[24,1]});a.find(a=>a.id===f);let p=async b=>{if(confirm("Are you sure you want to delete this calendar? This action cannot be undone."))try{let c=await fetch(`/api/v1/calendars?id=${b}`,{method:"DELETE"}),e=await c.json();e.success?(d(),f===b&&a.length>1&&g(a.find(a=>a.id!==b)?.id||"")):alert(e.error||"Failed to delete calendar")}catch(a){console.error("Error deleting calendar:",a),alert("Failed to delete calendar")}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[(0,b.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Manage Calendars"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Create, edit, and delete your calendars"})]}),(0,b.jsxs)("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-plus"}),"New Calendar"]})]}),(0,b.jsx)("div",{className:"divide-y divide-gray-200",children:0===a.length?(0,b.jsxs)("div",{className:"px-6 py-12 text-center",children:[(0,b.jsx)("i",{className:"fas fa-calendar-plus text-4xl text-gray-300 mb-4"}),(0,b.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-1",children:"No calendars yet"}),(0,b.jsx)("p",{className:"text-gray-500 mb-4",children:"Create your first calendar to start scheduling appointments"}),(0,b.jsx)("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Create Calendar"})]}):a.map(a=>(0,b.jsxs)("div",{className:"px-6 py-4 flex items-center justify-between hover:bg-gray-50",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("span",{className:"w-4 h-4 rounded-full",style:{backgroundColor:a.color||"#10B981"}}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-medium text-gray-900",children:a.name}),(0,b.jsxs)("div",{className:"flex items-center gap-3 text-sm text-gray-500 mt-1",children:[(0,b.jsx)("span",{className:"capitalize",children:a.calendarType.replace("_"," ")}),(0,b.jsx)("span",{children:"•"}),(0,b.jsxs)("span",{children:[a.durationMinutes," min slots"]}),(0,b.jsx)("span",{children:"•"}),(0,b.jsx)("span",{className:"active"===a.status?"text-green-600":"text-gray-400",children:a.status})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>navigator.clipboard.writeText(`${window.location.origin}/book/${a.slug}`),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",title:"Copy booking link",children:(0,b.jsx)("i",{className:"fas fa-link"})}),(0,b.jsx)("button",{onClick:()=>g(a.id),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",title:"Edit calendar",children:(0,b.jsx)("i",{className:"fas fa-edit"})}),(0,b.jsx)("button",{onClick:()=>p(a.id),className:"p-2 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg",title:"Delete calendar",children:(0,b.jsx)("i",{className:"fas fa-trash"})})]})]},a.id))})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[(0,b.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"General Settings"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Configure default settings for all calendars"})]}),(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Appointment Duration"}),(0,b.jsxs)("select",{value:l.defaultDuration,onChange:a=>m(b=>({...b,defaultDuration:parseInt(a.target.value)})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"15",children:"15 minutes"}),(0,b.jsx)("option",{value:"30",children:"30 minutes"}),(0,b.jsx)("option",{value:"45",children:"45 minutes"}),(0,b.jsx)("option",{value:"60",children:"1 hour"}),(0,b.jsx)("option",{value:"90",children:"1.5 hours"}),(0,b.jsx)("option",{value:"120",children:"2 hours"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Calendar View"}),(0,b.jsxs)("select",{value:l.defaultView,onChange:a=>m(b=>({...b,defaultView:a.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"month",children:"Month"}),(0,b.jsx)("option",{value:"week",children:"Week"}),(0,b.jsx)("option",{value:"day",children:"Day"}),(0,b.jsx)("option",{value:"agenda",children:"Agenda"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Week Starts On"}),(0,b.jsxs)("select",{value:l.weekStartDay,onChange:a=>m(b=>({...b,weekStartDay:parseInt(a.target.value)})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"0",children:"Sunday"}),(0,b.jsx)("option",{value:"1",children:"Monday"}),(0,b.jsx)("option",{value:"6",children:"Saturday"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Format"}),(0,b.jsxs)("select",{value:l.timeFormat,onChange:a=>m(b=>({...b,timeFormat:a.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"12h",children:"12-hour (AM/PM)"}),(0,b.jsx)("option",{value:"24h",children:"24-hour"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Timezone"}),(0,b.jsxs)("select",{value:l.timezone,onChange:a=>m(b=>({...b,timezone:a.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"America/New_York",children:"Eastern Time (ET)"}),(0,b.jsx)("option",{value:"America/Chicago",children:"Central Time (CT)"}),(0,b.jsx)("option",{value:"America/Denver",children:"Mountain Time (MT)"}),(0,b.jsx)("option",{value:"America/Los_Angeles",children:"Pacific Time (PT)"}),(0,b.jsx)("option",{value:"UTC",children:"UTC"}),(0,b.jsx)("option",{value:"Europe/London",children:"London (GMT)"}),(0,b.jsx)("option",{value:"Europe/Paris",children:"Paris (CET)"}),(0,b.jsx)("option",{value:"Asia/Tokyo",children:"Tokyo (JST)"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Default Reminder"}),(0,b.jsxs)("select",{value:l.reminderDefault,onChange:a=>m(b=>({...b,reminderDefault:parseInt(a.target.value)})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"0",children:"No reminder"}),(0,b.jsx)("option",{value:"1",children:"1 hour before"}),(0,b.jsx)("option",{value:"4",children:"4 hours before"}),(0,b.jsx)("option",{value:"24",children:"24 hours before"}),(0,b.jsx)("option",{value:"48",children:"48 hours before"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4 pt-4 border-t border-gray-200",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Allow Double Booking"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Allow overlapping appointments on the same time slot"})]}),(0,b.jsx)("button",{onClick:()=>m(a=>({...a,allowDoubleBooking:!a.allowDoubleBooking})),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${l.allowDoubleBooking?"bg-green-600":"bg-gray-200"}`,children:(0,b.jsx)("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${l.allowDoubleBooking?"translate-x-5":"translate-x-0"}`})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Require Approval"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Manually approve appointments before confirming"})]}),(0,b.jsx)("button",{onClick:()=>m(a=>({...a,requireApproval:!a.requireApproval})),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${l.requireApproval?"bg-green-600":"bg-gray-200"}`,children:(0,b.jsx)("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${l.requireApproval?"translate-x-5":"translate-x-0"}`})})]})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[(0,b.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Notification Settings"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Configure how you receive appointment notifications"})]}),(0,b.jsxs)("div",{className:"p-6 space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Email Notifications"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Receive appointment updates via email"})]}),(0,b.jsx)("button",{onClick:()=>o(a=>({...a,emailNotifications:!a.emailNotifications})),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${n.emailNotifications?"bg-green-600":"bg-gray-200"}`,children:(0,b.jsx)("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${n.emailNotifications?"translate-x-5":"translate-x-0"}`})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"SMS Notifications"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Receive appointment updates via SMS"})]}),(0,b.jsx)("button",{onClick:()=>o(a=>({...a,smsNotifications:!a.smsNotifications})),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${n.smsNotifications?"bg-green-600":"bg-gray-200"}`,children:(0,b.jsx)("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${n.smsNotifications?"translate-x-5":"translate-x-0"}`})})]}),(0,b.jsx)("hr",{className:"my-4"}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"New Appointments"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Notify when a new appointment is booked"})]}),(0,b.jsx)("button",{onClick:()=>o(a=>({...a,notifyOnNew:!a.notifyOnNew})),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${n.notifyOnNew?"bg-green-600":"bg-gray-200"}`,children:(0,b.jsx)("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${n.notifyOnNew?"translate-x-5":"translate-x-0"}`})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Cancellations"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Notify when an appointment is cancelled"})]}),(0,b.jsx)("button",{onClick:()=>o(a=>({...a,notifyOnCancel:!a.notifyOnCancel})),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${n.notifyOnCancel?"bg-green-600":"bg-gray-200"}`,children:(0,b.jsx)("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${n.notifyOnCancel?"translate-x-5":"translate-x-0"}`})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Reschedules"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Notify when an appointment is rescheduled"})]}),(0,b.jsx)("button",{onClick:()=>o(a=>({...a,notifyOnReschedule:!a.notifyOnReschedule})),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${n.notifyOnReschedule?"bg-green-600":"bg-gray-200"}`,children:(0,b.jsx)("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${n.notifyOnReschedule?"translate-x-5":"translate-x-0"}`})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Appointment Reminders"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Send reminders before appointments"})]}),(0,b.jsx)("button",{onClick:()=>o(a=>({...a,sendReminders:!a.sendReminders})),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${n.sendReminders?"bg-green-600":"bg-gray-200"}`,children:(0,b.jsx)("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${n.sendReminders?"translate-x-5":"translate-x-0"}`})})]})]})]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsxs)("button",{onClick:()=>{k(!0),setTimeout(()=>{k(!1),alert("Settings saved successfully!")},1e3)},disabled:j,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 flex items-center gap-2",children:[j&&(0,b.jsx)("i",{className:"fas fa-spinner fa-spin"}),j?"Saving...":"Save Settings"]})}),h&&(0,b.jsx)(w,{subAccountId:e,onClose:()=>i(!1),onCreated:()=>{i(!1),d()}})]})}function r({selectedDate:a,onDateSelect:d,events:e}){let[f,g]=(0,c.useState)(a),h=(a=>{let b=a.getFullYear(),c=a.getMonth(),d=new Date(b,c,1),e=new Date(b,c+1,0).getDate(),f=d.getDay(),g=[];for(let a=0;a<f;a++)g.push(null);for(let a=1;a<=e;a++)g.push(new Date(b,c,a));return g})(f);return(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("button",{onClick:()=>g(new Date(f.getFullYear(),f.getMonth()-1)),className:"p-1 hover:bg-gray-100 rounded",children:(0,b.jsx)("i",{className:"fas fa-chevron-left text-xs text-gray-500"})}),(0,b.jsxs)("span",{className:"text-sm font-medium",children:[["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][f.getMonth()]," ",f.getFullYear()]}),(0,b.jsx)("button",{onClick:()=>g(new Date(f.getFullYear(),f.getMonth()+1)),className:"p-1 hover:bg-gray-100 rounded",children:(0,b.jsx)("i",{className:"fas fa-chevron-right text-xs text-gray-500"})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-7 gap-1",children:[["S","M","T","W","T","F","S"].map((a,c)=>(0,b.jsx)("div",{className:"text-center text-xs text-gray-400 py-1",children:a},c)),h.map((c,f)=>(0,b.jsxs)("button",{onClick:()=>c&&d(c),disabled:!c,className:`
              text-xs p-1 rounded relative
              ${!c?"":"hover:bg-gray-100"}
              ${c?.toDateString()===a.toDateString()?"bg-green-600 text-white hover:bg-green-700":""}
              ${c?.toDateString()===new Date().toDateString()&&c?.toDateString()!==a.toDateString()?"text-green-600 font-bold":""}
            `,children:[c?.getDate(),c&&e.some(a=>a.start.toDateString()===c.toDateString())&&(0,b.jsx)("span",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-green-500 rounded-full"})]},f))]})]})}function s({date:a,events:c,onEventClick:d,onDateClick:e}){let f=(()=>{let b=a.getFullYear(),c=a.getMonth(),d=new Date(b,c,1),e=new Date(b,c+1,0).getDate(),f=d.getDay(),g=[],h=new Date(b,c,0);for(let a=f-1;a>=0;a--)g.push({date:new Date(b,c-1,h.getDate()-a),isCurrentMonth:!1});for(let a=1;a<=e;a++)g.push({date:new Date(b,c,a),isCurrentMonth:!0});let i=42-g.length;for(let a=1;a<=i;a++)g.push({date:new Date(b,c+1,a),isCurrentMonth:!1});return g})();return(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,b.jsx)("div",{className:"grid grid-cols-7 border-b border-gray-200",children:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map(a=>(0,b.jsx)("div",{className:"px-3 py-2 text-sm font-medium text-gray-500 text-center bg-gray-50",children:a},a))}),(0,b.jsx)("div",{className:"grid grid-cols-7 grid-rows-6",children:f.map((a,f)=>{let g,h=(g=a.date,c.filter(a=>a.start.toDateString()===g.toDateString())),i=a.date.toDateString()===new Date().toDateString();return(0,b.jsxs)("div",{className:`min-h-[100px] border-b border-r border-gray-100 p-1 ${!a.isCurrentMonth?"bg-gray-50":""} ${f%7==6?"border-r-0":""}`,onClick:()=>e(a.date),children:[(0,b.jsx)("div",{className:`
                text-sm font-medium mb-1 w-7 h-7 flex items-center justify-center rounded-full cursor-pointer
                ${i?"bg-green-600 text-white":a.isCurrentMonth?"text-gray-900 hover:bg-gray-100":"text-gray-400"}
              `,children:a.date.getDate()}),(0,b.jsxs)("div",{className:"space-y-1",children:[h.slice(0,3).map(a=>(0,b.jsxs)("div",{onClick:b=>{b.stopPropagation(),d(a)},className:"text-xs px-2 py-1 rounded cursor-pointer truncate",style:{backgroundColor:a.color+"20",color:a.color,borderLeft:`3px solid ${a.color}`},children:[a.start.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})," ",a.title]},a.id)),h.length>3&&(0,b.jsxs)("div",{className:"text-xs text-gray-500 px-2",children:["+",h.length-3," more"]})]})]},f)})})]})}function t({date:a,events:c,onEventClick:d}){let e=(()=>{let b=[],c=new Date(a);c.setDate(a.getDate()-a.getDay());for(let a=0;a<7;a++){let d=new Date(c);d.setDate(c.getDate()+a),b.push(d)}return b})(),f=Array.from({length:24},(a,b)=>b);return(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,b.jsxs)("div",{className:"grid grid-cols-8 border-b border-gray-200",children:[(0,b.jsx)("div",{className:"w-16 bg-gray-50"}),e.map((a,c)=>{let d=a.toDateString()===new Date().toDateString();return(0,b.jsxs)("div",{className:`px-2 py-3 text-center border-l border-gray-200 ${d?"bg-green-50":"bg-gray-50"}`,children:[(0,b.jsx)("div",{className:"text-xs text-gray-500",children:a.toLocaleDateString("en-US",{weekday:"short"})}),(0,b.jsx)("div",{className:`text-lg font-medium ${d?"text-green-600":"text-gray-900"}`,children:a.getDate()})]},c)})]}),(0,b.jsx)("div",{className:"overflow-y-auto max-h-[600px]",children:f.map(a=>(0,b.jsxs)("div",{className:"grid grid-cols-8 border-b border-gray-100",children:[(0,b.jsx)("div",{className:"w-16 py-3 px-2 text-xs text-gray-500 text-right",children:0===a?"12 AM":a<12?`${a} AM`:12===a?"12 PM":`${a-12} PM`}),e.map((e,f)=>{let g=c.filter(b=>{let c=b.start.toDateString(),d=b.start.getHours();return c===e.toDateString()&&d===a});return(0,b.jsx)("div",{className:"border-l border-gray-100 min-h-[48px] p-1 relative",children:g.map(a=>(0,b.jsxs)("div",{onClick:()=>d(a),className:"text-xs px-2 py-1 rounded cursor-pointer mb-1",style:{backgroundColor:a.color+"20",color:a.color,borderLeft:`3px solid ${a.color}`},children:[(0,b.jsx)("div",{className:"font-medium truncate",children:a.title}),(0,b.jsx)("div",{className:"text-gray-500",children:a.contactName})]},a.id))},f)})]},a))})]})}function u({date:a,events:c,onEventClick:d}){let e=Array.from({length:24},(a,b)=>b),f=c.filter(b=>b.start.toDateString()===a.toDateString());return(0,b.jsxs)("div",{className:"flex gap-6",children:[(0,b.jsx)("div",{className:"flex-1 bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:(0,b.jsx)("div",{className:"overflow-y-auto max-h-[calc(100vh-250px)]",children:e.map(e=>{let f=c.filter(b=>b.start.toDateString()===a.toDateString()&&b.start.getHours()===e);return(0,b.jsxs)("div",{className:"flex border-b border-gray-100",children:[(0,b.jsx)("div",{className:"w-20 py-4 px-3 text-sm text-gray-500 text-right border-r border-gray-100",children:0===e?"12 AM":e<12?`${e} AM`:12===e?"12 PM":`${e-12} PM`}),(0,b.jsx)("div",{className:"flex-1 min-h-[64px] p-2",children:f.map(a=>(0,b.jsxs)("div",{onClick:()=>d(a),className:"p-3 rounded-lg cursor-pointer mb-2",style:{backgroundColor:a.color+"15",borderLeft:`4px solid ${a.color}`},children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"font-medium text-gray-900",children:a.title}),(0,b.jsxs)("div",{className:"text-sm text-gray-500",children:[a.start.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})," -",a.end.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})]})]}),(0,b.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:[(0,b.jsx)("i",{className:"fas fa-user mr-1"}),a.contactName," (",a.contactEmail,")"]})]},a.id))})]},e)})})}),(0,b.jsx)("div",{className:"w-80",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:a.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Total appointments"}),(0,b.jsx)("span",{className:"font-medium",children:f.length})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Confirmed"}),(0,b.jsx)("span",{className:"font-medium text-green-600",children:f.filter(a=>"confirmed"===a.status).length})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Pending"}),(0,b.jsx)("span",{className:"font-medium text-yellow-600",children:f.filter(a=>"scheduled"===a.status).length})]})]}),(0,b.jsx)("hr",{className:"my-4"}),(0,b.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Today's Schedule"}),(0,b.jsx)("div",{className:"space-y-2",children:0===f.length?(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"No appointments scheduled"}):f.map(a=>(0,b.jsxs)("div",{onClick:()=>d(a),className:"p-2 rounded-lg hover:bg-gray-50 cursor-pointer flex items-start gap-3",children:[(0,b.jsx)("div",{className:"w-1 h-10 rounded-full",style:{backgroundColor:a.color}}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:a.title}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:a.start.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})})]})]},a.id))})]})})]})}function v({events:a,onEventClick:c}){let d=a.filter(a=>a.start>=new Date).sort((a,b)=>a.start.getTime()-b.start.getTime()).reduce((a,b)=>{let c=b.start.toDateString();return a[c]||(a[c]=[]),a[c].push(b),a},{});return(0,b.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:0===Object.keys(d).length?(0,b.jsxs)("div",{className:"p-12 text-center",children:[(0,b.jsx)("i",{className:"fas fa-calendar-check text-4xl text-gray-300 mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No upcoming appointments"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Your schedule is clear for the next 30 days"})]}):(0,b.jsx)("div",{className:"divide-y divide-gray-100",children:Object.entries(d).map(([a,d])=>{let e=new Date(a),f=e.toDateString()===new Date().toDateString(),g=e.toDateString()===new Date(Date.now()+864e5).toDateString();return(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:`px-6 py-3 ${f?"bg-green-50":"bg-gray-50"}`,children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${f?"bg-green-600 text-white":"bg-white border"}`,children:(0,b.jsx)("span",{className:"text-lg font-bold",children:e.getDate()})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:`font-medium ${f?"text-green-600":"text-gray-900"}`,children:f?"Today":g?"Tomorrow":e.toLocaleDateString("en-US",{weekday:"long"})}),(0,b.jsx)("div",{className:"text-sm text-gray-500",children:e.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]})]})}),(0,b.jsx)("div",{className:"divide-y divide-gray-50",children:d.map(a=>(0,b.jsxs)("div",{onClick:()=>c(a),className:"px-6 py-4 hover:bg-gray-50 cursor-pointer flex items-center gap-4",children:[(0,b.jsx)("div",{className:"text-sm text-gray-500 w-20",children:a.start.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}),(0,b.jsx)("div",{className:"w-1 h-12 rounded-full",style:{backgroundColor:a.color}}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"font-medium text-gray-900",children:a.title}),(0,b.jsxs)("div",{className:"text-sm text-gray-500 flex items-center gap-4 mt-1",children:[(0,b.jsxs)("span",{children:[(0,b.jsx)("i",{className:"fas fa-user mr-1"}),a.contactName]}),a.calendarName&&(0,b.jsxs)("span",{children:[(0,b.jsx)("i",{className:"fas fa-calendar mr-1"}),a.calendarName]})]})]}),(0,b.jsx)("div",{className:`px-2 py-1 rounded text-xs font-medium ${y(a.status)}`,children:a.status})]},a.id))})]},a)})})})}function w({subAccountId:a,onClose:d,onCreated:e}){let[f,g]=(0,c.useState)({name:"",calendarType:"individual",description:"",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,durationMinutes:30,slotIntervalMinutes:15,minimumNoticeHours:24,maximumBookingDays:60,autoConfirm:!0}),[h,i]=(0,c.useState)(!1),j=async b=>{b.preventDefault(),i(!0);try{let b=await fetch("/api/v1/calendars",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...f,subAccountId:a})}),c=await b.json();c.success?e():alert(c.error||"Failed to create calendar")}catch(a){console.error("Error creating calendar:",a),alert("Failed to create calendar")}finally{i(!1)}};return(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,b.jsx)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Create Calendar"}),(0,b.jsx)("button",{onClick:d,className:"text-gray-400 hover:text-gray-600",children:(0,b.jsx)("i",{className:"fas fa-times text-xl"})})]}),(0,b.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Calendar Name *"}),(0,b.jsx)("input",{type:"text",value:f.name,onChange:a=>g({...f,name:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"e.g., Sales Consultations",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Calendar Type *"}),(0,b.jsxs)("select",{value:f.calendarType,onChange:a=>g({...f,calendarType:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"individual",children:"Individual - Single user scheduling"}),(0,b.jsx)("option",{value:"team",children:"Team - Multiple team members"}),(0,b.jsx)("option",{value:"collective",children:"Collective - Requires multiple participants"}),(0,b.jsx)("option",{value:"round_robin",children:"Round Robin - Auto distribute among team"}),(0,b.jsx)("option",{value:"service",children:"Service - Specific services with durations"}),(0,b.jsx)("option",{value:"class",children:"Class/Event - Group bookings with capacity"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,b.jsx)("textarea",{value:f.description,onChange:a=>g({...f,description:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:2,placeholder:"Brief description for booking page"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes)"}),(0,b.jsxs)("select",{value:f.durationMinutes,onChange:a=>g({...f,durationMinutes:parseInt(a.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"15",children:"15 minutes"}),(0,b.jsx)("option",{value:"30",children:"30 minutes"}),(0,b.jsx)("option",{value:"45",children:"45 minutes"}),(0,b.jsx)("option",{value:"60",children:"1 hour"}),(0,b.jsx)("option",{value:"90",children:"1.5 hours"}),(0,b.jsx)("option",{value:"120",children:"2 hours"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slot Interval"}),(0,b.jsxs)("select",{value:f.slotIntervalMinutes,onChange:a=>g({...f,slotIntervalMinutes:parseInt(a.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"5",children:"5 minutes"}),(0,b.jsx)("option",{value:"10",children:"10 minutes"}),(0,b.jsx)("option",{value:"15",children:"15 minutes"}),(0,b.jsx)("option",{value:"30",children:"30 minutes"}),(0,b.jsx)("option",{value:"60",children:"60 minutes"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Notice"}),(0,b.jsxs)("select",{value:f.minimumNoticeHours,onChange:a=>g({...f,minimumNoticeHours:parseInt(a.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"0",children:"None"}),(0,b.jsx)("option",{value:"1",children:"1 hour"}),(0,b.jsx)("option",{value:"4",children:"4 hours"}),(0,b.jsx)("option",{value:"24",children:"24 hours"}),(0,b.jsx)("option",{value:"48",children:"48 hours"}),(0,b.jsx)("option",{value:"72",children:"72 hours"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Book up to"}),(0,b.jsxs)("select",{value:f.maximumBookingDays,onChange:a=>g({...f,maximumBookingDays:parseInt(a.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,b.jsx)("option",{value:"7",children:"1 week"}),(0,b.jsx)("option",{value:"14",children:"2 weeks"}),(0,b.jsx)("option",{value:"30",children:"30 days"}),(0,b.jsx)("option",{value:"60",children:"60 days"}),(0,b.jsx)("option",{value:"90",children:"90 days"})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",id:"autoConfirm",checked:f.autoConfirm,onChange:a=>g({...f,autoConfirm:a.target.checked}),className:"rounded border-gray-300 text-green-600 focus:ring-green-500"}),(0,b.jsx)("label",{htmlFor:"autoConfirm",className:"text-sm text-gray-700",children:"Auto-confirm appointments (no approval required)"})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)("button",{type:"button",onClick:d,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:h||!f.name,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:h?"Creating...":"Create Calendar"})]})]})]})})})}function x({appointment:a,onClose:d,onUpdated:e}){let[f,g]=(0,c.useState)(!1),h=async b=>{g(!0);try{let c=await fetch("/api/v1/appointments",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:a.id,status:b})});(await c.json()).success&&(e(),"cancelled"===b&&d())}catch(a){console.error("Error updating appointment:",a)}finally{g(!1)}};return(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,b.jsx)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md mx-4",children:(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"Appointment Details"}),(0,b.jsx)("button",{onClick:d,className:"text-gray-400 hover:text-gray-600",children:(0,b.jsx)("i",{className:"fas fa-times"})})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsx)("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${y(a.status)}`,children:a.status})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"When"}),(0,b.jsx)("div",{className:"font-medium",children:new Date(a.startTime).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}),(0,b.jsxs)("div",{className:"text-gray-600",children:[new Date(a.startTime).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})," -",new Date(a.endTime).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}),(0,b.jsxs)("span",{className:"text-gray-400 ml-2",children:["(",a.durationMinutes," min)"]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"Contact"}),(0,b.jsx)("div",{className:"font-medium",children:a.contactName}),(0,b.jsx)("div",{className:"text-gray-600",children:a.contactEmail}),a.contactPhone&&(0,b.jsx)("div",{className:"text-gray-600",children:a.contactPhone})]}),a.meetingLink&&(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"Meeting Link"}),(0,b.jsx)("a",{href:a.meetingLink,target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:underline",children:a.meetingLink})]}),a.notes&&(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-500",children:"Notes"}),(0,b.jsx)("div",{className:"text-gray-700",children:a.notes})]}),(0,b.jsxs)("div",{className:"flex gap-2 pt-4 border-t",children:["scheduled"===a.status&&(0,b.jsx)("button",{onClick:()=>h("confirmed"),disabled:f,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50",children:"Confirm"}),["scheduled","confirmed"].includes(a.status)&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:()=>h("completed"),disabled:f,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:"Complete"}),(0,b.jsx)("button",{onClick:()=>h("no_show"),disabled:f,className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 disabled:opacity-50",children:"No Show"}),(0,b.jsx)("button",{onClick:()=>{confirm("Are you sure you want to cancel this appointment?")&&h("cancelled")},disabled:f,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50",children:"Cancel"})]})]})]})]})})})}function y(a){switch(a){case"scheduled":return"bg-yellow-100 text-yellow-800";case"confirmed":return"bg-green-100 text-green-800";case"completed":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";case"no_show":default:return"bg-gray-100 text-gray-800";case"rescheduled":return"bg-purple-100 text-purple-800"}}function z(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-[#0a0a0a] flex items-center justify-center",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),children:(0,b.jsx)(n,{})})}a.s(["default",()=>z,"dynamic",0,"force-dynamic"],59491)}];

//# sourceMappingURL=app_sub-account_calendars_page_tsx_24ef64d2._.js.map