module.exports=[33840,a=>{"use strict";var b=a.i(87924),c=a.i(72131);function d({subAccountId:a,selectedTags:d,onChange:e,placeholder:f="Search or create tags...",disabled:g=!1,maxTags:h,allowCreate:i=!0}){let j,[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(-1),[u,v]=(0,c.useState)(!1),w=(0,c.useRef)(null),x=(0,c.useRef)(null),y=(0,c.useCallback)(async b=>{r(!0);try{let c=`/api/v1/tags?subAccountId=${a}&search=${encodeURIComponent(b)}&limit=10`,e=await fetch(c),f=await e.json();if(f.success){let a=(f.data||[]).filter(a=>!d.some(b=>b.id===a.id));if(n(a),b.trim()&&i){let a=(f.data||[]).some(a=>a.name.toLowerCase()===b.toLowerCase());v(!a)}else v(!1)}}catch(a){console.error("Error fetching tags:",a),n([])}finally{r(!1)}},[a,d,i]);(0,c.useEffect)(()=>{if(!o)return;let a=setTimeout(()=>{y(k)},200);return()=>clearTimeout(a)},[k,o,y]),(0,c.useEffect)(()=>{let a=a=>{!x.current||x.current.contains(a.target)||w.current?.contains(a.target)||(p(!1),t(-1))};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);let z=a=>{h&&d.length>=h||(e([...d,a]),l(""),t(-1),p(!1),w.current?.focus())},A=async()=>{if(k.trim()){r(!0);try{let b=await fetch("/api/v1/tags",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subAccountId:a,name:k.trim()})}),c=await b.json();c.success&&c.data&&z(c.data)}catch(a){console.error("Error creating tag:",a)}finally{r(!1)}}};return(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("div",{className:`flex flex-wrap gap-1.5 p-2 border rounded-lg bg-white min-h-[42px] ${g?"bg-gray-100 cursor-not-allowed":"cursor-text"} ${o?"border-blue-500 ring-2 ring-blue-500/20":"border-gray-300"}`,onClick:()=>{g||(w.current?.focus(),p(!0))},children:[d.map(a=>(0,b.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-sm font-medium",style:{backgroundColor:`${a.color}20`,color:a.color,border:`1px solid ${a.color}40`},children:[(0,b.jsx)("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:a.color}}),a.name,!g&&(0,b.jsx)("button",{type:"button",onClick:b=>{var c;b.stopPropagation(),c=a.id,e(d.filter(a=>a.id!==c))},className:"ml-1 hover:opacity-70",children:(0,b.jsx)("i",{className:"fas fa-times text-xs"})})]},a.id)),(!h||d.length<h)&&(0,b.jsx)("input",{ref:w,type:"text",value:k,onChange:a=>{l(a.target.value),o||p(!0)},onFocus:()=>{p(!0),y(k)},onKeyDown:a=>{let b=m.length+ +!!u;switch(a.key){case"ArrowDown":a.preventDefault(),t(a=>a<b-1?a+1:0);break;case"ArrowUp":a.preventDefault(),t(a=>a>0?a-1:b-1);break;case"Enter":a.preventDefault(),s>=0?s<m.length?z(m[s]):u&&A():u&&k.trim()&&A();break;case"Escape":p(!1),t(-1);break;case"Backspace":!k&&d.length>0&&e(d.slice(0,-1))}},disabled:g,placeholder:0===d.length?f:"",className:"flex-1 min-w-[120px] outline-none bg-transparent text-sm disabled:cursor-not-allowed"})]}),o&&!g&&(0,b.jsx)("div",{ref:x,className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:q?(0,b.jsxs)("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:[(0,b.jsx)("i",{className:"fas fa-spinner fa-spin mr-2"}),"Searching..."]}):(0,b.jsxs)(b.Fragment,{children:[m.map((a,c)=>(0,b.jsxs)("button",{type:"button",onClick:()=>z(a),className:`w-full text-left px-4 py-2.5 flex items-center gap-3 hover:bg-gray-50 ${c===s?"bg-blue-50":""}`,children:[(0,b.jsx)("span",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:a.color}}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900",children:a.name}),a.description&&(0,b.jsx)("p",{className:"text-xs text-gray-500 truncate",children:a.description})]}),void 0!==a.usage_count&&a.usage_count>0&&(0,b.jsxs)("span",{className:"text-xs text-gray-400",children:[a.usage_count," uses"]})]},a.id)),u&&k.trim()&&(0,b.jsxs)("button",{type:"button",onClick:A,className:`w-full text-left px-4 py-2.5 flex items-center gap-3 hover:bg-blue-50 border-t ${s===m.length?"bg-blue-50":""}`,children:[(0,b.jsx)("span",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:(j=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#14B8A6","#F97316"])[k.split("").reduce((a,b)=>a+b.charCodeAt(0),0)%j.length]}}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("p",{className:"text-sm font-medium text-blue-600",children:[(0,b.jsx)("i",{className:"fas fa-plus mr-1"}),'Create "',k.trim(),'"']}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Add as a new tag"})]})]}),0===m.length&&!u&&(0,b.jsx)("div",{className:"px-4 py-3 text-sm text-gray-500 text-center",children:k?"No tags found":"Type to search or create tags"})]})}),h&&d.length>=h&&(0,b.jsxs)("p",{className:"text-xs text-amber-600 mt-1",children:[(0,b.jsx)("i",{className:"fas fa-info-circle mr-1"}),"Maximum of ",h," tags allowed"]})]})}let e={contact:{label:"Contact",icon:"user",variables:[{key:"contact.id",label:"Contact ID"},{key:"contact.firstName",label:"First Name"},{key:"contact.lastName",label:"Last Name"},{key:"contact.name",label:"Full Name"},{key:"contact.email",label:"Email"},{key:"contact.phone",label:"Phone"},{key:"contact.company",label:"Company"},{key:"contact.address",label:"Address"},{key:"contact.city",label:"City"},{key:"contact.state",label:"State"},{key:"contact.country",label:"Country"},{key:"contact.postalCode",label:"Postal Code"},{key:"contact.source",label:"Source"},{key:"contact.dateAdded",label:"Date Added"}]},opportunity:{label:"Opportunity",icon:"funnel-dollar",variables:[{key:"opportunity.id",label:"Opportunity ID"},{key:"opportunity.name",label:"Opportunity Name"},{key:"opportunity.value",label:"Opportunity Value"},{key:"opportunity.status",label:"Status"},{key:"opportunity.pipeline",label:"Pipeline"},{key:"opportunity.stage",label:"Pipeline Stage"},{key:"opportunity.source",label:"Source"},{key:"opportunity.createdAt",label:"Created Date"}]},user:{label:"User",icon:"user-tie",variables:[{key:"user.id",label:"User ID"},{key:"user.name",label:"User Name"},{key:"user.email",label:"User Email"},{key:"user.phone",label:"User Phone"}]},appointment:{label:"Appointment",icon:"calendar-check",variables:[{key:"appointment.id",label:"Appointment ID"},{key:"appointment.title",label:"Title"},{key:"appointment.startTime",label:"Start Time"},{key:"appointment.endTime",label:"End Time"},{key:"appointment.status",label:"Status"},{key:"appointment.calendar",label:"Calendar Name"}]},calendar:{label:"Calendar",icon:"calendar-alt",variables:[{key:"calendar.id",label:"Calendar ID"},{key:"calendar.name",label:"Calendar Name"}]},account:{label:"Account",icon:"building",variables:[{key:"account.id",label:"Account ID"},{key:"account.name",label:"Account Name"},{key:"account.email",label:"Account Email"},{key:"account.phone",label:"Account Phone"}]},trigger:{label:"Trigger Data",icon:"bolt",variables:[{key:"trigger.data",label:"Trigger Data (JSON)"},{key:"trigger.type",label:"Trigger Type"},{key:"trigger.timestamp",label:"Trigger Timestamp"}]},datetime:{label:"Date & Time",icon:"clock",variables:[{key:"now.date",label:"Current Date"},{key:"now.time",label:"Current Time"},{key:"now.datetime",label:"Current Date & Time"},{key:"now.timestamp",label:"Unix Timestamp"},{key:"now.year",label:"Current Year"},{key:"now.month",label:"Current Month"},{key:"now.day",label:"Current Day"}]}};function f({onSelect:a,onClose:d}){let[f,g]=(0,c.useState)(""),[h,i]=(0,c.useState)("contact"),j=(0,c.useRef)(null);(0,c.useEffect)(()=>{let a=a=>{j.current&&!j.current.contains(a.target)&&d()};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[d]);let k=Object.entries(e).map(([a,b])=>({key:a,...b,variables:b.variables.filter(a=>a.label.toLowerCase().includes(f.toLowerCase())||a.key.toLowerCase().includes(f.toLowerCase()))})).filter(a=>a.variables.length>0||!f);return(0,b.jsxs)("div",{ref:j,className:"absolute right-0 top-full mt-1 w-72 bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-80 overflow-hidden flex flex-col",children:[(0,b.jsx)("div",{className:"p-2 border-b",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("i",{className:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"}),(0,b.jsx)("input",{type:"text",value:f,onChange:a=>g(a.target.value),placeholder:"Search variables...",className:"w-full pl-9 pr-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0})]})}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto",children:k.map(c=>(0,b.jsxs)("div",{className:"border-b border-gray-100 last:border-0",children:[(0,b.jsxs)("button",{onClick:()=>i(h===c.key?null:c.key),className:"w-full px-3 py-2 flex items-center justify-between text-sm font-medium text-gray-700 hover:bg-gray-50",children:[(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)("i",{className:`fas fa-${c.icon} text-gray-400 w-4`}),c.label]}),(0,b.jsx)("i",{className:`fas fa-chevron-${h===c.key?"down":"right"} text-gray-400 text-xs`})]}),h===c.key&&(0,b.jsx)("div",{className:"bg-gray-50 py-1",children:c.variables.map(c=>(0,b.jsxs)("button",{onClick:()=>{a(`{{${c.key}}}`),d()},className:"w-full px-4 py-1.5 text-left text-sm text-gray-600 hover:bg-blue-50 hover:text-blue-700 flex items-center justify-between group",children:[(0,b.jsx)("span",{children:c.label}),(0,b.jsx)("code",{className:"text-xs text-gray-400 group-hover:text-blue-500 font-mono",children:`{{${c.key}}}`})]},c.key))})]},c.key))})]})}function g({value:a,onChange:d,placeholder:e,disabled:g,type:h="text",className:i=""}){let[j,k]=(0,c.useState)(!1),l=(0,c.useRef)(null);return(0,b.jsxs)("div",{className:`relative ${i}`,children:[(0,b.jsx)("input",{ref:l,type:h,value:a,onChange:a=>d(a.target.value),disabled:g,placeholder:e,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm pr-10 bg-white"}),(0,b.jsx)("button",{type:"button",onClick:()=>k(!j),disabled:g,className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-blue-600 p-1",title:"Insert variable",children:(0,b.jsx)("i",{className:"fas fa-code text-sm"})}),j&&(0,b.jsx)(f,{onSelect:b=>{if(l.current){let c=l.current.selectionStart||a.length,e=l.current.selectionEnd||a.length;d(a.substring(0,c)+b+a.substring(e))}else d(a+b)},onClose:()=>k(!1)})]})}let h=["find_opportunity","if_else","find_contact","split","goal_event"],i={contact:{label:"Contact Events",icon:"user",triggers:[{type:"contact_created",label:"Contact Created",icon:"user-plus",description:"When a new contact is created"},{type:"contact_changed",label:"Contact Changed",icon:"user-edit",description:"When contact details are updated"},{type:"contact_tag",label:"Tag Added/Removed",icon:"tag",description:"When a tag is added or removed from a contact"},{type:"contact_dnd",label:"DND Status Changed",icon:"bell-slash",description:"When Do Not Disturb status changes"},{type:"birthday_reminder",label:"Birthday Reminder",icon:"birthday-cake",description:"Days before a contact birthday"},{type:"custom_date_reminder",label:"Custom Date Reminder",icon:"calendar-day",description:"Reminder for custom date fields"},{type:"note_added_changed",label:"Note Added",icon:"sticky-note",description:"When a note is added to a contact"},{type:"task_added_completed",label:"Task Event",icon:"tasks",description:"When a task is created or completed"},{type:"contact_engagement_score",label:"Engagement Score",icon:"chart-line",description:"When engagement score reaches threshold"}]},event:{label:"Event Triggers",icon:"bolt",triggers:[{type:"form_submitted",label:"Form Submitted",icon:"file-alt",description:"When a form is submitted"},{type:"inbound_webhook",label:"Inbound Webhook",icon:"plug",description:"Triggered by external webhook"},{type:"call_status",label:"Call Status",icon:"phone",description:"When a call status changes"},{type:"email_events",label:"Email Event",icon:"envelope",description:"Email opened, clicked, bounced, etc."},{type:"trigger_links_clicked",label:"Link Clicked",icon:"link",description:"When a trigger link is clicked"},{type:"facebook_lead_form",label:"Facebook Lead",icon:"facebook",description:"New lead from Facebook form"},{type:"instagram_lead_form",label:"Instagram Lead",icon:"instagram",description:"New lead from Instagram form"},{type:"video_tracking",label:"Video Tracking",icon:"video",description:"Video watch events"}]},appointment:{label:"Appointment Triggers",icon:"calendar-check",triggers:[{type:"customer_booked_appointment",label:"Appointment Booked",icon:"calendar-plus",description:"When appointment is booked"},{type:"appointment_status",label:"Appointment Status",icon:"calendar-check",description:"When appointment status changes"}]},opportunity:{label:"Opportunity Triggers",icon:"funnel-dollar",triggers:[{type:"opportunity_created",label:"Opportunity Created",icon:"plus-circle",description:"When a new opportunity is created"},{type:"opportunity_status_change",label:"Status Changed",icon:"exchange-alt",description:"When opportunity status changes"},{type:"opportunity_changed",label:"Opportunity Changed",icon:"edit",description:"When opportunity details are updated"},{type:"pipeline_stage_changed",label:"Pipeline Stage Changed",icon:"columns",description:"When pipeline stage changes"},{type:"stale_opportunity",label:"Stale Opportunity",icon:"hourglass-end",description:"No activity for specified days"}]},payment:{label:"Payment Triggers",icon:"credit-card",triggers:[{type:"payment_received",label:"Payment Received",icon:"dollar-sign",description:"When a payment is received"},{type:"invoice",label:"Invoice Event",icon:"file-invoice-dollar",description:"Invoice sent, paid, overdue"},{type:"order_submitted",label:"Order Submitted",icon:"shopping-cart",description:"When an order is submitted"},{type:"subscription_status_change",label:"Subscription Changed",icon:"sync-alt",description:"Subscription status changes"},{type:"refund",label:"Refund Issued",icon:"undo",description:"When a refund is processed"}]},ecommerce:{label:"E-commerce Triggers",icon:"shopping-bag",triggers:[{type:"shopify_abandoned_cart",label:"Abandoned Cart",icon:"cart-arrow-down",description:"Shopify cart abandoned"},{type:"order_form_submission",label:"Order Form Submitted",icon:"file-contract",description:"Order form submission"}]}},j={communication:{label:"Communication",icon:"comment",actions:[{type:"send_email",label:"Send Email",icon:"envelope",description:"Send an email to the contact"},{type:"send_sms",label:"Send SMS",icon:"sms",description:"Send a text message"},{type:"call",label:"Make Call",icon:"phone",description:"Initiate a phone call"},{type:"whatsapp",label:"WhatsApp Message",icon:"whatsapp",description:"Send WhatsApp message"},{type:"messenger_facebook",label:"Facebook Messenger",icon:"facebook-messenger",description:"Send Facebook message"},{type:"instagram_dm",label:"Instagram DM",icon:"instagram",description:"Send Instagram direct message"},{type:"send_slack_message",label:"Slack Message",icon:"slack",description:"Send Slack notification"},{type:"send_internal_notification",label:"Internal Notification",icon:"bell",description:"Notify team members"},{type:"send_review_request",label:"Review Request",icon:"star",description:"Request a review from contact"},{type:"manual_action",label:"Manual Action",icon:"hand-paper",description:"Create manual task for team"}]},contact:{label:"Contact Management",icon:"user-cog",actions:[{type:"create_contact",label:"Create Contact",icon:"user-plus",description:"Create a new contact"},{type:"update_contact_field",label:"Update Contact Field",icon:"user-edit",description:"Update contact information"},{type:"add_contact_tag",label:"Add Tag",icon:"tag",description:"Add a tag to contact"},{type:"remove_contact_tag",label:"Remove Tag",icon:"times-circle",description:"Remove a tag from contact"},{type:"assign_to_user",label:"Assign to User",icon:"user-check",description:"Assign contact to team member"},{type:"remove_assigned_user",label:"Remove Assignment",icon:"user-minus",description:"Remove user assignment"},{type:"add_note",label:"Add Note",icon:"sticky-note",description:"Add a note to contact"},{type:"add_task",label:"Add Task",icon:"tasks",description:"Create a task for contact"},{type:"disable_enable_dnd",label:"Toggle DND",icon:"bell-slash",description:"Enable/disable Do Not Disturb"},{type:"delete_contact",label:"Delete Contact",icon:"trash",description:"Delete the contact"}]},logic:{label:"Logic & Flow",icon:"project-diagram",actions:[{type:"if_else",label:"If/Else Condition",icon:"code-branch",description:"Branch based on conditions"},{type:"wait_step",label:"Wait",icon:"clock",description:"Wait for specified time"},{type:"goal_event",label:"Goal",icon:"bullseye",description:"Track conversion goals"},{type:"split",label:"A/B Split",icon:"random",description:"Split traffic for testing"},{type:"go_to",label:"Go To",icon:"redo",description:"Jump to another workflow"},{type:"remove_from_workflow",label:"Remove from Workflow",icon:"sign-out-alt",description:"Exit the workflow"},{type:"drip_mode",label:"Drip Mode",icon:"tint",description:"Gradual drip actions"},{type:"custom_code",label:"Custom Code",icon:"code",description:"Execute custom JavaScript"}]},ai:{label:"AI Actions",icon:"brain",actions:[{type:"ai_prompt",label:"AI Prompt",icon:"robot",description:"Use AI to generate content"},{type:"conversation_ai",label:"Conversation AI",icon:"comments",description:"AI-powered conversation"},{type:"eliza_ai_booking",label:"AI Booking",icon:"calendar-alt",description:"AI appointment booking"},{type:"send_to_eliza_agent",label:"AI Agent",icon:"user-robot",description:"Hand off to AI agent"}]},opportunity:{label:"Opportunities",icon:"funnel-dollar",actions:[{type:"find_opportunity",label:"Find Opportunity",icon:"search",description:"Find opportunity with matching values",branches:["found","not_found"]},{type:"create_opportunity",label:"Create Opportunity",icon:"plus-circle",description:"Create a new opportunity"},{type:"update_opportunity",label:"Update Opportunity",icon:"edit",description:"Update an existing opportunity"},{type:"remove_opportunity",label:"Remove Opportunity",icon:"trash-alt",description:"Remove opportunity"},{type:"update_appointment_status",label:"Update Appointment",icon:"calendar-check",description:"Update appointment status"},{type:"generate_booking_link",label:"Generate Booking Link",icon:"link",description:"Create personalized booking link"}]},data:{label:"Data & Integration",icon:"database",actions:[{type:"webhook",label:"HTTP Webhook",icon:"globe",description:"Send HTTP request"},{type:"google_sheets",label:"Google Sheets",icon:"table",description:"Add/update Google Sheets"},{type:"update_custom_value",label:"Update Custom Value",icon:"edit",description:"Set custom field value"},{type:"text_formatter",label:"Text Formatter",icon:"font",description:"Format text values"},{type:"arrays",label:"Array Operations",icon:"list",description:"Work with arrays"}]},payment:{label:"Payment Actions",icon:"credit-card",actions:[{type:"stripe_charge",label:"Stripe Charge",icon:"stripe",description:"Charge via Stripe"},{type:"send_invoice",label:"Send Invoice",icon:"file-invoice-dollar",description:"Send an invoice"},{type:"send_documents_contracts",label:"Send Contract",icon:"file-signature",description:"Send documents for signing"}]},marketing:{label:"Marketing",icon:"bullhorn",actions:[{type:"google_analytics",label:"Google Analytics",icon:"chart-bar",description:"Track GA events"},{type:"google_ads",label:"Google Ads",icon:"google",description:"Google Ads conversions"},{type:"facebook_custom_audience",label:"FB Custom Audience",icon:"facebook",description:"Add to Facebook audience"},{type:"facebook_conversion_api",label:"FB Conversion API",icon:"facebook-f",description:"Track FB conversions"}]}},k=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){let b=16*Math.random()|0;return("x"===a?b:3&b|8).toString(16)}),l=a=>{for(let b of Object.values(i)){let c=b.triggers.find(b=>b.type===a);if(c)return c.label}return a.replace(/_/g," ").replace(/\b\w/g,a=>a.toUpperCase())},m=a=>{for(let b of Object.values(j)){let c=b.actions.find(b=>b.type===a);if(c)return c.label}return a.replace(/_/g," ").replace(/\b\w/g,a=>a.toUpperCase())},n=a=>{for(let b of Object.values(j)){let c=b.actions.find(b=>b.type===a);if(c)return c.icon}return"cog"};function o({workflowId:a,subAccountId:d="b0000000-0000-0000-0000-000000000001",initialTrigger:e,initialActions:f,onSave:g,onCancel:j,readOnly:o=!1}){let s,t,[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)([]),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)(1),[C,D]=(0,c.useState)({x:0,y:0}),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)({x:0,y:0}),[O,P]=(0,c.useState)(null),Q=(0,c.useRef)(null);(0,c.useEffect)(()=>{let a=[],b=[];if(e&&a.push({id:"trigger",type:"trigger",triggerType:e.type,name:l(e.type),config:e.config,conditions:e.filters,x:400,y:50}),f&&f.length>0){let c="trigger",d=0,e=f.filter(a=>!a.config?.branchId),g=f.filter(a=>a.config?.branchId);e.forEach((e,f)=>{let g=e.id||k(),i=h.includes(e.type);a.push({id:g,type:"action",actionType:e.type,name:e.name||m(e.type),config:e.config,conditions:e.conditions,delay:e.delay,continueOnError:e.continueOnError,x:400,y:50+(d+1)*150}),c&&b.push({from:c,to:g,type:"main"}),c=g,d++,i&&(d+=2)}),g.forEach(b=>{let c=b.id||k(),d=b.config?.branchId,e=b.config?.parentBranchNodeId||d?.replace(/-yes$/,"").replace(/-no$/,""),f=a.find(a=>a.id===e),g=d?.endsWith("-yes"),h=a.filter(a=>a.branchId===d);a.push({id:c,type:"action",actionType:b.type,name:b.name||m(b.type),config:b.config,conditions:b.conditions,delay:b.delay,continueOnError:b.continueOnError,x:f?g?f.x-160:f.x+160:400,y:f?f.y+260+80*h.length:400,branchId:d,parentBranchNodeId:e})})}v(a),x(b)},[e,f]);let R=(0,c.useCallback)(a=>{(a.target===Q.current||a.target.classList.contains("canvas-background"))&&(L(!0),N({x:a.clientX-C.x,y:a.clientY-C.y}),z(null))},[C]),S=(0,c.useCallback)(a=>{K&&D({x:a.clientX-M.x,y:a.clientY-M.y})},[K,M]),T=(0,c.useCallback)(()=>{L(!1)},[]),U=(0,c.useCallback)(a=>{B(b=>Math.max(.25,Math.min(2,b+a)))},[]),V=(0,c.useCallback)(a=>{let b={id:"trigger",type:"trigger",triggerType:a,name:l(a),config:{},x:400,y:50};v(a=>[...a.filter(a=>"trigger"!==a.type),b]),F(!1),z("trigger"),J(!0)},[]),W=(0,c.useCallback)(a=>{let b,c,d=k(),e=O&&(O.endsWith("-yes")||O.endsWith("-no")),f=400,g=u.length>0?Math.max(...u.map(a=>a.y))+150:200;if(e&&O){b=O,c=O.replace(/-yes$/,"").replace(/-no$/,"");let a=u.find(a=>a.id===c);if(a){f=O.endsWith("-yes")?a.x-160:a.x+160;let c=u.filter(a=>a.branchId===b);g=c.length>0?Math.max(...c.map(a=>a.y))+100:a.y+260}}let h={id:d,type:"action",actionType:a,name:m(a),config:{},continueOnError:!0,x:f,y:g,branchId:b,parentBranchNodeId:c};if(v(a=>[...a,h]),O&&!e)x(a=>[...a,{from:O,to:d,type:"main"}]);else if(!e&&u.length>0){let a=u.filter(a=>!a.branchId);if(a.length>0){let b=a[a.length-1];x(a=>[...a,{from:b.id,to:d,type:"main"}])}}H(!1),P(null),z(d),J(!0)},[u,O]),X=(0,c.useCallback)(a=>{"trigger"===a?alert("Cannot delete trigger. Create a new workflow to change the trigger."):(v(b=>b.filter(b=>b.id!==a)),x(b=>{let c=b.find(b=>b.to===a),d=b.find(b=>b.from===a),e=b.filter(b=>b.from!==a&&b.to!==a);return c&&d?[...e,{...c,to:d.to}]:e}),z(null),J(!1))},[]),Y=(0,c.useCallback)((a,b)=>{v(c=>c.map(c=>c.id===a?{...c,...b}:c))},[]),Z=(0,c.useCallback)(()=>{let a=u.find(a=>"trigger"===a.type);if(!a||!a.triggerType)return void alert("Please add a trigger to your workflow");let b={type:a.triggerType,config:a.config,filters:a.conditions},c=u.filter(a=>"action"===a.type),d=[];c.sort((a,b)=>a.y-b.y),c.forEach((a,b)=>{a.actionType&&d.push({id:a.id,type:a.actionType,name:a.name,config:{...a.config,branchId:a.branchId,parentBranchNodeId:a.parentBranchNodeId},delay:a.delay,continueOnError:a.continueOnError??!0,order:b,conditions:a.conditions})}),g(b,d)},[u,g]),$=u.find(a=>"trigger"===a.type),_=u.filter(a=>"action"===a.type&&!a.branchId);return u.filter(a=>"action"===a.type),(0,b.jsxs)("div",{className:"h-full min-h-[600px] flex flex-col bg-gray-100",children:[(0,b.jsxs)("div",{className:"bg-white border-b px-4 py-3 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("button",{onClick:j,className:"text-gray-600 hover:text-gray-800 flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-arrow-left"}),"Back"]}),(0,b.jsx)("div",{className:"h-6 w-px bg-gray-300"}),(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:a?"Edit Workflow":"New Workflow"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 bg-gray-100 rounded-lg px-3 py-1",children:[(0,b.jsx)("button",{onClick:()=>U(-.1),className:"text-gray-600 hover:text-gray-800",children:(0,b.jsx)("i",{className:"fas fa-minus text-sm"})}),(0,b.jsxs)("span",{className:"text-sm text-gray-600 w-12 text-center",children:[Math.round(100*A),"%"]}),(0,b.jsx)("button",{onClick:()=>U(.1),className:"text-gray-600 hover:text-gray-800",children:(0,b.jsx)("i",{className:"fas fa-plus text-sm"})})]}),(0,b.jsx)("button",{onClick:()=>B(1),className:"px-3 py-1 text-sm text-gray-600 hover:text-gray-800",children:"Reset"}),(0,b.jsx)("div",{className:"h-6 w-px bg-gray-300"}),!o&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:j,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,b.jsxs)("button",{onClick:Z,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-save"}),"Save Workflow"]})]})]})]}),(0,b.jsxs)("div",{className:"flex-1 flex overflow-hidden min-h-[500px]",children:[(0,b.jsxs)("div",{ref:Q,className:"flex-1 relative overflow-hidden cursor-grab active:cursor-grabbing",onMouseDown:R,onMouseMove:S,onMouseUp:T,onMouseLeave:T,children:[(0,b.jsx)("div",{className:"absolute inset-0 canvas-background",style:{backgroundImage:`
                linear-gradient(to right, #e5e7eb 1px, transparent 1px),
                linear-gradient(to bottom, #e5e7eb 1px, transparent 1px)
              `,backgroundSize:`${20*A}px ${20*A}px`,backgroundPosition:`${C.x}px ${C.y}px`}}),(0,b.jsxs)("div",{className:"absolute",style:{transform:`translate(${C.x}px, ${C.y}px) scale(${A})`,transformOrigin:"0 0"},children:[(0,b.jsx)("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",style:{overflow:"visible"},children:w.map((a,c)=>{let d=u.find(b=>b.id===a.from),e=u.find(b=>b.id===a.to);if(!d||!e)return null;let f=d.x+140,g=d.y+80,h=e.x+140,i=e.y,j=(g+i)/2;return(0,b.jsxs)("g",{children:[(0,b.jsx)("path",{d:`M ${f} ${g} C ${f} ${j}, ${h} ${j}, ${h} ${i}`,fill:"none",stroke:"yes"===a.type?"#22c55e":"no"===a.type?"#ef4444":"#94a3b8",strokeWidth:"2",strokeDasharray:"main"!==a.type?"5,5":void 0}),(0,b.jsx)("circle",{cx:h,cy:i,r:"4",fill:"yes"===a.type?"#22c55e":"no"===a.type?"#ef4444":"#94a3b8"})]},c)})}),$?(0,b.jsxs)("div",{className:`absolute bg-white rounded-xl shadow-lg border-2 w-[280px] cursor-pointer transition-all ${y===$.id?"border-blue-500 shadow-blue-100":"border-gray-200 hover:border-gray-300"}`,style:{left:$.x,top:$.y},onClick:()=>{z($.id),o||J(!0)},children:[(0,b.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white px-4 py-3 rounded-t-xl",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center",children:(0,b.jsx)("i",{className:`fas fa-${(a=>{for(let b of Object.values(i)){let c=b.triggers.find(b=>b.type===a);if(c)return c.icon}return"bolt"})($.triggerType)} text-sm`})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-medium text-blue-100",children:"TRIGGER"}),(0,b.jsx)("p",{className:"font-semibold",children:$.name})]})]})}),(0,b.jsxs)("div",{className:"px-4 py-3",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"When this happens..."}),$.conditions&&$.conditions.length>0&&(0,b.jsxs)("div",{className:"mt-2 flex items-center gap-1",children:[(0,b.jsx)("i",{className:"fas fa-filter text-xs text-gray-400"}),(0,b.jsxs)("span",{className:"text-xs text-gray-500",children:[$.conditions.length," filters"]})]})]})]}):(0,b.jsxs)("div",{className:"absolute w-[280px] border-2 border-dashed border-gray-300 rounded-xl bg-white/50 p-8 text-center cursor-pointer hover:border-blue-400 hover:bg-blue-50/50 transition-colors",style:{left:400,top:50},onClick:()=>!o&&F(!0),children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,b.jsx)("i",{className:"fas fa-bolt text-blue-600 text-xl"})}),(0,b.jsx)("p",{className:"font-medium text-gray-700",children:"Add Trigger"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Start with what kicks off your workflow"})]}),_.map(a=>{let c=h.includes(a.actionType),d=c?(a=>{switch(a){case"find_opportunity":return{yes:"Opportunity Found",no:"Opportunity Not Found"};case"find_contact":return{yes:"Contact Found",no:"Contact Not Found"};case"if_else":return{yes:"Yes (Condition Met)",no:"No (Condition Not Met)"};case"split":return{yes:"Path A",no:"Path B"};case"goal_event":return{yes:"Goal Achieved",no:"Goal Not Achieved"};default:return{yes:"Yes",no:"No"}}})(a.actionType):null,e=`${a.id}-yes`,f=`${a.id}-no`,g=u.filter(a=>a.branchId===e),i=u.filter(a=>a.branchId===f);return g.length,i.length,(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:`absolute bg-white rounded-xl shadow-lg border-2 w-[280px] cursor-pointer transition-all ${y===a.id?"border-purple-500 shadow-purple-100":"border-gray-200 hover:border-gray-300"}`,style:{left:a.x,top:a.y},onClick:()=>{z(a.id),o||J(!0)},children:[(0,b.jsx)("div",{className:`bg-gradient-to-r ${c?"from-cyan-500 to-cyan-600":"from-purple-500 to-purple-600"} text-white px-4 py-3 rounded-t-xl`,children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center",children:(0,b.jsx)("i",{className:`fas fa-${n(a.actionType)} text-sm`})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-xs font-medium opacity-80",children:"ACTION"}),(0,b.jsx)("p",{className:"font-semibold truncate",children:a.name})]}),!o&&(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),X(a.id)},className:"text-white/60 hover:text-white",children:(0,b.jsx)("i",{className:"fas fa-times"})})]})}),(0,b.jsxs)("div",{className:"px-4 py-3",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:c?"Check condition...":"Then do this..."}),(0,b.jsxs)("div",{className:"mt-2 flex items-center gap-3 text-xs text-gray-400",children:[a.delay&&a.delay>0&&(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)("i",{className:"fas fa-clock"}),"Wait ",a.delay,"m"]}),a.conditions&&a.conditions.length>0&&(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)("i",{className:"fas fa-filter"}),a.conditions.length," conditions"]}),c&&(0,b.jsxs)("span",{className:"flex items-center gap-1 text-cyan-600",children:[(0,b.jsx)("i",{className:"fas fa-code-branch"}),"2 Branches"]})]})]})]}),c&&d&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("svg",{className:"absolute pointer-events-none z-0",style:{left:a.x+140,top:a.y+105,overflow:"visible"},width:"400",height:"80",children:[(0,b.jsx)("line",{x1:"0",y1:"0",x2:"0",y2:"25",stroke:"#94a3b8",strokeWidth:"2"}),(0,b.jsx)("line",{x1:"-160",y1:"25",x2:"160",y2:"25",stroke:"#94a3b8",strokeWidth:"2"}),(0,b.jsx)("line",{x1:"-160",y1:"25",x2:"-160",y2:"55",stroke:"#22c55e",strokeWidth:"3"}),(0,b.jsx)("line",{x1:"160",y1:"25",x2:"160",y2:"55",stroke:"#f97316",strokeWidth:"3"})]}),(0,b.jsxs)("div",{className:"absolute z-10",style:{left:a.x-160,top:a.y+160},children:[(0,b.jsx)("div",{className:"w-[280px] text-center mb-3",children:(0,b.jsxs)("span",{className:"px-4 py-1.5 bg-green-100 text-green-700 text-xs font-medium rounded-full border border-green-200",children:[(0,b.jsx)("i",{className:"fas fa-check mr-1"}),d.yes]})}),g.map((a,c)=>(0,b.jsxs)("div",{className:`w-[280px] mb-3 bg-white rounded-xl shadow-lg border-2 cursor-pointer transition-all ${y===a.id?"border-green-500 shadow-green-100":"border-green-200 hover:border-green-300"}`,onClick:()=>{z(a.id),o||J(!0)},children:[(0,b.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-green-600 text-white px-3 py-2 rounded-t-xl",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("i",{className:`fas fa-${n(a.actionType)} text-sm`}),(0,b.jsx)("span",{className:"font-medium text-sm truncate",children:a.name}),!o&&(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),X(a.id)},className:"ml-auto text-white/60 hover:text-white",children:(0,b.jsx)("i",{className:"fas fa-times text-xs"})})]})}),(0,b.jsx)("div",{className:"px-3 py-2 text-xs text-gray-500",children:"Then do this..."})]},a.id)),!o&&(0,b.jsxs)("div",{className:"w-[280px] border-2 border-dashed border-green-300 rounded-xl bg-green-50/50 p-4 text-center cursor-pointer hover:border-green-400 hover:bg-green-100/50 transition-colors",onClick:()=>{P(e),H(!0)},children:[(0,b.jsx)("i",{className:"fas fa-plus text-green-600 mb-1"}),(0,b.jsx)("p",{className:"text-sm font-medium text-green-700",children:"Add Action"})]}),(0,b.jsx)("div",{className:"w-[280px] mt-3 text-center",children:(0,b.jsx)("span",{className:"px-4 py-1.5 bg-green-50 text-green-600 text-xs font-medium rounded-full border border-green-200",children:"END"})})]}),(0,b.jsxs)("div",{className:"absolute z-10",style:{left:a.x+160,top:a.y+160},children:[(0,b.jsx)("div",{className:"w-[280px] text-center mb-3",children:(0,b.jsxs)("span",{className:"px-4 py-1.5 bg-orange-100 text-orange-700 text-xs font-medium rounded-full border border-orange-200",children:[(0,b.jsx)("i",{className:"fas fa-times mr-1"}),d.no]})}),i.map((a,c)=>(0,b.jsxs)("div",{className:`w-[280px] mb-3 bg-white rounded-xl shadow-lg border-2 cursor-pointer transition-all ${y===a.id?"border-orange-500 shadow-orange-100":"border-orange-200 hover:border-orange-300"}`,onClick:()=>{z(a.id),o||J(!0)},children:[(0,b.jsx)("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 text-white px-3 py-2 rounded-t-xl",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("i",{className:`fas fa-${n(a.actionType)} text-sm`}),(0,b.jsx)("span",{className:"font-medium text-sm truncate",children:a.name}),!o&&(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),X(a.id)},className:"ml-auto text-white/60 hover:text-white",children:(0,b.jsx)("i",{className:"fas fa-times text-xs"})})]})}),(0,b.jsx)("div",{className:"px-3 py-2 text-xs text-gray-500",children:"Then do this..."})]},a.id)),!o&&(0,b.jsxs)("div",{className:"w-[280px] border-2 border-dashed border-orange-300 rounded-xl bg-orange-50/50 p-4 text-center cursor-pointer hover:border-orange-400 hover:bg-orange-100/50 transition-colors",onClick:()=>{P(f),H(!0)},children:[(0,b.jsx)("i",{className:"fas fa-plus text-orange-600 mb-1"}),(0,b.jsx)("p",{className:"text-sm font-medium text-orange-700",children:"Add Action"})]}),(0,b.jsx)("div",{className:"w-[280px] mt-3 text-center",children:(0,b.jsx)("span",{className:"px-4 py-1.5 bg-orange-50 text-orange-600 text-xs font-medium rounded-full border border-orange-200",children:"END"})})]})]})]},a.id)}),$&&!o&&((t=(s=u.filter(a=>!a.branchId))[s.length-1])&&h.includes(t.actionType)?null:(0,b.jsxs)("div",{className:"absolute w-[280px] border-2 border-dashed border-gray-300 rounded-xl bg-white/50 p-6 text-center cursor-pointer hover:border-purple-400 hover:bg-purple-50/50 transition-colors",style:{left:400,top:s.length>0?Math.max(...s.map(a=>a.y))+150:200},onClick:()=>{P(null),H(!0)},children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-2",children:(0,b.jsx)("i",{className:"fas fa-plus text-purple-600"})}),(0,b.jsx)("p",{className:"font-medium text-gray-700",children:"Add Action"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Add the next step"})]}))]})]}),I&&y&&(0,b.jsx)(r,{node:u.find(a=>a.id===y),subAccountId:d,onUpdate:a=>Y(y,a),onClose:()=>J(!1),onDelete:()=>X(y),readOnly:o})]}),E&&(0,b.jsx)(p,{onSelect:V,onClose:()=>F(!1)}),G&&(0,b.jsx)(q,{onSelect:W,onClose:()=>H(!1)})]})}function p({onSelect:a,onClose:d}){let[e,f]=(0,c.useState)(""),[g,h]=(0,c.useState)(null),j=Object.entries(i).map(([a,b])=>({key:a,...b,triggers:b.triggers.filter(a=>a.label.toLowerCase().includes(e.toLowerCase())||a.description.toLowerCase().includes(e.toLowerCase()))})).filter(a=>a.triggers.length>0);return(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-3xl max-h-[80vh] flex flex-col mx-4",children:[(0,b.jsxs)("div",{className:"px-6 py-4 border-b",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Select a Trigger"}),(0,b.jsx)("button",{onClick:d,className:"text-gray-400 hover:text-gray-600",children:(0,b.jsx)("i",{className:"fas fa-times text-xl"})})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:"text",value:e,onChange:a=>f(a.target.value),placeholder:"Search triggers...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,b.jsx)("i",{className:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:j.map(c=>(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)("h4",{className:"flex items-center gap-2 text-sm font-semibold text-gray-500 mb-3",children:[(0,b.jsx)("i",{className:`fas fa-${c.icon}`}),c.label]}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-3",children:c.triggers.map(c=>(0,b.jsxs)("button",{onClick:()=>a(c.type),className:"flex items-start gap-3 p-4 border border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors text-left",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,b.jsx)("i",{className:`fas fa-${c.icon} text-blue-600`})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-gray-900",children:c.label}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-0.5",children:c.description})]})]},c.type))})]},c.key))})]})})}function q({onSelect:a,onClose:d}){let[e,f]=(0,c.useState)(""),[g,h]=(0,c.useState)(null),i=Object.entries(j).map(([a,b])=>({key:a,...b,actions:b.actions.filter(a=>a.label.toLowerCase().includes(e.toLowerCase())||a.description.toLowerCase().includes(e.toLowerCase()))})).filter(a=>a.actions.length>0);return(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[80vh] flex flex-col mx-4",children:[(0,b.jsxs)("div",{className:"px-6 py-4 border-b",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Add an Action"}),(0,b.jsx)("button",{onClick:d,className:"text-gray-400 hover:text-gray-600",children:(0,b.jsx)("i",{className:"fas fa-times text-xl"})})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("input",{type:"text",value:e,onChange:a=>f(a.target.value),placeholder:"Search actions...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"}),(0,b.jsx)("i",{className:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:i.map(c=>(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)("h4",{className:"flex items-center gap-2 text-sm font-semibold text-gray-500 mb-3",children:[(0,b.jsx)("i",{className:`fas fa-${c.icon}`}),c.label]}),(0,b.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-3",children:c.actions.map(c=>(0,b.jsxs)("button",{onClick:()=>a(c.type),className:"flex items-start gap-3 p-4 border border-gray-200 rounded-lg hover:border-purple-500 hover:bg-purple-50 transition-colors text-left",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,b.jsx)("i",{className:`fas fa-${c.icon} text-purple-600`})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-gray-900",children:c.label}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-0.5 line-clamp-2",children:c.description})]})]},c.type))})]},c.key))})]})})}function r({node:a,subAccountId:d,onUpdate:e,onClose:f,onDelete:g,readOnly:h}){let[i,j]=(0,c.useState)(a.config||{}),[k,l]=(0,c.useState)(a.name),[m,n]=(0,c.useState)(a.delay||0),[o,p]=(0,c.useState)(a.continueOnError??!0);(0,c.useEffect)(()=>{j(a.config||{}),l(a.name),n(a.delay||0),p(a.continueOnError??!0)},[a]);let[q,r]=(0,c.useState)(!1);return(0,b.jsxs)("div",{className:"w-96 bg-white border-l flex flex-col",children:[(0,b.jsxs)("div",{className:"px-4 py-3 border-b flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900",children:"trigger"===a.type?"Configure Trigger":"Configure Action"}),(0,b.jsx)("button",{onClick:f,className:"text-gray-400 hover:text-gray-600",children:(0,b.jsx)("i",{className:"fas fa-times"})})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,b.jsx)("input",{type:"text",value:k,onChange:a=>l(a.target.value),disabled:h,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100"})]}),"trigger"===a.type&&a.triggerType&&(0,b.jsx)(s,{type:a.triggerType,config:i,onChange:j,readOnly:h}),"action"===a.type&&a.actionType&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(t,{type:a.actionType,config:i,onChange:j,subAccountId:d,readOnly:h}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,b.jsx)("i",{className:"fas fa-clock mr-2 text-gray-400"}),"Delay (minutes)"]}),(0,b.jsx)("input",{type:"number",min:"0",value:m,onChange:a=>n(parseInt(a.target.value)||0),disabled:h,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Wait before executing this action"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("input",{type:"checkbox",id:"continueOnError",checked:o,onChange:a=>p(a.target.checked),disabled:h,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,b.jsx)("label",{htmlFor:"continueOnError",className:"text-sm text-gray-700",children:"Continue workflow on error"})]})]})]}),!h&&(0,b.jsxs)("div",{className:"px-4 py-3 border-t flex items-center justify-between",children:["trigger"!==a.type&&(0,b.jsxs)("button",{onClick:g,className:"text-red-600 hover:text-red-700 text-sm",children:[(0,b.jsx)("i",{className:"fas fa-trash mr-1"}),"Delete"]}),(0,b.jsx)("div",{className:"flex-1"}),(0,b.jsx)("button",{onClick:()=>{e({name:k,config:i,delay:m,continueOnError:o}),r(!0),setTimeout(()=>r(!1),2e3)},className:`px-4 py-2 rounded-lg transition-all ${q?"bg-green-600 text-white":"bg-blue-600 text-white hover:bg-blue-700"}`,children:q?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("i",{className:"fas fa-check mr-2"}),"Applied!"]}):"Apply Changes"})]})]})}function s({type:a,config:c,onChange:d,readOnly:e}){let f=(a,b)=>{d({...c,[a]:b})};switch(a){case"contact_tag":return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tag Operation"}),(0,b.jsxs)("select",{value:c.tagOperation||"added",onChange:a=>f("tagOperation",a.target.value),disabled:e,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"added",children:"Tag Added"}),(0,b.jsx)("option",{value:"removed",children:"Tag Removed"}),(0,b.jsx)("option",{value:"any",children:"Any Change"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tag IDs (comma separated)"}),(0,b.jsx)("input",{type:"text",value:(c.tagIds||[]).join(", "),onChange:a=>f("tagIds",a.target.value.split(",").map(a=>a.trim()).filter(Boolean)),disabled:e,placeholder:"tag-id-1, tag-id-2",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]});case"appointment_status":case"customer_booked_appointment":return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Calendar IDs (optional)"}),(0,b.jsx)("input",{type:"text",value:(c.calendarIds||[]).join(", "),onChange:a=>f("calendarIds",a.target.value.split(",").map(a=>a.trim()).filter(Boolean)),disabled:e,placeholder:"Leave empty for all calendars",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),"appointment_status"===a&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status Filter"}),["scheduled","rescheduled","no_show","cancelled","completed"].map(a=>(0,b.jsxs)("label",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:(c.appointmentStatuses||[]).includes(a),onChange:b=>{let d=c.appointmentStatuses||[];b.target.checked?f("appointmentStatuses",[...d,a]):f("appointmentStatuses",d.filter(b=>b!==a))},disabled:e,className:"w-4 h-4"}),(0,b.jsx)("span",{className:"text-sm capitalize",children:a.replace("_"," ")})]},a))]})]});case"form_submitted":return(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Form ID (optional)"}),(0,b.jsx)("input",{type:"text",value:c.formId||"",onChange:a=>f("formId",a.target.value),disabled:e,placeholder:"Leave empty for all forms",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]});case"email_events":return(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Events"}),["opened","clicked","bounced","unsubscribed"].map(a=>(0,b.jsxs)("label",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:(c.emailEvents||[]).includes(a),onChange:b=>{let d=c.emailEvents||[];b.target.checked?f("emailEvents",[...d,a]):f("emailEvents",d.filter(b=>b!==a))},disabled:e,className:"w-4 h-4"}),(0,b.jsx)("span",{className:"text-sm capitalize",children:a})]},a))]});case"inbound_webhook":return(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Webhook URL"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"text",value:c.webhookUrl||"",readOnly:!0,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg bg-gray-50",placeholder:"URL will be generated on save"}),(0,b.jsx)("button",{className:"px-3 py-2 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200",children:(0,b.jsx)("i",{className:"fas fa-copy"})})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"This URL will receive POST requests to trigger the workflow"})]});case"birthday_reminder":case"custom_date_reminder":return(0,b.jsxs)("div",{className:"space-y-4",children:["custom_date_reminder"===a&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custom Date Field"}),(0,b.jsx)("input",{type:"text",value:c.customDateField||"",onChange:a=>f("customDateField",a.target.value),disabled:e,placeholder:"e.g., anniversary_date",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Days Before Reminder"}),(0,b.jsx)("input",{type:"number",min:"0",value:c.daysBeforeReminder||0,onChange:a=>f("daysBeforeReminder",parseInt(a.target.value)||0),disabled:e,className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]});default:return(0,b.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg",children:(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:[(0,b.jsx)("i",{className:"fas fa-info-circle mr-2"}),"Additional configuration options will be available based on your selections."]})})}}function t({type:a,config:e,onChange:f,subAccountId:h,readOnly:i}){let[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(!1);(0,c.useEffect)(()=>{["create_opportunity","update_opportunity","find_opportunity"].includes(a)&&h&&(o(!0),fetch(`/api/v1/pipelines?subAccountId=${h}&includeStages=true`).then(a=>a.json()).then(a=>{console.log("[ActionConfigEditor] Pipelines API response:",a),a.success&&a.data&&(m(a.data),console.log("[ActionConfigEditor] Loaded pipelines with stages:",a.data.map(a=>({id:a.id,name:a.name,stageCount:a.stages?.length||0}))))}).catch(a=>console.error("Failed to fetch pipelines:",a)).finally(()=>o(!1)))},[a,h]);let p=l.find(a=>a.id===e.opportunityPipelineId),q=p?.stages||[];(0,c.useEffect)(()=>{e.opportunityPipelineId&&(console.log("[ActionConfigEditor] Selected pipeline ID:",e.opportunityPipelineId),console.log("[ActionConfigEditor] Selected pipeline:",p?.name),console.log("[ActionConfigEditor] Available stages:",q))},[e.opportunityPipelineId,p,q]),(0,c.useEffect)(()=>{e.tags&&Array.isArray(e.tags)?k(e.tags):e.tagIds&&Array.isArray(e.tagIds)&&k(e.tagIds.map(a=>({id:a,name:a,slug:a,color:"#3B82F6"})))},[]);let r=(a,b)=>{f({...e,[a]:b})},s=a=>{console.log("[ActionConfigEditor] Pipeline changed to:",a);let b=l.find(b=>b.id===a);console.log("[ActionConfigEditor] Found pipeline:",b?.name,"with stages:",b?.stages?.length),f({...e,opportunityPipelineId:a,opportunityStageId:""})};switch(a){case"send_email":return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),(0,b.jsx)("input",{type:"text",value:e.emailSubject||"",onChange:a=>r("emailSubject",a.target.value),disabled:i,placeholder:"Email subject line",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Email"}),(0,b.jsx)("input",{type:"email",value:e.emailFrom||"",onChange:a=>r("emailFrom",a.target.value),disabled:i,placeholder:"noreply@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Body"}),(0,b.jsx)("textarea",{value:e.emailBody||"",onChange:a=>r("emailBody",a.target.value),disabled:i,rows:6,placeholder:"Email content... Use {{contact.firstName}} for personalization",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Use variables: ","{{contact.firstName}}, {{contact.email}}, {{contact.phone}}"]})]})]});case"send_sms":return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Number"}),(0,b.jsx)("input",{type:"text",value:e.smsFrom||"",onChange:a=>r("smsFrom",a.target.value),disabled:i,placeholder:"+1234567890",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Message"}),(0,b.jsx)("textarea",{value:e.smsMessage||"",onChange:a=>r("smsMessage",a.target.value),disabled:i,rows:4,placeholder:"SMS message... Use {{contact.firstName}} for personalization",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[(e.smsMessage||"").length,"/160 characters"]})]})]});case"add_contact_tag":case"remove_contact_tag":return(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,b.jsx)("i",{className:`fas fa-${"add_contact_tag"===a?"tag":"tags"} mr-2 text-gray-400`}),"add_contact_tag"===a?"Tags to Add":"Tags to Remove"]}),(0,b.jsx)(d,{subAccountId:h,selectedTags:j,onChange:a=>{k(a),f({...e,tags:a,tagIds:a.map(a=>a.id)})},placeholder:"add_contact_tag"===a?"Search or create tags to add...":"Search tags to remove...",disabled:i,allowCreate:"add_contact_tag"===a}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"add_contact_tag"===a?"Type to search existing tags or create new ones":"Select tags to remove from the contact"})]}),j.length>0&&(0,b.jsxs)("div",{className:"text-xs text-gray-400 bg-gray-50 px-2 py-1 rounded",children:["IDs: ",j.map(a=>a.id).join(", ")]})]});case"update_contact_field":return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Set contact field values. Add fields below:"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fields (JSON)"}),(0,b.jsx)("textarea",{value:JSON.stringify(e.contactFields||{},null,2),onChange:a=>{try{r("contactFields",JSON.parse(a.target.value))}catch{}},disabled:i,rows:6,placeholder:'{"firstName": "John", "status": "qualified"}',className:"w-full px-3 py-2 border border-gray-300 rounded-lg font-mono text-sm"})]})]});case"wait_step":return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Wait Duration"}),(0,b.jsx)("input",{type:"number",min:"1",value:e.waitDuration||1,onChange:a=>r("waitDuration",parseInt(a.target.value)||1),disabled:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),(0,b.jsxs)("select",{value:e.waitUnit||"minutes",onChange:a=>r("waitUnit",a.target.value),disabled:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"minutes",children:"Minutes"}),(0,b.jsx)("option",{value:"hours",children:"Hours"}),(0,b.jsx)("option",{value:"days",children:"Days"}),(0,b.jsx)("option",{value:"weeks",children:"Weeks"})]})]})]});case"if_else":return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Add conditions to branch your workflow:"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Conditions (JSON)"}),(0,b.jsx)("textarea",{value:JSON.stringify(e.ifElseConditions||[],null,2),onChange:a=>{try{r("ifElseConditions",JSON.parse(a.target.value))}catch{}},disabled:i,rows:6,placeholder:'[{"field": "contact.tag", "operator": "contains", "value": "VIP"}]',className:"w-full px-3 py-2 border border-gray-300 rounded-lg font-mono text-sm"})]})]});case"webhook":return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Webhook URL"}),(0,b.jsx)("input",{type:"url",value:e.webhookUrl||"",onChange:a=>r("webhookUrl",a.target.value),disabled:i,placeholder:"https://api.example.com/webhook",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Method"}),(0,b.jsxs)("select",{value:e.webhookMethod||"POST",onChange:a=>r("webhookMethod",a.target.value),disabled:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"GET",children:"GET"}),(0,b.jsx)("option",{value:"POST",children:"POST"}),(0,b.jsx)("option",{value:"PUT",children:"PUT"}),(0,b.jsx)("option",{value:"DELETE",children:"DELETE"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Body (JSON)"}),(0,b.jsx)("textarea",{value:JSON.stringify(e.webhookBody||{},null,2),onChange:a=>{try{r("webhookBody",JSON.parse(a.target.value))}catch{}},disabled:i,rows:4,placeholder:'{"contactId": "{{contact.id}}"}',className:"w-full px-3 py-2 border border-gray-300 rounded-lg font-mono text-sm"})]})]});case"add_note":return(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Note Content"}),(0,b.jsx)("textarea",{value:e.noteContent||"",onChange:a=>r("noteContent",a.target.value),disabled:i,rows:4,placeholder:"Enter the note content...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]});case"add_task":return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Task Title"}),(0,b.jsx)("input",{type:"text",value:e.taskTitle||"",onChange:a=>r("taskTitle",a.target.value),disabled:i,placeholder:"Follow up with contact",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date (relative)"}),(0,b.jsx)("input",{type:"text",value:e.taskDueDate||"",onChange:a=>r("taskDueDate",a.target.value),disabled:i,placeholder:"+3 days",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]});case"ai_prompt":return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AI Prompt"}),(0,b.jsx)("textarea",{value:e.aiPrompt||"",onChange:a=>r("aiPrompt",a.target.value),disabled:i,rows:6,placeholder:"Write a personalized follow-up email for {{contact.firstName}}...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Model"}),(0,b.jsxs)("select",{value:e.aiModel||"gpt-4",onChange:a=>r("aiModel",a.target.value),disabled:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"gpt-4",children:"GPT-4"}),(0,b.jsx)("option",{value:"gpt-3.5-turbo",children:"GPT-3.5 Turbo"}),(0,b.jsx)("option",{value:"claude-3",children:"Claude 3"}),(0,b.jsx)("option",{value:"gemini-pro",children:"Gemini Pro"})]})]})]});case"manual_action":return(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructions for Team"}),(0,b.jsx)("textarea",{value:e.manualActionInstructions||"",onChange:a=>r("manualActionInstructions",a.target.value),disabled:i,rows:4,placeholder:"Instructions for the team member...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]});case"find_opportunity":return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Opportunity to be Found"}),(0,b.jsxs)("select",{value:e.opportunitySearchType||"most_recent",onChange:a=>r("opportunitySearchType",a.target.value),disabled:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"most_recent",children:"Most recently created opportunity"}),(0,b.jsx)("option",{value:"by_name",children:"By opportunity name"}),(0,b.jsx)("option",{value:"by_id",children:"By opportunity ID"}),(0,b.jsx)("option",{value:"by_fields",children:"By custom fields"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fields"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(e.opportunitySearchFields||[]).map((a,c)=>(0,b.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsxs)("select",{value:a.field||"",onChange:b=>{let d=[...e.opportunitySearchFields||[]];d[c]={...a,field:b.target.value},r("opportunitySearchFields",d)},disabled:i,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm bg-white",children:[(0,b.jsx)("option",{value:"",children:"Select field..."}),(0,b.jsxs)("optgroup",{label:"Standard Fields",children:[(0,b.jsx)("option",{value:"opportunity_id",children:"Opportunity ID"}),(0,b.jsx)("option",{value:"opportunity_name",children:"Opportunity Name"}),(0,b.jsx)("option",{value:"pipeline",children:"Pipeline"}),(0,b.jsx)("option",{value:"pipeline_stage",children:"Pipeline Stage"}),(0,b.jsx)("option",{value:"opportunity_value",children:"Opportunity Value"}),(0,b.jsx)("option",{value:"status",children:"Status"}),(0,b.jsx)("option",{value:"opportunity_source",children:"Opportunity Source"})]})]}),(0,b.jsx)("button",{type:"button",onClick:()=>{r("opportunitySearchFields",(e.opportunitySearchFields||[]).filter((a,b)=>b!==c))},disabled:i,className:"p-2 text-gray-400 hover:text-red-500",children:(0,b.jsx)("i",{className:"fas fa-times"})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("select",{value:a.operator||"is",onChange:b=>{let d=[...e.opportunitySearchFields||[]];d[c]={...a,operator:b.target.value},r("opportunitySearchFields",d)},disabled:i,className:"w-28 px-3 py-2 border border-gray-300 rounded-lg text-sm bg-white",children:[(0,b.jsx)("option",{value:"is",children:"Is"}),(0,b.jsx)("option",{value:"is_not",children:"Is not"}),(0,b.jsx)("option",{value:"contains",children:"Contains"}),(0,b.jsx)("option",{value:"starts_with",children:"Starts with"}),(0,b.jsx)("option",{value:"greater_than",children:"Greater than"}),(0,b.jsx)("option",{value:"less_than",children:"Less than"})]}),"status"===a.field?(0,b.jsxs)("select",{value:a.value||"Open",onChange:b=>{let d=[...e.opportunitySearchFields||[]];d[c]={...a,value:b.target.value},r("opportunitySearchFields",d)},disabled:i,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm bg-white",children:[(0,b.jsx)("option",{value:"Open",children:"Open"}),(0,b.jsx)("option",{value:"Won",children:"Won"}),(0,b.jsx)("option",{value:"Lost",children:"Lost"}),(0,b.jsx)("option",{value:"Abandoned",children:"Abandoned"})]}):(0,b.jsx)(g,{value:a.value||"",onChange:b=>{let d=[...e.opportunitySearchFields||[]];d[c]={...a,value:b},r("opportunitySearchFields",d)},disabled:i,placeholder:"Enter value or select variable",className:"flex-1"})]})]},c)),(0,b.jsxs)("button",{type:"button",onClick:()=>{r("opportunitySearchFields",[...e.opportunitySearchFields||[],{field:"",operator:"is",value:""}])},disabled:i,className:"flex items-center gap-2 text-sm text-blue-600 hover:text-blue-700 mt-2",children:[(0,b.jsx)("i",{className:"fas fa-plus-circle"}),"Add field"]})]})]}),(0,b.jsx)("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:(0,b.jsxs)("p",{className:"text-sm text-blue-700",children:[(0,b.jsx)("i",{className:"fas fa-info-circle mr-2"}),"This action creates two branches: ",(0,b.jsx)("strong",{children:"Opportunity Found"})," and ",(0,b.jsx)("strong",{children:"Opportunity Not Found"})]})})]});case"create_opportunity":return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Pipeline ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("select",{value:e.opportunityPipelineId||"",onChange:a=>s(a.target.value),disabled:i||n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-white",children:[(0,b.jsx)("option",{value:"",children:n?"Loading pipelines...":"Select a pipeline"}),l.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]}),0===l.length&&!n&&(0,b.jsxs)("p",{className:"text-xs text-amber-600 mt-1",children:[(0,b.jsx)("i",{className:"fas fa-exclamation-triangle mr-1"}),"No pipelines found. Create a pipeline first."]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Duplicate opportunity"}),(0,b.jsx)("span",{className:"px-2 py-1 text-xs bg-red-100 text-red-600 rounded",children:"Disabled"})]}),(0,b.jsx)("div",{className:"text-xs text-gray-500 uppercase font-medium mt-4",children:"Fields"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Opportunity Name"}),(0,b.jsx)(g,{value:e.opportunityName||"",onChange:a=>r("opportunityName",a),disabled:i,placeholder:"Enter name or select variable"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pipeline Stage"}),(0,b.jsxs)("select",{value:e.opportunityStageId||"",onChange:a=>r("opportunityStageId",a.target.value),disabled:i||!e.opportunityPipelineId,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-white",children:[(0,b.jsx)("option",{value:"",children:e.opportunityPipelineId?0===q.length?"No stages available":"Select a stage":"Select a pipeline first"}),q.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Opportunity Value"}),(0,b.jsx)(g,{value:e.opportunityValue?.toString()||"",onChange:a=>r("opportunityValue",a),disabled:i,placeholder:"Enter value or select variable"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Opportunity Source"}),(0,b.jsx)(g,{value:e.opportunitySource||"",onChange:a=>r("opportunitySource",a),disabled:i,placeholder:"Enter source or select variable"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,b.jsxs)("select",{value:e.opportunityStatus||"open",onChange:a=>r("opportunityStatus",a.target.value),disabled:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"open",children:"Open"}),(0,b.jsx)("option",{value:"won",children:"Won"}),(0,b.jsx)("option",{value:"lost",children:"Lost"}),(0,b.jsx)("option",{value:"abandoned",children:"Abandoned"})]})]})]});case"update_opportunity":return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[(0,b.jsx)("input",{type:"checkbox",checked:e.forceStageMove||!1,onChange:a=>r("forceStageMove",a.target.checked),disabled:i,className:"mt-1"}),(0,b.jsx)("div",{className:"text-sm",children:(0,b.jsx)("p",{className:"text-gray-700",children:"When toggled on, opportunity will be moved to the selected stage even if the stage is before the opportunity's current stage."})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Duplicate opportunity"}),(0,b.jsx)("span",{className:"px-2 py-1 text-xs bg-red-100 text-red-600 rounded",children:"Disabled"})]}),(0,b.jsx)("div",{className:"text-xs text-gray-500 uppercase font-medium mt-4",children:"Fields"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pipeline"}),(0,b.jsxs)("select",{value:e.opportunityPipelineId||"",onChange:a=>s(a.target.value),disabled:i||n,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-white",children:[(0,b.jsx)("option",{value:"",children:n?"Loading pipelines...":"Select a pipeline"}),l.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Opportunity Name"}),(0,b.jsx)(g,{value:e.opportunityName||"",onChange:a=>r("opportunityName",a),disabled:i,placeholder:"Enter name or select variable"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pipeline Stage"}),(0,b.jsxs)("select",{value:e.opportunityStageId||"",onChange:a=>r("opportunityStageId",a.target.value),disabled:i||!e.opportunityPipelineId,className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-white",children:[(0,b.jsx)("option",{value:"",children:e.opportunityPipelineId?0===q.length?"No stages available":"Select a stage":"Select a pipeline first"}),q.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Opportunity Value"}),(0,b.jsx)(g,{value:e.opportunityValue?.toString()||"",onChange:a=>r("opportunityValue",a),disabled:i,placeholder:"Enter value or select variable"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Opportunity Source"}),(0,b.jsx)(g,{value:e.opportunitySource||"",onChange:a=>r("opportunitySource",a),disabled:i,placeholder:"Enter source or select variable"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,b.jsxs)("select",{value:e.opportunityStatus||"open",onChange:a=>r("opportunityStatus",a.target.value),disabled:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"open",children:"Open"}),(0,b.jsx)("option",{value:"won",children:"Won"}),(0,b.jsx)("option",{value:"lost",children:"Lost"}),(0,b.jsx)("option",{value:"abandoned",children:"Abandoned"})]})]})]});case"find_contact":return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact to be Found"}),(0,b.jsxs)("select",{value:e.contactSearchType||"most_recent",onChange:a=>r("contactSearchType",a.target.value),disabled:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"most_recent",children:"Most recently created contact"}),(0,b.jsx)("option",{value:"by_email",children:"By email address"}),(0,b.jsx)("option",{value:"by_phone",children:"By phone number"}),(0,b.jsx)("option",{value:"by_id",children:"By contact ID"}),(0,b.jsx)("option",{value:"by_fields",children:"By custom fields"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Criteria"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(e.contactSearchFields||[]).map((a,c)=>(0,b.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsxs)("select",{value:a.field||"",onChange:b=>{let d=[...e.contactSearchFields||[]];d[c]={...a,field:b.target.value},r("contactSearchFields",d)},disabled:i,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm bg-white",children:[(0,b.jsx)("option",{value:"",children:"Select field..."}),(0,b.jsxs)("optgroup",{label:"Standard Fields",children:[(0,b.jsx)("option",{value:"contact_id",children:"Contact ID"}),(0,b.jsx)("option",{value:"email",children:"Email"}),(0,b.jsx)("option",{value:"phone",children:"Phone"}),(0,b.jsx)("option",{value:"first_name",children:"First Name"}),(0,b.jsx)("option",{value:"last_name",children:"Last Name"}),(0,b.jsx)("option",{value:"full_name",children:"Full Name"}),(0,b.jsx)("option",{value:"company",children:"Company"}),(0,b.jsx)("option",{value:"source",children:"Source"}),(0,b.jsx)("option",{value:"city",children:"City"}),(0,b.jsx)("option",{value:"state",children:"State"})]})]}),(0,b.jsx)("button",{type:"button",onClick:()=>{r("contactSearchFields",(e.contactSearchFields||[]).filter((a,b)=>b!==c))},disabled:i,className:"p-2 text-gray-400 hover:text-red-500",children:(0,b.jsx)("i",{className:"fas fa-times"})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("select",{value:a.operator||"is",onChange:b=>{let d=[...e.contactSearchFields||[]];d[c]={...a,operator:b.target.value},r("contactSearchFields",d)},disabled:i,className:"w-28 px-3 py-2 border border-gray-300 rounded-lg text-sm bg-white",children:[(0,b.jsx)("option",{value:"is",children:"Is"}),(0,b.jsx)("option",{value:"is_not",children:"Is not"}),(0,b.jsx)("option",{value:"contains",children:"Contains"}),(0,b.jsx)("option",{value:"starts_with",children:"Starts with"}),(0,b.jsx)("option",{value:"ends_with",children:"Ends with"}),(0,b.jsx)("option",{value:"is_empty",children:"Is empty"}),(0,b.jsx)("option",{value:"is_not_empty",children:"Is not empty"})]}),(0,b.jsx)(g,{value:a.value||"",onChange:b=>{let d=[...e.contactSearchFields||[]];d[c]={...a,value:b},r("contactSearchFields",d)},disabled:i,placeholder:"Enter value or select variable",className:"flex-1"})]})]},c)),(0,b.jsxs)("button",{type:"button",onClick:()=>{r("contactSearchFields",[...e.contactSearchFields||[],{field:"",operator:"is",value:""}])},disabled:i,className:"flex items-center gap-2 text-sm text-blue-600 hover:text-blue-700 mt-2",children:[(0,b.jsx)("i",{className:"fas fa-plus-circle"}),"Add search field"]})]})]}),(0,b.jsx)("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:(0,b.jsxs)("p",{className:"text-sm text-blue-700",children:[(0,b.jsx)("i",{className:"fas fa-info-circle mr-2"}),"This action creates two branches: ",(0,b.jsx)("strong",{children:"Contact Found"})," and ",(0,b.jsx)("strong",{children:"Contact Not Found"})]})})]});case"if_else":return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Condition Rules"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:'Define conditions to evaluate. Contact takes the "Yes" path if conditions are met.'}),(0,b.jsxs)("div",{className:"space-y-3",children:[(e.ifElseConditions||[]).map((a,c)=>(0,b.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[c>0&&(0,b.jsxs)("select",{value:a.logic||"AND",onChange:b=>{let d=[...e.ifElseConditions||[]];d[c]={...a,logic:b.target.value},r("ifElseConditions",d)},disabled:i,className:"mb-2 px-2 py-1 border border-gray-300 rounded text-xs bg-white",children:[(0,b.jsx)("option",{value:"AND",children:"AND"}),(0,b.jsx)("option",{value:"OR",children:"OR"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsxs)("select",{value:a.field||"",onChange:b=>{let d=[...e.ifElseConditions||[]];d[c]={...a,field:b.target.value},r("ifElseConditions",d)},disabled:i,className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm bg-white",children:[(0,b.jsx)("option",{value:"",children:"Select field..."}),(0,b.jsxs)("optgroup",{label:"Contact Fields",children:[(0,b.jsx)("option",{value:"contact.firstName",children:"First Name"}),(0,b.jsx)("option",{value:"contact.lastName",children:"Last Name"}),(0,b.jsx)("option",{value:"contact.email",children:"Email"}),(0,b.jsx)("option",{value:"contact.phone",children:"Phone"}),(0,b.jsx)("option",{value:"contact.company",children:"Company"}),(0,b.jsx)("option",{value:"contact.source",children:"Source"}),(0,b.jsx)("option",{value:"contact.city",children:"City"}),(0,b.jsx)("option",{value:"contact.state",children:"State"})]}),(0,b.jsxs)("optgroup",{label:"Opportunity Fields",children:[(0,b.jsx)("option",{value:"opportunity.name",children:"Opportunity Name"}),(0,b.jsx)("option",{value:"opportunity.value",children:"Opportunity Value"}),(0,b.jsx)("option",{value:"opportunity.status",children:"Opportunity Status"}),(0,b.jsx)("option",{value:"opportunity.stage",children:"Pipeline Stage"})]}),(0,b.jsxs)("optgroup",{label:"Custom Fields",children:[(0,b.jsx)("option",{value:"custom.field1",children:"Custom Field 1"}),(0,b.jsx)("option",{value:"custom.field2",children:"Custom Field 2"})]})]}),(0,b.jsx)("button",{type:"button",onClick:()=>{r("ifElseConditions",(e.ifElseConditions||[]).filter((a,b)=>b!==c))},disabled:i,className:"p-2 text-gray-400 hover:text-red-500",children:(0,b.jsx)("i",{className:"fas fa-times"})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("select",{value:a.operator||"equals",onChange:b=>{let d=[...e.ifElseConditions||[]];d[c]={...a,operator:b.target.value},r("ifElseConditions",d)},disabled:i,className:"w-32 px-3 py-2 border border-gray-300 rounded-lg text-sm bg-white",children:[(0,b.jsx)("option",{value:"equals",children:"Equals"}),(0,b.jsx)("option",{value:"not_equals",children:"Does not equal"}),(0,b.jsx)("option",{value:"contains",children:"Contains"}),(0,b.jsx)("option",{value:"not_contains",children:"Does not contain"}),(0,b.jsx)("option",{value:"starts_with",children:"Starts with"}),(0,b.jsx)("option",{value:"ends_with",children:"Ends with"}),(0,b.jsx)("option",{value:"greater_than",children:"Greater than"}),(0,b.jsx)("option",{value:"less_than",children:"Less than"}),(0,b.jsx)("option",{value:"is_empty",children:"Is empty"}),(0,b.jsx)("option",{value:"is_not_empty",children:"Is not empty"})]}),(0,b.jsx)(g,{value:a.value||"",onChange:b=>{let d=[...e.ifElseConditions||[]];d[c]={...a,value:b},r("ifElseConditions",d)},disabled:i,placeholder:"Enter value...",className:"flex-1"})]})]},c)),(0,b.jsxs)("button",{type:"button",onClick:()=>{r("ifElseConditions",[...e.ifElseConditions||[],{field:"",operator:"equals",value:"",logic:"AND"}])},disabled:i,className:"flex items-center gap-2 text-sm text-blue-600 hover:text-blue-700 mt-2",children:[(0,b.jsx)("i",{className:"fas fa-plus-circle"}),"Add condition"]})]})]}),(0,b.jsx)("div",{className:"mt-4 p-3 bg-cyan-50 rounded-lg",children:(0,b.jsxs)("p",{className:"text-sm text-cyan-700",children:[(0,b.jsx)("i",{className:"fas fa-code-branch mr-2"}),(0,b.jsx)("strong",{children:"Yes (Condition Met):"})," Contact goes here if ALL conditions are true",(0,b.jsx)("br",{}),(0,b.jsx)("strong",{children:"No (Condition Not Met):"})," Contact goes here if conditions are false"]})})]});case"split":return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Split Type"}),(0,b.jsxs)("select",{value:e.splitType||"percentage",onChange:a=>r("splitType",a.target.value),disabled:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"percentage",children:"By Percentage"}),(0,b.jsx)("option",{value:"equal",children:"Equal Split (50/50)"}),(0,b.jsx)("option",{value:"random",children:"Random Distribution"})]})]}),"percentage"===e.splitType&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Path A Percentage"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"range",min:"0",max:"100",value:e.splitPercentage||50,onChange:a=>r("splitPercentage",parseInt(a.target.value)),disabled:i,className:"flex-1"}),(0,b.jsxs)("span",{className:"text-sm font-medium w-16 text-right",children:[e.splitPercentage||50,"%"]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,b.jsxs)("span",{className:"text-green-600",children:["Path A: ",e.splitPercentage||50,"%"]}),(0,b.jsxs)("span",{className:"text-orange-600",children:["Path B: ",100-(e.splitPercentage||50),"%"]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Test Name (Optional)"}),(0,b.jsx)("input",{type:"text",value:e.splitTestName||"",onChange:a=>r("splitTestName",a.target.value),disabled:i,placeholder:"e.g., Email Subject Test A/B",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Give your A/B test a name to track results"})]}),(0,b.jsx)("div",{className:"mt-4 p-3 bg-purple-50 rounded-lg",children:(0,b.jsxs)("p",{className:"text-sm text-purple-700",children:[(0,b.jsx)("i",{className:"fas fa-random mr-2"}),"This action splits contacts into two paths for A/B testing:",(0,b.jsx)("br",{}),(0,b.jsx)("span",{className:"text-green-600 font-medium",children:"Path A"})," and ",(0,b.jsx)("span",{className:"text-orange-600 font-medium",children:"Path B"})]})})]});case"goal_event":return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Goal Type"}),(0,b.jsxs)("select",{value:e.goalType||"conversion",onChange:a=>r("goalType",a.target.value),disabled:i,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"conversion",children:"Conversion Goal"}),(0,b.jsx)("option",{value:"purchase",children:"Purchase Made"}),(0,b.jsx)("option",{value:"appointment",children:"Appointment Booked"}),(0,b.jsx)("option",{value:"form_submit",children:"Form Submitted"}),(0,b.jsx)("option",{value:"tag_applied",children:"Tag Applied"}),(0,b.jsx)("option",{value:"custom",children:"Custom Event"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Goal Name"}),(0,b.jsx)("input",{type:"text",value:e.goalName||"",onChange:a=>r("goalName",a.target.value),disabled:i,placeholder:"e.g., Completed Purchase",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Wait Duration"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"number",min:"1",value:e.goalWaitDuration||7,onChange:a=>r("goalWaitDuration",parseInt(a.target.value)),disabled:i,className:"w-24 px-3 py-2 border border-gray-300 rounded-lg"}),(0,b.jsxs)("select",{value:e.goalWaitUnit||"days",onChange:a=>r("goalWaitUnit",a.target.value),disabled:i,className:"px-3 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"minutes",children:"Minutes"}),(0,b.jsx)("option",{value:"hours",children:"Hours"}),(0,b.jsx)("option",{value:"days",children:"Days"})]})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"How long to wait for the goal to be achieved"})]}),(0,b.jsx)("div",{className:"mt-4 p-3 bg-yellow-50 rounded-lg",children:(0,b.jsxs)("p",{className:"text-sm text-yellow-700",children:[(0,b.jsx)("i",{className:"fas fa-bullseye mr-2"}),(0,b.jsx)("strong",{children:"Goal Achieved:"})," Contact completes the goal within the wait time",(0,b.jsx)("br",{}),(0,b.jsx)("strong",{children:"Goal Not Achieved:"})," Contact does not complete the goal in time"]})})]});default:return(0,b.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg",children:(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:[(0,b.jsx)("i",{className:"fas fa-info-circle mr-2"}),"Configuration options for this action type will be available in a future update."]})})}}a.s(["default",()=>o],33840)}];

//# sourceMappingURL=components_accelerator_WorkflowBuilder_tsx_5a3d9c52._.js.map