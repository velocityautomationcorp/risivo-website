module.exports=[5259,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(38246);function f(){return(0,b.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-900",children:(0,b.jsxs)("div",{className:"text-center text-white",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-500 mx-auto mb-4"}),(0,b.jsx)("p",{children:"Loading dialer..."})]})})}function g(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)(f,{}),children:(0,b.jsx)(h,{})})}function h(){let a,f=(0,d.useSearchParams)().get("campaign"),[g,h]=(0,c.useState)("offline"),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(null),[u,v]=(0,c.useState)(0),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)([]),[A,B]=(0,c.useState)([]),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(""),[K,L]=(0,c.useState)(null),[M,N]=(0,c.useState)(!0),[O,P]=(0,c.useState)(null),Q=(0,c.useRef)(null),R="b0000000-0000-0000-0000-000000000001";(0,c.useEffect)(()=>{f?S():(P("No campaign selected"),N(!1))},[f]),(0,c.useEffect)(()=>("in_progress"===s?Q.current=setInterval(()=>{v(a=>a+1)},1e3):Q.current&&clearInterval(Q.current),()=>{Q.current&&clearInterval(Q.current)}),[s]);let S=async()=>{N(!0);try{let a=await fetch(`/api/v1/dialer/campaigns?subAccountId=${R}&id=${f}`),b=await a.json();if(b.success&&(n(b.data),b.data.scriptId)){let a=await fetch(`/api/v1/dialer/scripts?subAccountId=${R}&id=${b.data.scriptId}`),c=await a.json();c.success&&x(c.data)}let c=await fetch(`/api/v1/dialer/queue?subAccountId=${R}&campaignId=${f}&status=pending`),d=await c.json();d.success&&B(d.data);let e=await fetch(`/api/v1/dialer/dispositions?subAccountId=${R}`),g=await e.json();g.success&&z(g.data)}catch(a){console.error("Error loading dialer data:",a),P("Failed to load dialer data")}finally{N(!1)}},T=(0,c.useCallback)(async()=>{if(0===A.length){let a=await fetch(`/api/v1/dialer/queue?subAccountId=${R}&campaignId=${f}&status=pending`),b=await a.json();b.success&&b.data.length>0?(B(b.data),p(b.data[0]),B(a=>a.slice(1))):p(null)}else p(A[0]),B(a=>a.slice(1))},[A,f,R]),U=async()=>{if(o){t("initiated"),h("on_call"),v(0);try{let a=await fetch("/api/v1/dialer/calls",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subAccountId:R,campaignId:f,queueItemId:o.id,contactId:o.contactId,fromNumber:m?.callerId||"+1234567890",toNumber:o.phoneNumber,agentId:"demo-agent-id",agentName:"Demo Agent",scriptId:w?.id,scriptName:w?.name})}),b=await a.json();b.success&&(r(b.data),setTimeout(()=>{t("ringing"),setTimeout(()=>{t("in_progress")},2e3)},1e3))}catch(a){console.error("Error initiating call:",a),t(null),h("available")}}},V=async()=>{if(q){t("completed");try{await fetch("/api/v1/dialer/calls",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:q.id,subAccountId:R,status:"completed",endedAt:new Date().toISOString(),outcome:"connected",isConnected:!0})})}catch(a){console.error("Error ending call:",a)}D(!0),h("wrap_up")}},W=async()=>{if(K&&q){try{await fetch("/api/v1/dialer/calls",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:q.id,subAccountId:R,dispositionId:K.id,dispositionCode:K.code,dispositionName:K.name,dispositionNotes:I})}),o&&await fetch("/api/v1/dialer/queue",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:o.id,subAccountId:R,status:K.removesFromQueue?"completed":"pending",lastCallResult:"answered"})})}catch(a){console.error("Error submitting disposition:",a)}D(!1),L(null),J(""),r(null),p(null),t(null),v(0),h("available")}},X=async()=>{if(o)try{await fetch("/api/v1/dialer/queue",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:o.id,subAccountId:R,status:"skipped"})})}catch(a){console.error("Error skipping contact:",a)}p(null),T()};return M?(0,b.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-900",children:(0,b.jsxs)("div",{className:"text-center text-white",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-500 mx-auto mb-4"}),(0,b.jsx)("p",{children:"Loading dialer..."})]})}):O||!m?(0,b.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-900",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("i",{className:"fas fa-exclamation-triangle text-5xl text-yellow-500 mb-4"}),(0,b.jsx)("p",{className:"text-white text-lg mb-4",children:O||"Campaign not found"}),(0,b.jsx)(e.default,{href:"/sub-account/power-dialer",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Back to Power Dialer"})]})}):(0,b.jsxs)("div",{className:"h-screen bg-gray-900 text-white flex flex-col",children:[(0,b.jsxs)("div",{className:"bg-gray-800 border-b border-gray-700 px-4 py-3 flex justify-between items-center",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(e.default,{href:"/sub-account/power-dialer",className:"text-gray-400 hover:text-white",children:(0,b.jsx)("i",{className:"fas fa-arrow-left"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"font-semibold",children:m.name}),(0,b.jsxs)("p",{className:"text-sm text-gray-400",children:[A.length+ +!!o," contacts remaining"]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:`w-3 h-3 rounded-full ${"available"===g?"bg-green-500":"on_call"===g?"bg-blue-500 animate-pulse":"wrap_up"===g?"bg-yellow-500":"bg-gray-500"}`}),(0,b.jsx)("span",{className:"text-sm capitalize",children:g.replace("_"," ")})]}),"offline"===g?(0,b.jsxs)("button",{onClick:()=>{h("available")},className:"px-4 py-2 bg-green-600 rounded-lg hover:bg-green-700 flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-headset"}),"Go Online"]}):(0,b.jsxs)("button",{onClick:()=>{h("offline")},disabled:null!==s,className:"px-4 py-2 bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-sign-out-alt"}),"Go Offline"]})]})]}),(0,b.jsxs)("div",{className:"flex-1 flex",children:[(0,b.jsxs)("div",{className:"w-1/3 border-r border-gray-700 p-6 flex flex-col",children:[o?(0,b.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-2xl font-bold",children:o.contactName?.charAt(0)||"?"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:o.contactName||"Unknown"}),(0,b.jsx)("p",{className:"text-gray-400",children:o.phoneNumber})]})]}),o.contactEmail&&(0,b.jsxs)("div",{className:"text-sm text-gray-400 mb-2",children:[(0,b.jsx)("i",{className:"fas fa-envelope w-5"}),o.contactEmail]}),s&&(0,b.jsxs)("div",{className:"mt-4 p-4 bg-gray-700 rounded-lg text-center",children:["initiated"===s&&(0,b.jsxs)("div",{className:"text-yellow-400",children:[(0,b.jsx)("i",{className:"fas fa-spinner fa-spin mr-2"}),"Initiating call..."]}),"ringing"===s&&(0,b.jsxs)("div",{className:"text-blue-400",children:[(0,b.jsx)("i",{className:"fas fa-phone-volume mr-2 animate-pulse"}),"Ringing..."]}),"in_progress"===s&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"text-green-400 text-lg mb-2",children:[(0,b.jsx)("i",{className:"fas fa-phone-alt mr-2"}),"Connected"]}),(0,b.jsx)("div",{className:"text-3xl font-mono font-bold",children:(a=Math.floor(u/60),`${a.toString().padStart(2,"0")}:${(u%60).toString().padStart(2,"0")}`)})]})]}),(0,b.jsx)("div",{className:"mt-6 flex gap-3",children:s?"in_progress"===s?(0,b.jsxs)("button",{onClick:V,className:"flex-1 py-3 bg-red-600 rounded-lg hover:bg-red-700 flex items-center justify-center gap-2 text-lg",children:[(0,b.jsx)("i",{className:"fas fa-phone-slash"}),"End Call"]}):(0,b.jsx)("div",{className:"flex-1 py-3 bg-gray-700 rounded-lg text-center text-gray-400",children:"Call in progress..."}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("button",{onClick:U,disabled:"available"!==g,className:"flex-1 py-3 bg-green-600 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-lg",children:[(0,b.jsx)("i",{className:"fas fa-phone"}),"Call"]}),(0,b.jsxs)("button",{onClick:X,className:"px-4 py-3 bg-gray-700 rounded-lg hover:bg-gray-600 flex items-center justify-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-forward"}),"Skip"]})]})})]}):"available"===g?(0,b.jsxs)("div",{className:"bg-gray-800 rounded-xl p-8 text-center mb-6",children:[(0,b.jsx)("i",{className:"fas fa-user-plus text-5xl text-gray-600 mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No Contact Loaded"}),(0,b.jsx)("p",{className:"text-gray-400 text-sm mb-4",children:"Click below to get the next contact from the queue"}),(0,b.jsxs)("button",{onClick:T,className:"px-6 py-3 bg-blue-600 rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2 mx-auto",children:[(0,b.jsx)("i",{className:"fas fa-user-plus"}),"Get Next Contact"]})]}):(0,b.jsxs)("div",{className:"bg-gray-800 rounded-xl p-8 text-center mb-6",children:[(0,b.jsx)("i",{className:"fas fa-headset text-5xl text-gray-600 mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Go Online to Start"}),(0,b.jsx)("p",{className:"text-gray-400 text-sm",children:'Click "Go Online" to begin dialing'})]}),"in_progress"===s&&(0,b.jsxs)("div",{className:"space-y-3 mt-auto",children:[(0,b.jsxs)("button",{onClick:()=>F(!0),className:"w-full py-3 bg-gray-700 rounded-lg hover:bg-gray-600 flex items-center justify-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-sticky-note"}),"Add Notes"]}),(0,b.jsxs)("button",{onClick:()=>H(!0),className:"w-full py-3 bg-gray-700 rounded-lg hover:bg-gray-600 flex items-center justify-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-calendar-plus"}),"Schedule Callback"]})]}),(0,b.jsxs)("div",{className:"mt-auto",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:"Up Next"}),(0,b.jsxs)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[A.slice(0,5).map((a,c)=>(0,b.jsxs)("div",{className:"bg-gray-800 rounded-lg p-3 flex items-center gap-3",children:[(0,b.jsx)("span",{className:"text-gray-500 text-sm w-5",children:c+1}),(0,b.jsx)("div",{className:"w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center text-sm",children:a.contactName?.charAt(0)||"?"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm truncate",children:a.contactName||"Unknown"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:a.phoneNumber})]})]},a.id)),0===A.length&&(0,b.jsx)("div",{className:"text-gray-500 text-sm text-center py-4",children:"Queue is empty"})]})]})]}),(0,b.jsx)("div",{className:"flex-1 p-6 overflow-y-auto",children:w?(0,b.jsx)(i,{script:w,contact:o}):(0,b.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center text-gray-500",children:[(0,b.jsx)("i",{className:"fas fa-scroll text-5xl mb-4 opacity-50"}),(0,b.jsx)("p",{className:"text-lg",children:"No Script Assigned"}),(0,b.jsx)("p",{className:"text-sm",children:"This campaign has no call script"}),(0,b.jsx)(e.default,{href:"/sub-account/power-dialer/scripts",className:"inline-block mt-4 px-4 py-2 bg-gray-700 rounded-lg hover:bg-gray-600",children:"Manage Scripts"})]})})})]}),C&&(0,b.jsx)(j,{dispositions:y,selectedDisposition:K,onSelect:L,callNotes:I,onNotesChange:J,onSubmit:W,onClose:()=>{if(!K){let a=y.find(a=>"CALL"===a.code);a&&L(a)}W()}}),E&&(0,b.jsx)(k,{notes:I,onChange:J,onClose:()=>F(!1)}),G&&(0,b.jsx)(l,{contact:o,subAccountId:R,onClose:()=>H(!1)})]})}function i({script:a,contact:d}){let[e,f]=(0,c.useState)(0),[g,h]=(0,c.useState)([]),i=b=>{if(!b||!d)return b;let c=b;return a.dynamicFields?.forEach(a=>{let b=d.contactData?.[a.field]||a.defaultValue||"";c=c.replace(RegExp(`{{${a.placeholder}}}`,"g"),b)}),c=(c=(c=c.replace(/{{name}}/gi,d.contactName||"")).replace(/{{firstName}}/gi,d.contactName?.split(" ")[0]||"")).replace(/{{phone}}/gi,d.phoneNumber||"")};return(0,b.jsxs)("div",{className:"h-full flex flex-col",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:a.name}),a.description&&(0,b.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:a.description})]}),a.greeting&&(0,b.jsxs)("div",{className:"bg-blue-900/30 border border-blue-700 rounded-lg p-4 mb-4",children:[(0,b.jsxs)("h3",{className:"text-blue-400 text-sm font-medium mb-2",children:[(0,b.jsx)("i",{className:"fas fa-hand-wave mr-2"}),"Greeting"]}),(0,b.jsx)("p",{className:"text-white",children:i(a.greeting)})]}),a.introduction&&(0,b.jsxs)("div",{className:"bg-purple-900/30 border border-purple-700 rounded-lg p-4 mb-4",children:[(0,b.jsxs)("h3",{className:"text-purple-400 text-sm font-medium mb-2",children:[(0,b.jsx)("i",{className:"fas fa-comment mr-2"}),"Introduction"]}),(0,b.jsx)("p",{className:"text-white",children:i(a.introduction)})]}),a.sections&&a.sections.length>0&&(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto mb-4",children:[(0,b.jsx)("h3",{className:"text-gray-400 text-sm font-medium mb-3",children:"Main Script"}),(0,b.jsx)("div",{className:"space-y-3",children:a.sections.map((a,c)=>(0,b.jsxs)("div",{className:`rounded-lg p-4 cursor-pointer transition-colors ${e===c?"bg-gray-700 border border-blue-500":"bg-gray-800 hover:bg-gray-750"}`,onClick:()=>f(c),children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)("span",{className:"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center text-sm",children:c+1}),(0,b.jsx)("h4",{className:"font-medium",children:a.title}),"question"===a.type&&(0,b.jsx)("span",{className:"text-xs bg-yellow-600 px-2 py-0.5 rounded",children:"Question"})]}),(0,b.jsx)("p",{className:"text-gray-300 whitespace-pre-wrap",children:i(a.content)})]},a.id))})]}),a.objectionHandlers&&a.objectionHandlers.length>0&&(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("h3",{className:"text-gray-400 text-sm font-medium mb-3",children:[(0,b.jsx)("i",{className:"fas fa-shield-alt mr-2"}),"Objection Handlers"]}),(0,b.jsx)("div",{className:"space-y-2",children:a.objectionHandlers.map(a=>(0,b.jsxs)("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:[(0,b.jsxs)("button",{onClick:()=>h(b=>b.includes(a.id)?b.filter(b=>b!==a.id):[...b,a.id]),className:"w-full px-4 py-3 flex justify-between items-center hover:bg-gray-750",children:[(0,b.jsxs)("span",{className:"text-orange-400",children:['"',a.objection,'"']}),(0,b.jsx)("i",{className:`fas fa-chevron-${g.includes(a.id)?"up":"down"} text-gray-500`})]}),g.includes(a.id)&&(0,b.jsx)("div",{className:"px-4 pb-3 text-gray-300",children:a.response})]},a.id))})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-auto",children:[a.closingPositive&&(0,b.jsxs)("div",{className:"bg-green-900/30 border border-green-700 rounded-lg p-4",children:[(0,b.jsxs)("h3",{className:"text-green-400 text-sm font-medium mb-2",children:[(0,b.jsx)("i",{className:"fas fa-thumbs-up mr-2"}),"Positive Close"]}),(0,b.jsx)("p",{className:"text-gray-300 text-sm",children:i(a.closingPositive)})]}),a.closingNegative&&(0,b.jsxs)("div",{className:"bg-red-900/30 border border-red-700 rounded-lg p-4",children:[(0,b.jsxs)("h3",{className:"text-red-400 text-sm font-medium mb-2",children:[(0,b.jsx)("i",{className:"fas fa-thumbs-down mr-2"}),"Negative Close"]}),(0,b.jsx)("p",{className:"text-gray-300 text-sm",children:i(a.closingNegative)})]})]}),a.voicemailScript&&(0,b.jsxs)("div",{className:"mt-4 bg-gray-800 rounded-lg p-4",children:[(0,b.jsxs)("h3",{className:"text-gray-400 text-sm font-medium mb-2",children:[(0,b.jsx)("i",{className:"fas fa-voicemail mr-2"}),"Voicemail Script"]}),(0,b.jsx)("p",{className:"text-gray-300 text-sm",children:i(a.voicemailScript)})]})]})}function j({dispositions:a,selectedDisposition:c,onSelect:d,callNotes:e,onNotesChange:f,onSubmit:g,onClose:h}){let i={positive:a.filter(a=>"positive"===a.category),neutral:a.filter(a=>"neutral"===a.category),negative:a.filter(a=>"negative"===a.category),callback:a.filter(a=>"callback"===a.category)};return(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70",children:(0,b.jsx)("div",{className:"bg-gray-800 rounded-2xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Select Call Disposition"}),(0,b.jsxs)("div",{className:"space-y-4 mb-6",children:[i.positive.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-green-400 text-sm font-medium mb-2",children:"Positive Outcomes"}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2",children:i.positive.map(a=>(0,b.jsxs)("button",{onClick:()=>d(a),className:`p-3 rounded-lg text-left transition-colors ${c?.id===a.id?"bg-green-600":"bg-gray-700 hover:bg-gray-600"}`,children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("i",{className:`${a.icon||"fas fa-check"} text-green-400`}),(0,b.jsx)("span",{className:"font-medium",children:a.name})]}),a.description&&(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:a.description})]},a.id))})]}),i.neutral.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-blue-400 text-sm font-medium mb-2",children:"Neutral Outcomes"}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2",children:i.neutral.map(a=>(0,b.jsx)("button",{onClick:()=>d(a),className:`p-3 rounded-lg text-left transition-colors ${c?.id===a.id?"bg-blue-600":"bg-gray-700 hover:bg-gray-600"}`,children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("i",{className:`${a.icon||"fas fa-minus"} text-blue-400`}),(0,b.jsx)("span",{className:"font-medium",children:a.name})]})},a.id))})]}),i.negative.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-red-400 text-sm font-medium mb-2",children:"Negative Outcomes"}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2",children:i.negative.map(a=>(0,b.jsx)("button",{onClick:()=>d(a),className:`p-3 rounded-lg text-left transition-colors ${c?.id===a.id?"bg-red-600":"bg-gray-700 hover:bg-gray-600"}`,children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("i",{className:`${a.icon||"fas fa-times"} text-red-400`}),(0,b.jsx)("span",{className:"font-medium",children:a.name})]})},a.id))})]}),i.callback.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-yellow-400 text-sm font-medium mb-2",children:"Callback"}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2",children:i.callback.map(a=>(0,b.jsx)("button",{onClick:()=>d(a),className:`p-3 rounded-lg text-left transition-colors ${c?.id===a.id?"bg-yellow-600":"bg-gray-700 hover:bg-gray-600"}`,children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("i",{className:`${a.icon||"fas fa-phone-alt"} text-yellow-400`}),(0,b.jsx)("span",{className:"font-medium",children:a.name})]})},a.id))})]})]}),c?.requiresNotes&&(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)("label",{className:"block text-sm font-medium mb-2",children:["Notes ",c.requiresNotes&&(0,b.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,b.jsx)("textarea",{value:e,onChange:a=>f(a.target.value),className:"w-full px-4 py-3 bg-gray-700 rounded-lg border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Enter call notes..."})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:h,className:"flex-1 px-4 py-3 bg-gray-700 rounded-lg hover:bg-gray-600",children:"Cancel"}),(0,b.jsx)("button",{onClick:g,disabled:!c||c.requiresNotes&&!e.trim(),className:"flex-1 px-4 py-3 bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Submit Disposition"})]})]})})})}function k({notes:a,onChange:c,onClose:d}){return(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70",children:(0,b.jsx)("div",{className:"bg-gray-800 rounded-2xl w-full max-w-lg mx-4",children:(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Call Notes"}),(0,b.jsx)("textarea",{value:a,onChange:a=>c(a.target.value),className:"w-full px-4 py-3 bg-gray-700 rounded-lg border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:6,placeholder:"Enter notes about this call...",autoFocus:!0}),(0,b.jsx)("div",{className:"flex gap-3 mt-4",children:(0,b.jsx)("button",{onClick:d,className:"flex-1 px-4 py-3 bg-blue-600 rounded-lg hover:bg-blue-700",children:"Save & Close"})})]})})})}function l({contact:a,subAccountId:d,onClose:e}){let[f,g]=(0,c.useState)(""),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(!1),n=async()=>{if(a&&f&&h){m(!0);try{let b=new Date(`${f}T${h}`).toISOString();await fetch("/api/v1/dialer/queue",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:a.id,subAccountId:d,scheduledFor:b,notes:j})}),e()}catch(a){console.error("Error scheduling callback:",a)}finally{m(!1)}}};return(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70",children:(0,b.jsx)("div",{className:"bg-gray-800 rounded-2xl w-full max-w-lg mx-4",children:(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Schedule Callback"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Date"}),(0,b.jsx)("input",{type:"date",value:f,onChange:a=>g(a.target.value),className:"w-full px-4 py-3 bg-gray-700 rounded-lg border border-gray-600 focus:ring-2 focus:ring-blue-500",min:new Date().toISOString().split("T")[0]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Time"}),(0,b.jsx)("input",{type:"time",value:h,onChange:a=>i(a.target.value),className:"w-full px-4 py-3 bg-gray-700 rounded-lg border border-gray-600 focus:ring-2 focus:ring-blue-500"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Notes"}),(0,b.jsx)("textarea",{value:j,onChange:a=>k(a.target.value),className:"w-full px-4 py-3 bg-gray-700 rounded-lg border border-gray-600 focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Reason for callback..."})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,b.jsx)("button",{onClick:e,className:"flex-1 px-4 py-3 bg-gray-700 rounded-lg hover:bg-gray-600",children:"Cancel"}),(0,b.jsx)("button",{onClick:n,disabled:!f||!h||l,className:"flex-1 px-4 py-3 bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50",children:l?"Scheduling...":"Schedule Callback"})]})]})})})}function m(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-[#0a0a0a] flex items-center justify-center",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),children:(0,b.jsx)(g,{})})}a.s(["default",()=>m,"dynamic",0,"force-dynamic"])}];

//# sourceMappingURL=app_sub-account_power-dialer_dialer_page_tsx_75a3738f._.js.map