module.exports=[94857,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246);function e(){let[a,e]=(0,c.useState)(null),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)("today"),[r,s]=(0,c.useState)(null),t="b0000000-0000-0000-0000-000000000001";(0,c.useEffect)(()=>{u()},[p,r]);let u=async()=>{o(!0);try{let a=v(p),b=await fetch(`/api/v1/dialer/stats?subAccountId=${t}&type=dashboard`),c=await b.json();c.success&&e(c.data);let d=await fetch(`/api/v1/dialer/campaigns?subAccountId=${t}`),f=await d.json();f.success&&i(f.data);let g=`/api/v1/dialer/stats?subAccountId=${t}&type=agent${a}`,h=await fetch(g),j=await h.json();j.success&&k(j.data);let l=`/api/v1/dialer/stats?subAccountId=${t}&type=calls${a}${r?`&campaignId=${r}`:""}`,n=await fetch(l),o=await n.json();o.success&&m(o.data)}catch(a){console.error("Error fetching analytics:",a)}finally{o(!1)}},v=a=>{let b=new Date,c="";switch(a){case"today":c=new Date(b.setHours(0,0,0,0)).toISOString();break;case"yesterday":let d=new Date(b);d.setDate(d.getDate()-1),d.setHours(0,0,0,0),c=d.toISOString();break;case"week":let e=new Date(b);e.setDate(e.getDate()-7),c=e.toISOString();break;case"month":let f=new Date(b);f.setMonth(f.getMonth()-1),c=f.toISOString();break;default:return""}return`&dateFrom=${c}&dateTo=${new Date().toISOString()}`},w=a=>{let b=Math.floor(a/3600),c=Math.floor(a%3600/60),d=a%60;return b>0?`${b}h ${c}m`:c>0?`${c}m ${d}s`:`${d}s`};return(0,b.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(d.default,{href:"/sub-account/power-dialer",className:"text-gray-400 hover:text-gray-600",children:(0,b.jsx)("i",{className:"fas fa-arrow-left"})}),(0,b.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-chart-bar text-purple-600"}),"Dialer Analytics"]})]}),(0,b.jsx)("p",{className:"text-gray-500 text-sm mt-1 ml-8",children:"Track performance metrics and call statistics"})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsxs)("select",{value:r||"",onChange:a=>s(a.target.value||null),className:"px-4 py-2 border rounded-lg bg-white",children:[(0,b.jsx)("option",{value:"",children:"All Campaigns"}),h.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]}),(0,b.jsxs)("select",{value:p,onChange:a=>q(a.target.value),className:"px-4 py-2 border rounded-lg bg-white",children:[(0,b.jsx)("option",{value:"today",children:"Today"}),(0,b.jsx)("option",{value:"yesterday",children:"Yesterday"}),(0,b.jsx)("option",{value:"week",children:"Last 7 Days"}),(0,b.jsx)("option",{value:"month",children:"Last 30 Days"})]})]})]}),n?(0,b.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[(0,b.jsx)(f,{label:"Total Calls",value:a?.today.totalCalls||0,icon:"fas fa-phone",color:"blue"}),(0,b.jsx)(f,{label:"Answered",value:a?.today.answeredCalls||0,icon:"fas fa-check-circle",color:"green"}),(0,b.jsx)(f,{label:"Connect Rate",value:`${a?.today.connectRate||0}%`,icon:"fas fa-percentage",color:"purple"}),(0,b.jsx)(f,{label:"Voicemails",value:a?.today.voicemails||0,icon:"fas fa-voicemail",color:"orange"}),(0,b.jsx)(f,{label:"Avg Duration",value:w(a?.today.avgCallDuration||0),icon:"fas fa-clock",color:"teal"}),(0,b.jsx)(f,{label:"Total Talk Time",value:w(a?.today.totalTalkTime||0),icon:"fas fa-comments",color:"indigo"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Call Outcomes"}),l&&l.total>0?(0,b.jsx)("div",{className:"space-y-4",children:Object.entries(l.byOutcome).map(([a,c])=>{let d,e=c/l.total*100;return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,b.jsx)("span",{className:"text-gray-600 capitalize",children:a.replace("_"," ")}),(0,b.jsxs)("span",{className:"font-medium",children:[c," (",e.toFixed(1),"%)"]})]}),(0,b.jsx)("div",{className:"w-full bg-gray-100 rounded-full h-3",children:(0,b.jsx)("div",{className:`rounded-full h-3 ${(d={connected:"bg-green-500",answered:"bg-green-500",voicemail:"bg-blue-500",no_answer:"bg-yellow-500",busy:"bg-orange-500",failed:"bg-red-500",unknown:"bg-gray-400"})[a]||d.unknown}`,style:{width:`${e}%`}})})]},a)})}):(0,b.jsxs)("div",{className:"text-center py-8 text-gray-400",children:[(0,b.jsx)("i",{className:"fas fa-chart-pie text-4xl mb-3 opacity-50"}),(0,b.jsx)("p",{children:"No call data for this period"})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Dispositions"}),l&&Object.keys(l.byDisposition).length>0?(0,b.jsx)("div",{className:"space-y-3",children:Object.entries(l.byDisposition).map(([a,c])=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:"text-sm font-mono bg-gray-200 px-2 py-1 rounded",children:a}),(0,b.jsx)("span",{className:"text-gray-700",children:c.name})]}),(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:c.count})]},a))}):(0,b.jsxs)("div",{className:"text-center py-8 text-gray-400",children:[(0,b.jsx)("i",{className:"fas fa-tags text-4xl mb-3 opacity-50"}),(0,b.jsx)("p",{children:"No disposition data for this period"})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Agent Performance"}),j.length>0?(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b",children:[(0,b.jsx)("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500",children:"Agent"}),(0,b.jsx)("th",{className:"text-center py-3 px-4 text-sm font-medium text-gray-500",children:"Total Calls"}),(0,b.jsx)("th",{className:"text-center py-3 px-4 text-sm font-medium text-gray-500",children:"Answered"}),(0,b.jsx)("th",{className:"text-center py-3 px-4 text-sm font-medium text-gray-500",children:"Connect Rate"}),(0,b.jsx)("th",{className:"text-center py-3 px-4 text-sm font-medium text-gray-500",children:"Avg Duration"}),(0,b.jsx)("th",{className:"text-center py-3 px-4 text-sm font-medium text-gray-500",children:"Total Talk Time"})]})}),(0,b.jsx)("tbody",{className:"divide-y",children:j.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"py-3 px-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-sm font-medium",children:a.agentName.charAt(0)}),(0,b.jsx)("span",{className:"font-medium text-gray-900",children:a.agentName})]})}),(0,b.jsx)("td",{className:"py-3 px-4 text-center",children:a.totalCalls}),(0,b.jsx)("td",{className:"py-3 px-4 text-center text-green-600 font-medium",children:a.answeredCalls}),(0,b.jsx)("td",{className:"py-3 px-4 text-center",children:(0,b.jsx)("span",{className:`px-2 py-1 rounded text-sm ${a.totalCalls>0?g(a.answeredCalls/a.totalCalls*100):"bg-gray-100 text-gray-500"}`,children:a.totalCalls>0?`${Math.round(a.answeredCalls/a.totalCalls*100)}%`:"N/A"})}),(0,b.jsx)("td",{className:"py-3 px-4 text-center",children:w(a.avgCallDuration)}),(0,b.jsx)("td",{className:"py-3 px-4 text-center font-medium",children:w(a.totalTalkTime)})]},a.agentId))})]})}):(0,b.jsxs)("div",{className:"text-center py-8 text-gray-400",children:[(0,b.jsx)("i",{className:"fas fa-users text-4xl mb-3 opacity-50"}),(0,b.jsx)("p",{children:"No agent data for this period"})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border p-6",children:[(0,b.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Campaign Performance"}),h.length>0?(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b",children:[(0,b.jsx)("th",{className:"text-left py-3 px-4 text-sm font-medium text-gray-500",children:"Campaign"}),(0,b.jsx)("th",{className:"text-center py-3 px-4 text-sm font-medium text-gray-500",children:"Status"}),(0,b.jsx)("th",{className:"text-center py-3 px-4 text-sm font-medium text-gray-500",children:"Progress"}),(0,b.jsx)("th",{className:"text-center py-3 px-4 text-sm font-medium text-gray-500",children:"Total Calls"}),(0,b.jsx)("th",{className:"text-center py-3 px-4 text-sm font-medium text-gray-500",children:"Answered"}),(0,b.jsx)("th",{className:"text-center py-3 px-4 text-sm font-medium text-gray-500",children:"Voicemails"}),(0,b.jsx)("th",{className:"text-center py-3 px-4 text-sm font-medium text-gray-500",children:"Connect Rate"})]})}),(0,b.jsx)("tbody",{className:"divide-y",children:h.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsxs)("td",{className:"py-3 px-4",children:[(0,b.jsx)(d.default,{href:`/sub-account/power-dialer?campaign=${a.id}`,className:"font-medium text-gray-900 hover:text-blue-600",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:a.type})]}),(0,b.jsx)("td",{className:"py-3 px-4 text-center",children:(0,b.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${"active"===a.status?"bg-green-100 text-green-700":"paused"===a.status?"bg-yellow-100 text-yellow-700":"completed"===a.status?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"}`,children:a.status})}),(0,b.jsx)("td",{className:"py-3 px-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-2 min-w-[60px]",children:(0,b.jsx)("div",{className:"bg-blue-600 rounded-full h-2",style:{width:`${a.totalContacts>0?a.contactsDialed/a.totalContacts*100:0}%`}})}),(0,b.jsxs)("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:[a.contactsDialed,"/",a.totalContacts]})]})}),(0,b.jsx)("td",{className:"py-3 px-4 text-center",children:a.totalCalls}),(0,b.jsx)("td",{className:"py-3 px-4 text-center text-green-600 font-medium",children:a.answeredCalls}),(0,b.jsx)("td",{className:"py-3 px-4 text-center",children:a.voicemails}),(0,b.jsx)("td",{className:"py-3 px-4 text-center",children:(0,b.jsx)("span",{className:`px-2 py-1 rounded text-sm ${a.totalCalls>0?g(a.answeredCalls/a.totalCalls*100):"bg-gray-100 text-gray-500"}`,children:a.totalCalls>0?`${Math.round(a.answeredCalls/a.totalCalls*100)}%`:"N/A"})})]},a.id))})]})}):(0,b.jsxs)("div",{className:"text-center py-8 text-gray-400",children:[(0,b.jsx)("i",{className:"fas fa-bullhorn text-4xl mb-3 opacity-50"}),(0,b.jsx)("p",{children:"No campaigns found"})]})]})]})]})}function f({label:a,value:c,icon:d,color:e}){return(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border p-4",children:[(0,b.jsx)("div",{className:`w-10 h-10 rounded-lg ${{blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",purple:"bg-purple-100 text-purple-600",orange:"bg-orange-100 text-orange-600",teal:"bg-teal-100 text-teal-600",indigo:"bg-indigo-100 text-indigo-600",red:"bg-red-100 text-red-600"}[e]} flex items-center justify-center mb-3`,children:(0,b.jsx)("i",{className:d})}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:c}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:a})]})}function g(a){return a>=50?"bg-green-100 text-green-700":a>=30?"bg-yellow-100 text-yellow-700":a>=10?"bg-orange-100 text-orange-700":"bg-red-100 text-red-700"}a.s(["default",()=>e])}];

//# sourceMappingURL=app_sub-account_power-dialer_analytics_page_tsx_2dde9018._.js.map