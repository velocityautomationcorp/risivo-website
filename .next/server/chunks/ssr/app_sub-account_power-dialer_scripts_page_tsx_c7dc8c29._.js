module.exports=[90193,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246);function e(){let[a,e]=(0,c.useState)([]),[h,i]=(0,c.useState)(!0),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(!1),p="b0000000-0000-0000-0000-000000000001";(0,c.useEffect)(()=>{q()},[]);let q=async()=>{i(!0);try{let a=await fetch(`/api/v1/dialer/scripts?subAccountId=${p}&activeOnly=false`),b=await a.json();b.success&&e(b.data)}catch(a){console.error("Error fetching scripts:",a)}finally{i(!1)}},r=async a=>{if(confirm("Are you sure you want to delete this script?"))try{(await fetch(`/api/v1/dialer/scripts?id=${a}&subAccountId=${p}`,{method:"DELETE"})).ok&&(e(b=>b.filter(b=>b.id!==a)),j?.id===a&&k(null))}catch(a){console.error("Error deleting script:",a)}};return(0,b.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(d.default,{href:"/sub-account/power-dialer",className:"text-gray-400 hover:text-gray-600",children:(0,b.jsx)("i",{className:"fas fa-arrow-left"})}),(0,b.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-scroll text-green-600"}),"Call Scripts"]})]}),(0,b.jsx)("p",{className:"text-gray-500 text-sm mt-1 ml-8",children:"Create and manage scripts for your dialing campaigns"})]}),(0,b.jsxs)("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-plus"}),"New Script"]})]}),h?(0,b.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,b.jsxs)("div",{className:"flex gap-6",children:[(0,b.jsx)("div",{className:"w-1/3 space-y-3",children:0===a.length?(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border p-8 text-center",children:[(0,b.jsx)("i",{className:"fas fa-scroll text-4xl text-gray-300 mb-3"}),(0,b.jsx)("p",{className:"text-gray-500",children:"No scripts yet"}),(0,b.jsx)("p",{className:"text-sm text-gray-400",children:"Create your first call script"})]}):a.map(a=>(0,b.jsxs)("div",{onClick:()=>{k(a),m(!1)},className:`bg-white rounded-xl shadow-sm border p-4 cursor-pointer transition-all ${j?.id===a.id?"ring-2 ring-blue-500 border-blue-500":"hover:border-gray-300"}`,children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("h3",{className:"font-medium text-gray-900",children:a.name}),a.isDefault&&(0,b.jsx)("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:"Default"})]}),(0,b.jsx)("span",{className:`text-xs px-2 py-0.5 rounded ${a.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:a.isActive?"Active":"Inactive"})]}),a.description&&(0,b.jsx)("p",{className:"text-sm text-gray-500 line-clamp-2",children:a.description}),(0,b.jsxs)("div",{className:"flex items-center gap-4 mt-3 text-xs text-gray-400",children:[(0,b.jsxs)("span",{children:[(0,b.jsx)("i",{className:"fas fa-list-ol mr-1"}),a.sections?.length||0," sections"]}),(0,b.jsxs)("span",{children:[(0,b.jsx)("i",{className:"fas fa-shield-alt mr-1"}),a.objectionHandlers?.length||0," objections"]}),(0,b.jsxs)("span",{children:[(0,b.jsx)("i",{className:"fas fa-chart-line mr-1"}),a.timesUsed," uses"]})]})]},a.id))}),(0,b.jsx)("div",{className:"flex-1",children:j?(0,b.jsx)(f,{script:j,isEditing:l,onEdit:()=>m(!0),onSave:async a=>{try{let b=await fetch("/api/v1/dialer/scripts",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:j.id,subAccountId:p,...a})}),c=await b.json();c.success&&(k(c.data),e(a=>a.map(a=>a.id===c.data.id?c.data:a)),m(!1))}catch(a){console.error("Error saving script:",a)}},onCancel:()=>m(!1),onDelete:()=>r(j.id)}):(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border p-12 text-center",children:[(0,b.jsx)("i",{className:"fas fa-hand-pointer text-5xl text-gray-300 mb-4"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Select a script to view or edit"})]})})]}),n&&(0,b.jsx)(g,{onClose:()=>o(!1),onCreated:a=>{e(b=>[...b,a]),k(a),o(!1)},subAccountId:p})]})}function f({script:a,isEditing:d,onEdit:e,onSave:f,onCancel:g,onDelete:h}){let[i,j]=(0,c.useState)({name:a.name,description:a.description||"",category:a.category||"",isDefault:a.isDefault,isActive:a.isActive,greeting:a.greeting||"",introduction:a.introduction||"",sections:a.sections||[],objectionHandlers:a.objectionHandlers||[],closingPositive:a.closingPositive||"",closingNegative:a.closingNegative||"",voicemailScript:a.voicemailScript||"",dynamicFields:a.dynamicFields||[]}),[k,l]=(0,c.useState)("script");(0,c.useEffect)(()=>{j({name:a.name,description:a.description||"",category:a.category||"",isDefault:a.isDefault,isActive:a.isActive,greeting:a.greeting||"",introduction:a.introduction||"",sections:a.sections||[],objectionHandlers:a.objectionHandlers||[],closingPositive:a.closingPositive||"",closingNegative:a.closingNegative||"",voicemailScript:a.voicemailScript||"",dynamicFields:a.dynamicFields||[]})},[a]);let m=(a,b)=>{j(c=>({...c,sections:c.sections.map((c,d)=>d===a?{...c,...b}:c)}))},n=(a,b)=>{j(c=>({...c,objectionHandlers:c.objectionHandlers.map((c,d)=>d===a?{...c,...b}:c)}))},o=(a,b)=>{j(c=>({...c,dynamicFields:c.dynamicFields.map((c,d)=>d===a?{...c,...b}:c)}))};return(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border",children:[(0,b.jsxs)("div",{className:"p-4 border-b flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[d?(0,b.jsx)("input",{type:"text",value:i.name,onChange:a=>j({...i,name:a.target.value}),className:"text-xl font-bold text-gray-900 border-b-2 border-blue-500 focus:outline-none"}):(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:a.name}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[a.isDefault&&(0,b.jsx)("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:"Default"}),(0,b.jsx)("span",{className:`text-xs px-2 py-0.5 rounded ${a.isActive?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:a.isActive?"Active":"Inactive"})]})]}),(0,b.jsx)("div",{className:"flex gap-2",children:d?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:g,className:"px-4 py-2 border rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,b.jsx)("button",{onClick:()=>f(i),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save Changes"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{onClick:h,className:"px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg",children:(0,b.jsx)("i",{className:"fas fa-trash"})}),(0,b.jsxs)("button",{onClick:e,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-edit"}),"Edit Script"]})]})})]}),(0,b.jsx)("div",{className:"border-b px-4",children:(0,b.jsx)("div",{className:"flex gap-4",children:[{id:"script",label:"Script Content",icon:"fas fa-scroll"},{id:"objections",label:"Objection Handlers",icon:"fas fa-shield-alt"},{id:"fields",label:"Dynamic Fields",icon:"fas fa-code"}].map(a=>(0,b.jsxs)("button",{onClick:()=>l(a.id),className:`py-3 border-b-2 flex items-center gap-2 transition-colors ${k===a.id?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[(0,b.jsx)("i",{className:a.icon}),a.label]},a.id))})}),(0,b.jsxs)("div",{className:"p-6 max-h-[calc(100vh-300px)] overflow-y-auto",children:["script"===k&&(0,b.jsxs)("div",{className:"space-y-6",children:[d&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,b.jsx)("textarea",{value:i.description,onChange:a=>j({...i,description:a.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"Script description..."})]}),d&&(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:i.isDefault,onChange:a=>j({...i,isDefault:a.target.checked}),className:"rounded border-gray-300 text-blue-600"}),(0,b.jsx)("span",{className:"text-sm text-gray-700",children:"Default Script"})]}),(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:i.isActive,onChange:a=>j({...i,isActive:a.target.checked}),className:"rounded border-gray-300 text-blue-600"}),(0,b.jsx)("span",{className:"text-sm text-gray-700",children:"Active"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,b.jsx)("i",{className:"fas fa-hand-wave mr-1 text-blue-500"}),"Greeting"]}),d?(0,b.jsx)("textarea",{value:i.greeting,onChange:a=>j({...i,greeting:a.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"Hi, is this {{name}}?"}):(0,b.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-gray-700",children:a.greeting||(0,b.jsx)("span",{className:"text-gray-400 italic",children:"No greeting set"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,b.jsx)("i",{className:"fas fa-comment mr-1 text-purple-500"}),"Introduction"]}),d?(0,b.jsx)("textarea",{value:i.introduction,onChange:a=>j({...i,introduction:a.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"My name is [Agent Name] from [Company]..."}):(0,b.jsx)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3 text-gray-700",children:a.introduction||(0,b.jsx)("span",{className:"text-gray-400 italic",children:"No introduction set"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[(0,b.jsx)("i",{className:"fas fa-list-ol mr-1 text-green-500"}),"Main Script Sections"]}),d&&(0,b.jsxs)("button",{onClick:()=>{j(a=>({...a,sections:[...a.sections,{id:`section-${Date.now()}`,title:"New Section",content:"",type:"text",order:a.sections.length}]}))},className:"text-sm text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[(0,b.jsx)("i",{className:"fas fa-plus"}),"Add Section"]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[i.sections.map((a,c)=>(0,b.jsx)("div",{className:"bg-gray-50 border rounded-lg p-4",children:d?(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:"text",value:a.title,onChange:a=>m(c,{title:a.target.value}),className:"flex-1 px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500",placeholder:"Section title"}),(0,b.jsxs)("select",{value:a.type,onChange:a=>m(c,{type:a.target.value}),className:"px-3 py-2 border rounded bg-white",children:[(0,b.jsx)("option",{value:"text",children:"Text"}),(0,b.jsx)("option",{value:"question",children:"Question"}),(0,b.jsx)("option",{value:"objection_handler",children:"Objection Handler"})]}),(0,b.jsx)("button",{onClick:()=>{j(a=>({...a,sections:a.sections.filter((a,b)=>b!==c)}))},className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded",children:(0,b.jsx)("i",{className:"fas fa-trash"})})]}),(0,b.jsx)("textarea",{value:a.content,onChange:a=>m(c,{content:a.target.value}),className:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Section content..."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)("span",{className:"w-6 h-6 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-sm font-medium",children:c+1}),(0,b.jsx)("h4",{className:"font-medium text-gray-900",children:a.title}),"text"!==a.type&&(0,b.jsx)("span",{className:"text-xs bg-yellow-100 text-yellow-700 px-2 py-0.5 rounded capitalize",children:a.type})]}),(0,b.jsx)("p",{className:"text-gray-600 whitespace-pre-wrap",children:a.content})]})},a.id)),0===i.sections.length&&(0,b.jsxs)("div",{className:"text-center py-6 text-gray-400",children:[(0,b.jsx)("p",{children:"No sections yet"}),d&&(0,b.jsx)("p",{className:"text-sm",children:'Click "Add Section" to add one'})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,b.jsx)("i",{className:"fas fa-thumbs-up mr-1 text-green-500"}),"Closing (Positive Outcome)"]}),d?(0,b.jsx)("textarea",{value:i.closingPositive,onChange:a=>j({...i,closingPositive:a.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"Great! Let me schedule that for you..."}):(0,b.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 text-gray-700",children:a.closingPositive||(0,b.jsx)("span",{className:"text-gray-400 italic",children:"No positive closing set"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,b.jsx)("i",{className:"fas fa-thumbs-down mr-1 text-red-500"}),"Closing (Negative Outcome)"]}),d?(0,b.jsx)("textarea",{value:i.closingNegative,onChange:a=>j({...i,closingNegative:a.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"I understand. Can I leave you with my contact information..."}):(0,b.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-gray-700",children:a.closingNegative||(0,b.jsx)("span",{className:"text-gray-400 italic",children:"No negative closing set"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,b.jsx)("i",{className:"fas fa-voicemail mr-1 text-orange-500"}),"Voicemail Script"]}),d?(0,b.jsx)("textarea",{value:i.voicemailScript,onChange:a=>j({...i,voicemailScript:a.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Hi {{name}}, this is [Agent Name] from [Company]..."}):(0,b.jsx)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3 text-gray-700",children:a.voicemailScript||(0,b.jsx)("span",{className:"text-gray-400 italic",children:"No voicemail script set"})})]})]}),"objections"===k&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Add common objections and responses to help agents handle difficult conversations."}),d&&(0,b.jsxs)("button",{onClick:()=>{j(a=>({...a,objectionHandlers:[...a.objectionHandlers,{id:`objection-${Date.now()}`,objection:"",response:""}]}))},className:"px-4 py-2 text-blue-600 border border-blue-600 rounded-lg hover:bg-blue-50 flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-plus"}),"Add Objection"]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[i.objectionHandlers.map((a,c)=>(0,b.jsx)("div",{className:"bg-gray-50 border rounded-lg p-4",children:d?(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("label",{className:"text-xs text-gray-500 mb-1 block",children:"Objection"}),(0,b.jsx)("input",{type:"text",value:a.objection,onChange:a=>n(c,{objection:a.target.value}),className:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500",placeholder:'"I\'m not interested"'})]}),(0,b.jsx)("button",{onClick:()=>{j(a=>({...a,objectionHandlers:a.objectionHandlers.filter((a,b)=>b!==c)}))},className:"self-end px-3 py-2 text-red-600 hover:bg-red-50 rounded",children:(0,b.jsx)("i",{className:"fas fa-trash"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs text-gray-500 mb-1 block",children:"Response"}),(0,b.jsx)("textarea",{value:a.response,onChange:a=>n(c,{response:a.target.value}),className:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"I completely understand. May I ask what specifically doesn't interest you..."})]})]}):(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:"w-8 h-8 bg-orange-100 text-orange-600 rounded-full flex items-center justify-center flex-shrink-0",children:(0,b.jsx)("i",{className:"fas fa-quote-left text-xs"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"font-medium text-orange-700",children:['"',a.objection,'"']}),(0,b.jsx)("p",{className:"mt-2 text-gray-600",children:a.response})]})]})})},a.id)),0===i.objectionHandlers.length&&(0,b.jsxs)("div",{className:"text-center py-8 text-gray-400",children:[(0,b.jsx)("i",{className:"fas fa-shield-alt text-4xl mb-3 opacity-50"}),(0,b.jsx)("p",{children:"No objection handlers yet"}),d&&(0,b.jsx)("p",{className:"text-sm",children:"Add common objections to help agents"})]})]})]}),"fields"===k&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Dynamic fields are placeholders that get replaced with actual contact data."}),(0,b.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["Use ","{{placeholder}}"," syntax in your script text."]})]}),d&&(0,b.jsxs)("button",{onClick:()=>{j(a=>({...a,dynamicFields:[...a.dynamicFields,{placeholder:"",field:"",defaultValue:""}]}))},className:"px-4 py-2 text-blue-600 border border-blue-600 rounded-lg hover:bg-blue-50 flex items-center gap-2",children:[(0,b.jsx)("i",{className:"fas fa-plus"}),"Add Field"]})]}),(0,b.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-blue-700 mb-2",children:"Built-in Fields"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:[{placeholder:"{{name}}",desc:"Full name"},{placeholder:"{{firstName}}",desc:"First name"},{placeholder:"{{phone}}",desc:"Phone number"},{placeholder:"{{email}}",desc:"Email address"}].map(a=>(0,b.jsx)("code",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-sm",title:a.desc,children:a.placeholder},a.placeholder))})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[i.dynamicFields.map((a,c)=>(0,b.jsx)("div",{className:"bg-gray-50 border rounded-lg p-4",children:d?(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("label",{className:"text-xs text-gray-500 mb-1 block",children:"Placeholder"}),(0,b.jsx)("input",{type:"text",value:a.placeholder,onChange:a=>o(c,{placeholder:a.target.value}),className:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500",placeholder:"company_name"})]}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("label",{className:"text-xs text-gray-500 mb-1 block",children:"Contact Field"}),(0,b.jsx)("input",{type:"text",value:a.field,onChange:a=>o(c,{field:a.target.value}),className:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500",placeholder:"customFields.company"})]}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("label",{className:"text-xs text-gray-500 mb-1 block",children:"Default Value"}),(0,b.jsx)("input",{type:"text",value:a.defaultValue,onChange:a=>o(c,{defaultValue:a.target.value}),className:"w-full px-3 py-2 border rounded focus:ring-2 focus:ring-blue-500",placeholder:"your company"})]}),(0,b.jsx)("button",{onClick:()=>{j(a=>({...a,dynamicFields:a.dynamicFields.filter((a,b)=>b!==c)}))},className:"self-end px-3 py-2 text-red-600 hover:bg-red-50 rounded",children:(0,b.jsx)("i",{className:"fas fa-trash"})})]}):(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("code",{className:"px-2 py-1 bg-gray-200 rounded",children:`{{${a.placeholder}}}`}),(0,b.jsx)("span",{className:"text-gray-400",children:"â†’"}),(0,b.jsx)("span",{className:"text-gray-600",children:a.field}),a.defaultValue&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"text-gray-400",children:"|"}),(0,b.jsxs)("span",{className:"text-gray-400 text-sm",children:['default: "',a.defaultValue,'"']})]})]})},c)),0===i.dynamicFields.length&&(0,b.jsxs)("div",{className:"text-center py-6 text-gray-400",children:[(0,b.jsx)("p",{children:"No custom dynamic fields"}),d&&(0,b.jsx)("p",{className:"text-sm",children:"Add custom fields for personalization"})]})]})]})]})]})}function g({onClose:a,onCreated:d,subAccountId:e}){let[f,g]=(0,c.useState)({name:"",description:"",category:"",isDefault:!1}),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(""),l=async a=>{if(a.preventDefault(),!f.name.trim())return void k("Script name is required");i(!0),k("");try{let a=await fetch("/api/v1/dialer/scripts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subAccountId:e,...f,isActive:!0,sections:[],objectionHandlers:[],dynamicFields:[]})}),b=await a.json();b.success?d(b.data):k(b.error||"Failed to create script")}catch(a){k("Network error")}finally{i(!1)}};return(0,b.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:a}),(0,b.jsx)("div",{className:"relative bg-white rounded-2xl shadow-xl w-full max-w-md mx-4",children:(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"New Call Script"}),(0,b.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:(0,b.jsx)("i",{className:"fas fa-times text-xl"})})]}),j&&(0,b.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:j}),(0,b.jsxs)("form",{onSubmit:l,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Script Name *"}),(0,b.jsx)("input",{type:"text",value:f.name,onChange:a=>g({...f,name:a.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Sales Introduction Script"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,b.jsx)("textarea",{value:f.description,onChange:a=>g({...f,description:a.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",rows:2,placeholder:"Brief description of this script..."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,b.jsxs)("select",{value:f.category,onChange:a=>g({...f,category:a.target.value}),className:"w-full px-4 py-2 border rounded-lg bg-white",children:[(0,b.jsx)("option",{value:"",children:"Select category"}),(0,b.jsx)("option",{value:"sales",children:"Sales"}),(0,b.jsx)("option",{value:"support",children:"Support"}),(0,b.jsx)("option",{value:"followup",children:"Follow-up"}),(0,b.jsx)("option",{value:"survey",children:"Survey"}),(0,b.jsx)("option",{value:"appointment",children:"Appointment"}),(0,b.jsx)("option",{value:"other",children:"Other"})]})]}),(0,b.jsxs)("label",{className:"flex items-center gap-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:f.isDefault,onChange:a=>g({...f,isDefault:a.target.checked}),className:"rounded border-gray-300 text-blue-600"}),(0,b.jsx)("span",{className:"text-sm text-gray-700",children:"Set as default script"})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)("button",{type:"button",onClick:a,className:"flex-1 px-4 py-2 border rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:h,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:h?"Creating...":"Create Script"})]})]})]})})]})}a.s(["default",()=>e])}];

//# sourceMappingURL=app_sub-account_power-dialer_scripts_page_tsx_c7dc8c29._.js.map