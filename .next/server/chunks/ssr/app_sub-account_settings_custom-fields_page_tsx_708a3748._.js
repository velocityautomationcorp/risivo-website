module.exports=[77604,a=>{"use strict";var b=a.i(87924),c=a.i(72131);function d(){let a="sub-001",[d,f]=(0,c.useState)([]),[g,h]=(0,c.useState)(!0),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)("");(0,c.useEffect)(()=>{o()},[]);let o=async()=>{try{h(!0);let b=await fetch(`/api/v1/custom-fields?subAccountId=${a}`),c=await b.json();c.success?f(c.data||[]):n(c.error||"Failed to load custom fields")}catch(a){console.error("Failed to fetch custom fields:",a),n("Failed to load custom fields")}finally{h(!1)}},p=async b=>{if(confirm("Are you sure you want to delete this custom field? This action cannot be undone."))try{let c=await fetch(`/api/v1/custom-fields/${b}?subAccountId=${a}`,{method:"DELETE"}),d=await c.json();d.success?o():alert(d.error||"Failed to delete field")}catch(a){console.error("Failed to delete field:",a),alert("Failed to delete field")}},q=d.reduce((a,b)=>(a[b.entityType]||(a[b.entityType]=[]),a[b.entityType].push(b),a),{});return(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-6 lg:p-8",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Custom Fields"}),(0,b.jsx)("p",{className:"mt-2 text-gray-600",children:"Define custom fields to capture additional information for contacts, deals, and more."})]}),(0,b.jsx)("div",{className:"mb-6 flex gap-3",children:(0,b.jsxs)("button",{onClick:()=>j(!0),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg font-medium hover:from-purple-700 hover:to-pink-700 transition-all flex items-center gap-2",children:[(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Custom Field"]})}),m&&(0,b.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg",children:m}),g?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsxs)("svg",{className:"animate-spin h-12 w-12 text-purple-600",fill:"none",viewBox:"0 0 24 24",children:[(0,b.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,b.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):(0,b.jsx)(b.Fragment,{children:0===Object.keys(q).length?(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[(0,b.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,b.jsx)("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"No Custom Fields"}),(0,b.jsx)("p",{className:"mt-2 text-gray-500",children:"Get started by creating your first custom field."}),(0,b.jsx)("button",{onClick:()=>j(!0),className:"mt-6 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg font-medium hover:from-purple-700 hover:to-pink-700 transition-all",children:"Add Custom Field"})]}):(0,b.jsx)("div",{className:"space-y-6",children:Object.entries(q).map(([a,c])=>(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[(0,b.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:(0,b.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 capitalize",children:[a," Fields (",c.length,")"]})}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Field Label"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Field Name"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Required"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Show in List"}),(0,b.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:c.sort((a,b)=>a.displayOrder-b.displayOrder).map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a.fieldLabel})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("div",{className:"text-sm text-gray-500 font-mono",children:a.fieldName})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,b.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:a.fieldType})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:a.isRequired?(0,b.jsx)("span",{className:"text-red-600",children:"Yes"}):(0,b.jsx)("span",{className:"text-gray-400",children:"No"})}),(0,b.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:a.showInList?(0,b.jsx)("span",{className:"text-green-600",children:"Yes"}):(0,b.jsx)("span",{className:"text-gray-400",children:"No"})}),(0,b.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,b.jsx)("button",{onClick:()=>l(a),className:"text-purple-600 hover:text-purple-900 mr-4",children:"Edit"}),(0,b.jsx)("button",{onClick:()=>p(a.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},a.id))})]})})]},a))})}),(i||k)&&(0,b.jsx)(e,{isOpen:!0,onClose:()=>{j(!1),l(null)},onSuccess:()=>{j(!1),l(null),o()},editField:k,subAccountId:a})]})})}function e({isOpen:a,onClose:d,onSuccess:e,editField:f,subAccountId:g}){let[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)({entityType:f?.entityType||"contact",fieldName:f?.fieldName||"",fieldLabel:f?.fieldLabel||"",fieldType:f?.fieldType||"text",fieldOptions:f?.fieldOptions||[],isRequired:f?.isRequired||!1,defaultValue:f?.defaultValue||"",displayOrder:f?.displayOrder||0,showInList:f?.showInList||!1}),[n,o]=(0,c.useState)(f?.fieldOptions?.map(a=>`${a.value}|${a.label}`).join("\n")||""),p=async a=>{a.preventDefault(),k(""),i(!0);try{if(!l.fieldName||!l.fieldLabel||!l.fieldType)throw Error("Field name, label, and type are required");let a=[];"dropdown"===l.fieldType&&n.trim()&&(a=n.split("\n").filter(a=>a.trim()).map(a=>{let[b,c]=a.split("|");return{value:b.trim(),label:c?.trim()||b.trim()}}));let b=f?`/api/v1/custom-fields/${f.id}?subAccountId=${g}`:"/api/v1/custom-fields",c=f?"PUT":"POST",d=await fetch(b,{method:c,headers:{"Content-Type":"application/json"},body:JSON.stringify({...l,fieldOptions:a,subAccountId:g})}),h=await d.json();if(!h.success)throw Error(h.error||"Failed to save custom field");e()}catch(a){k(a.message||"Failed to save custom field")}finally{i(!1)}};return a?(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:f?"Edit Custom Field":"Add Custom Field"}),(0,b.jsx)("button",{onClick:d,className:"text-gray-400 hover:text-gray-600",children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsxs)("form",{onSubmit:p,className:"p-6 space-y-6",children:[j&&(0,b.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg",children:j}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Entity Type ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("select",{value:l.entityType,onChange:a=>m({...l,entityType:a.target.value}),disabled:!!f,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 disabled:opacity-50 disabled:bg-gray-50",children:[(0,b.jsx)("option",{value:"contact",children:"Contact"}),(0,b.jsx)("option",{value:"deal",children:"Deal"}),(0,b.jsx)("option",{value:"company",children:"Company"}),(0,b.jsx)("option",{value:"task",children:"Task"})]}),f&&(0,b.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Entity type cannot be changed after creation"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Field Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",value:l.fieldName,onChange:a=>m({...l,fieldName:a.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"_")}),disabled:!!f,required:!0,placeholder:"lead_type",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 disabled:opacity-50 disabled:bg-gray-50 font-mono text-sm"}),f&&(0,b.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Field name cannot be changed"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Field Label ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("input",{type:"text",value:l.fieldLabel,onChange:a=>m({...l,fieldLabel:a.target.value}),required:!0,placeholder:"Lead Type",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Field Type ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)("select",{value:l.fieldType,onChange:a=>m({...l,fieldType:a.target.value}),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,b.jsx)("option",{value:"text",children:"Text"}),(0,b.jsx)("option",{value:"textarea",children:"Text Area"}),(0,b.jsx)("option",{value:"number",children:"Number"}),(0,b.jsx)("option",{value:"date",children:"Date"}),(0,b.jsx)("option",{value:"dropdown",children:"Dropdown"}),(0,b.jsx)("option",{value:"checkbox",children:"Checkbox"}),(0,b.jsx)("option",{value:"email",children:"Email"}),(0,b.jsx)("option",{value:"phone",children:"Phone"}),(0,b.jsx)("option",{value:"url",children:"URL"})]})]}),"dropdown"===l.fieldType&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Dropdown Options ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)("textarea",{value:n,onChange:a=>o(a.target.value),rows:5,placeholder:"lead|Lead team_member|Team Member vendor|Vendor",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 font-mono text-sm resize-none"}),(0,b.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:["One option per line. Format: ",(0,b.jsx)("code",{className:"bg-gray-100 px-1 py-0.5 rounded",children:"value|Label"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)("div",{children:(0,b.jsxs)("label",{className:"flex items-center gap-3 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:l.isRequired,onChange:a=>m({...l,isRequired:a.target.checked}),className:"w-5 h-5 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Required Field"})]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("label",{className:"flex items-center gap-3 p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,b.jsx)("input",{type:"checkbox",checked:l.showInList,onChange:a=>m({...l,showInList:a.target.checked}),className:"w-5 h-5 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"}),(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Show in List View"})]})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Display Order"}),(0,b.jsx)("input",{type:"number",value:l.displayOrder,onChange:a=>m({...l,displayOrder:parseInt(a.target.value)||0}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,b.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Fields are displayed in ascending order (0, 1, 2, ...)"})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[(0,b.jsx)("button",{type:"button",onClick:d,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium transition-colors",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:h,className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg font-medium hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:h?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[(0,b.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,b.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):(0,b.jsx)(b.Fragment,{children:f?"Update Field":"Create Field"})})]})]})]})}):null}a.s(["default",()=>d])}];

//# sourceMappingURL=app_sub-account_settings_custom-fields_page_tsx_708a3748._.js.map