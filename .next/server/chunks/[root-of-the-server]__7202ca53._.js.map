{"version":3,"sources":["../../../lib/db.ts","../../../lib/email/sendgrid.ts","../../../lib/auth/constants.ts"],"sourcesContent":["/**\n * RISIVO CRM - Database Connection (Prisma ORM v6.8.x)\n * \n * Simple PrismaClient singleton pattern for serverless environments.\n * No adapter needed with Prisma 6.x.\n */\n\nimport { PrismaClient } from '@prisma/client'\n\n// Global cache to prevent multiple instances during development hot-reloading\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined\n}\n\n/**\n * Create a new Prisma Client instance\n */\nfunction createPrismaClient(): PrismaClient {\n  return new PrismaClient({\n    log: process.env.NODE_ENV === 'development' \n      ? ['error', 'warn'] \n      : ['error'],\n  })\n}\n\n// Export singleton Prisma client\nexport const prisma = globalForPrisma.prisma ?? createPrismaClient()\n\n// Cache in development to avoid too many connections during hot-reloading\nif (process.env.NODE_ENV !== 'production') {\n  globalForPrisma.prisma = prisma\n}\n\nexport default prisma\n","/**\n * RISIVO CRM - SendGrid Email Utility\n * \n * Centralized email sending via SendGrid\n */\n\nconst ADMIN_EMAIL = 'admin@risivo.com'\n\n/**\n * Get dynamic copyright year\n */\nfunction getCurrentYear(): number {\n  return new Date().getFullYear()\n}\n\n/**\n * Standard email footer with dynamic copyright\n */\nfunction getEmailFooter(): string {\n  return `\n    <div style=\"margin-top: 30px; padding-top: 20px; border-top: 1px solid #e9ecef;\">\n      <p style=\"color: #999; font-size: 12px; text-align: center; margin: 0 0 10px 0;\">\n        <a href=\"https://risivo.com/terms-of-service\" style=\"color: #666; text-decoration: none;\">Terms of Service</a>\n        &nbsp;|&nbsp;\n        <a href=\"https://risivo.com/privacy-policy\" style=\"color: #666; text-decoration: none;\">Privacy Policy</a>\n        &nbsp;|&nbsp;\n        <a href=\"mailto:support@risivo.com\" style=\"color: #666; text-decoration: none;\">Contact Support</a>\n      </p>\n      <p style=\"color: #999; font-size: 11px; text-align: center; margin: 0;\">\n        ¬© ${getCurrentYear()} Risivo‚Ñ¢ by Velocity Automation Corp. All rights reserved.\n      </p>\n    </div>\n  `\n}\n\ninterface SendEmailOptions {\n  to: string | string[]\n  subject: string\n  html: string\n  fromEmail?: string\n  fromName?: string\n}\n\ninterface AdminNotificationOptions {\n  subject: string\n  html: string\n}\n\n/**\n * Send an email via SendGrid\n */\nexport async function sendEmail(options: SendEmailOptions): Promise<boolean> {\n  const sendgridApiKey = process.env.SENDGRID_API_KEY\n  \n  if (!sendgridApiKey) {\n    console.log('[Email] SendGrid not configured, logging email:')\n    console.log('To:', options.to)\n    console.log('Subject:', options.subject)\n    console.log('---')\n    return true\n  }\n\n  const toArray = Array.isArray(options.to) ? options.to : [options.to]\n  \n  try {\n    const response = await fetch('https://api.sendgrid.com/v3/mail/send', {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${sendgridApiKey}`,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        personalizations: [\n          {\n            to: toArray.map(email => ({ email })),\n            subject: options.subject,\n          },\n        ],\n        from: {\n          email: options.fromEmail || process.env.SENDGRID_FROM_EMAIL || 'hello@risivo.com',\n          name: options.fromName || process.env.SENDGRID_FROM_NAME || 'RISIVO CRM',\n        },\n        content: [\n          {\n            type: 'text/html',\n            value: options.html,\n          },\n        ],\n        tracking_settings: {\n          click_tracking: { enable: false },\n          open_tracking: { enable: false },\n        },\n      }),\n    })\n\n    if (!response.ok) {\n      const errorText = await response.text()\n      console.error('[Email] SendGrid error:', response.status, errorText)\n      return false\n    }\n\n    console.log('[Email] Sent successfully to:', options.to)\n    return true\n  } catch (error) {\n    console.error('[Email] Error sending:', error)\n    return false\n  }\n}\n\n/**\n * Send admin notification email\n */\nexport async function sendAdminNotification(options: AdminNotificationOptions): Promise<boolean> {\n  return sendEmail({\n    to: ADMIN_EMAIL,\n    subject: options.subject,\n    html: options.html,\n  })\n}\n\n/**\n * Email template: New Demo Signup (Pending Verification)\n */\nexport function getAdminNewSignupEmail(data: {\n  name: string\n  email: string\n  company?: string\n  phone?: string\n  signupTime: Date\n}): { subject: string; html: string } {\n  const signupDate = data.signupTime.toLocaleString('en-US', {\n    weekday: 'long',\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit',\n    timeZoneName: 'short',\n  })\n\n  return {\n    subject: `üÜï New Demo Signup: ${data.name} (Pending Verification)`,\n    html: `\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset=\"utf-8\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n      </head>\n      <body style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px;\">\n        <div style=\"background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; border-radius: 10px 10px 0 0;\">\n          <h1 style=\"color: white; margin: 0; font-size: 20px;\">üÜï New Demo Signup</h1>\n          <p style=\"color: rgba(255,255,255,0.9); margin: 5px 0 0 0; font-size: 14px;\">Pending Email Verification</p>\n        </div>\n        \n        <div style=\"background: #f8f9fa; padding: 25px; border: 1px solid #e9ecef; border-top: none; border-radius: 0 0 10px 10px;\">\n          <h2 style=\"color: #1a1a1a; font-size: 18px; margin: 0 0 20px 0;\">Investor Details</h2>\n          \n          <table style=\"width: 100%; border-collapse: collapse;\">\n            <tr>\n              <td style=\"padding: 10px 0; border-bottom: 1px solid #e9ecef; color: #666; width: 120px;\">Name:</td>\n              <td style=\"padding: 10px 0; border-bottom: 1px solid #e9ecef; font-weight: 600;\">${data.name}</td>\n            </tr>\n            <tr>\n              <td style=\"padding: 10px 0; border-bottom: 1px solid #e9ecef; color: #666;\">Email:</td>\n              <td style=\"padding: 10px 0; border-bottom: 1px solid #e9ecef;\">\n                <a href=\"mailto:${data.email}\" style=\"color: #2563eb;\">${data.email}</a>\n              </td>\n            </tr>\n            ${data.company ? `\n            <tr>\n              <td style=\"padding: 10px 0; border-bottom: 1px solid #e9ecef; color: #666;\">Company:</td>\n              <td style=\"padding: 10px 0; border-bottom: 1px solid #e9ecef;\">${data.company}</td>\n            </tr>\n            ` : ''}\n            ${data.phone ? `\n            <tr>\n              <td style=\"padding: 10px 0; border-bottom: 1px solid #e9ecef; color: #666;\">Phone:</td>\n              <td style=\"padding: 10px 0; border-bottom: 1px solid #e9ecef;\">${data.phone}</td>\n            </tr>\n            ` : ''}\n            <tr>\n              <td style=\"padding: 10px 0; color: #666;\">Signup Time:</td>\n              <td style=\"padding: 10px 0; font-size: 14px;\">${signupDate}</td>\n            </tr>\n          </table>\n          \n          <div style=\"margin-top: 25px; padding: 15px; background: #fff3cd; border-radius: 8px; border-left: 4px solid #ffc107;\">\n            <p style=\"margin: 0; color: #856404; font-size: 14px;\">\n              ‚è≥ <strong>Status:</strong> Waiting for email verification. You'll be notified once they verify their email.\n            </p>\n          </div>\n          \n          <div style=\"margin-top: 20px; text-align: center;\">\n            <a href=\"https://app.risivo.com/sub-account/platform-admin/demos\" style=\"display: inline-block; background-color: #2563eb; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 14px;\">View in Demo Management</a>\n          </div>\n        </div>\n        \n        ${getEmailFooter()}\n      </body>\n      </html>\n    `,\n  }\n}\n\n/**\n * Email template: Demo Signup Verified\n */\nexport function getAdminVerifiedEmail(data: {\n  name: string\n  email: string\n  company?: string\n  verifiedTime: Date\n}): { subject: string; html: string } {\n  const verifiedDate = data.verifiedTime.toLocaleString('en-US', {\n    weekday: 'long',\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit',\n    timeZoneName: 'short',\n  })\n\n  return {\n    subject: `‚úÖ Demo Verified: ${data.name} is now active`,\n    html: `\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset=\"utf-8\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n      </head>\n      <body style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px;\">\n        <div style=\"background: linear-gradient(135deg, #10b981 0%, #059669 100%); padding: 20px; border-radius: 10px 10px 0 0;\">\n          <h1 style=\"color: white; margin: 0; font-size: 20px;\">‚úÖ Email Verified</h1>\n          <p style=\"color: rgba(255,255,255,0.9); margin: 5px 0 0 0; font-size: 14px;\">Demo Account Now Active</p>\n        </div>\n        \n        <div style=\"background: #f8f9fa; padding: 25px; border: 1px solid #e9ecef; border-top: none; border-radius: 0 0 10px 10px;\">\n          <h2 style=\"color: #1a1a1a; font-size: 18px; margin: 0 0 20px 0;\">Investor Details</h2>\n          \n          <table style=\"width: 100%; border-collapse: collapse;\">\n            <tr>\n              <td style=\"padding: 10px 0; border-bottom: 1px solid #e9ecef; color: #666; width: 120px;\">Name:</td>\n              <td style=\"padding: 10px 0; border-bottom: 1px solid #e9ecef; font-weight: 600;\">${data.name}</td>\n            </tr>\n            <tr>\n              <td style=\"padding: 10px 0; border-bottom: 1px solid #e9ecef; color: #666;\">Email:</td>\n              <td style=\"padding: 10px 0; border-bottom: 1px solid #e9ecef;\">\n                <a href=\"mailto:${data.email}\" style=\"color: #2563eb;\">${data.email}</a>\n              </td>\n            </tr>\n            ${data.company ? `\n            <tr>\n              <td style=\"padding: 10px 0; border-bottom: 1px solid #e9ecef; color: #666;\">Company:</td>\n              <td style=\"padding: 10px 0; border-bottom: 1px solid #e9ecef;\">${data.company}</td>\n            </tr>\n            ` : ''}\n            <tr>\n              <td style=\"padding: 10px 0; color: #666;\">Verified At:</td>\n              <td style=\"padding: 10px 0; font-size: 14px;\">${verifiedDate}</td>\n            </tr>\n          </table>\n          \n          <div style=\"margin-top: 25px; padding: 15px; background: #d1fae5; border-radius: 8px; border-left: 4px solid #10b981;\">\n            <p style=\"margin: 0; color: #065f46; font-size: 14px;\">\n              ‚úÖ <strong>Status:</strong> This investor has verified their email and set their password. They can now access the demo.\n            </p>\n          </div>\n          \n          <div style=\"margin-top: 20px; text-align: center;\">\n            <a href=\"https://app.risivo.com/sub-account/platform-admin/demos\" style=\"display: inline-block; background-color: #10b981; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 14px;\">View in Demo Management</a>\n          </div>\n        </div>\n        \n        ${getEmailFooter()}\n      </body>\n      </html>\n    `,\n  }\n}\n\n/**\n * Email template: Demo Accessed\n */\nexport function getAdminDemoAccessedEmail(data: {\n  name: string\n  email: string\n  company?: string\n  accessTime: Date\n  accessCount: number\n  isFirstAccess: boolean\n}): { subject: string; html: string } {\n  const accessDate = data.accessTime.toLocaleString('en-US', {\n    weekday: 'long',\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit',\n    timeZoneName: 'short',\n  })\n\n  const emoji = data.isFirstAccess ? 'üéâ' : 'üëã'\n  const title = data.isFirstAccess ? 'First Demo Access!' : 'Demo Accessed'\n  const subtitle = data.isFirstAccess ? 'Investor logged in for the first time' : `Access #${data.accessCount}`\n\n  return {\n    subject: `${emoji} ${data.name} ${data.isFirstAccess ? 'accessed demo for the first time' : 'logged into demo'}`,\n    html: `\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset=\"utf-8\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n      </head>\n      <body style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px;\">\n        <div style=\"background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%); padding: 20px; border-radius: 10px 10px 0 0;\">\n          <h1 style=\"color: white; margin: 0; font-size: 20px;\">${emoji} ${title}</h1>\n          <p style=\"color: rgba(255,255,255,0.9); margin: 5px 0 0 0; font-size: 14px;\">${subtitle}</p>\n        </div>\n        \n        <div style=\"background: #f8f9fa; padding: 25px; border: 1px solid #e9ecef; border-top: none; border-radius: 0 0 10px 10px;\">\n          <h2 style=\"color: #1a1a1a; font-size: 18px; margin: 0 0 20px 0;\">Investor Details</h2>\n          \n          <table style=\"width: 100%; border-collapse: collapse;\">\n            <tr>\n              <td style=\"padding: 10px 0; border-bottom: 1px solid #e9ecef; color: #666; width: 120px;\">Name:</td>\n              <td style=\"padding: 10px 0; border-bottom: 1px solid #e9ecef; font-weight: 600;\">${data.name}</td>\n            </tr>\n            <tr>\n              <td style=\"padding: 10px 0; border-bottom: 1px solid #e9ecef; color: #666;\">Email:</td>\n              <td style=\"padding: 10px 0; border-bottom: 1px solid #e9ecef;\">\n                <a href=\"mailto:${data.email}\" style=\"color: #2563eb;\">${data.email}</a>\n              </td>\n            </tr>\n            ${data.company ? `\n            <tr>\n              <td style=\"padding: 10px 0; border-bottom: 1px solid #e9ecef; color: #666;\">Company:</td>\n              <td style=\"padding: 10px 0; border-bottom: 1px solid #e9ecef;\">${data.company}</td>\n            </tr>\n            ` : ''}\n            <tr>\n              <td style=\"padding: 10px 0; border-bottom: 1px solid #e9ecef; color: #666;\">Access Time:</td>\n              <td style=\"padding: 10px 0; border-bottom: 1px solid #e9ecef; font-size: 14px;\">${accessDate}</td>\n            </tr>\n            <tr>\n              <td style=\"padding: 10px 0; color: #666;\">Total Logins:</td>\n              <td style=\"padding: 10px 0; font-weight: 600; color: #2563eb;\">${data.accessCount}</td>\n            </tr>\n          </table>\n          \n          ${data.isFirstAccess ? `\n          <div style=\"margin-top: 25px; padding: 15px; background: #dbeafe; border-radius: 8px; border-left: 4px solid #3b82f6;\">\n            <p style=\"margin: 0; color: #1e40af; font-size: 14px;\">\n              üéâ <strong>First Access!</strong> This investor is exploring the demo for the first time. Consider reaching out to offer assistance or answer questions.\n            </p>\n          </div>\n          ` : ''}\n          \n          <div style=\"margin-top: 20px; text-align: center;\">\n            <a href=\"https://app.risivo.com/sub-account/platform-admin/demos\" style=\"display: inline-block; background-color: #2563eb; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 14px;\">View Demo Activity</a>\n          </div>\n        </div>\n        \n        ${getEmailFooter()}\n      </body>\n      </html>\n    `,\n  }\n}\n","// ==========================================\n// RISIVO CRM - Authentication Constants\n// ==========================================\n\n// Master Admin Email (only this email gets master admin privileges)\nexport const MASTER_ADMIN_EMAIL = 'admin@risivo.com'\n\n// User Roles\nexport const USER_ROLES = {\n  MASTER_ADMIN: 'master_admin',\n  AGENCY_OWNER: 'agency_owner',\n  AGENCY_ADMIN: 'agency_admin',\n  USER: 'user',\n  VIEWER: 'viewer',\n  DEMO: 'demo',\n} as const\n\nexport type UserRole = typeof USER_ROLES[keyof typeof USER_ROLES]\n\n// Role Hierarchy (higher number = more permissions)\nexport const ROLE_HIERARCHY: Record<UserRole, number> = {\n  [USER_ROLES.MASTER_ADMIN]: 100,\n  [USER_ROLES.AGENCY_OWNER]: 80,\n  [USER_ROLES.AGENCY_ADMIN]: 60,\n  [USER_ROLES.USER]: 40,\n  [USER_ROLES.VIEWER]: 20,\n  [USER_ROLES.DEMO]: 30, // Demo has more than viewer but less than user\n}\n\n// Account Status\nexport const ACCOUNT_STATUS = {\n  ACTIVE: 'active',\n  SUSPENDED: 'suspended',\n  PENDING: 'pending',\n  DEACTIVATED: 'deactivated',\n} as const\n\nexport type AccountStatus = typeof ACCOUNT_STATUS[keyof typeof ACCOUNT_STATUS]\n\n// Demo Access Status\nexport const DEMO_STATUS = {\n  PENDING: 'pending',\n  ACTIVE: 'active',\n  EXPIRED: 'expired',\n  REVOKED: 'revoked',\n} as const\n\nexport type DemoStatus = typeof DEMO_STATUS[keyof typeof DEMO_STATUS]\n\n// Demo Access Settings\nexport const DEMO_SETTINGS = {\n  EXPIRY_DAYS: 30, // 30 days for investor demos\n  MAX_ACTIVE_DEMOS: 50, // Maximum concurrent demo accesses\n  SAMPLE_CONTACTS_COUNT: 150,\n  SAMPLE_DEALS_COUNT: 45,\n  SAMPLE_PIPELINES_COUNT: 3,\n} as const\n\n// Protected Routes (require authentication)\nexport const PROTECTED_ROUTES = [\n  '/sub-account',\n  '/admin',\n  '/company',\n  '/agency',\n  '/dashboard',\n  '/super-admin',\n]\n\n// Public Routes (no authentication required)\nexport const PUBLIC_ROUTES = [\n  '/',\n  '/auth/signin',\n  '/auth/signup',\n  '/auth/forgot-password',\n  '/auth/reset-password',\n  '/demo/access', // Demo magic link landing\n  '/book', // Public booking pages\n  '/api/auth',\n  '/api/public',\n]\n\n// Demo Restricted Routes (demo users cannot access)\nexport const DEMO_RESTRICTED_ROUTES = [\n  '/sub-account/settings',\n  '/sub-account/platform-admin',\n  '/sub-account/settings/my-staff',\n  '/sub-account/settings/business-profile',\n  '/sub-account/settings/branding',\n  '/sub-account/settings/import',\n  '/company/settings',\n  '/agency/settings',\n]\n\n// Demo Allowed Features\nexport const DEMO_ALLOWED_FEATURES = [\n  'contacts',\n  'contacts.view',\n  'contacts.create',\n  'contacts.edit',\n  'deals',\n  'deals.view',\n  'deals.create',\n  'deals.edit',\n  'pipelines',\n  'pipelines.view',\n  'calendar',\n  'calendar.view',\n  'reports',\n  'reports.view',\n  'marketing',\n  'marketing.view',\n  'ai_assistant',\n  'conversations',\n  'conversations.view',\n]\n\n// Demo Blocked Features\nexport const DEMO_BLOCKED_FEATURES = [\n  'settings',\n  'settings.all',\n  'users.manage',\n  'users.invite',\n  'data.export',\n  'data.import',\n  'billing',\n  'integrations.manage',\n  'api_keys',\n  'webhooks.manage',\n]\n\n// Session Settings\nexport const SESSION_SETTINGS = {\n  MAX_AGE_DAYS: 30, // 30 days session\n  REFRESH_INTERVAL_HOURS: 24, // Refresh token every 24 hours\n  INACTIVITY_TIMEOUT_HOURS: 72, // Logout after 72 hours of inactivity\n} as const\n\n// Password Requirements\nexport const PASSWORD_REQUIREMENTS = {\n  MIN_LENGTH: 8,\n  REQUIRE_UPPERCASE: true,\n  REQUIRE_LOWERCASE: true,\n  REQUIRE_NUMBER: true,\n  REQUIRE_SPECIAL: false,\n} as const\n"],"names":[],"mappings":"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"}