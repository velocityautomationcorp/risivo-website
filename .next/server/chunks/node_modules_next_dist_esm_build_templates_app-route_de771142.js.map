{"version":3,"sources":["../../../node_modules/%40anthropic-ai/sdk/internal/tslib.mjs","../../../node_modules/next/dist/esm/build/templates/app-route.js","../../../node_modules/bignumber.js/bignumber.mjs","../../../app/api/v1/ai/chat/route.ts","../../../node_modules/%40anthropic-ai/sdk/src/internal/utils/bytes.ts","../../../node_modules/%40anthropic-ai/sdk/src/_vendor/partial-json-parser/parser.ts","../../../node_modules/%40anthropic-ai/sdk/src/version.ts","../../../node_modules/%40anthropic-ai/sdk/src/internal/uploads.ts","../../../node_modules/%40anthropic-ai/sdk/src/lib/tools/CompactionControl.ts","../../../node_modules/next/src/build/templates/app-route.ts","../../../node_modules/%40anthropic-ai/sdk/src/internal/errors.ts","../../../node_modules/%40anthropic-ai/sdk/src/internal/shims.ts","../../../node_modules/%40anthropic-ai/sdk/src/lib/beta-parser.ts","../../../node_modules/%40anthropic-ai/sdk/src/internal/request-options.ts","../../../node_modules/%40anthropic-ai/sdk/src/core/resource.ts","../../../node_modules/%40anthropic-ai/sdk/src/internal/utils/sleep.ts","../../../node_modules/%40anthropic-ai/sdk/src/resources/messages/batches.ts","../../../node_modules/%40anthropic-ai/sdk/src/resources/beta/skills/versions.ts","../../../node_modules/%40anthropic-ai/sdk/src/resources/messages/messages.ts","../../../node_modules/%40anthropic-ai/sdk/src/resources/models.ts","../../../node_modules/%40anthropic-ai/sdk/src/resources/beta/skills/skills.ts","../../../node_modules/%40anthropic-ai/sdk/src/resources/beta/messages/batches.ts","../../../node_modules/%40anthropic-ai/sdk/src/resources/beta/beta.ts","../../../node_modules/%40anthropic-ai/sdk/src/core/error.ts","../../../node_modules/%40anthropic-ai/sdk/src/resources/beta/files.ts","../../../node_modules/%40anthropic-ai/sdk/src/resources/beta/messages/messages.ts","../../../node_modules/%40anthropic-ai/sdk/src/resources/completions.ts","../../../node_modules/%40anthropic-ai/sdk/src/resources/beta/models.ts","../../../node_modules/%40anthropic-ai/sdk/src/internal/detect-platform.ts","../../../node_modules/%40anthropic-ai/sdk/src/internal/headers.ts","../../../node_modules/%40anthropic-ai/sdk/src/internal/decoders/line.ts","../../../node_modules/%40anthropic-ai/sdk/src/internal/utils/values.ts","../../../node_modules/%40anthropic-ai/sdk/src/core/api-promise.ts","../../../node_modules/%40anthropic-ai/sdk/src/core/streaming.ts","../../../node_modules/%40anthropic-ai/sdk/src/internal/parse.ts","../../../node_modules/%40anthropic-ai/sdk/src/lib/BetaMessageStream.ts","../../../node_modules/%40anthropic-ai/sdk/src/lib/MessageStream.ts","../../../node_modules/%40paralleldrive/cuid2/src/index.js","../../../node_modules/%40anthropic-ai/sdk/src/internal/constants.ts","../../../node_modules/%40anthropic-ai/sdk/src/lib/tools/BetaToolRunner.ts","../../../node_modules/%40anthropic-ai/sdk/src/index.ts","../../../node_modules/%40anthropic-ai/sdk/src/client.ts","../../../lib/ai/knowledge/marketing-knowledge.ts","../../../node_modules/%40anthropic-ai/sdk/src/internal/to-file.ts","../../../node_modules/%40noble/hashes/src/utils.ts","../../../node_modules/%40anthropic-ai/sdk/src/internal/utils/uuid.ts","../../../lib/ai/claude-assistant.ts","../../../lib/ai/knowledge/risivo-knowledge.ts","../../../node_modules/%40anthropic-ai/sdk/src/internal/utils/log.ts","../../../node_modules/%40anthropic-ai/sdk/src/core/pagination.ts","../../../node_modules/%40anthropic-ai/sdk/src/internal/decoders/jsonl.ts","../../../node_modules/%40anthropic-ai/sdk/src/internal/utils/env.ts","../../../node_modules/%40noble/hashes/src/_u64.ts","../../../node_modules/%40anthropic-ai/sdk/src/internal/utils/path.ts","../../../node_modules/%40noble/hashes/src/sha3.ts"],"sourcesContent":["function __classPrivateFieldSet(receiver, state, value, kind, f) {\n    if (kind === \"m\")\n        throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f)\n        throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver))\n        throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return kind === \"a\" ? f.call(receiver, value) : f ? (f.value = value) : state.set(receiver, value), value;\n}\nfunction __classPrivateFieldGet(receiver, state, kind, f) {\n    if (kind === \"a\" && !f)\n        throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver))\n        throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\nexport { __classPrivateFieldSet, __classPrivateFieldGet };\n","import { AppRouteRouteModule } from \"next/dist/esm/server/route-modules/app-route/module.compiled\";\nimport { RouteKind } from \"next/dist/esm/server/route-kind\";\nimport { patchFetch as _patchFetch } from \"next/dist/esm/server/lib/patch-fetch\";\nimport { addRequestMeta, getRequestMeta } from \"next/dist/esm/server/request-meta\";\nimport { getTracer, SpanKind } from \"next/dist/esm/server/lib/trace/tracer\";\nimport { setReferenceManifestsSingleton } from \"next/dist/esm/server/app-render/encryption-utils\";\nimport { createServerModuleMap } from \"next/dist/esm/server/app-render/action-utils\";\nimport { normalizeAppPath } from \"next/dist/esm/shared/lib/router/utils/app-paths\";\nimport { NodeNextRequest, NodeNextResponse } from \"next/dist/esm/server/base-http/node\";\nimport { NextRequestAdapter, signalFromNodeResponse } from \"next/dist/esm/server/web/spec-extension/adapters/next-request\";\nimport { BaseServerSpan } from \"next/dist/esm/server/lib/trace/constants\";\nimport { getRevalidateReason } from \"next/dist/esm/server/instrumentation/utils\";\nimport { sendResponse } from \"next/dist/esm/server/send-response\";\nimport { fromNodeOutgoingHttpHeaders, toNodeOutgoingHttpHeaders } from \"next/dist/esm/server/web/utils\";\nimport { getCacheControlHeader } from \"next/dist/esm/server/lib/cache-control\";\nimport { INFINITE_CACHE, NEXT_CACHE_TAGS_HEADER } from \"next/dist/esm/lib/constants\";\nimport { NoFallbackError } from \"next/dist/esm/shared/lib/no-fallback-error.external\";\nimport { CachedRouteKind } from \"next/dist/esm/server/response-cache\";\nimport * as userland from \"INNER_APP_ROUTE\";\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new AppRouteRouteModule({\n    definition: {\n        kind: RouteKind.APP_ROUTE,\n        page: \"/api/v1/ai/chat/route\",\n        pathname: \"/api/v1/ai/chat\",\n        filename: \"route\",\n        bundlePath: \"\"\n    },\n    distDir: process.env.__NEXT_RELATIVE_DIST_DIR || '',\n    relativeProjectDir: process.env.__NEXT_RELATIVE_PROJECT_DIR || '',\n    resolvedPagePath: \"[project]/app/api/v1/ai/chat/route.ts\",\n    nextConfigOutput,\n    userland\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return _patchFetch({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\nexport { routeModule, workAsyncStorage, workUnitAsyncStorage, serverHooks, patchFetch,  };\nexport async function handler(req, res, ctx) {\n    if (routeModule.isDev) {\n        addRequestMeta(req, 'devRequestTimingInternalsEnd', process.hrtime.bigint());\n    }\n    let srcPage = \"/api/v1/ai/chat/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (process.env.TURBOPACK) {\n        srcPage = srcPage.replace(/\\/index$/, '') || '/';\n    } else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = process.env.__NEXT_MULTI_ZONE_DRAFT_MODE;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, parsedUrl, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname, clientReferenceManifest, serverActionsManifest } = prepareResult;\n    const normalizedSrcPage = normalizeAppPath(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    const render404 = async ()=>{\n        // TODO: should route-module itself handle rendering the 404\n        if (routerServerContext == null ? void 0 : routerServerContext.render404) {\n            await routerServerContext.render404(req, res, parsedUrl, false);\n        } else {\n            res.end('This page could not be found');\n        }\n        return null;\n    };\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                if (nextConfig.experimental.adapterPath) {\n                    return await render404();\n                }\n                throw new NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isStaticGeneration = isIsr && !supportsDynamicResponse;\n    // Before rendering (which initializes component tree modules), we have to\n    // set the reference manifests to our global store so Server Action's\n    // encryption util can access to them at the top level of the page module.\n    if (serverActionsManifest && clientReferenceManifest) {\n        setReferenceManifestsSingleton({\n            page: srcPage,\n            clientReferenceManifest,\n            serverActionsManifest,\n            serverModuleMap: createServerModuleMap({\n                serverActionsManifest\n            })\n        });\n    }\n    const method = req.method || 'GET';\n    const tracer = getTracer();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            cacheComponents: Boolean(nextConfig.cacheComponents),\n            supportsDynamicResponse,\n            incrementalCache: getRequestMeta(req, 'incrementalCache'),\n            cacheLifeProfiles: nextConfig.cacheLife,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new NodeNextRequest(req);\n    const nodeNextRes = new NodeNextResponse(res);\n    const nextReq = NextRequestAdapter.fromNodeNextRequest(nodeNextReq, signalFromNodeResponse(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${srcPage}`);\n                }\n            });\n        };\n        const isMinimalMode = Boolean(process.env.MINIMAL_MODE || getRequestMeta(req, 'minimalMode'));\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!isMinimalMode && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = toNodeOutgoingHttpHeaders(response.headers);\n                        if (cacheTags) {\n                            headers[NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await sendResponse(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: getRevalidateReason({\n                                isStaticGeneration,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil,\n                isMinimalMode\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!isMinimalMode) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = fromNodeOutgoingHttpHeaders(cacheEntry.value.headers);\n            if (!(isMinimalMode && isIsr)) {\n                headers.delete(NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', getCacheControlHeader(cacheEntry.cacheControl));\n            }\n            await sendResponse(nodeNextReq, nodeNextRes, // @ts-expect-error - Argument of type 'Buffer<ArrayBufferLike>' is not assignable to parameter of type 'BodyInit | null | undefined'.\n            new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${srcPage}`,\n                    kind: SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        if (!(err instanceof NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: getRevalidateReason({\n                    isStaticGeneration,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await sendResponse(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n","/*\r\n *      bignumber.js v9.3.1\r\n *      A JavaScript library for arbitrary-precision arithmetic.\r\n *      https://github.com/MikeMcl/bignumber.js\r\n *      Copyright (c) 2025 Michael Mclaughlin <M8ch88l@gmail.com>\r\n *      MIT Licensed.\r\n *\r\n *      BigNumber.prototype methods     |  BigNumber methods\r\n *                                      |\r\n *      absoluteValue            abs    |  clone\r\n *      comparedTo                      |  config               set\r\n *      decimalPlaces            dp     |      DECIMAL_PLACES\r\n *      dividedBy                div    |      ROUNDING_MODE\r\n *      dividedToIntegerBy       idiv   |      EXPONENTIAL_AT\r\n *      exponentiatedBy          pow    |      RANGE\r\n *      integerValue                    |      CRYPTO\r\n *      isEqualTo                eq     |      MODULO_MODE\r\n *      isFinite                        |      POW_PRECISION\r\n *      isGreaterThan            gt     |      FORMAT\r\n *      isGreaterThanOrEqualTo   gte    |      ALPHABET\r\n *      isInteger                       |  isBigNumber\r\n *      isLessThan               lt     |  maximum              max\r\n *      isLessThanOrEqualTo      lte    |  minimum              min\r\n *      isNaN                           |  random\r\n *      isNegative                      |  sum\r\n *      isPositive                      |\r\n *      isZero                          |\r\n *      minus                           |\r\n *      modulo                   mod    |\r\n *      multipliedBy             times  |\r\n *      negated                         |\r\n *      plus                            |\r\n *      precision                sd     |\r\n *      shiftedBy                       |\r\n *      squareRoot               sqrt   |\r\n *      toExponential                   |\r\n *      toFixed                         |\r\n *      toFormat                        |\r\n *      toFraction                      |\r\n *      toJSON                          |\r\n *      toNumber                        |\r\n *      toPrecision                     |\r\n *      toString                        |\r\n *      valueOf                         |\r\n *\r\n */\r\n\r\n\r\nvar\r\n  isNumeric = /^-?(?:\\d+(?:\\.\\d*)?|\\.\\d+)(?:e[+-]?\\d+)?$/i,\r\n  mathceil = Math.ceil,\r\n  mathfloor = Math.floor,\r\n\r\n  bignumberError = '[BigNumber Error] ',\r\n  tooManyDigits = bignumberError + 'Number primitive has more than 15 significant digits: ',\r\n\r\n  BASE = 1e14,\r\n  LOG_BASE = 14,\r\n  MAX_SAFE_INTEGER = 0x1fffffffffffff,         // 2^53 - 1\r\n  // MAX_INT32 = 0x7fffffff,                   // 2^31 - 1\r\n  POWS_TEN = [1, 10, 100, 1e3, 1e4, 1e5, 1e6, 1e7, 1e8, 1e9, 1e10, 1e11, 1e12, 1e13],\r\n  SQRT_BASE = 1e7,\r\n\r\n  // EDITABLE\r\n  // The limit on the value of DECIMAL_PLACES, TO_EXP_NEG, TO_EXP_POS, MIN_EXP, MAX_EXP, and\r\n  // the arguments to toExponential, toFixed, toFormat, and toPrecision.\r\n  MAX = 1E9;                                   // 0 to MAX_INT32\r\n\r\n\r\n/*\r\n * Create and return a BigNumber constructor.\r\n */\r\nfunction clone(configObject) {\r\n  var div, convertBase, parseNumeric,\r\n    P = BigNumber.prototype = { constructor: BigNumber, toString: null, valueOf: null },\r\n    ONE = new BigNumber(1),\r\n\r\n\r\n    //----------------------------- EDITABLE CONFIG DEFAULTS -------------------------------\r\n\r\n\r\n    // The default values below must be integers within the inclusive ranges stated.\r\n    // The values can also be changed at run-time using BigNumber.set.\r\n\r\n    // The maximum number of decimal places for operations involving division.\r\n    DECIMAL_PLACES = 20,                     // 0 to MAX\r\n\r\n    // The rounding mode used when rounding to the above decimal places, and when using\r\n    // toExponential, toFixed, toFormat and toPrecision, and round (default value).\r\n    // UP         0 Away from zero.\r\n    // DOWN       1 Towards zero.\r\n    // CEIL       2 Towards +Infinity.\r\n    // FLOOR      3 Towards -Infinity.\r\n    // HALF_UP    4 Towards nearest neighbour. If equidistant, up.\r\n    // HALF_DOWN  5 Towards nearest neighbour. If equidistant, down.\r\n    // HALF_EVEN  6 Towards nearest neighbour. If equidistant, towards even neighbour.\r\n    // HALF_CEIL  7 Towards nearest neighbour. If equidistant, towards +Infinity.\r\n    // HALF_FLOOR 8 Towards nearest neighbour. If equidistant, towards -Infinity.\r\n    ROUNDING_MODE = 4,                       // 0 to 8\r\n\r\n    // EXPONENTIAL_AT : [TO_EXP_NEG , TO_EXP_POS]\r\n\r\n    // The exponent value at and beneath which toString returns exponential notation.\r\n    // Number type: -7\r\n    TO_EXP_NEG = -7,                         // 0 to -MAX\r\n\r\n    // The exponent value at and above which toString returns exponential notation.\r\n    // Number type: 21\r\n    TO_EXP_POS = 21,                         // 0 to MAX\r\n\r\n    // RANGE : [MIN_EXP, MAX_EXP]\r\n\r\n    // The minimum exponent value, beneath which underflow to zero occurs.\r\n    // Number type: -324  (5e-324)\r\n    MIN_EXP = -1e7,                          // -1 to -MAX\r\n\r\n    // The maximum exponent value, above which overflow to Infinity occurs.\r\n    // Number type:  308  (1.7976931348623157e+308)\r\n    // For MAX_EXP > 1e7, e.g. new BigNumber('1e100000000').plus(1) may be slow.\r\n    MAX_EXP = 1e7,                           // 1 to MAX\r\n\r\n    // Whether to use cryptographically-secure random number generation, if available.\r\n    CRYPTO = false,                          // true or false\r\n\r\n    // The modulo mode used when calculating the modulus: a mod n.\r\n    // The quotient (q = a / n) is calculated according to the corresponding rounding mode.\r\n    // The remainder (r) is calculated as: r = a - n * q.\r\n    //\r\n    // UP        0 The remainder is positive if the dividend is negative, else is negative.\r\n    // DOWN      1 The remainder has the same sign as the dividend.\r\n    //             This modulo mode is commonly known as 'truncated division' and is\r\n    //             equivalent to (a % n) in JavaScript.\r\n    // FLOOR     3 The remainder has the same sign as the divisor (Python %).\r\n    // HALF_EVEN 6 This modulo mode implements the IEEE 754 remainder function.\r\n    // EUCLID    9 Euclidian division. q = sign(n) * floor(a / abs(n)).\r\n    //             The remainder is always positive.\r\n    //\r\n    // The truncated division, floored division, Euclidian division and IEEE 754 remainder\r\n    // modes are commonly used for the modulus operation.\r\n    // Although the other rounding modes can also be used, they may not give useful results.\r\n    MODULO_MODE = 1,                         // 0 to 9\r\n\r\n    // The maximum number of significant digits of the result of the exponentiatedBy operation.\r\n    // If POW_PRECISION is 0, there will be unlimited significant digits.\r\n    POW_PRECISION = 0,                       // 0 to MAX\r\n\r\n    // The format specification used by the BigNumber.prototype.toFormat method.\r\n    FORMAT = {\r\n      prefix: '',\r\n      groupSize: 3,\r\n      secondaryGroupSize: 0,\r\n      groupSeparator: ',',\r\n      decimalSeparator: '.',\r\n      fractionGroupSize: 0,\r\n      fractionGroupSeparator: '\\xA0',        // non-breaking space\r\n      suffix: ''\r\n    },\r\n\r\n    // The alphabet used for base conversion. It must be at least 2 characters long, with no '+',\r\n    // '-', '.', whitespace, or repeated character.\r\n    // '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_'\r\n    ALPHABET = '0123456789abcdefghijklmnopqrstuvwxyz',\r\n    alphabetHasNormalDecimalDigits = true;\r\n\r\n\r\n  //------------------------------------------------------------------------------------------\r\n\r\n\r\n  // CONSTRUCTOR\r\n\r\n\r\n  /*\r\n   * The BigNumber constructor and exported function.\r\n   * Create and return a new instance of a BigNumber object.\r\n   *\r\n   * v {number|string|BigNumber} A numeric value.\r\n   * [b] {number} The base of v. Integer, 2 to ALPHABET.length inclusive.\r\n   */\r\n  function BigNumber(v, b) {\r\n    var alphabet, c, caseChanged, e, i, isNum, len, str,\r\n      x = this;\r\n\r\n    // Enable constructor call without `new`.\r\n    if (!(x instanceof BigNumber)) return new BigNumber(v, b);\r\n\r\n    if (b == null) {\r\n\r\n      if (v && v._isBigNumber === true) {\r\n        x.s = v.s;\r\n\r\n        if (!v.c || v.e > MAX_EXP) {\r\n          x.c = x.e = null;\r\n        } else if (v.e < MIN_EXP) {\r\n          x.c = [x.e = 0];\r\n        } else {\r\n          x.e = v.e;\r\n          x.c = v.c.slice();\r\n        }\r\n\r\n        return;\r\n      }\r\n\r\n      if ((isNum = typeof v == 'number') && v * 0 == 0) {\r\n\r\n        // Use `1 / n` to handle minus zero also.\r\n        x.s = 1 / v < 0 ? (v = -v, -1) : 1;\r\n\r\n        // Fast path for integers, where n < 2147483648 (2**31).\r\n        if (v === ~~v) {\r\n          for (e = 0, i = v; i >= 10; i /= 10, e++);\r\n\r\n          if (e > MAX_EXP) {\r\n            x.c = x.e = null;\r\n          } else {\r\n            x.e = e;\r\n            x.c = [v];\r\n          }\r\n\r\n          return;\r\n        }\r\n\r\n        str = String(v);\r\n      } else {\r\n\r\n        if (!isNumeric.test(str = String(v))) return parseNumeric(x, str, isNum);\r\n\r\n        x.s = str.charCodeAt(0) == 45 ? (str = str.slice(1), -1) : 1;\r\n      }\r\n\r\n      // Decimal point?\r\n      if ((e = str.indexOf('.')) > -1) str = str.replace('.', '');\r\n\r\n      // Exponential form?\r\n      if ((i = str.search(/e/i)) > 0) {\r\n\r\n        // Determine exponent.\r\n        if (e < 0) e = i;\r\n        e += +str.slice(i + 1);\r\n        str = str.substring(0, i);\r\n      } else if (e < 0) {\r\n\r\n        // Integer.\r\n        e = str.length;\r\n      }\r\n\r\n    } else {\r\n\r\n      // '[BigNumber Error] Base {not a primitive number|not an integer|out of range}: {b}'\r\n      intCheck(b, 2, ALPHABET.length, 'Base');\r\n\r\n      // Allow exponential notation to be used with base 10 argument, while\r\n      // also rounding to DECIMAL_PLACES as with other bases.\r\n      if (b == 10 && alphabetHasNormalDecimalDigits) {\r\n        x = new BigNumber(v);\r\n        return round(x, DECIMAL_PLACES + x.e + 1, ROUNDING_MODE);\r\n      }\r\n\r\n      str = String(v);\r\n\r\n      if (isNum = typeof v == 'number') {\r\n\r\n        // Avoid potential interpretation of Infinity and NaN as base 44+ values.\r\n        if (v * 0 != 0) return parseNumeric(x, str, isNum, b);\r\n\r\n        x.s = 1 / v < 0 ? (str = str.slice(1), -1) : 1;\r\n\r\n        // '[BigNumber Error] Number primitive has more than 15 significant digits: {n}'\r\n        if (BigNumber.DEBUG && str.replace(/^0\\.0*|\\./, '').length > 15) {\r\n          throw Error\r\n           (tooManyDigits + v);\r\n        }\r\n      } else {\r\n        x.s = str.charCodeAt(0) === 45 ? (str = str.slice(1), -1) : 1;\r\n      }\r\n\r\n      alphabet = ALPHABET.slice(0, b);\r\n      e = i = 0;\r\n\r\n      // Check that str is a valid base b number.\r\n      // Don't use RegExp, so alphabet can contain special characters.\r\n      for (len = str.length; i < len; i++) {\r\n        if (alphabet.indexOf(c = str.charAt(i)) < 0) {\r\n          if (c == '.') {\r\n\r\n            // If '.' is not the first character and it has not be found before.\r\n            if (i > e) {\r\n              e = len;\r\n              continue;\r\n            }\r\n          } else if (!caseChanged) {\r\n\r\n            // Allow e.g. hexadecimal 'FF' as well as 'ff'.\r\n            if (str == str.toUpperCase() && (str = str.toLowerCase()) ||\r\n                str == str.toLowerCase() && (str = str.toUpperCase())) {\r\n              caseChanged = true;\r\n              i = -1;\r\n              e = 0;\r\n              continue;\r\n            }\r\n          }\r\n\r\n          return parseNumeric(x, String(v), isNum, b);\r\n        }\r\n      }\r\n\r\n      // Prevent later check for length on converted number.\r\n      isNum = false;\r\n      str = convertBase(str, b, 10, x.s);\r\n\r\n      // Decimal point?\r\n      if ((e = str.indexOf('.')) > -1) str = str.replace('.', '');\r\n      else e = str.length;\r\n    }\r\n\r\n    // Determine leading zeros.\r\n    for (i = 0; str.charCodeAt(i) === 48; i++);\r\n\r\n    // Determine trailing zeros.\r\n    for (len = str.length; str.charCodeAt(--len) === 48;);\r\n\r\n    if (str = str.slice(i, ++len)) {\r\n      len -= i;\r\n\r\n      // '[BigNumber Error] Number primitive has more than 15 significant digits: {n}'\r\n      if (isNum && BigNumber.DEBUG &&\r\n        len > 15 && (v > MAX_SAFE_INTEGER || v !== mathfloor(v))) {\r\n          throw Error\r\n           (tooManyDigits + (x.s * v));\r\n      }\r\n\r\n       // Overflow?\r\n      if ((e = e - i - 1) > MAX_EXP) {\r\n\r\n        // Infinity.\r\n        x.c = x.e = null;\r\n\r\n      // Underflow?\r\n      } else if (e < MIN_EXP) {\r\n\r\n        // Zero.\r\n        x.c = [x.e = 0];\r\n      } else {\r\n        x.e = e;\r\n        x.c = [];\r\n\r\n        // Transform base\r\n\r\n        // e is the base 10 exponent.\r\n        // i is where to slice str to get the first element of the coefficient array.\r\n        i = (e + 1) % LOG_BASE;\r\n        if (e < 0) i += LOG_BASE;  // i < 1\r\n\r\n        if (i < len) {\r\n          if (i) x.c.push(+str.slice(0, i));\r\n\r\n          for (len -= LOG_BASE; i < len;) {\r\n            x.c.push(+str.slice(i, i += LOG_BASE));\r\n          }\r\n\r\n          i = LOG_BASE - (str = str.slice(i)).length;\r\n        } else {\r\n          i -= len;\r\n        }\r\n\r\n        for (; i--; str += '0');\r\n        x.c.push(+str);\r\n      }\r\n    } else {\r\n\r\n      // Zero.\r\n      x.c = [x.e = 0];\r\n    }\r\n  }\r\n\r\n\r\n  // CONSTRUCTOR PROPERTIES\r\n\r\n\r\n  BigNumber.clone = clone;\r\n\r\n  BigNumber.ROUND_UP = 0;\r\n  BigNumber.ROUND_DOWN = 1;\r\n  BigNumber.ROUND_CEIL = 2;\r\n  BigNumber.ROUND_FLOOR = 3;\r\n  BigNumber.ROUND_HALF_UP = 4;\r\n  BigNumber.ROUND_HALF_DOWN = 5;\r\n  BigNumber.ROUND_HALF_EVEN = 6;\r\n  BigNumber.ROUND_HALF_CEIL = 7;\r\n  BigNumber.ROUND_HALF_FLOOR = 8;\r\n  BigNumber.EUCLID = 9;\r\n\r\n\r\n  /*\r\n   * Configure infrequently-changing library-wide settings.\r\n   *\r\n   * Accept an object with the following optional properties (if the value of a property is\r\n   * a number, it must be an integer within the inclusive range stated):\r\n   *\r\n   *   DECIMAL_PLACES   {number}           0 to MAX\r\n   *   ROUNDING_MODE    {number}           0 to 8\r\n   *   EXPONENTIAL_AT   {number|number[]}  -MAX to MAX  or  [-MAX to 0, 0 to MAX]\r\n   *   RANGE            {number|number[]}  -MAX to MAX (not zero)  or  [-MAX to -1, 1 to MAX]\r\n   *   CRYPTO           {boolean}          true or false\r\n   *   MODULO_MODE      {number}           0 to 9\r\n   *   POW_PRECISION       {number}           0 to MAX\r\n   *   ALPHABET         {string}           A string of two or more unique characters which does\r\n   *                                       not contain '.'.\r\n   *   FORMAT           {object}           An object with some of the following properties:\r\n   *     prefix                 {string}\r\n   *     groupSize              {number}\r\n   *     secondaryGroupSize     {number}\r\n   *     groupSeparator         {string}\r\n   *     decimalSeparator       {string}\r\n   *     fractionGroupSize      {number}\r\n   *     fractionGroupSeparator {string}\r\n   *     suffix                 {string}\r\n   *\r\n   * (The values assigned to the above FORMAT object properties are not checked for validity.)\r\n   *\r\n   * E.g.\r\n   * BigNumber.config({ DECIMAL_PLACES : 20, ROUNDING_MODE : 4 })\r\n   *\r\n   * Ignore properties/parameters set to null or undefined, except for ALPHABET.\r\n   *\r\n   * Return an object with the properties current values.\r\n   */\r\n  BigNumber.config = BigNumber.set = function (obj) {\r\n    var p, v;\r\n\r\n    if (obj != null) {\r\n\r\n      if (typeof obj == 'object') {\r\n\r\n        // DECIMAL_PLACES {number} Integer, 0 to MAX inclusive.\r\n        // '[BigNumber Error] DECIMAL_PLACES {not a primitive number|not an integer|out of range}: {v}'\r\n        if (obj.hasOwnProperty(p = 'DECIMAL_PLACES')) {\r\n          v = obj[p];\r\n          intCheck(v, 0, MAX, p);\r\n          DECIMAL_PLACES = v;\r\n        }\r\n\r\n        // ROUNDING_MODE {number} Integer, 0 to 8 inclusive.\r\n        // '[BigNumber Error] ROUNDING_MODE {not a primitive number|not an integer|out of range}: {v}'\r\n        if (obj.hasOwnProperty(p = 'ROUNDING_MODE')) {\r\n          v = obj[p];\r\n          intCheck(v, 0, 8, p);\r\n          ROUNDING_MODE = v;\r\n        }\r\n\r\n        // EXPONENTIAL_AT {number|number[]}\r\n        // Integer, -MAX to MAX inclusive or\r\n        // [integer -MAX to 0 inclusive, 0 to MAX inclusive].\r\n        // '[BigNumber Error] EXPONENTIAL_AT {not a primitive number|not an integer|out of range}: {v}'\r\n        if (obj.hasOwnProperty(p = 'EXPONENTIAL_AT')) {\r\n          v = obj[p];\r\n          if (v && v.pop) {\r\n            intCheck(v[0], -MAX, 0, p);\r\n            intCheck(v[1], 0, MAX, p);\r\n            TO_EXP_NEG = v[0];\r\n            TO_EXP_POS = v[1];\r\n          } else {\r\n            intCheck(v, -MAX, MAX, p);\r\n            TO_EXP_NEG = -(TO_EXP_POS = v < 0 ? -v : v);\r\n          }\r\n        }\r\n\r\n        // RANGE {number|number[]} Non-zero integer, -MAX to MAX inclusive or\r\n        // [integer -MAX to -1 inclusive, integer 1 to MAX inclusive].\r\n        // '[BigNumber Error] RANGE {not a primitive number|not an integer|out of range|cannot be zero}: {v}'\r\n        if (obj.hasOwnProperty(p = 'RANGE')) {\r\n          v = obj[p];\r\n          if (v && v.pop) {\r\n            intCheck(v[0], -MAX, -1, p);\r\n            intCheck(v[1], 1, MAX, p);\r\n            MIN_EXP = v[0];\r\n            MAX_EXP = v[1];\r\n          } else {\r\n            intCheck(v, -MAX, MAX, p);\r\n            if (v) {\r\n              MIN_EXP = -(MAX_EXP = v < 0 ? -v : v);\r\n            } else {\r\n              throw Error\r\n               (bignumberError + p + ' cannot be zero: ' + v);\r\n            }\r\n          }\r\n        }\r\n\r\n        // CRYPTO {boolean} true or false.\r\n        // '[BigNumber Error] CRYPTO not true or false: {v}'\r\n        // '[BigNumber Error] crypto unavailable'\r\n        if (obj.hasOwnProperty(p = 'CRYPTO')) {\r\n          v = obj[p];\r\n          if (v === !!v) {\r\n            if (v) {\r\n              if (typeof crypto != 'undefined' && crypto &&\r\n               (crypto.getRandomValues || crypto.randomBytes)) {\r\n                CRYPTO = v;\r\n              } else {\r\n                CRYPTO = !v;\r\n                throw Error\r\n                 (bignumberError + 'crypto unavailable');\r\n              }\r\n            } else {\r\n              CRYPTO = v;\r\n            }\r\n          } else {\r\n            throw Error\r\n             (bignumberError + p + ' not true or false: ' + v);\r\n          }\r\n        }\r\n\r\n        // MODULO_MODE {number} Integer, 0 to 9 inclusive.\r\n        // '[BigNumber Error] MODULO_MODE {not a primitive number|not an integer|out of range}: {v}'\r\n        if (obj.hasOwnProperty(p = 'MODULO_MODE')) {\r\n          v = obj[p];\r\n          intCheck(v, 0, 9, p);\r\n          MODULO_MODE = v;\r\n        }\r\n\r\n        // POW_PRECISION {number} Integer, 0 to MAX inclusive.\r\n        // '[BigNumber Error] POW_PRECISION {not a primitive number|not an integer|out of range}: {v}'\r\n        if (obj.hasOwnProperty(p = 'POW_PRECISION')) {\r\n          v = obj[p];\r\n          intCheck(v, 0, MAX, p);\r\n          POW_PRECISION = v;\r\n        }\r\n\r\n        // FORMAT {object}\r\n        // '[BigNumber Error] FORMAT not an object: {v}'\r\n        if (obj.hasOwnProperty(p = 'FORMAT')) {\r\n          v = obj[p];\r\n          if (typeof v == 'object') FORMAT = v;\r\n          else throw Error\r\n           (bignumberError + p + ' not an object: ' + v);\r\n        }\r\n\r\n        // ALPHABET {string}\r\n        // '[BigNumber Error] ALPHABET invalid: {v}'\r\n        if (obj.hasOwnProperty(p = 'ALPHABET')) {\r\n          v = obj[p];\r\n\r\n          // Disallow if less than two characters,\r\n          // or if it contains '+', '-', '.', whitespace, or a repeated character.\r\n          if (typeof v == 'string' && !/^.?$|[+\\-.\\s]|(.).*\\1/.test(v)) {\r\n            alphabetHasNormalDecimalDigits = v.slice(0, 10) == '0123456789';\r\n            ALPHABET = v;\r\n          } else {\r\n            throw Error\r\n             (bignumberError + p + ' invalid: ' + v);\r\n          }\r\n        }\r\n\r\n      } else {\r\n\r\n        // '[BigNumber Error] Object expected: {v}'\r\n        throw Error\r\n         (bignumberError + 'Object expected: ' + obj);\r\n      }\r\n    }\r\n\r\n    return {\r\n      DECIMAL_PLACES: DECIMAL_PLACES,\r\n      ROUNDING_MODE: ROUNDING_MODE,\r\n      EXPONENTIAL_AT: [TO_EXP_NEG, TO_EXP_POS],\r\n      RANGE: [MIN_EXP, MAX_EXP],\r\n      CRYPTO: CRYPTO,\r\n      MODULO_MODE: MODULO_MODE,\r\n      POW_PRECISION: POW_PRECISION,\r\n      FORMAT: FORMAT,\r\n      ALPHABET: ALPHABET\r\n    };\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if v is a BigNumber instance, otherwise return false.\r\n   *\r\n   * If BigNumber.DEBUG is true, throw if a BigNumber instance is not well-formed.\r\n   *\r\n   * v {any}\r\n   *\r\n   * '[BigNumber Error] Invalid BigNumber: {v}'\r\n   */\r\n  BigNumber.isBigNumber = function (v) {\r\n    if (!v || v._isBigNumber !== true) return false;\r\n    if (!BigNumber.DEBUG) return true;\r\n\r\n    var i, n,\r\n      c = v.c,\r\n      e = v.e,\r\n      s = v.s;\r\n\r\n    out: if ({}.toString.call(c) == '[object Array]') {\r\n\r\n      if ((s === 1 || s === -1) && e >= -MAX && e <= MAX && e === mathfloor(e)) {\r\n\r\n        // If the first element is zero, the BigNumber value must be zero.\r\n        if (c[0] === 0) {\r\n          if (e === 0 && c.length === 1) return true;\r\n          break out;\r\n        }\r\n\r\n        // Calculate number of digits that c[0] should have, based on the exponent.\r\n        i = (e + 1) % LOG_BASE;\r\n        if (i < 1) i += LOG_BASE;\r\n\r\n        // Calculate number of digits of c[0].\r\n        //if (Math.ceil(Math.log(c[0] + 1) / Math.LN10) == i) {\r\n        if (String(c[0]).length == i) {\r\n\r\n          for (i = 0; i < c.length; i++) {\r\n            n = c[i];\r\n            if (n < 0 || n >= BASE || n !== mathfloor(n)) break out;\r\n          }\r\n\r\n          // Last element cannot be zero, unless it is the only element.\r\n          if (n !== 0) return true;\r\n        }\r\n      }\r\n\r\n    // Infinity/NaN\r\n    } else if (c === null && e === null && (s === null || s === 1 || s === -1)) {\r\n      return true;\r\n    }\r\n\r\n    throw Error\r\n      (bignumberError + 'Invalid BigNumber: ' + v);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the maximum of the arguments.\r\n   *\r\n   * arguments {number|string|BigNumber}\r\n   */\r\n  BigNumber.maximum = BigNumber.max = function () {\r\n    return maxOrMin(arguments, -1);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the minimum of the arguments.\r\n   *\r\n   * arguments {number|string|BigNumber}\r\n   */\r\n  BigNumber.minimum = BigNumber.min = function () {\r\n    return maxOrMin(arguments, 1);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber with a random value equal to or greater than 0 and less than 1,\r\n   * and with dp, or DECIMAL_PLACES if dp is omitted, decimal places (or less if trailing\r\n   * zeros are produced).\r\n   *\r\n   * [dp] {number} Decimal places. Integer, 0 to MAX inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp}'\r\n   * '[BigNumber Error] crypto unavailable'\r\n   */\r\n  BigNumber.random = (function () {\r\n    var pow2_53 = 0x20000000000000;\r\n\r\n    // Return a 53 bit integer n, where 0 <= n < 9007199254740992.\r\n    // Check if Math.random() produces more than 32 bits of randomness.\r\n    // If it does, assume at least 53 bits are produced, otherwise assume at least 30 bits.\r\n    // 0x40000000 is 2^30, 0x800000 is 2^23, 0x1fffff is 2^21 - 1.\r\n    var random53bitInt = (Math.random() * pow2_53) & 0x1fffff\r\n     ? function () { return mathfloor(Math.random() * pow2_53); }\r\n     : function () { return ((Math.random() * 0x40000000 | 0) * 0x800000) +\r\n       (Math.random() * 0x800000 | 0); };\r\n\r\n    return function (dp) {\r\n      var a, b, e, k, v,\r\n        i = 0,\r\n        c = [],\r\n        rand = new BigNumber(ONE);\r\n\r\n      if (dp == null) dp = DECIMAL_PLACES;\r\n      else intCheck(dp, 0, MAX);\r\n\r\n      k = mathceil(dp / LOG_BASE);\r\n\r\n      if (CRYPTO) {\r\n\r\n        // Browsers supporting crypto.getRandomValues.\r\n        if (crypto.getRandomValues) {\r\n\r\n          a = crypto.getRandomValues(new Uint32Array(k *= 2));\r\n\r\n          for (; i < k;) {\r\n\r\n            // 53 bits:\r\n            // ((Math.pow(2, 32) - 1) * Math.pow(2, 21)).toString(2)\r\n            // 11111 11111111 11111111 11111111 11100000 00000000 00000000\r\n            // ((Math.pow(2, 32) - 1) >>> 11).toString(2)\r\n            //                                     11111 11111111 11111111\r\n            // 0x20000 is 2^21.\r\n            v = a[i] * 0x20000 + (a[i + 1] >>> 11);\r\n\r\n            // Rejection sampling:\r\n            // 0 <= v < 9007199254740992\r\n            // Probability that v >= 9e15, is\r\n            // 7199254740992 / 9007199254740992 ~= 0.0008, i.e. 1 in 1251\r\n            if (v >= 9e15) {\r\n              b = crypto.getRandomValues(new Uint32Array(2));\r\n              a[i] = b[0];\r\n              a[i + 1] = b[1];\r\n            } else {\r\n\r\n              // 0 <= v <= 8999999999999999\r\n              // 0 <= (v % 1e14) <= 99999999999999\r\n              c.push(v % 1e14);\r\n              i += 2;\r\n            }\r\n          }\r\n          i = k / 2;\r\n\r\n        // Node.js supporting crypto.randomBytes.\r\n        } else if (crypto.randomBytes) {\r\n\r\n          // buffer\r\n          a = crypto.randomBytes(k *= 7);\r\n\r\n          for (; i < k;) {\r\n\r\n            // 0x1000000000000 is 2^48, 0x10000000000 is 2^40\r\n            // 0x100000000 is 2^32, 0x1000000 is 2^24\r\n            // 11111 11111111 11111111 11111111 11111111 11111111 11111111\r\n            // 0 <= v < 9007199254740992\r\n            v = ((a[i] & 31) * 0x1000000000000) + (a[i + 1] * 0x10000000000) +\r\n               (a[i + 2] * 0x100000000) + (a[i + 3] * 0x1000000) +\r\n               (a[i + 4] << 16) + (a[i + 5] << 8) + a[i + 6];\r\n\r\n            if (v >= 9e15) {\r\n              crypto.randomBytes(7).copy(a, i);\r\n            } else {\r\n\r\n              // 0 <= (v % 1e14) <= 99999999999999\r\n              c.push(v % 1e14);\r\n              i += 7;\r\n            }\r\n          }\r\n          i = k / 7;\r\n        } else {\r\n          CRYPTO = false;\r\n          throw Error\r\n           (bignumberError + 'crypto unavailable');\r\n        }\r\n      }\r\n\r\n      // Use Math.random.\r\n      if (!CRYPTO) {\r\n\r\n        for (; i < k;) {\r\n          v = random53bitInt();\r\n          if (v < 9e15) c[i++] = v % 1e14;\r\n        }\r\n      }\r\n\r\n      k = c[--i];\r\n      dp %= LOG_BASE;\r\n\r\n      // Convert trailing digits to zeros according to dp.\r\n      if (k && dp) {\r\n        v = POWS_TEN[LOG_BASE - dp];\r\n        c[i] = mathfloor(k / v) * v;\r\n      }\r\n\r\n      // Remove trailing elements which are zero.\r\n      for (; c[i] === 0; c.pop(), i--);\r\n\r\n      // Zero?\r\n      if (i < 0) {\r\n        c = [e = 0];\r\n      } else {\r\n\r\n        // Remove leading elements which are zero and adjust exponent accordingly.\r\n        for (e = -1 ; c[0] === 0; c.splice(0, 1), e -= LOG_BASE);\r\n\r\n        // Count the digits of the first element of c to determine leading zeros, and...\r\n        for (i = 1, v = c[0]; v >= 10; v /= 10, i++);\r\n\r\n        // adjust the exponent accordingly.\r\n        if (i < LOG_BASE) e -= LOG_BASE - i;\r\n      }\r\n\r\n      rand.e = e;\r\n      rand.c = c;\r\n      return rand;\r\n    };\r\n  })();\r\n\r\n\r\n   /*\r\n   * Return a BigNumber whose value is the sum of the arguments.\r\n   *\r\n   * arguments {number|string|BigNumber}\r\n   */\r\n  BigNumber.sum = function () {\r\n    var i = 1,\r\n      args = arguments,\r\n      sum = new BigNumber(args[0]);\r\n    for (; i < args.length;) sum = sum.plus(args[i++]);\r\n    return sum;\r\n  };\r\n\r\n\r\n  // PRIVATE FUNCTIONS\r\n\r\n\r\n  // Called by BigNumber and BigNumber.prototype.toString.\r\n  convertBase = (function () {\r\n    var decimal = '0123456789';\r\n\r\n    /*\r\n     * Convert string of baseIn to an array of numbers of baseOut.\r\n     * Eg. toBaseOut('255', 10, 16) returns [15, 15].\r\n     * Eg. toBaseOut('ff', 16, 10) returns [2, 5, 5].\r\n     */\r\n    function toBaseOut(str, baseIn, baseOut, alphabet) {\r\n      var j,\r\n        arr = [0],\r\n        arrL,\r\n        i = 0,\r\n        len = str.length;\r\n\r\n      for (; i < len;) {\r\n        for (arrL = arr.length; arrL--; arr[arrL] *= baseIn);\r\n\r\n        arr[0] += alphabet.indexOf(str.charAt(i++));\r\n\r\n        for (j = 0; j < arr.length; j++) {\r\n\r\n          if (arr[j] > baseOut - 1) {\r\n            if (arr[j + 1] == null) arr[j + 1] = 0;\r\n            arr[j + 1] += arr[j] / baseOut | 0;\r\n            arr[j] %= baseOut;\r\n          }\r\n        }\r\n      }\r\n\r\n      return arr.reverse();\r\n    }\r\n\r\n    // Convert a numeric string of baseIn to a numeric string of baseOut.\r\n    // If the caller is toString, we are converting from base 10 to baseOut.\r\n    // If the caller is BigNumber, we are converting from baseIn to base 10.\r\n    return function (str, baseIn, baseOut, sign, callerIsToString) {\r\n      var alphabet, d, e, k, r, x, xc, y,\r\n        i = str.indexOf('.'),\r\n        dp = DECIMAL_PLACES,\r\n        rm = ROUNDING_MODE;\r\n\r\n      // Non-integer.\r\n      if (i >= 0) {\r\n        k = POW_PRECISION;\r\n\r\n        // Unlimited precision.\r\n        POW_PRECISION = 0;\r\n        str = str.replace('.', '');\r\n        y = new BigNumber(baseIn);\r\n        x = y.pow(str.length - i);\r\n        POW_PRECISION = k;\r\n\r\n        // Convert str as if an integer, then restore the fraction part by dividing the\r\n        // result by its base raised to a power.\r\n\r\n        y.c = toBaseOut(toFixedPoint(coeffToString(x.c), x.e, '0'),\r\n         10, baseOut, decimal);\r\n        y.e = y.c.length;\r\n      }\r\n\r\n      // Convert the number as integer.\r\n\r\n      xc = toBaseOut(str, baseIn, baseOut, callerIsToString\r\n       ? (alphabet = ALPHABET, decimal)\r\n       : (alphabet = decimal, ALPHABET));\r\n\r\n      // xc now represents str as an integer and converted to baseOut. e is the exponent.\r\n      e = k = xc.length;\r\n\r\n      // Remove trailing zeros.\r\n      for (; xc[--k] == 0; xc.pop());\r\n\r\n      // Zero?\r\n      if (!xc[0]) return alphabet.charAt(0);\r\n\r\n      // Does str represent an integer? If so, no need for the division.\r\n      if (i < 0) {\r\n        --e;\r\n      } else {\r\n        x.c = xc;\r\n        x.e = e;\r\n\r\n        // The sign is needed for correct rounding.\r\n        x.s = sign;\r\n        x = div(x, y, dp, rm, baseOut);\r\n        xc = x.c;\r\n        r = x.r;\r\n        e = x.e;\r\n      }\r\n\r\n      // xc now represents str converted to baseOut.\r\n\r\n      // The index of the rounding digit.\r\n      d = e + dp + 1;\r\n\r\n      // The rounding digit: the digit to the right of the digit that may be rounded up.\r\n      i = xc[d];\r\n\r\n      // Look at the rounding digits and mode to determine whether to round up.\r\n\r\n      k = baseOut / 2;\r\n      r = r || d < 0 || xc[d + 1] != null;\r\n\r\n      r = rm < 4 ? (i != null || r) && (rm == 0 || rm == (x.s < 0 ? 3 : 2))\r\n            : i > k || i == k &&(rm == 4 || r || rm == 6 && xc[d - 1] & 1 ||\r\n             rm == (x.s < 0 ? 8 : 7));\r\n\r\n      // If the index of the rounding digit is not greater than zero, or xc represents\r\n      // zero, then the result of the base conversion is zero or, if rounding up, a value\r\n      // such as 0.00001.\r\n      if (d < 1 || !xc[0]) {\r\n\r\n        // 1^-dp or 0\r\n        str = r ? toFixedPoint(alphabet.charAt(1), -dp, alphabet.charAt(0)) : alphabet.charAt(0);\r\n      } else {\r\n\r\n        // Truncate xc to the required number of decimal places.\r\n        xc.length = d;\r\n\r\n        // Round up?\r\n        if (r) {\r\n\r\n          // Rounding up may mean the previous digit has to be rounded up and so on.\r\n          for (--baseOut; ++xc[--d] > baseOut;) {\r\n            xc[d] = 0;\r\n\r\n            if (!d) {\r\n              ++e;\r\n              xc = [1].concat(xc);\r\n            }\r\n          }\r\n        }\r\n\r\n        // Determine trailing zeros.\r\n        for (k = xc.length; !xc[--k];);\r\n\r\n        // E.g. [4, 11, 15] becomes 4bf.\r\n        for (i = 0, str = ''; i <= k; str += alphabet.charAt(xc[i++]));\r\n\r\n        // Add leading zeros, decimal point and trailing zeros as required.\r\n        str = toFixedPoint(str, e, alphabet.charAt(0));\r\n      }\r\n\r\n      // The caller will add the sign.\r\n      return str;\r\n    };\r\n  })();\r\n\r\n\r\n  // Perform division in the specified base. Called by div and convertBase.\r\n  div = (function () {\r\n\r\n    // Assume non-zero x and k.\r\n    function multiply(x, k, base) {\r\n      var m, temp, xlo, xhi,\r\n        carry = 0,\r\n        i = x.length,\r\n        klo = k % SQRT_BASE,\r\n        khi = k / SQRT_BASE | 0;\r\n\r\n      for (x = x.slice(); i--;) {\r\n        xlo = x[i] % SQRT_BASE;\r\n        xhi = x[i] / SQRT_BASE | 0;\r\n        m = khi * xlo + xhi * klo;\r\n        temp = klo * xlo + ((m % SQRT_BASE) * SQRT_BASE) + carry;\r\n        carry = (temp / base | 0) + (m / SQRT_BASE | 0) + khi * xhi;\r\n        x[i] = temp % base;\r\n      }\r\n\r\n      if (carry) x = [carry].concat(x);\r\n\r\n      return x;\r\n    }\r\n\r\n    function compare(a, b, aL, bL) {\r\n      var i, cmp;\r\n\r\n      if (aL != bL) {\r\n        cmp = aL > bL ? 1 : -1;\r\n      } else {\r\n\r\n        for (i = cmp = 0; i < aL; i++) {\r\n\r\n          if (a[i] != b[i]) {\r\n            cmp = a[i] > b[i] ? 1 : -1;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      return cmp;\r\n    }\r\n\r\n    function subtract(a, b, aL, base) {\r\n      var i = 0;\r\n\r\n      // Subtract b from a.\r\n      for (; aL--;) {\r\n        a[aL] -= i;\r\n        i = a[aL] < b[aL] ? 1 : 0;\r\n        a[aL] = i * base + a[aL] - b[aL];\r\n      }\r\n\r\n      // Remove leading zeros.\r\n      for (; !a[0] && a.length > 1; a.splice(0, 1));\r\n    }\r\n\r\n    // x: dividend, y: divisor.\r\n    return function (x, y, dp, rm, base) {\r\n      var cmp, e, i, more, n, prod, prodL, q, qc, rem, remL, rem0, xi, xL, yc0,\r\n        yL, yz,\r\n        s = x.s == y.s ? 1 : -1,\r\n        xc = x.c,\r\n        yc = y.c;\r\n\r\n      // Either NaN, Infinity or 0?\r\n      if (!xc || !xc[0] || !yc || !yc[0]) {\r\n\r\n        return new BigNumber(\r\n\r\n         // Return NaN if either NaN, or both Infinity or 0.\r\n         !x.s || !y.s || (xc ? yc && xc[0] == yc[0] : !yc) ? NaN :\r\n\r\n          // Return 0 if x is 0 or y is Infinity, or return Infinity as y is 0.\r\n          xc && xc[0] == 0 || !yc ? s * 0 : s / 0\r\n       );\r\n      }\r\n\r\n      q = new BigNumber(s);\r\n      qc = q.c = [];\r\n      e = x.e - y.e;\r\n      s = dp + e + 1;\r\n\r\n      if (!base) {\r\n        base = BASE;\r\n        e = bitFloor(x.e / LOG_BASE) - bitFloor(y.e / LOG_BASE);\r\n        s = s / LOG_BASE | 0;\r\n      }\r\n\r\n      // Result exponent may be one less then the current value of e.\r\n      // The coefficients of the BigNumbers from convertBase may have trailing zeros.\r\n      for (i = 0; yc[i] == (xc[i] || 0); i++);\r\n\r\n      if (yc[i] > (xc[i] || 0)) e--;\r\n\r\n      if (s < 0) {\r\n        qc.push(1);\r\n        more = true;\r\n      } else {\r\n        xL = xc.length;\r\n        yL = yc.length;\r\n        i = 0;\r\n        s += 2;\r\n\r\n        // Normalise xc and yc so highest order digit of yc is >= base / 2.\r\n\r\n        n = mathfloor(base / (yc[0] + 1));\r\n\r\n        // Not necessary, but to handle odd bases where yc[0] == (base / 2) - 1.\r\n        // if (n > 1 || n++ == 1 && yc[0] < base / 2) {\r\n        if (n > 1) {\r\n          yc = multiply(yc, n, base);\r\n          xc = multiply(xc, n, base);\r\n          yL = yc.length;\r\n          xL = xc.length;\r\n        }\r\n\r\n        xi = yL;\r\n        rem = xc.slice(0, yL);\r\n        remL = rem.length;\r\n\r\n        // Add zeros to make remainder as long as divisor.\r\n        for (; remL < yL; rem[remL++] = 0);\r\n        yz = yc.slice();\r\n        yz = [0].concat(yz);\r\n        yc0 = yc[0];\r\n        if (yc[1] >= base / 2) yc0++;\r\n        // Not necessary, but to prevent trial digit n > base, when using base 3.\r\n        // else if (base == 3 && yc0 == 1) yc0 = 1 + 1e-15;\r\n\r\n        do {\r\n          n = 0;\r\n\r\n          // Compare divisor and remainder.\r\n          cmp = compare(yc, rem, yL, remL);\r\n\r\n          // If divisor < remainder.\r\n          if (cmp < 0) {\r\n\r\n            // Calculate trial digit, n.\r\n\r\n            rem0 = rem[0];\r\n            if (yL != remL) rem0 = rem0 * base + (rem[1] || 0);\r\n\r\n            // n is how many times the divisor goes into the current remainder.\r\n            n = mathfloor(rem0 / yc0);\r\n\r\n            //  Algorithm:\r\n            //  product = divisor multiplied by trial digit (n).\r\n            //  Compare product and remainder.\r\n            //  If product is greater than remainder:\r\n            //    Subtract divisor from product, decrement trial digit.\r\n            //  Subtract product from remainder.\r\n            //  If product was less than remainder at the last compare:\r\n            //    Compare new remainder and divisor.\r\n            //    If remainder is greater than divisor:\r\n            //      Subtract divisor from remainder, increment trial digit.\r\n\r\n            if (n > 1) {\r\n\r\n              // n may be > base only when base is 3.\r\n              if (n >= base) n = base - 1;\r\n\r\n              // product = divisor * trial digit.\r\n              prod = multiply(yc, n, base);\r\n              prodL = prod.length;\r\n              remL = rem.length;\r\n\r\n              // Compare product and remainder.\r\n              // If product > remainder then trial digit n too high.\r\n              // n is 1 too high about 5% of the time, and is not known to have\r\n              // ever been more than 1 too high.\r\n              while (compare(prod, rem, prodL, remL) == 1) {\r\n                n--;\r\n\r\n                // Subtract divisor from product.\r\n                subtract(prod, yL < prodL ? yz : yc, prodL, base);\r\n                prodL = prod.length;\r\n                cmp = 1;\r\n              }\r\n            } else {\r\n\r\n              // n is 0 or 1, cmp is -1.\r\n              // If n is 0, there is no need to compare yc and rem again below,\r\n              // so change cmp to 1 to avoid it.\r\n              // If n is 1, leave cmp as -1, so yc and rem are compared again.\r\n              if (n == 0) {\r\n\r\n                // divisor < remainder, so n must be at least 1.\r\n                cmp = n = 1;\r\n              }\r\n\r\n              // product = divisor\r\n              prod = yc.slice();\r\n              prodL = prod.length;\r\n            }\r\n\r\n            if (prodL < remL) prod = [0].concat(prod);\r\n\r\n            // Subtract product from remainder.\r\n            subtract(rem, prod, remL, base);\r\n            remL = rem.length;\r\n\r\n             // If product was < remainder.\r\n            if (cmp == -1) {\r\n\r\n              // Compare divisor and new remainder.\r\n              // If divisor < new remainder, subtract divisor from remainder.\r\n              // Trial digit n too low.\r\n              // n is 1 too low about 5% of the time, and very rarely 2 too low.\r\n              while (compare(yc, rem, yL, remL) < 1) {\r\n                n++;\r\n\r\n                // Subtract divisor from remainder.\r\n                subtract(rem, yL < remL ? yz : yc, remL, base);\r\n                remL = rem.length;\r\n              }\r\n            }\r\n          } else if (cmp === 0) {\r\n            n++;\r\n            rem = [0];\r\n          } // else cmp === 1 and n will be 0\r\n\r\n          // Add the next digit, n, to the result array.\r\n          qc[i++] = n;\r\n\r\n          // Update the remainder.\r\n          if (rem[0]) {\r\n            rem[remL++] = xc[xi] || 0;\r\n          } else {\r\n            rem = [xc[xi]];\r\n            remL = 1;\r\n          }\r\n        } while ((xi++ < xL || rem[0] != null) && s--);\r\n\r\n        more = rem[0] != null;\r\n\r\n        // Leading zero?\r\n        if (!qc[0]) qc.splice(0, 1);\r\n      }\r\n\r\n      if (base == BASE) {\r\n\r\n        // To calculate q.e, first get the number of digits of qc[0].\r\n        for (i = 1, s = qc[0]; s >= 10; s /= 10, i++);\r\n\r\n        round(q, dp + (q.e = i + e * LOG_BASE - 1) + 1, rm, more);\r\n\r\n      // Caller is convertBase.\r\n      } else {\r\n        q.e = e;\r\n        q.r = +more;\r\n      }\r\n\r\n      return q;\r\n    };\r\n  })();\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of BigNumber n in fixed-point or exponential\r\n   * notation rounded to the specified decimal places or significant digits.\r\n   *\r\n   * n: a BigNumber.\r\n   * i: the index of the last digit required (i.e. the digit that may be rounded up).\r\n   * rm: the rounding mode.\r\n   * id: 1 (toExponential) or 2 (toPrecision).\r\n   */\r\n  function format(n, i, rm, id) {\r\n    var c0, e, ne, len, str;\r\n\r\n    if (rm == null) rm = ROUNDING_MODE;\r\n    else intCheck(rm, 0, 8);\r\n\r\n    if (!n.c) return n.toString();\r\n\r\n    c0 = n.c[0];\r\n    ne = n.e;\r\n\r\n    if (i == null) {\r\n      str = coeffToString(n.c);\r\n      str = id == 1 || id == 2 && (ne <= TO_EXP_NEG || ne >= TO_EXP_POS)\r\n       ? toExponential(str, ne)\r\n       : toFixedPoint(str, ne, '0');\r\n    } else {\r\n      n = round(new BigNumber(n), i, rm);\r\n\r\n      // n.e may have changed if the value was rounded up.\r\n      e = n.e;\r\n\r\n      str = coeffToString(n.c);\r\n      len = str.length;\r\n\r\n      // toPrecision returns exponential notation if the number of significant digits\r\n      // specified is less than the number of digits necessary to represent the integer\r\n      // part of the value in fixed-point notation.\r\n\r\n      // Exponential notation.\r\n      if (id == 1 || id == 2 && (i <= e || e <= TO_EXP_NEG)) {\r\n\r\n        // Append zeros?\r\n        for (; len < i; str += '0', len++);\r\n        str = toExponential(str, e);\r\n\r\n      // Fixed-point notation.\r\n      } else {\r\n        i -= ne + (id === 2 && e > ne);\r\n        str = toFixedPoint(str, e, '0');\r\n\r\n        // Append zeros?\r\n        if (e + 1 > len) {\r\n          if (--i > 0) for (str += '.'; i--; str += '0');\r\n        } else {\r\n          i += e - len;\r\n          if (i > 0) {\r\n            if (e + 1 == len) str += '.';\r\n            for (; i--; str += '0');\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return n.s < 0 && c0 ? '-' + str : str;\r\n  }\r\n\r\n\r\n  // Handle BigNumber.max and BigNumber.min.\r\n  // If any number is NaN, return NaN.\r\n  function maxOrMin(args, n) {\r\n    var k, y,\r\n      i = 1,\r\n      x = new BigNumber(args[0]);\r\n\r\n    for (; i < args.length; i++) {\r\n      y = new BigNumber(args[i]);\r\n      if (!y.s || (k = compare(x, y)) === n || k === 0 && x.s === n) {\r\n        x = y;\r\n      }\r\n    }\r\n\r\n    return x;\r\n  }\r\n\r\n\r\n  /*\r\n   * Strip trailing zeros, calculate base 10 exponent and check against MIN_EXP and MAX_EXP.\r\n   * Called by minus, plus and times.\r\n   */\r\n  function normalise(n, c, e) {\r\n    var i = 1,\r\n      j = c.length;\r\n\r\n     // Remove trailing zeros.\r\n    for (; !c[--j]; c.pop());\r\n\r\n    // Calculate the base 10 exponent. First get the number of digits of c[0].\r\n    for (j = c[0]; j >= 10; j /= 10, i++);\r\n\r\n    // Overflow?\r\n    if ((e = i + e * LOG_BASE - 1) > MAX_EXP) {\r\n\r\n      // Infinity.\r\n      n.c = n.e = null;\r\n\r\n    // Underflow?\r\n    } else if (e < MIN_EXP) {\r\n\r\n      // Zero.\r\n      n.c = [n.e = 0];\r\n    } else {\r\n      n.e = e;\r\n      n.c = c;\r\n    }\r\n\r\n    return n;\r\n  }\r\n\r\n\r\n  // Handle values that fail the validity test in BigNumber.\r\n  parseNumeric = (function () {\r\n    var basePrefix = /^(-?)0([xbo])(?=\\w[\\w.]*$)/i,\r\n      dotAfter = /^([^.]+)\\.$/,\r\n      dotBefore = /^\\.([^.]+)$/,\r\n      isInfinityOrNaN = /^-?(Infinity|NaN)$/,\r\n      whitespaceOrPlus = /^\\s*\\+(?=[\\w.])|^\\s+|\\s+$/g;\r\n\r\n    return function (x, str, isNum, b) {\r\n      var base,\r\n        s = isNum ? str : str.replace(whitespaceOrPlus, '');\r\n\r\n      // No exception on Infinity or NaN.\r\n      if (isInfinityOrNaN.test(s)) {\r\n        x.s = isNaN(s) ? null : s < 0 ? -1 : 1;\r\n      } else {\r\n        if (!isNum) {\r\n\r\n          // basePrefix = /^(-?)0([xbo])(?=\\w[\\w.]*$)/i\r\n          s = s.replace(basePrefix, function (m, p1, p2) {\r\n            base = (p2 = p2.toLowerCase()) == 'x' ? 16 : p2 == 'b' ? 2 : 8;\r\n            return !b || b == base ? p1 : m;\r\n          });\r\n\r\n          if (b) {\r\n            base = b;\r\n\r\n            // E.g. '1.' to '1', '.1' to '0.1'\r\n            s = s.replace(dotAfter, '$1').replace(dotBefore, '0.$1');\r\n          }\r\n\r\n          if (str != s) return new BigNumber(s, base);\r\n        }\r\n\r\n        // '[BigNumber Error] Not a number: {n}'\r\n        // '[BigNumber Error] Not a base {b} number: {n}'\r\n        if (BigNumber.DEBUG) {\r\n          throw Error\r\n            (bignumberError + 'Not a' + (b ? ' base ' + b : '') + ' number: ' + str);\r\n        }\r\n\r\n        // NaN\r\n        x.s = null;\r\n      }\r\n\r\n      x.c = x.e = null;\r\n    }\r\n  })();\r\n\r\n\r\n  /*\r\n   * Round x to sd significant digits using rounding mode rm. Check for over/under-flow.\r\n   * If r is truthy, it is known that there are more digits after the rounding digit.\r\n   */\r\n  function round(x, sd, rm, r) {\r\n    var d, i, j, k, n, ni, rd,\r\n      xc = x.c,\r\n      pows10 = POWS_TEN;\r\n\r\n    // if x is not Infinity or NaN...\r\n    if (xc) {\r\n\r\n      // rd is the rounding digit, i.e. the digit after the digit that may be rounded up.\r\n      // n is a base 1e14 number, the value of the element of array x.c containing rd.\r\n      // ni is the index of n within x.c.\r\n      // d is the number of digits of n.\r\n      // i is the index of rd within n including leading zeros.\r\n      // j is the actual index of rd within n (if < 0, rd is a leading zero).\r\n      out: {\r\n\r\n        // Get the number of digits of the first element of xc.\r\n        for (d = 1, k = xc[0]; k >= 10; k /= 10, d++);\r\n        i = sd - d;\r\n\r\n        // If the rounding digit is in the first element of xc...\r\n        if (i < 0) {\r\n          i += LOG_BASE;\r\n          j = sd;\r\n          n = xc[ni = 0];\r\n\r\n          // Get the rounding digit at index j of n.\r\n          rd = mathfloor(n / pows10[d - j - 1] % 10);\r\n        } else {\r\n          ni = mathceil((i + 1) / LOG_BASE);\r\n\r\n          if (ni >= xc.length) {\r\n\r\n            if (r) {\r\n\r\n              // Needed by sqrt.\r\n              for (; xc.length <= ni; xc.push(0));\r\n              n = rd = 0;\r\n              d = 1;\r\n              i %= LOG_BASE;\r\n              j = i - LOG_BASE + 1;\r\n            } else {\r\n              break out;\r\n            }\r\n          } else {\r\n            n = k = xc[ni];\r\n\r\n            // Get the number of digits of n.\r\n            for (d = 1; k >= 10; k /= 10, d++);\r\n\r\n            // Get the index of rd within n.\r\n            i %= LOG_BASE;\r\n\r\n            // Get the index of rd within n, adjusted for leading zeros.\r\n            // The number of leading zeros of n is given by LOG_BASE - d.\r\n            j = i - LOG_BASE + d;\r\n\r\n            // Get the rounding digit at index j of n.\r\n            rd = j < 0 ? 0 : mathfloor(n / pows10[d - j - 1] % 10);\r\n          }\r\n        }\r\n\r\n        r = r || sd < 0 ||\r\n\r\n        // Are there any non-zero digits after the rounding digit?\r\n        // The expression  n % pows10[d - j - 1]  returns all digits of n to the right\r\n        // of the digit at j, e.g. if n is 908714 and j is 2, the expression gives 714.\r\n         xc[ni + 1] != null || (j < 0 ? n : n % pows10[d - j - 1]);\r\n\r\n        r = rm < 4\r\n         ? (rd || r) && (rm == 0 || rm == (x.s < 0 ? 3 : 2))\r\n         : rd > 5 || rd == 5 && (rm == 4 || r || rm == 6 &&\r\n\r\n          // Check whether the digit to the left of the rounding digit is odd.\r\n          ((i > 0 ? j > 0 ? n / pows10[d - j] : 0 : xc[ni - 1]) % 10) & 1 ||\r\n           rm == (x.s < 0 ? 8 : 7));\r\n\r\n        if (sd < 1 || !xc[0]) {\r\n          xc.length = 0;\r\n\r\n          if (r) {\r\n\r\n            // Convert sd to decimal places.\r\n            sd -= x.e + 1;\r\n\r\n            // 1, 0.1, 0.01, 0.001, 0.0001 etc.\r\n            xc[0] = pows10[(LOG_BASE - sd % LOG_BASE) % LOG_BASE];\r\n            x.e = -sd || 0;\r\n          } else {\r\n\r\n            // Zero.\r\n            xc[0] = x.e = 0;\r\n          }\r\n\r\n          return x;\r\n        }\r\n\r\n        // Remove excess digits.\r\n        if (i == 0) {\r\n          xc.length = ni;\r\n          k = 1;\r\n          ni--;\r\n        } else {\r\n          xc.length = ni + 1;\r\n          k = pows10[LOG_BASE - i];\r\n\r\n          // E.g. 56700 becomes 56000 if 7 is the rounding digit.\r\n          // j > 0 means i > number of leading zeros of n.\r\n          xc[ni] = j > 0 ? mathfloor(n / pows10[d - j] % pows10[j]) * k : 0;\r\n        }\r\n\r\n        // Round up?\r\n        if (r) {\r\n\r\n          for (; ;) {\r\n\r\n            // If the digit to be rounded up is in the first element of xc...\r\n            if (ni == 0) {\r\n\r\n              // i will be the length of xc[0] before k is added.\r\n              for (i = 1, j = xc[0]; j >= 10; j /= 10, i++);\r\n              j = xc[0] += k;\r\n              for (k = 1; j >= 10; j /= 10, k++);\r\n\r\n              // if i != k the length has increased.\r\n              if (i != k) {\r\n                x.e++;\r\n                if (xc[0] == BASE) xc[0] = 1;\r\n              }\r\n\r\n              break;\r\n            } else {\r\n              xc[ni] += k;\r\n              if (xc[ni] != BASE) break;\r\n              xc[ni--] = 0;\r\n              k = 1;\r\n            }\r\n          }\r\n        }\r\n\r\n        // Remove trailing zeros.\r\n        for (i = xc.length; xc[--i] === 0; xc.pop());\r\n      }\r\n\r\n      // Overflow? Infinity.\r\n      if (x.e > MAX_EXP) {\r\n        x.c = x.e = null;\r\n\r\n      // Underflow? Zero.\r\n      } else if (x.e < MIN_EXP) {\r\n        x.c = [x.e = 0];\r\n      }\r\n    }\r\n\r\n    return x;\r\n  }\r\n\r\n\r\n  function valueOf(n) {\r\n    var str,\r\n      e = n.e;\r\n\r\n    if (e === null) return n.toString();\r\n\r\n    str = coeffToString(n.c);\r\n\r\n    str = e <= TO_EXP_NEG || e >= TO_EXP_POS\r\n      ? toExponential(str, e)\r\n      : toFixedPoint(str, e, '0');\r\n\r\n    return n.s < 0 ? '-' + str : str;\r\n  }\r\n\r\n\r\n  // PROTOTYPE/INSTANCE METHODS\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the absolute value of this BigNumber.\r\n   */\r\n  P.absoluteValue = P.abs = function () {\r\n    var x = new BigNumber(this);\r\n    if (x.s < 0) x.s = 1;\r\n    return x;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return\r\n   *   1 if the value of this BigNumber is greater than the value of BigNumber(y, b),\r\n   *   -1 if the value of this BigNumber is less than the value of BigNumber(y, b),\r\n   *   0 if they have the same value,\r\n   *   or null if the value of either is NaN.\r\n   */\r\n  P.comparedTo = function (y, b) {\r\n    return compare(this, new BigNumber(y, b));\r\n  };\r\n\r\n\r\n  /*\r\n   * If dp is undefined or null or true or false, return the number of decimal places of the\r\n   * value of this BigNumber, or null if the value of this BigNumber is Infinity or NaN.\r\n   *\r\n   * Otherwise, if dp is a number, return a new BigNumber whose value is the value of this\r\n   * BigNumber rounded to a maximum of dp decimal places using rounding mode rm, or\r\n   * ROUNDING_MODE if rm is omitted.\r\n   *\r\n   * [dp] {number} Decimal places: integer, 0 to MAX inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp|rm}'\r\n   */\r\n  P.decimalPlaces = P.dp = function (dp, rm) {\r\n    var c, n, v,\r\n      x = this;\r\n\r\n    if (dp != null) {\r\n      intCheck(dp, 0, MAX);\r\n      if (rm == null) rm = ROUNDING_MODE;\r\n      else intCheck(rm, 0, 8);\r\n\r\n      return round(new BigNumber(x), dp + x.e + 1, rm);\r\n    }\r\n\r\n    if (!(c = x.c)) return null;\r\n    n = ((v = c.length - 1) - bitFloor(this.e / LOG_BASE)) * LOG_BASE;\r\n\r\n    // Subtract the number of trailing zeros of the last number.\r\n    if (v = c[v]) for (; v % 10 == 0; v /= 10, n--);\r\n    if (n < 0) n = 0;\r\n\r\n    return n;\r\n  };\r\n\r\n\r\n  /*\r\n   *  n / 0 = I\r\n   *  n / N = N\r\n   *  n / I = 0\r\n   *  0 / n = 0\r\n   *  0 / 0 = N\r\n   *  0 / N = N\r\n   *  0 / I = 0\r\n   *  N / n = N\r\n   *  N / 0 = N\r\n   *  N / N = N\r\n   *  N / I = N\r\n   *  I / n = I\r\n   *  I / 0 = I\r\n   *  I / N = N\r\n   *  I / I = N\r\n   *\r\n   * Return a new BigNumber whose value is the value of this BigNumber divided by the value of\r\n   * BigNumber(y, b), rounded according to DECIMAL_PLACES and ROUNDING_MODE.\r\n   */\r\n  P.dividedBy = P.div = function (y, b) {\r\n    return div(this, new BigNumber(y, b), DECIMAL_PLACES, ROUNDING_MODE);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the integer part of dividing the value of this\r\n   * BigNumber by the value of BigNumber(y, b).\r\n   */\r\n  P.dividedToIntegerBy = P.idiv = function (y, b) {\r\n    return div(this, new BigNumber(y, b), 0, 1);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a BigNumber whose value is the value of this BigNumber exponentiated by n.\r\n   *\r\n   * If m is present, return the result modulo m.\r\n   * If n is negative round according to DECIMAL_PLACES and ROUNDING_MODE.\r\n   * If POW_PRECISION is non-zero and m is not present, round to POW_PRECISION using ROUNDING_MODE.\r\n   *\r\n   * The modular power operation works efficiently when x, n, and m are integers, otherwise it\r\n   * is equivalent to calculating x.exponentiatedBy(n).modulo(m) with a POW_PRECISION of 0.\r\n   *\r\n   * n {number|string|BigNumber} The exponent. An integer.\r\n   * [m] {number|string|BigNumber} The modulus.\r\n   *\r\n   * '[BigNumber Error] Exponent not an integer: {n}'\r\n   */\r\n  P.exponentiatedBy = P.pow = function (n, m) {\r\n    var half, isModExp, i, k, more, nIsBig, nIsNeg, nIsOdd, y,\r\n      x = this;\r\n\r\n    n = new BigNumber(n);\r\n\r\n    // Allow NaN and Infinity, but not other non-integers.\r\n    if (n.c && !n.isInteger()) {\r\n      throw Error\r\n        (bignumberError + 'Exponent not an integer: ' + valueOf(n));\r\n    }\r\n\r\n    if (m != null) m = new BigNumber(m);\r\n\r\n    // Exponent of MAX_SAFE_INTEGER is 15.\r\n    nIsBig = n.e > 14;\r\n\r\n    // If x is NaN, Infinity, 0 or 1, or n is Infinity, NaN or 0.\r\n    if (!x.c || !x.c[0] || x.c[0] == 1 && !x.e && x.c.length == 1 || !n.c || !n.c[0]) {\r\n\r\n      // The sign of the result of pow when x is negative depends on the evenness of n.\r\n      // If +n overflows to Infinity, the evenness of n would be not be known.\r\n      y = new BigNumber(Math.pow(+valueOf(x), nIsBig ? n.s * (2 - isOdd(n)) : +valueOf(n)));\r\n      return m ? y.mod(m) : y;\r\n    }\r\n\r\n    nIsNeg = n.s < 0;\r\n\r\n    if (m) {\r\n\r\n      // x % m returns NaN if abs(m) is zero, or m is NaN.\r\n      if (m.c ? !m.c[0] : !m.s) return new BigNumber(NaN);\r\n\r\n      isModExp = !nIsNeg && x.isInteger() && m.isInteger();\r\n\r\n      if (isModExp) x = x.mod(m);\r\n\r\n    // Overflow to Infinity: >=2**1e10 or >=1.0000024**1e15.\r\n    // Underflow to 0: <=0.79**1e10 or <=0.9999975**1e15.\r\n    } else if (n.e > 9 && (x.e > 0 || x.e < -1 || (x.e == 0\r\n      // [1, 240000000]\r\n      ? x.c[0] > 1 || nIsBig && x.c[1] >= 24e7\r\n      // [80000000000000]  [99999750000000]\r\n      : x.c[0] < 8e13 || nIsBig && x.c[0] <= 9999975e7))) {\r\n\r\n      // If x is negative and n is odd, k = -0, else k = 0.\r\n      k = x.s < 0 && isOdd(n) ? -0 : 0;\r\n\r\n      // If x >= 1, k = Infinity.\r\n      if (x.e > -1) k = 1 / k;\r\n\r\n      // If n is negative return 0, else return Infinity.\r\n      return new BigNumber(nIsNeg ? 1 / k : k);\r\n\r\n    } else if (POW_PRECISION) {\r\n\r\n      // Truncating each coefficient array to a length of k after each multiplication\r\n      // equates to truncating significant digits to POW_PRECISION + [28, 41],\r\n      // i.e. there will be a minimum of 28 guard digits retained.\r\n      k = mathceil(POW_PRECISION / LOG_BASE + 2);\r\n    }\r\n\r\n    if (nIsBig) {\r\n      half = new BigNumber(0.5);\r\n      if (nIsNeg) n.s = 1;\r\n      nIsOdd = isOdd(n);\r\n    } else {\r\n      i = Math.abs(+valueOf(n));\r\n      nIsOdd = i % 2;\r\n    }\r\n\r\n    y = new BigNumber(ONE);\r\n\r\n    // Performs 54 loop iterations for n of 9007199254740991.\r\n    for (; ;) {\r\n\r\n      if (nIsOdd) {\r\n        y = y.times(x);\r\n        if (!y.c) break;\r\n\r\n        if (k) {\r\n          if (y.c.length > k) y.c.length = k;\r\n        } else if (isModExp) {\r\n          y = y.mod(m);    //y = y.minus(div(y, m, 0, MODULO_MODE).times(m));\r\n        }\r\n      }\r\n\r\n      if (i) {\r\n        i = mathfloor(i / 2);\r\n        if (i === 0) break;\r\n        nIsOdd = i % 2;\r\n      } else {\r\n        n = n.times(half);\r\n        round(n, n.e + 1, 1);\r\n\r\n        if (n.e > 14) {\r\n          nIsOdd = isOdd(n);\r\n        } else {\r\n          i = +valueOf(n);\r\n          if (i === 0) break;\r\n          nIsOdd = i % 2;\r\n        }\r\n      }\r\n\r\n      x = x.times(x);\r\n\r\n      if (k) {\r\n        if (x.c && x.c.length > k) x.c.length = k;\r\n      } else if (isModExp) {\r\n        x = x.mod(m);    //x = x.minus(div(x, m, 0, MODULO_MODE).times(m));\r\n      }\r\n    }\r\n\r\n    if (isModExp) return y;\r\n    if (nIsNeg) y = ONE.div(y);\r\n\r\n    return m ? y.mod(m) : k ? round(y, POW_PRECISION, ROUNDING_MODE, more) : y;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the value of this BigNumber rounded to an integer\r\n   * using rounding mode rm, or ROUNDING_MODE if rm is omitted.\r\n   *\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {rm}'\r\n   */\r\n  P.integerValue = function (rm) {\r\n    var n = new BigNumber(this);\r\n    if (rm == null) rm = ROUNDING_MODE;\r\n    else intCheck(rm, 0, 8);\r\n    return round(n, n.e + 1, rm);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is equal to the value of BigNumber(y, b),\r\n   * otherwise return false.\r\n   */\r\n  P.isEqualTo = P.eq = function (y, b) {\r\n    return compare(this, new BigNumber(y, b)) === 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is a finite number, otherwise return false.\r\n   */\r\n  P.isFinite = function () {\r\n    return !!this.c;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is greater than the value of BigNumber(y, b),\r\n   * otherwise return false.\r\n   */\r\n  P.isGreaterThan = P.gt = function (y, b) {\r\n    return compare(this, new BigNumber(y, b)) > 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is greater than or equal to the value of\r\n   * BigNumber(y, b), otherwise return false.\r\n   */\r\n  P.isGreaterThanOrEqualTo = P.gte = function (y, b) {\r\n    return (b = compare(this, new BigNumber(y, b))) === 1 || b === 0;\r\n\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is an integer, otherwise return false.\r\n   */\r\n  P.isInteger = function () {\r\n    return !!this.c && bitFloor(this.e / LOG_BASE) > this.c.length - 2;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is less than the value of BigNumber(y, b),\r\n   * otherwise return false.\r\n   */\r\n  P.isLessThan = P.lt = function (y, b) {\r\n    return compare(this, new BigNumber(y, b)) < 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is less than or equal to the value of\r\n   * BigNumber(y, b), otherwise return false.\r\n   */\r\n  P.isLessThanOrEqualTo = P.lte = function (y, b) {\r\n    return (b = compare(this, new BigNumber(y, b))) === -1 || b === 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is NaN, otherwise return false.\r\n   */\r\n  P.isNaN = function () {\r\n    return !this.s;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is negative, otherwise return false.\r\n   */\r\n  P.isNegative = function () {\r\n    return this.s < 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is positive, otherwise return false.\r\n   */\r\n  P.isPositive = function () {\r\n    return this.s > 0;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return true if the value of this BigNumber is 0 or -0, otherwise return false.\r\n   */\r\n  P.isZero = function () {\r\n    return !!this.c && this.c[0] == 0;\r\n  };\r\n\r\n\r\n  /*\r\n   *  n - 0 = n\r\n   *  n - N = N\r\n   *  n - I = -I\r\n   *  0 - n = -n\r\n   *  0 - 0 = 0\r\n   *  0 - N = N\r\n   *  0 - I = -I\r\n   *  N - n = N\r\n   *  N - 0 = N\r\n   *  N - N = N\r\n   *  N - I = N\r\n   *  I - n = I\r\n   *  I - 0 = I\r\n   *  I - N = N\r\n   *  I - I = N\r\n   *\r\n   * Return a new BigNumber whose value is the value of this BigNumber minus the value of\r\n   * BigNumber(y, b).\r\n   */\r\n  P.minus = function (y, b) {\r\n    var i, j, t, xLTy,\r\n      x = this,\r\n      a = x.s;\r\n\r\n    y = new BigNumber(y, b);\r\n    b = y.s;\r\n\r\n    // Either NaN?\r\n    if (!a || !b) return new BigNumber(NaN);\r\n\r\n    // Signs differ?\r\n    if (a != b) {\r\n      y.s = -b;\r\n      return x.plus(y);\r\n    }\r\n\r\n    var xe = x.e / LOG_BASE,\r\n      ye = y.e / LOG_BASE,\r\n      xc = x.c,\r\n      yc = y.c;\r\n\r\n    if (!xe || !ye) {\r\n\r\n      // Either Infinity?\r\n      if (!xc || !yc) return xc ? (y.s = -b, y) : new BigNumber(yc ? x : NaN);\r\n\r\n      // Either zero?\r\n      if (!xc[0] || !yc[0]) {\r\n\r\n        // Return y if y is non-zero, x if x is non-zero, or zero if both are zero.\r\n        return yc[0] ? (y.s = -b, y) : new BigNumber(xc[0] ? x :\r\n\r\n         // IEEE 754 (2008) 6.3: n - n = -0 when rounding to -Infinity\r\n         ROUNDING_MODE == 3 ? -0 : 0);\r\n      }\r\n    }\r\n\r\n    xe = bitFloor(xe);\r\n    ye = bitFloor(ye);\r\n    xc = xc.slice();\r\n\r\n    // Determine which is the bigger number.\r\n    if (a = xe - ye) {\r\n\r\n      if (xLTy = a < 0) {\r\n        a = -a;\r\n        t = xc;\r\n      } else {\r\n        ye = xe;\r\n        t = yc;\r\n      }\r\n\r\n      t.reverse();\r\n\r\n      // Prepend zeros to equalise exponents.\r\n      for (b = a; b--; t.push(0));\r\n      t.reverse();\r\n    } else {\r\n\r\n      // Exponents equal. Check digit by digit.\r\n      j = (xLTy = (a = xc.length) < (b = yc.length)) ? a : b;\r\n\r\n      for (a = b = 0; b < j; b++) {\r\n\r\n        if (xc[b] != yc[b]) {\r\n          xLTy = xc[b] < yc[b];\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    // x < y? Point xc to the array of the bigger number.\r\n    if (xLTy) {\r\n      t = xc;\r\n      xc = yc;\r\n      yc = t;\r\n      y.s = -y.s;\r\n    }\r\n\r\n    b = (j = yc.length) - (i = xc.length);\r\n\r\n    // Append zeros to xc if shorter.\r\n    // No need to add zeros to yc if shorter as subtract only needs to start at yc.length.\r\n    if (b > 0) for (; b--; xc[i++] = 0);\r\n    b = BASE - 1;\r\n\r\n    // Subtract yc from xc.\r\n    for (; j > a;) {\r\n\r\n      if (xc[--j] < yc[j]) {\r\n        for (i = j; i && !xc[--i]; xc[i] = b);\r\n        --xc[i];\r\n        xc[j] += BASE;\r\n      }\r\n\r\n      xc[j] -= yc[j];\r\n    }\r\n\r\n    // Remove leading zeros and adjust exponent accordingly.\r\n    for (; xc[0] == 0; xc.splice(0, 1), --ye);\r\n\r\n    // Zero?\r\n    if (!xc[0]) {\r\n\r\n      // Following IEEE 754 (2008) 6.3,\r\n      // n - n = +0  but  n - n = -0  when rounding towards -Infinity.\r\n      y.s = ROUNDING_MODE == 3 ? -1 : 1;\r\n      y.c = [y.e = 0];\r\n      return y;\r\n    }\r\n\r\n    // No need to check for Infinity as +x - +y != Infinity && -x - -y != Infinity\r\n    // for finite x and y.\r\n    return normalise(y, xc, ye);\r\n  };\r\n\r\n\r\n  /*\r\n   *   n % 0 =  N\r\n   *   n % N =  N\r\n   *   n % I =  n\r\n   *   0 % n =  0\r\n   *  -0 % n = -0\r\n   *   0 % 0 =  N\r\n   *   0 % N =  N\r\n   *   0 % I =  0\r\n   *   N % n =  N\r\n   *   N % 0 =  N\r\n   *   N % N =  N\r\n   *   N % I =  N\r\n   *   I % n =  N\r\n   *   I % 0 =  N\r\n   *   I % N =  N\r\n   *   I % I =  N\r\n   *\r\n   * Return a new BigNumber whose value is the value of this BigNumber modulo the value of\r\n   * BigNumber(y, b). The result depends on the value of MODULO_MODE.\r\n   */\r\n  P.modulo = P.mod = function (y, b) {\r\n    var q, s,\r\n      x = this;\r\n\r\n    y = new BigNumber(y, b);\r\n\r\n    // Return NaN if x is Infinity or NaN, or y is NaN or zero.\r\n    if (!x.c || !y.s || y.c && !y.c[0]) {\r\n      return new BigNumber(NaN);\r\n\r\n    // Return x if y is Infinity or x is zero.\r\n    } else if (!y.c || x.c && !x.c[0]) {\r\n      return new BigNumber(x);\r\n    }\r\n\r\n    if (MODULO_MODE == 9) {\r\n\r\n      // Euclidian division: q = sign(y) * floor(x / abs(y))\r\n      // r = x - qy    where  0 <= r < abs(y)\r\n      s = y.s;\r\n      y.s = 1;\r\n      q = div(x, y, 0, 3);\r\n      y.s = s;\r\n      q.s *= s;\r\n    } else {\r\n      q = div(x, y, 0, MODULO_MODE);\r\n    }\r\n\r\n    y = x.minus(q.times(y));\r\n\r\n    // To match JavaScript %, ensure sign of zero is sign of dividend.\r\n    if (!y.c[0] && MODULO_MODE == 1) y.s = x.s;\r\n\r\n    return y;\r\n  };\r\n\r\n\r\n  /*\r\n   *  n * 0 = 0\r\n   *  n * N = N\r\n   *  n * I = I\r\n   *  0 * n = 0\r\n   *  0 * 0 = 0\r\n   *  0 * N = N\r\n   *  0 * I = N\r\n   *  N * n = N\r\n   *  N * 0 = N\r\n   *  N * N = N\r\n   *  N * I = N\r\n   *  I * n = I\r\n   *  I * 0 = N\r\n   *  I * N = N\r\n   *  I * I = I\r\n   *\r\n   * Return a new BigNumber whose value is the value of this BigNumber multiplied by the value\r\n   * of BigNumber(y, b).\r\n   */\r\n  P.multipliedBy = P.times = function (y, b) {\r\n    var c, e, i, j, k, m, xcL, xlo, xhi, ycL, ylo, yhi, zc,\r\n      base, sqrtBase,\r\n      x = this,\r\n      xc = x.c,\r\n      yc = (y = new BigNumber(y, b)).c;\r\n\r\n    // Either NaN, Infinity or 0?\r\n    if (!xc || !yc || !xc[0] || !yc[0]) {\r\n\r\n      // Return NaN if either is NaN, or one is 0 and the other is Infinity.\r\n      if (!x.s || !y.s || xc && !xc[0] && !yc || yc && !yc[0] && !xc) {\r\n        y.c = y.e = y.s = null;\r\n      } else {\r\n        y.s *= x.s;\r\n\r\n        // Return Infinity if either is Infinity.\r\n        if (!xc || !yc) {\r\n          y.c = y.e = null;\r\n\r\n        // Return 0 if either is 0.\r\n        } else {\r\n          y.c = [0];\r\n          y.e = 0;\r\n        }\r\n      }\r\n\r\n      return y;\r\n    }\r\n\r\n    e = bitFloor(x.e / LOG_BASE) + bitFloor(y.e / LOG_BASE);\r\n    y.s *= x.s;\r\n    xcL = xc.length;\r\n    ycL = yc.length;\r\n\r\n    // Ensure xc points to longer array and xcL to its length.\r\n    if (xcL < ycL) {\r\n      zc = xc;\r\n      xc = yc;\r\n      yc = zc;\r\n      i = xcL;\r\n      xcL = ycL;\r\n      ycL = i;\r\n    }\r\n\r\n    // Initialise the result array with zeros.\r\n    for (i = xcL + ycL, zc = []; i--; zc.push(0));\r\n\r\n    base = BASE;\r\n    sqrtBase = SQRT_BASE;\r\n\r\n    for (i = ycL; --i >= 0;) {\r\n      c = 0;\r\n      ylo = yc[i] % sqrtBase;\r\n      yhi = yc[i] / sqrtBase | 0;\r\n\r\n      for (k = xcL, j = i + k; j > i;) {\r\n        xlo = xc[--k] % sqrtBase;\r\n        xhi = xc[k] / sqrtBase | 0;\r\n        m = yhi * xlo + xhi * ylo;\r\n        xlo = ylo * xlo + ((m % sqrtBase) * sqrtBase) + zc[j] + c;\r\n        c = (xlo / base | 0) + (m / sqrtBase | 0) + yhi * xhi;\r\n        zc[j--] = xlo % base;\r\n      }\r\n\r\n      zc[j] = c;\r\n    }\r\n\r\n    if (c) {\r\n      ++e;\r\n    } else {\r\n      zc.splice(0, 1);\r\n    }\r\n\r\n    return normalise(y, zc, e);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the value of this BigNumber negated,\r\n   * i.e. multiplied by -1.\r\n   */\r\n  P.negated = function () {\r\n    var x = new BigNumber(this);\r\n    x.s = -x.s || null;\r\n    return x;\r\n  };\r\n\r\n\r\n  /*\r\n   *  n + 0 = n\r\n   *  n + N = N\r\n   *  n + I = I\r\n   *  0 + n = n\r\n   *  0 + 0 = 0\r\n   *  0 + N = N\r\n   *  0 + I = I\r\n   *  N + n = N\r\n   *  N + 0 = N\r\n   *  N + N = N\r\n   *  N + I = N\r\n   *  I + n = I\r\n   *  I + 0 = I\r\n   *  I + N = N\r\n   *  I + I = I\r\n   *\r\n   * Return a new BigNumber whose value is the value of this BigNumber plus the value of\r\n   * BigNumber(y, b).\r\n   */\r\n  P.plus = function (y, b) {\r\n    var t,\r\n      x = this,\r\n      a = x.s;\r\n\r\n    y = new BigNumber(y, b);\r\n    b = y.s;\r\n\r\n    // Either NaN?\r\n    if (!a || !b) return new BigNumber(NaN);\r\n\r\n    // Signs differ?\r\n     if (a != b) {\r\n      y.s = -b;\r\n      return x.minus(y);\r\n    }\r\n\r\n    var xe = x.e / LOG_BASE,\r\n      ye = y.e / LOG_BASE,\r\n      xc = x.c,\r\n      yc = y.c;\r\n\r\n    if (!xe || !ye) {\r\n\r\n      // Return Infinity if either Infinity.\r\n      if (!xc || !yc) return new BigNumber(a / 0);\r\n\r\n      // Either zero?\r\n      // Return y if y is non-zero, x if x is non-zero, or zero if both are zero.\r\n      if (!xc[0] || !yc[0]) return yc[0] ? y : new BigNumber(xc[0] ? x : a * 0);\r\n    }\r\n\r\n    xe = bitFloor(xe);\r\n    ye = bitFloor(ye);\r\n    xc = xc.slice();\r\n\r\n    // Prepend zeros to equalise exponents. Faster to use reverse then do unshifts.\r\n    if (a = xe - ye) {\r\n      if (a > 0) {\r\n        ye = xe;\r\n        t = yc;\r\n      } else {\r\n        a = -a;\r\n        t = xc;\r\n      }\r\n\r\n      t.reverse();\r\n      for (; a--; t.push(0));\r\n      t.reverse();\r\n    }\r\n\r\n    a = xc.length;\r\n    b = yc.length;\r\n\r\n    // Point xc to the longer array, and b to the shorter length.\r\n    if (a - b < 0) {\r\n      t = yc;\r\n      yc = xc;\r\n      xc = t;\r\n      b = a;\r\n    }\r\n\r\n    // Only start adding at yc.length - 1 as the further digits of xc can be ignored.\r\n    for (a = 0; b;) {\r\n      a = (xc[--b] = xc[b] + yc[b] + a) / BASE | 0;\r\n      xc[b] = BASE === xc[b] ? 0 : xc[b] % BASE;\r\n    }\r\n\r\n    if (a) {\r\n      xc = [a].concat(xc);\r\n      ++ye;\r\n    }\r\n\r\n    // No need to check for zero, as +x + +y != 0 && -x + -y != 0\r\n    // ye = MAX_EXP + 1 possible\r\n    return normalise(y, xc, ye);\r\n  };\r\n\r\n\r\n  /*\r\n   * If sd is undefined or null or true or false, return the number of significant digits of\r\n   * the value of this BigNumber, or null if the value of this BigNumber is Infinity or NaN.\r\n   * If sd is true include integer-part trailing zeros in the count.\r\n   *\r\n   * Otherwise, if sd is a number, return a new BigNumber whose value is the value of this\r\n   * BigNumber rounded to a maximum of sd significant digits using rounding mode rm, or\r\n   * ROUNDING_MODE if rm is omitted.\r\n   *\r\n   * sd {number|boolean} number: significant digits: integer, 1 to MAX inclusive.\r\n   *                     boolean: whether to count integer-part trailing zeros: true or false.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {sd|rm}'\r\n   */\r\n  P.precision = P.sd = function (sd, rm) {\r\n    var c, n, v,\r\n      x = this;\r\n\r\n    if (sd != null && sd !== !!sd) {\r\n      intCheck(sd, 1, MAX);\r\n      if (rm == null) rm = ROUNDING_MODE;\r\n      else intCheck(rm, 0, 8);\r\n\r\n      return round(new BigNumber(x), sd, rm);\r\n    }\r\n\r\n    if (!(c = x.c)) return null;\r\n    v = c.length - 1;\r\n    n = v * LOG_BASE + 1;\r\n\r\n    if (v = c[v]) {\r\n\r\n      // Subtract the number of trailing zeros of the last element.\r\n      for (; v % 10 == 0; v /= 10, n--);\r\n\r\n      // Add the number of digits of the first element.\r\n      for (v = c[0]; v >= 10; v /= 10, n++);\r\n    }\r\n\r\n    if (sd && x.e + 1 > n) n = x.e + 1;\r\n\r\n    return n;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a new BigNumber whose value is the value of this BigNumber shifted by k places\r\n   * (powers of 10). Shift to the right if n > 0, and to the left if n < 0.\r\n   *\r\n   * k {number} Integer, -MAX_SAFE_INTEGER to MAX_SAFE_INTEGER inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {k}'\r\n   */\r\n  P.shiftedBy = function (k) {\r\n    intCheck(k, -MAX_SAFE_INTEGER, MAX_SAFE_INTEGER);\r\n    return this.times('1e' + k);\r\n  };\r\n\r\n\r\n  /*\r\n   *  sqrt(-n) =  N\r\n   *  sqrt(N) =  N\r\n   *  sqrt(-I) =  N\r\n   *  sqrt(I) =  I\r\n   *  sqrt(0) =  0\r\n   *  sqrt(-0) = -0\r\n   *\r\n   * Return a new BigNumber whose value is the square root of the value of this BigNumber,\r\n   * rounded according to DECIMAL_PLACES and ROUNDING_MODE.\r\n   */\r\n  P.squareRoot = P.sqrt = function () {\r\n    var m, n, r, rep, t,\r\n      x = this,\r\n      c = x.c,\r\n      s = x.s,\r\n      e = x.e,\r\n      dp = DECIMAL_PLACES + 4,\r\n      half = new BigNumber('0.5');\r\n\r\n    // Negative/NaN/Infinity/zero?\r\n    if (s !== 1 || !c || !c[0]) {\r\n      return new BigNumber(!s || s < 0 && (!c || c[0]) ? NaN : c ? x : 1 / 0);\r\n    }\r\n\r\n    // Initial estimate.\r\n    s = Math.sqrt(+valueOf(x));\r\n\r\n    // Math.sqrt underflow/overflow?\r\n    // Pass x to Math.sqrt as integer, then adjust the exponent of the result.\r\n    if (s == 0 || s == 1 / 0) {\r\n      n = coeffToString(c);\r\n      if ((n.length + e) % 2 == 0) n += '0';\r\n      s = Math.sqrt(+n);\r\n      e = bitFloor((e + 1) / 2) - (e < 0 || e % 2);\r\n\r\n      if (s == 1 / 0) {\r\n        n = '5e' + e;\r\n      } else {\r\n        n = s.toExponential();\r\n        n = n.slice(0, n.indexOf('e') + 1) + e;\r\n      }\r\n\r\n      r = new BigNumber(n);\r\n    } else {\r\n      r = new BigNumber(s + '');\r\n    }\r\n\r\n    // Check for zero.\r\n    // r could be zero if MIN_EXP is changed after the this value was created.\r\n    // This would cause a division by zero (x/t) and hence Infinity below, which would cause\r\n    // coeffToString to throw.\r\n    if (r.c[0]) {\r\n      e = r.e;\r\n      s = e + dp;\r\n      if (s < 3) s = 0;\r\n\r\n      // Newton-Raphson iteration.\r\n      for (; ;) {\r\n        t = r;\r\n        r = half.times(t.plus(div(x, t, dp, 1)));\r\n\r\n        if (coeffToString(t.c).slice(0, s) === (n = coeffToString(r.c)).slice(0, s)) {\r\n\r\n          // The exponent of r may here be one less than the final result exponent,\r\n          // e.g 0.0009999 (e-4) --> 0.001 (e-3), so adjust s so the rounding digits\r\n          // are indexed correctly.\r\n          if (r.e < e) --s;\r\n          n = n.slice(s - 3, s + 1);\r\n\r\n          // The 4th rounding digit may be in error by -1 so if the 4 rounding digits\r\n          // are 9999 or 4999 (i.e. approaching a rounding boundary) continue the\r\n          // iteration.\r\n          if (n == '9999' || !rep && n == '4999') {\r\n\r\n            // On the first iteration only, check to see if rounding up gives the\r\n            // exact result as the nines may infinitely repeat.\r\n            if (!rep) {\r\n              round(t, t.e + DECIMAL_PLACES + 2, 0);\r\n\r\n              if (t.times(t).eq(x)) {\r\n                r = t;\r\n                break;\r\n              }\r\n            }\r\n\r\n            dp += 4;\r\n            s += 4;\r\n            rep = 1;\r\n          } else {\r\n\r\n            // If rounding digits are null, 0{0,4} or 50{0,3}, check for exact\r\n            // result. If not, then there are further digits and m will be truthy.\r\n            if (!+n || !+n.slice(1) && n.charAt(0) == '5') {\r\n\r\n              // Truncate to the first rounding digit.\r\n              round(r, r.e + DECIMAL_PLACES + 2, 1);\r\n              m = !r.times(r).eq(x);\r\n            }\r\n\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return round(r, r.e + DECIMAL_PLACES + 1, ROUNDING_MODE, m);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this BigNumber in exponential notation and\r\n   * rounded using ROUNDING_MODE to dp fixed decimal places.\r\n   *\r\n   * [dp] {number} Decimal places. Integer, 0 to MAX inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp|rm}'\r\n   */\r\n  P.toExponential = function (dp, rm) {\r\n    if (dp != null) {\r\n      intCheck(dp, 0, MAX);\r\n      dp++;\r\n    }\r\n    return format(this, dp, rm, 1);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this BigNumber in fixed-point notation rounding\r\n   * to dp fixed decimal places using rounding mode rm, or ROUNDING_MODE if rm is omitted.\r\n   *\r\n   * Note: as with JavaScript's number type, (-0).toFixed(0) is '0',\r\n   * but e.g. (-0.00001).toFixed(0) is '-0'.\r\n   *\r\n   * [dp] {number} Decimal places. Integer, 0 to MAX inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp|rm}'\r\n   */\r\n  P.toFixed = function (dp, rm) {\r\n    if (dp != null) {\r\n      intCheck(dp, 0, MAX);\r\n      dp = dp + this.e + 1;\r\n    }\r\n    return format(this, dp, rm);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this BigNumber in fixed-point notation rounded\r\n   * using rm or ROUNDING_MODE to dp decimal places, and formatted according to the properties\r\n   * of the format or FORMAT object (see BigNumber.set).\r\n   *\r\n   * The formatting object may contain some or all of the properties shown below.\r\n   *\r\n   * FORMAT = {\r\n   *   prefix: '',\r\n   *   groupSize: 3,\r\n   *   secondaryGroupSize: 0,\r\n   *   groupSeparator: ',',\r\n   *   decimalSeparator: '.',\r\n   *   fractionGroupSize: 0,\r\n   *   fractionGroupSeparator: '\\xA0',      // non-breaking space\r\n   *   suffix: ''\r\n   * };\r\n   *\r\n   * [dp] {number} Decimal places. Integer, 0 to MAX inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   * [format] {object} Formatting options. See FORMAT pbject above.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp|rm}'\r\n   * '[BigNumber Error] Argument not an object: {format}'\r\n   */\r\n  P.toFormat = function (dp, rm, format) {\r\n    var str,\r\n      x = this;\r\n\r\n    if (format == null) {\r\n      if (dp != null && rm && typeof rm == 'object') {\r\n        format = rm;\r\n        rm = null;\r\n      } else if (dp && typeof dp == 'object') {\r\n        format = dp;\r\n        dp = rm = null;\r\n      } else {\r\n        format = FORMAT;\r\n      }\r\n    } else if (typeof format != 'object') {\r\n      throw Error\r\n        (bignumberError + 'Argument not an object: ' + format);\r\n    }\r\n\r\n    str = x.toFixed(dp, rm);\r\n\r\n    if (x.c) {\r\n      var i,\r\n        arr = str.split('.'),\r\n        g1 = +format.groupSize,\r\n        g2 = +format.secondaryGroupSize,\r\n        groupSeparator = format.groupSeparator || '',\r\n        intPart = arr[0],\r\n        fractionPart = arr[1],\r\n        isNeg = x.s < 0,\r\n        intDigits = isNeg ? intPart.slice(1) : intPart,\r\n        len = intDigits.length;\r\n\r\n      if (g2) {\r\n        i = g1;\r\n        g1 = g2;\r\n        g2 = i;\r\n        len -= i;\r\n      }\r\n\r\n      if (g1 > 0 && len > 0) {\r\n        i = len % g1 || g1;\r\n        intPart = intDigits.substr(0, i);\r\n        for (; i < len; i += g1) intPart += groupSeparator + intDigits.substr(i, g1);\r\n        if (g2 > 0) intPart += groupSeparator + intDigits.slice(i);\r\n        if (isNeg) intPart = '-' + intPart;\r\n      }\r\n\r\n      str = fractionPart\r\n       ? intPart + (format.decimalSeparator || '') + ((g2 = +format.fractionGroupSize)\r\n        ? fractionPart.replace(new RegExp('\\\\d{' + g2 + '}\\\\B', 'g'),\r\n         '$&' + (format.fractionGroupSeparator || ''))\r\n        : fractionPart)\r\n       : intPart;\r\n    }\r\n\r\n    return (format.prefix || '') + str + (format.suffix || '');\r\n  };\r\n\r\n\r\n  /*\r\n   * Return an array of two BigNumbers representing the value of this BigNumber as a simple\r\n   * fraction with an integer numerator and an integer denominator.\r\n   * The denominator will be a positive non-zero value less than or equal to the specified\r\n   * maximum denominator. If a maximum denominator is not specified, the denominator will be\r\n   * the lowest value necessary to represent the number exactly.\r\n   *\r\n   * [md] {number|string|BigNumber} Integer >= 1, or Infinity. The maximum denominator.\r\n   *\r\n   * '[BigNumber Error] Argument {not an integer|out of range} : {md}'\r\n   */\r\n  P.toFraction = function (md) {\r\n    var d, d0, d1, d2, e, exp, n, n0, n1, q, r, s,\r\n      x = this,\r\n      xc = x.c;\r\n\r\n    if (md != null) {\r\n      n = new BigNumber(md);\r\n\r\n      // Throw if md is less than one or is not an integer, unless it is Infinity.\r\n      if (!n.isInteger() && (n.c || n.s !== 1) || n.lt(ONE)) {\r\n        throw Error\r\n          (bignumberError + 'Argument ' +\r\n            (n.isInteger() ? 'out of range: ' : 'not an integer: ') + valueOf(n));\r\n      }\r\n    }\r\n\r\n    if (!xc) return new BigNumber(x);\r\n\r\n    d = new BigNumber(ONE);\r\n    n1 = d0 = new BigNumber(ONE);\r\n    d1 = n0 = new BigNumber(ONE);\r\n    s = coeffToString(xc);\r\n\r\n    // Determine initial denominator.\r\n    // d is a power of 10 and the minimum max denominator that specifies the value exactly.\r\n    e = d.e = s.length - x.e - 1;\r\n    d.c[0] = POWS_TEN[(exp = e % LOG_BASE) < 0 ? LOG_BASE + exp : exp];\r\n    md = !md || n.comparedTo(d) > 0 ? (e > 0 ? d : n1) : n;\r\n\r\n    exp = MAX_EXP;\r\n    MAX_EXP = 1 / 0;\r\n    n = new BigNumber(s);\r\n\r\n    // n0 = d1 = 0\r\n    n0.c[0] = 0;\r\n\r\n    for (; ;)  {\r\n      q = div(n, d, 0, 1);\r\n      d2 = d0.plus(q.times(d1));\r\n      if (d2.comparedTo(md) == 1) break;\r\n      d0 = d1;\r\n      d1 = d2;\r\n      n1 = n0.plus(q.times(d2 = n1));\r\n      n0 = d2;\r\n      d = n.minus(q.times(d2 = d));\r\n      n = d2;\r\n    }\r\n\r\n    d2 = div(md.minus(d0), d1, 0, 1);\r\n    n0 = n0.plus(d2.times(n1));\r\n    d0 = d0.plus(d2.times(d1));\r\n    n0.s = n1.s = x.s;\r\n    e = e * 2;\r\n\r\n    // Determine which fraction is closer to x, n0/d0 or n1/d1\r\n    r = div(n1, d1, e, ROUNDING_MODE).minus(x).abs().comparedTo(\r\n        div(n0, d0, e, ROUNDING_MODE).minus(x).abs()) < 1 ? [n1, d1] : [n0, d0];\r\n\r\n    MAX_EXP = exp;\r\n\r\n    return r;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return the value of this BigNumber converted to a number primitive.\r\n   */\r\n  P.toNumber = function () {\r\n    return +valueOf(this);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this BigNumber rounded to sd significant digits\r\n   * using rounding mode rm or ROUNDING_MODE. If sd is less than the number of digits\r\n   * necessary to represent the integer part of the value in fixed-point notation, then use\r\n   * exponential notation.\r\n   *\r\n   * [sd] {number} Significant digits. Integer, 1 to MAX inclusive.\r\n   * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n   *\r\n   * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {sd|rm}'\r\n   */\r\n  P.toPrecision = function (sd, rm) {\r\n    if (sd != null) intCheck(sd, 1, MAX);\r\n    return format(this, sd, rm, 2);\r\n  };\r\n\r\n\r\n  /*\r\n   * Return a string representing the value of this BigNumber in base b, or base 10 if b is\r\n   * omitted. If a base is specified, including base 10, round according to DECIMAL_PLACES and\r\n   * ROUNDING_MODE. If a base is not specified, and this BigNumber has a positive exponent\r\n   * that is equal to or greater than TO_EXP_POS, or a negative exponent equal to or less than\r\n   * TO_EXP_NEG, return exponential notation.\r\n   *\r\n   * [b] {number} Integer, 2 to ALPHABET.length inclusive.\r\n   *\r\n   * '[BigNumber Error] Base {not a primitive number|not an integer|out of range}: {b}'\r\n   */\r\n  P.toString = function (b) {\r\n    var str,\r\n      n = this,\r\n      s = n.s,\r\n      e = n.e;\r\n\r\n    // Infinity or NaN?\r\n    if (e === null) {\r\n      if (s) {\r\n        str = 'Infinity';\r\n        if (s < 0) str = '-' + str;\r\n      } else {\r\n        str = 'NaN';\r\n      }\r\n    } else {\r\n      if (b == null) {\r\n        str = e <= TO_EXP_NEG || e >= TO_EXP_POS\r\n         ? toExponential(coeffToString(n.c), e)\r\n         : toFixedPoint(coeffToString(n.c), e, '0');\r\n      } else if (b === 10 && alphabetHasNormalDecimalDigits) {\r\n        n = round(new BigNumber(n), DECIMAL_PLACES + e + 1, ROUNDING_MODE);\r\n        str = toFixedPoint(coeffToString(n.c), n.e, '0');\r\n      } else {\r\n        intCheck(b, 2, ALPHABET.length, 'Base');\r\n        str = convertBase(toFixedPoint(coeffToString(n.c), e, '0'), 10, b, s, true);\r\n      }\r\n\r\n      if (s < 0 && n.c[0]) str = '-' + str;\r\n    }\r\n\r\n    return str;\r\n  };\r\n\r\n\r\n  /*\r\n   * Return as toString, but do not accept a base argument, and include the minus sign for\r\n   * negative zero.\r\n   */\r\n  P.valueOf = P.toJSON = function () {\r\n    return valueOf(this);\r\n  };\r\n\r\n\r\n  P._isBigNumber = true;\r\n\r\n  P[Symbol.toStringTag] = 'BigNumber';\r\n\r\n  // Node.js v10.12.0+\r\n  P[Symbol.for('nodejs.util.inspect.custom')] = P.valueOf;\r\n\r\n  if (configObject != null) BigNumber.set(configObject);\r\n\r\n  return BigNumber;\r\n}\r\n\r\n\r\n// PRIVATE HELPER FUNCTIONS\r\n\r\n// These functions don't need access to variables,\r\n// e.g. DECIMAL_PLACES, in the scope of the `clone` function above.\r\n\r\n\r\nfunction bitFloor(n) {\r\n  var i = n | 0;\r\n  return n > 0 || n === i ? i : i - 1;\r\n}\r\n\r\n\r\n// Return a coefficient array as a string of base 10 digits.\r\nfunction coeffToString(a) {\r\n  var s, z,\r\n    i = 1,\r\n    j = a.length,\r\n    r = a[0] + '';\r\n\r\n  for (; i < j;) {\r\n    s = a[i++] + '';\r\n    z = LOG_BASE - s.length;\r\n    for (; z--; s = '0' + s);\r\n    r += s;\r\n  }\r\n\r\n  // Determine trailing zeros.\r\n  for (j = r.length; r.charCodeAt(--j) === 48;);\r\n\r\n  return r.slice(0, j + 1 || 1);\r\n}\r\n\r\n\r\n// Compare the value of BigNumbers x and y.\r\nfunction compare(x, y) {\r\n  var a, b,\r\n    xc = x.c,\r\n    yc = y.c,\r\n    i = x.s,\r\n    j = y.s,\r\n    k = x.e,\r\n    l = y.e;\r\n\r\n  // Either NaN?\r\n  if (!i || !j) return null;\r\n\r\n  a = xc && !xc[0];\r\n  b = yc && !yc[0];\r\n\r\n  // Either zero?\r\n  if (a || b) return a ? b ? 0 : -j : i;\r\n\r\n  // Signs differ?\r\n  if (i != j) return i;\r\n\r\n  a = i < 0;\r\n  b = k == l;\r\n\r\n  // Either Infinity?\r\n  if (!xc || !yc) return b ? 0 : !xc ^ a ? 1 : -1;\r\n\r\n  // Compare exponents.\r\n  if (!b) return k > l ^ a ? 1 : -1;\r\n\r\n  j = (k = xc.length) < (l = yc.length) ? k : l;\r\n\r\n  // Compare digit by digit.\r\n  for (i = 0; i < j; i++) if (xc[i] != yc[i]) return xc[i] > yc[i] ^ a ? 1 : -1;\r\n\r\n  // Compare lengths.\r\n  return k == l ? 0 : k > l ^ a ? 1 : -1;\r\n}\r\n\r\n\r\n/*\r\n * Check that n is a primitive number, an integer, and in range, otherwise throw.\r\n */\r\nfunction intCheck(n, min, max, name) {\r\n  if (n < min || n > max || n !== mathfloor(n)) {\r\n    throw Error\r\n     (bignumberError + (name || 'Argument') + (typeof n == 'number'\r\n       ? n < min || n > max ? ' out of range: ' : ' not an integer: '\r\n       : ' not a primitive number: ') + String(n));\r\n  }\r\n}\r\n\r\n\r\n// Assumes finite n.\r\nfunction isOdd(n) {\r\n  var k = n.c.length - 1;\r\n  return bitFloor(n.e / LOG_BASE) == k && n.c[k] % 2 != 0;\r\n}\r\n\r\n\r\nfunction toExponential(str, e) {\r\n  return (str.length > 1 ? str.charAt(0) + '.' + str.slice(1) : str) +\r\n   (e < 0 ? 'e' : 'e+') + e;\r\n}\r\n\r\n\r\nfunction toFixedPoint(str, e, z) {\r\n  var len, zs;\r\n\r\n  // Negative exponent?\r\n  if (e < 0) {\r\n\r\n    // Prepend zeros.\r\n    for (zs = z + '.'; ++e; zs += z);\r\n    str = zs + str;\r\n\r\n  // Positive exponent\r\n  } else {\r\n    len = str.length;\r\n\r\n    // Append zeros.\r\n    if (++e > len) {\r\n      for (zs = z, e -= len; --e; zs += z);\r\n      str += zs;\r\n    } else if (e < len) {\r\n      str = str.slice(0, e) + '.' + str.slice(e);\r\n    }\r\n  }\r\n\r\n  return str;\r\n}\r\n\r\n\r\n// EXPORT\r\n\r\n\r\nexport var BigNumber = clone();\r\n\r\nexport default BigNumber;\r\n","// ============================================\n// AI Assistant Chat API v1\n// Powered by Claude Sonnet 4 with Function Calling\n// POST /api/v1/ai/chat - Send message to AI assistant\n// GET /api/v1/ai/chat - Get conversation history\n// ============================================\n\nimport { NextRequest, NextResponse } from 'next/server'\nimport { createClaudeAssistant } from '@/lib/ai/claude-assistant'\nimport { supabaseAdmin } from '@/lib/supabase/server'\nimport { createId } from '@paralleldrive/cuid2'\n\n// Generate cuid for database IDs\nfunction generateCuid(): string {\n  return createId()\n}\n\n// ============================================\n// Helper Functions\n// ============================================\n\n// Extract the active contact from conversation history metadata\nfunction extractActiveContact(history: any[]): any | null {\n  // Look through history from newest to oldest\n  for (let i = history.length - 1; i >= 0; i--) {\n    const msg = history[i]\n    if (msg.role === 'assistant' && msg.contextSnapshot?.activeContact) {\n      return msg.contextSnapshot.activeContact\n    }\n  }\n  return null\n}\n\n// Convert DB messages to conversation format for Claude\nfunction formatConversationHistory(messages: any[]): { role: 'user' | 'assistant'; content: string }[] {\n  return messages\n    .filter(msg => msg.role === 'user' || msg.role === 'assistant')\n    .map(msg => ({\n      role: msg.role as 'user' | 'assistant',\n      content: msg.content\n    }))\n}\n\n// ============================================\n// POST Handler - Send Message\n// ============================================\n\nexport async function POST(request: NextRequest) {\n  try {\n    const body = await request.json()\n    const { message, sessionId, subAccountId, userId, userName, userEmail } = body\n    \n    // Support both conversationId (old) and sessionId (new)\n    const inputSessionId = sessionId || body.conversationId\n    \n    // Extract user info for personalization\n    const userInfo = {\n      id: userId,\n      name: userName || 'User',\n      email: userEmail,\n      firstName: userName?.split(' ')[0] || 'there'\n    }\n\n    // Validation\n    if (!message || typeof message !== 'string') {\n      return NextResponse.json(\n        { success: false, error: 'Message is required and must be a string' },\n        { status: 400 }\n      )\n    }\n\n    if (!subAccountId || !userId) {\n      return NextResponse.json(\n        { success: false, error: 'subAccountId and userId are required' },\n        { status: 400 }\n      )\n    }\n\n    // Check for Anthropic API key\n    if (!process.env.ANTHROPIC_API_KEY) {\n      console.error('ANTHROPIC_API_KEY is not set')\n      return NextResponse.json(\n        { \n          success: false, \n          error: 'AI service not configured. Please set ANTHROPIC_API_KEY.',\n          data: {\n            message: {\n              id: generateCuid(),\n              role: 'assistant',\n              content: \"I'm currently unavailable. Please contact support to configure the AI service.\",\n              createdAt: new Date().toISOString(),\n            }\n          }\n        },\n        { status: 500 }\n      )\n    }\n\n    // Get or create AI assistant config for this sub-account\n    let { data: assistantConfig } = await supabaseAdmin\n      .from('AiAssistantConfig')\n      .select('*')\n      .eq('subAccountId', subAccountId)\n      .single()\n\n    // Create default config if not exists\n    if (!assistantConfig) {\n      const { data: newConfig } = await supabaseAdmin\n        .from('AiAssistantConfig')\n        .insert({\n          id: generateCuid(),\n          subAccountId,\n          name: 'Sarah',\n          welcomeMessage: 'Hi! I\\'m your AI assistant. How can I help you today?',\n        })\n        .select()\n        .single()\n      assistantConfig = newConfig\n    }\n\n    // Get or create chat session\n    let activeSessionId = inputSessionId\n    let conversationHistory: any[] = []\n    let activeContact: any = null\n\n    if (!activeSessionId) {\n      // Create new chat session\n      activeSessionId = generateCuid()\n      await supabaseAdmin.from('AiChatSession').insert({\n        id: activeSessionId,\n        subAccountId,\n        configId: assistantConfig?.id,\n        userId,\n        title: message.substring(0, 50),\n        status: 'active',\n        channel: 'crm_chat',\n        messageCount: 0,\n        toolCalls: 0,\n      })\n    } else {\n      // Get conversation history for context\n      const { data: history } = await supabaseAdmin\n        .from('AiChatMessage')\n        .select('role, content, contextSnapshot, toolName, toolResult')\n        .eq('sessionId', activeSessionId)\n        .order('createdAt', { ascending: true })\n        .limit(assistantConfig?.maxContextMessages || 20)\n      \n      conversationHistory = history || []\n      \n      // Try to get active contact from context\n      activeContact = extractActiveContact(conversationHistory)\n    }\n\n    // Create Claude Assistant with user info for personalization\n    const claudeAssistant = createClaudeAssistant(subAccountId, userInfo)\n    \n    // Format conversation history for Claude\n    const formattedHistory = formatConversationHistory(conversationHistory)\n    \n    // Send message to Claude with full context\n    const response = await claudeAssistant.chat(message, formattedHistory, activeContact)\n\n    // Save user message\n    const userMessageId = generateCuid()\n    await supabaseAdmin.from('AiChatMessage').insert({\n      id: userMessageId,\n      sessionId: activeSessionId,\n      role: 'user',\n      content: message,\n      inputTokens: Math.ceil(message.length / 4),\n    })\n\n    // Determine the new active contact from the response\n    let newActiveContact = activeContact\n    if (response.data?.contact) {\n      newActiveContact = response.data.contact\n    } else if (response.data?.contacts && response.data.contacts.length > 0) {\n      newActiveContact = response.data.contacts[0]\n    }\n\n    // Use response message directly\n    let responseContent = response.message\n\n    // Save assistant message with context snapshot\n    const assistantMessageId = generateCuid()\n    await supabaseAdmin.from('AiChatMessage').insert({\n      id: assistantMessageId,\n      sessionId: activeSessionId,\n      role: 'assistant',\n      content: responseContent,\n      outputTokens: Math.ceil(responseContent.length / 4),\n      toolName: response.toolsUsed?.[0] || null,\n      toolResult: response.data || null,\n      contextSnapshot: newActiveContact ? { activeContact: newActiveContact } : null,\n    })\n\n    // Update session stats\n    await supabaseAdmin\n      .from('AiChatSession')\n      .update({\n        messageCount: conversationHistory.length + 2,\n        toolCalls: (response.toolsUsed?.length || 0),\n        lastMessageAt: new Date().toISOString(),\n        activeContactId: newActiveContact?.id || null,\n      })\n      .eq('id', activeSessionId)\n\n    // Log tool execution if tools were used\n    if (response.toolsUsed && response.toolsUsed.length > 0) {\n      for (const toolName of response.toolsUsed) {\n        await supabaseAdmin.from('AiToolExecution').insert({\n          id: generateCuid(),\n          subAccountId,\n          sessionId: activeSessionId,\n          messageId: assistantMessageId,\n          toolName,\n          input: {},\n          result: response.data || {},\n          status: response.success ? 'success' : 'failed',\n        })\n      }\n    }\n\n    return NextResponse.json({\n      success: true,\n      data: {\n        sessionId: activeSessionId,\n        conversationId: activeSessionId, // For backward compatibility\n        message: {\n          id: assistantMessageId,\n          role: 'assistant',\n          content: responseContent,\n          createdAt: new Date().toISOString(),\n        },\n        toolsUsed: response.toolsUsed,\n        activeContact: newActiveContact,\n        assistantName: assistantConfig?.name || 'Sarah',\n      },\n    })\n  } catch (error: any) {\n    console.error('AI Chat API Error:', error)\n    \n    // Provide a helpful error message\n    let errorMessage = 'Sorry, I encountered an error. Please try again.'\n    if (error.message?.includes('API key')) {\n      errorMessage = 'AI service authentication failed. Please check the API configuration.'\n    } else if (error.message?.includes('rate limit')) {\n      errorMessage = 'AI service is temporarily busy. Please wait a moment and try again.'\n    }\n    \n    return NextResponse.json(\n      {\n        success: false,\n        error: error.message || 'Internal server error',\n        data: {\n          message: {\n            id: generateCuid(),\n            role: 'assistant',\n            content: errorMessage,\n            createdAt: new Date().toISOString(),\n          }\n        }\n      },\n      { status: 500 }\n    )\n  }\n}\n\n// ============================================\n// GET Handler - Conversation History\n// ============================================\n\nexport async function GET(request: NextRequest) {\n  try {\n    const { searchParams } = new URL(request.url)\n    const sessionId = searchParams.get('sessionId') || searchParams.get('conversationId')\n\n    if (!sessionId) {\n      return NextResponse.json(\n        { success: false, error: 'sessionId is required' },\n        { status: 400 }\n      )\n    }\n\n    // Get session info\n    const { data: session } = await supabaseAdmin\n      .from('AiChatSession')\n      .select('*, AiAssistantConfig(*)')\n      .eq('id', sessionId)\n      .single()\n\n    // Get messages\n    const { data: messages } = await supabaseAdmin\n      .from('AiChatMessage')\n      .select('*')\n      .eq('sessionId', sessionId)\n      .order('createdAt', { ascending: true })\n\n    // Get the active contact from the most recent message\n    let activeContact = null\n    if (messages && messages.length > 0) {\n      for (let i = messages.length - 1; i >= 0; i--) {\n        if (messages[i].contextSnapshot?.activeContact) {\n          activeContact = messages[i].contextSnapshot.activeContact\n          break\n        }\n      }\n    }\n\n    return NextResponse.json({\n      success: true,\n      data: {\n        sessionId,\n        conversationId: sessionId, // For backward compatibility\n        session,\n        messages: messages || [],\n        activeContact,\n        assistantConfig: session?.AiAssistantConfig,\n      },\n    })\n  } catch (error: any) {\n    console.error('AI Chat GET Error:', error)\n    return NextResponse.json(\n      { success: false, error: error.message || 'Internal server error' },\n      { status: 500 }\n    )\n  }\n}\n","export function concatBytes(buffers: Uint8Array[]): Uint8Array {\n  let length = 0;\n  for (const buffer of buffers) {\n    length += buffer.length;\n  }\n  const output = new Uint8Array(length);\n  let index = 0;\n  for (const buffer of buffers) {\n    output.set(buffer, index);\n    index += buffer.length;\n  }\n\n  return output;\n}\n\nlet encodeUTF8_: (str: string) => Uint8Array;\nexport function encodeUTF8(str: string) {\n  let encoder;\n  return (\n    encodeUTF8_ ??\n    ((encoder = new (globalThis as any).TextEncoder()), (encodeUTF8_ = encoder.encode.bind(encoder)))\n  )(str);\n}\n\nlet decodeUTF8_: (bytes: Uint8Array) => string;\nexport function decodeUTF8(bytes: Uint8Array) {\n  let decoder;\n  return (\n    decodeUTF8_ ??\n    ((decoder = new (globalThis as any).TextDecoder()), (decodeUTF8_ = decoder.decode.bind(decoder)))\n  )(bytes);\n}\n","type Token = {\n  type: string;\n  value: string;\n};\n\nconst tokenize = (input: string): Token[] => {\n    let current = 0;\n    let tokens: Token[] = [];\n\n    while (current < input.length) {\n      let char = input[current];\n\n      if (char === '\\\\') {\n        current++;\n        continue;\n      }\n\n      if (char === '{') {\n        tokens.push({\n          type: 'brace',\n          value: '{',\n        });\n\n        current++;\n        continue;\n      }\n\n      if (char === '}') {\n        tokens.push({\n          type: 'brace',\n          value: '}',\n        });\n\n        current++;\n        continue;\n      }\n\n      if (char === '[') {\n        tokens.push({\n          type: 'paren',\n          value: '[',\n        });\n\n        current++;\n        continue;\n      }\n\n      if (char === ']') {\n        tokens.push({\n          type: 'paren',\n          value: ']',\n        });\n\n        current++;\n        continue;\n      }\n\n      if (char === ':') {\n        tokens.push({\n          type: 'separator',\n          value: ':',\n        });\n\n        current++;\n        continue;\n      }\n\n      if (char === ',') {\n        tokens.push({\n          type: 'delimiter',\n          value: ',',\n        });\n\n        current++;\n        continue;\n      }\n\n      if (char === '\"') {\n        let value = '';\n        let danglingQuote = false;\n\n        char = input[++current];\n\n        while (char !== '\"') {\n          if (current === input.length) {\n            danglingQuote = true;\n            break;\n          }\n\n          if (char === '\\\\') {\n            current++;\n            if (current === input.length) {\n              danglingQuote = true;\n              break;\n            }\n            value += char + input[current];\n            char = input[++current];\n          } else {\n            value += char;\n            char = input[++current];\n          }\n        }\n\n        char = input[++current];\n\n        if (!danglingQuote) {\n          tokens.push({\n            type: 'string',\n            value,\n          });\n        }\n        continue;\n      }\n\n      let WHITESPACE = /\\s/;\n      if (char && WHITESPACE.test(char)) {\n        current++;\n        continue;\n      }\n\n      let NUMBERS = /[0-9]/;\n      if ((char && NUMBERS.test(char)) || char === '-' || char === '.') {\n        let value = '';\n\n        if (char === '-') {\n          value += char;\n          char = input[++current];\n        }\n\n        while ((char && NUMBERS.test(char)) || char === '.') {\n          value += char;\n          char = input[++current];\n        }\n\n        tokens.push({\n          type: 'number',\n          value,\n        });\n        continue;\n      }\n\n      let LETTERS = /[a-z]/i;\n      if (char && LETTERS.test(char)) {\n        let value = '';\n\n        while (char && LETTERS.test(char)) {\n          if (current === input.length) {\n            break;\n          }\n          value += char;\n          char = input[++current];\n        }\n\n        if (value == 'true' || value == 'false' || value === 'null') {\n          tokens.push({\n            type: 'name',\n            value,\n          });\n        } else {\n          // unknown token, e.g. `nul` which isn't quite `null`\n          current++;\n          continue;\n        }\n        continue;\n      }\n\n      current++;\n    }\n\n    return tokens;\n  },\n  strip = (tokens: Token[]): Token[] => {\n    if (tokens.length === 0) {\n      return tokens;\n    }\n\n    let lastToken = tokens[tokens.length - 1]!;\n\n    switch (lastToken.type) {\n      case 'separator':\n        tokens = tokens.slice(0, tokens.length - 1);\n        return strip(tokens);\n        break;\n      case 'number':\n        let lastCharacterOfLastToken = lastToken.value[lastToken.value.length - 1];\n        if (lastCharacterOfLastToken === '.' || lastCharacterOfLastToken === '-') {\n          tokens = tokens.slice(0, tokens.length - 1);\n          return strip(tokens);\n        }\n      case 'string':\n        let tokenBeforeTheLastToken = tokens[tokens.length - 2];\n        if (tokenBeforeTheLastToken?.type === 'delimiter') {\n          tokens = tokens.slice(0, tokens.length - 1);\n          return strip(tokens);\n        } else if (tokenBeforeTheLastToken?.type === 'brace' && tokenBeforeTheLastToken.value === '{') {\n          tokens = tokens.slice(0, tokens.length - 1);\n          return strip(tokens);\n        }\n        break;\n      case 'delimiter':\n        tokens = tokens.slice(0, tokens.length - 1);\n        return strip(tokens);\n        break;\n    }\n\n    return tokens;\n  },\n  unstrip = (tokens: Token[]): Token[] => {\n    let tail: string[] = [];\n\n    tokens.map((token) => {\n      if (token.type === 'brace') {\n        if (token.value === '{') {\n          tail.push('}');\n        } else {\n          tail.splice(tail.lastIndexOf('}'), 1);\n        }\n      }\n      if (token.type === 'paren') {\n        if (token.value === '[') {\n          tail.push(']');\n        } else {\n          tail.splice(tail.lastIndexOf(']'), 1);\n        }\n      }\n    });\n\n    if (tail.length > 0) {\n      tail.reverse().map((item) => {\n        if (item === '}') {\n          tokens.push({\n            type: 'brace',\n            value: '}',\n          });\n        } else if (item === ']') {\n          tokens.push({\n            type: 'paren',\n            value: ']',\n          });\n        }\n      });\n    }\n\n    return tokens;\n  },\n  generate = (tokens: Token[]): string => {\n    let output = '';\n\n    tokens.map((token) => {\n      switch (token.type) {\n        case 'string':\n          output += '\"' + token.value + '\"';\n          break;\n        default:\n          output += token.value;\n          break;\n      }\n    });\n\n    return output;\n  },\n  partialParse = (input: string): unknown => JSON.parse(generate(unstrip(strip(tokenize(input)))));\n\nexport { partialParse };\n","export const VERSION = '0.71.2'; // x-release-please-version\n","import { type RequestOptions } from './request-options';\nimport type { FilePropertyBag, Fetch } from './builtin-types';\nimport type { BaseAnthropic } from '../client';\nimport { ReadableStreamFrom } from './shims';\n\nexport type BlobPart = string | ArrayBuffer | ArrayBufferView | Blob | DataView;\ntype FsReadStream = AsyncIterable<Uint8Array> & { path: string | { toString(): string } };\n\n// https://github.com/oven-sh/bun/issues/5980\ninterface BunFile extends Blob {\n  readonly name?: string | undefined;\n}\n\nexport const checkFileSupport = () => {\n  if (typeof File === 'undefined') {\n    const { process } = globalThis as any;\n    const isOldNode =\n      typeof process?.versions?.node === 'string' && parseInt(process.versions.node.split('.')) < 20;\n    throw new Error(\n      '`File` is not defined as a global, which is required for file uploads.' +\n        (isOldNode ?\n          \" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.\"\n        : ''),\n    );\n  }\n};\n\n/**\n * Typically, this is a native \"File\" class.\n *\n * We provide the {@link toFile} utility to convert a variety of objects\n * into the File class.\n *\n * For convenience, you can also pass a fetch Response, or in Node,\n * the result of fs.createReadStream().\n */\nexport type Uploadable = File | Response | FsReadStream | BunFile;\n\n/**\n * Construct a `File` instance. This is used to ensure a helpful error is thrown\n * for environments that don't define a global `File` yet.\n */\nexport function makeFile(\n  fileBits: BlobPart[],\n  fileName: string | undefined,\n  options?: FilePropertyBag,\n): File {\n  checkFileSupport();\n  return new File(fileBits as any, fileName ?? 'unknown_file', options);\n}\n\nexport function getName(value: any): string | undefined {\n  return (\n    (\n      (typeof value === 'object' &&\n        value !== null &&\n        (('name' in value && value.name && String(value.name)) ||\n          ('url' in value && value.url && String(value.url)) ||\n          ('filename' in value && value.filename && String(value.filename)) ||\n          ('path' in value && value.path && String(value.path)))) ||\n      ''\n    )\n      .split(/[\\\\/]/)\n      .pop() || undefined\n  );\n}\n\nexport const isAsyncIterable = (value: any): value is AsyncIterable<any> =>\n  value != null && typeof value === 'object' && typeof value[Symbol.asyncIterator] === 'function';\n\n/**\n * Returns a multipart/form-data request if any part of the given request body contains a File / Blob value.\n * Otherwise returns the request as is.\n */\nexport const maybeMultipartFormRequestOptions = async (\n  opts: RequestOptions,\n  fetch: BaseAnthropic | Fetch,\n): Promise<RequestOptions> => {\n  if (!hasUploadableValue(opts.body)) return opts;\n\n  return { ...opts, body: await createForm(opts.body, fetch) };\n};\n\ntype MultipartFormRequestOptions = Omit<RequestOptions, 'body'> & { body: unknown };\n\nexport const multipartFormRequestOptions = async (\n  opts: MultipartFormRequestOptions,\n  fetch: BaseAnthropic | Fetch,\n): Promise<RequestOptions> => {\n  return { ...opts, body: await createForm(opts.body, fetch) };\n};\n\nconst supportsFormDataMap = /* @__PURE__ */ new WeakMap<Fetch, Promise<boolean>>();\n\n/**\n * node-fetch doesn't support the global FormData object in recent node versions. Instead of sending\n * properly-encoded form data, it just stringifies the object, resulting in a request body of \"[object FormData]\".\n * This function detects if the fetch function provided supports the global FormData object to avoid\n * confusing error messages later on.\n */\nfunction supportsFormData(fetchObject: BaseAnthropic | Fetch): Promise<boolean> {\n  const fetch: Fetch = typeof fetchObject === 'function' ? fetchObject : (fetchObject as any).fetch;\n  const cached = supportsFormDataMap.get(fetch);\n  if (cached) return cached;\n  const promise = (async () => {\n    try {\n      const FetchResponse = (\n        'Response' in fetch ?\n          fetch.Response\n        : (await fetch('data:,')).constructor) as typeof Response;\n      const data = new FormData();\n      if (data.toString() === (await new FetchResponse(data).text())) {\n        return false;\n      }\n      return true;\n    } catch {\n      // avoid false negatives\n      return true;\n    }\n  })();\n  supportsFormDataMap.set(fetch, promise);\n  return promise;\n}\n\nexport const createForm = async <T = Record<string, unknown>>(\n  body: T | undefined,\n  fetch: BaseAnthropic | Fetch,\n): Promise<FormData> => {\n  if (!(await supportsFormData(fetch))) {\n    throw new TypeError(\n      'The provided fetch function does not support file uploads with the current global FormData class.',\n    );\n  }\n  const form = new FormData();\n  await Promise.all(Object.entries(body || {}).map(([key, value]) => addFormValue(form, key, value)));\n  return form;\n};\n\n// We check for Blob not File because Bun.File doesn't inherit from File,\n// but they both inherit from Blob and have a `name` property at runtime.\nconst isNamedBlob = (value: unknown): value is Blob => value instanceof Blob && 'name' in value;\n\nconst isUploadable = (value: unknown) =>\n  typeof value === 'object' &&\n  value !== null &&\n  (value instanceof Response || isAsyncIterable(value) || isNamedBlob(value));\n\nconst hasUploadableValue = (value: unknown): boolean => {\n  if (isUploadable(value)) return true;\n  if (Array.isArray(value)) return value.some(hasUploadableValue);\n  if (value && typeof value === 'object') {\n    for (const k in value) {\n      if (hasUploadableValue((value as any)[k])) return true;\n    }\n  }\n  return false;\n};\n\nconst addFormValue = async (form: FormData, key: string, value: unknown): Promise<void> => {\n  if (value === undefined) return;\n  if (value == null) {\n    throw new TypeError(\n      `Received null for \"${key}\"; to pass null in FormData, you must use the string 'null'`,\n    );\n  }\n\n  // TODO: make nested formats configurable\n  if (typeof value === 'string' || typeof value === 'number' || typeof value === 'boolean') {\n    form.append(key, String(value));\n  } else if (value instanceof Response) {\n    let options = {} as FilePropertyBag;\n    const contentType = value.headers.get('Content-Type');\n    if (contentType) {\n      options = { type: contentType };\n    }\n\n    form.append(key, makeFile([await value.blob()], getName(value), options));\n  } else if (isAsyncIterable(value)) {\n    form.append(key, makeFile([await new Response(ReadableStreamFrom(value)).blob()], getName(value)));\n  } else if (isNamedBlob(value)) {\n    form.append(key, makeFile([value], getName(value), { type: value.type }));\n  } else if (Array.isArray(value)) {\n    await Promise.all(value.map((entry) => addFormValue(form, key + '[]', entry)));\n  } else if (typeof value === 'object') {\n    await Promise.all(\n      Object.entries(value).map(([name, prop]) => addFormValue(form, `${key}[${name}]`, prop)),\n    );\n  } else {\n    throw new TypeError(\n      `Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${value} instead`,\n    );\n  }\n};\n","import { Model } from '../../resources';\n\nexport const DEFAULT_TOKEN_THRESHOLD = 100_000;\n\nexport const DEFAULT_SUMMARY_PROMPT = `You have been working on the task described above but have not yet completed it. Write a continuation summary that will allow you (or another instance of yourself) to resume work efficiently in a future context window where the conversation history will be replaced with this summary. Your summary should be structured, concise, and actionable. Include:\n1. Task Overview\nThe user's core request and success criteria\nAny clarifications or constraints they specified\n2. Current State\nWhat has been completed so far\nFiles created, modified, or analyzed (with paths if relevant)\nKey outputs or artifacts produced\n3. Important Discoveries\nTechnical constraints or requirements uncovered\nDecisions made and their rationale\nErrors encountered and how they were resolved\nWhat approaches were tried that didn't work (and why)\n4. Next Steps\nSpecific actions needed to complete the task\nAny blockers or open questions to resolve\nPriority order if multiple steps remain\n5. Context to Preserve\nUser preferences or style requirements\nDomain-specific details that aren't obvious\nAny promises made to the user\nBe concise but completeerr on the side of including information that would prevent duplicate work or repeated mistakes. Write in a way that enables immediate resumption of the task.\nWrap your summary in <summary></summary> tags.`;\n\nexport interface CompactionControl {\n  /**\n   * The context token threshold at which to trigger compaction.\n   *\n   * When the cumulative token count (input + output) across all messages exceeds this threshold,\n   * the message history will be automatically summarized and compressed.\n   *\n   * @default 100000\n   */\n  contextTokenThreshold?: number;\n\n  /**\n   * The model to use for generating the compaction summary.\n   * If not specified, defaults to the same model used for the tool runner.\n   */\n  model?: Model;\n\n  /**\n   * The prompt used to instruct the model on how to generate the summary.\n   */\n  summaryPrompt?: string;\n\n  enabled: boolean;\n}\n","import {\n  AppRouteRouteModule,\n  type AppRouteRouteHandlerContext,\n  type AppRouteRouteModuleOptions,\n} from '../../server/route-modules/app-route/module.compiled'\nimport { RouteKind } from '../../server/route-kind'\nimport { patchFetch as _patchFetch } from '../../server/lib/patch-fetch'\nimport type { IncomingMessage, ServerResponse } from 'node:http'\nimport { addRequestMeta, getRequestMeta } from '../../server/request-meta'\nimport { getTracer, type Span, SpanKind } from '../../server/lib/trace/tracer'\nimport { setReferenceManifestsSingleton } from '../../server/app-render/encryption-utils'\nimport { createServerModuleMap } from '../../server/app-render/action-utils'\nimport { normalizeAppPath } from '../../shared/lib/router/utils/app-paths'\nimport { NodeNextRequest, NodeNextResponse } from '../../server/base-http/node'\nimport {\n  NextRequestAdapter,\n  signalFromNodeResponse,\n} from '../../server/web/spec-extension/adapters/next-request'\nimport { BaseServerSpan } from '../../server/lib/trace/constants'\nimport { getRevalidateReason } from '../../server/instrumentation/utils'\nimport { sendResponse } from '../../server/send-response'\nimport {\n  fromNodeOutgoingHttpHeaders,\n  toNodeOutgoingHttpHeaders,\n} from '../../server/web/utils'\nimport { getCacheControlHeader } from '../../server/lib/cache-control'\nimport { INFINITE_CACHE, NEXT_CACHE_TAGS_HEADER } from '../../lib/constants'\nimport { NoFallbackError } from '../../shared/lib/no-fallback-error.external'\nimport {\n  CachedRouteKind,\n  type ResponseCacheEntry,\n  type ResponseGenerator,\n} from '../../server/response-cache'\n\nimport * as userland from 'VAR_USERLAND'\n\n// These are injected by the loader afterwards. This is injected as a variable\n// instead of a replacement because this could also be `undefined` instead of\n// an empty string.\ndeclare const nextConfigOutput: AppRouteRouteModuleOptions['nextConfigOutput']\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\n// INJECT:nextConfigOutput\n\nconst routeModule = new AppRouteRouteModule({\n  definition: {\n    kind: RouteKind.APP_ROUTE,\n    page: 'VAR_DEFINITION_PAGE',\n    pathname: 'VAR_DEFINITION_PATHNAME',\n    filename: 'VAR_DEFINITION_FILENAME',\n    bundlePath: 'VAR_DEFINITION_BUNDLE_PATH',\n  },\n  distDir: process.env.__NEXT_RELATIVE_DIST_DIR || '',\n  relativeProjectDir: process.env.__NEXT_RELATIVE_PROJECT_DIR || '',\n  resolvedPagePath: 'VAR_RESOLVED_PAGE_PATH',\n  nextConfigOutput,\n  userland,\n})\n\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule\n\nfunction patchFetch() {\n  return _patchFetch({\n    workAsyncStorage,\n    workUnitAsyncStorage,\n  })\n}\n\nexport {\n  routeModule,\n  workAsyncStorage,\n  workUnitAsyncStorage,\n  serverHooks,\n  patchFetch,\n}\n\nexport async function handler(\n  req: IncomingMessage,\n  res: ServerResponse,\n  ctx: {\n    waitUntil: (prom: Promise<void>) => void\n  }\n) {\n  if (routeModule.isDev) {\n    addRequestMeta(req, 'devRequestTimingInternalsEnd', process.hrtime.bigint())\n  }\n  let srcPage = 'VAR_DEFINITION_PAGE'\n\n  // turbopack doesn't normalize `/index` in the page name\n  // so we need to to process dynamic routes properly\n  // TODO: fix turbopack providing differing value from webpack\n  if (process.env.TURBOPACK) {\n    srcPage = srcPage.replace(/\\/index$/, '') || '/'\n  } else if (srcPage === '/index') {\n    // we always normalize /index specifically\n    srcPage = '/'\n  }\n  const multiZoneDraftMode = process.env\n    .__NEXT_MULTI_ZONE_DRAFT_MODE as any as boolean\n\n  const prepareResult = await routeModule.prepare(req, res, {\n    srcPage,\n    multiZoneDraftMode,\n  })\n\n  if (!prepareResult) {\n    res.statusCode = 400\n    res.end('Bad Request')\n    ctx.waitUntil?.(Promise.resolve())\n    return null\n  }\n\n  const {\n    buildId,\n    params,\n    nextConfig,\n    parsedUrl,\n    isDraftMode,\n    prerenderManifest,\n    routerServerContext,\n    isOnDemandRevalidate,\n    revalidateOnlyGenerated,\n    resolvedPathname,\n    clientReferenceManifest,\n    serverActionsManifest,\n  } = prepareResult\n\n  const normalizedSrcPage = normalizeAppPath(srcPage)\n\n  let isIsr = Boolean(\n    prerenderManifest.dynamicRoutes[normalizedSrcPage] ||\n      prerenderManifest.routes[resolvedPathname]\n  )\n\n  const render404 = async () => {\n    // TODO: should route-module itself handle rendering the 404\n    if (routerServerContext?.render404) {\n      await routerServerContext.render404(req, res, parsedUrl, false)\n    } else {\n      res.end('This page could not be found')\n    }\n    return null\n  }\n\n  if (isIsr && !isDraftMode) {\n    const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname])\n    const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage]\n\n    if (prerenderInfo) {\n      if (prerenderInfo.fallback === false && !isPrerendered) {\n        if (nextConfig.experimental.adapterPath) {\n          return await render404()\n        }\n        throw new NoFallbackError()\n      }\n    }\n  }\n\n  let cacheKey: string | null = null\n\n  if (isIsr && !routeModule.isDev && !isDraftMode) {\n    cacheKey = resolvedPathname\n    // ensure /index and / is normalized to one key\n    cacheKey = cacheKey === '/index' ? '/' : cacheKey\n  }\n\n  const supportsDynamicResponse: boolean =\n    // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true ||\n    // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr\n\n  // This is a revalidation request if the request is for a static\n  // page and it is not being resumed from a postponed render and\n  // it is not a dynamic RSC request then it is a revalidation\n  // request.\n  const isStaticGeneration = isIsr && !supportsDynamicResponse\n\n  // Before rendering (which initializes component tree modules), we have to\n  // set the reference manifests to our global store so Server Action's\n  // encryption util can access to them at the top level of the page module.\n  if (serverActionsManifest && clientReferenceManifest) {\n    setReferenceManifestsSingleton({\n      page: srcPage,\n      clientReferenceManifest,\n      serverActionsManifest,\n      serverModuleMap: createServerModuleMap({\n        serverActionsManifest,\n      }),\n    })\n  }\n\n  const method = req.method || 'GET'\n  const tracer = getTracer()\n  const activeSpan = tracer.getActiveScopeSpan()\n\n  const context: AppRouteRouteHandlerContext = {\n    params,\n    prerenderManifest,\n    renderOpts: {\n      experimental: {\n        authInterrupts: Boolean(nextConfig.experimental.authInterrupts),\n      },\n      cacheComponents: Boolean(nextConfig.cacheComponents),\n      supportsDynamicResponse,\n      incrementalCache: getRequestMeta(req, 'incrementalCache'),\n      cacheLifeProfiles: nextConfig.cacheLife,\n      waitUntil: ctx.waitUntil,\n      onClose: (cb) => {\n        res.on('close', cb)\n      },\n      onAfterTaskError: undefined,\n      onInstrumentationRequestError: (error, _request, errorContext) =>\n        routeModule.onRequestError(\n          req,\n          error,\n          errorContext,\n          routerServerContext\n        ),\n    },\n    sharedContext: {\n      buildId,\n    },\n  }\n  const nodeNextReq = new NodeNextRequest(req)\n  const nodeNextRes = new NodeNextResponse(res)\n\n  const nextReq = NextRequestAdapter.fromNodeNextRequest(\n    nodeNextReq,\n    signalFromNodeResponse(res)\n  )\n\n  try {\n    const invokeRouteModule = async (span?: Span) => {\n      return routeModule.handle(nextReq, context).finally(() => {\n        if (!span) return\n\n        span.setAttributes({\n          'http.status_code': res.statusCode,\n          'next.rsc': false,\n        })\n\n        const rootSpanAttributes = tracer.getRootSpanAttributes()\n        // We were unable to get attributes, probably OTEL is not enabled\n        if (!rootSpanAttributes) {\n          return\n        }\n\n        if (\n          rootSpanAttributes.get('next.span_type') !==\n          BaseServerSpan.handleRequest\n        ) {\n          console.warn(\n            `Unexpected root span type '${rootSpanAttributes.get(\n              'next.span_type'\n            )}'. Please report this Next.js issue https://github.com/vercel/next.js`\n          )\n          return\n        }\n\n        const route = rootSpanAttributes.get('next.route')\n        if (route) {\n          const name = `${method} ${route}`\n\n          span.setAttributes({\n            'next.route': route,\n            'http.route': route,\n            'next.span_name': name,\n          })\n          span.updateName(name)\n        } else {\n          span.updateName(`${method} ${srcPage}`)\n        }\n      })\n    }\n    const isMinimalMode = Boolean(\n      process.env.MINIMAL_MODE || getRequestMeta(req, 'minimalMode')\n    )\n\n    const handleResponse = async (currentSpan?: Span) => {\n      const responseGenerator: ResponseGenerator = async ({\n        previousCacheEntry,\n      }) => {\n        try {\n          if (\n            !isMinimalMode &&\n            isOnDemandRevalidate &&\n            revalidateOnlyGenerated &&\n            !previousCacheEntry\n          ) {\n            res.statusCode = 404\n            // on-demand revalidate always sets this header\n            res.setHeader('x-nextjs-cache', 'REVALIDATED')\n            res.end('This page could not be found')\n            return null\n          }\n\n          const response = await invokeRouteModule(currentSpan)\n\n          ;(req as any).fetchMetrics = (context.renderOpts as any).fetchMetrics\n          let pendingWaitUntil = context.renderOpts.pendingWaitUntil\n\n          // Attempt using provided waitUntil if available\n          // if it's not we fallback to sendResponse's handling\n          if (pendingWaitUntil) {\n            if (ctx.waitUntil) {\n              ctx.waitUntil(pendingWaitUntil)\n              pendingWaitUntil = undefined\n            }\n          }\n          const cacheTags = context.renderOpts.collectedTags\n\n          // If the request is for a static response, we can cache it so long\n          // as it's not edge.\n          if (isIsr) {\n            const blob = await response.blob()\n\n            // Copy the headers from the response.\n            const headers = toNodeOutgoingHttpHeaders(response.headers)\n\n            if (cacheTags) {\n              headers[NEXT_CACHE_TAGS_HEADER] = cacheTags\n            }\n\n            if (!headers['content-type'] && blob.type) {\n              headers['content-type'] = blob.type\n            }\n\n            const revalidate =\n              typeof context.renderOpts.collectedRevalidate === 'undefined' ||\n              context.renderOpts.collectedRevalidate >= INFINITE_CACHE\n                ? false\n                : context.renderOpts.collectedRevalidate\n\n            const expire =\n              typeof context.renderOpts.collectedExpire === 'undefined' ||\n              context.renderOpts.collectedExpire >= INFINITE_CACHE\n                ? undefined\n                : context.renderOpts.collectedExpire\n\n            // Create the cache entry for the response.\n            const cacheEntry: ResponseCacheEntry = {\n              value: {\n                kind: CachedRouteKind.APP_ROUTE,\n                status: response.status,\n                body: Buffer.from(await blob.arrayBuffer()),\n                headers,\n              },\n              cacheControl: { revalidate, expire },\n            }\n\n            return cacheEntry\n          } else {\n            // send response without caching if not ISR\n            await sendResponse(\n              nodeNextReq,\n              nodeNextRes,\n              response,\n              context.renderOpts.pendingWaitUntil\n            )\n            return null\n          }\n        } catch (err) {\n          // if this is a background revalidate we need to report\n          // the request error here as it won't be bubbled\n          if (previousCacheEntry?.isStale) {\n            await routeModule.onRequestError(\n              req,\n              err,\n              {\n                routerKind: 'App Router',\n                routePath: srcPage,\n                routeType: 'route',\n                revalidateReason: getRevalidateReason({\n                  isStaticGeneration,\n                  isOnDemandRevalidate,\n                }),\n              },\n              routerServerContext\n            )\n          }\n          throw err\n        }\n      }\n\n      const cacheEntry = await routeModule.handleResponse({\n        req,\n        nextConfig,\n        cacheKey,\n        routeKind: RouteKind.APP_ROUTE,\n        isFallback: false,\n        prerenderManifest,\n        isRoutePPREnabled: false,\n        isOnDemandRevalidate,\n        revalidateOnlyGenerated,\n        responseGenerator,\n        waitUntil: ctx.waitUntil,\n        isMinimalMode,\n      })\n\n      // we don't create a cacheEntry for ISR\n      if (!isIsr) {\n        return null\n      }\n\n      if (cacheEntry?.value?.kind !== CachedRouteKind.APP_ROUTE) {\n        throw new Error(\n          `Invariant: app-route received invalid cache entry ${cacheEntry?.value?.kind}`\n        )\n      }\n\n      if (!isMinimalMode) {\n        res.setHeader(\n          'x-nextjs-cache',\n          isOnDemandRevalidate\n            ? 'REVALIDATED'\n            : cacheEntry.isMiss\n              ? 'MISS'\n              : cacheEntry.isStale\n                ? 'STALE'\n                : 'HIT'\n        )\n      }\n\n      // Draft mode should never be cached\n      if (isDraftMode) {\n        res.setHeader(\n          'Cache-Control',\n          'private, no-cache, no-store, max-age=0, must-revalidate'\n        )\n      }\n\n      const headers = fromNodeOutgoingHttpHeaders(cacheEntry.value.headers)\n\n      if (!(isMinimalMode && isIsr)) {\n        headers.delete(NEXT_CACHE_TAGS_HEADER)\n      }\n\n      // If cache control is already set on the response we don't\n      // override it to allow users to customize it via next.config\n      if (\n        cacheEntry.cacheControl &&\n        !res.getHeader('Cache-Control') &&\n        !headers.get('Cache-Control')\n      ) {\n        headers.set(\n          'Cache-Control',\n          getCacheControlHeader(cacheEntry.cacheControl)\n        )\n      }\n\n      await sendResponse(\n        nodeNextReq,\n        nodeNextRes,\n        // @ts-expect-error - Argument of type 'Buffer<ArrayBufferLike>' is not assignable to parameter of type 'BodyInit | null | undefined'.\n        new Response(cacheEntry.value.body, {\n          headers,\n          status: cacheEntry.value.status || 200,\n        })\n      )\n      return null\n    }\n\n    // TODO: activeSpan code path is for when wrapped by\n    // next-server can be removed when this is no longer used\n    if (activeSpan) {\n      await handleResponse(activeSpan)\n    } else {\n      await tracer.withPropagatedContext(req.headers, () =>\n        tracer.trace(\n          BaseServerSpan.handleRequest,\n          {\n            spanName: `${method} ${srcPage}`,\n            kind: SpanKind.SERVER,\n            attributes: {\n              'http.method': method,\n              'http.target': req.url,\n            },\n          },\n          handleResponse\n        )\n      )\n    }\n  } catch (err) {\n    if (!(err instanceof NoFallbackError)) {\n      await routeModule.onRequestError(req, err, {\n        routerKind: 'App Router',\n        routePath: normalizedSrcPage,\n        routeType: 'route',\n        revalidateReason: getRevalidateReason({\n          isStaticGeneration,\n          isOnDemandRevalidate,\n        }),\n      })\n    }\n\n    // rethrow so that we can handle serving error page\n\n    // If this is during static generation, throw the error again.\n    if (isIsr) throw err\n\n    // Otherwise, send a 500 response.\n    await sendResponse(\n      nodeNextReq,\n      nodeNextRes,\n      new Response(null, { status: 500 })\n    )\n    return null\n  }\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nexport function isAbortError(err: unknown) {\n  return (\n    typeof err === 'object' &&\n    err !== null &&\n    // Spec-compliant fetch implementations\n    (('name' in err && (err as any).name === 'AbortError') ||\n      // Expo fetch\n      ('message' in err && String((err as any).message).includes('FetchRequestCanceledException')))\n  );\n}\n\nexport const castToError = (err: any): Error => {\n  if (err instanceof Error) return err;\n  if (typeof err === 'object' && err !== null) {\n    try {\n      if (Object.prototype.toString.call(err) === '[object Error]') {\n        // @ts-ignore - not all envs have native support for cause yet\n        const error = new Error(err.message, err.cause ? { cause: err.cause } : {});\n        if (err.stack) error.stack = err.stack;\n        // @ts-ignore - not all envs have native support for cause yet\n        if (err.cause && !error.cause) error.cause = err.cause;\n        if (err.name) error.name = err.name;\n        return error;\n      }\n    } catch {}\n    try {\n      return new Error(JSON.stringify(err));\n    } catch {}\n  }\n  return new Error(err);\n};\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\n/**\n * This module provides internal shims and utility functions for environments where certain Node.js or global types may not be available.\n *\n * These are used to ensure we can provide a consistent behaviour between different JavaScript environments and good error\n * messages in cases where an environment isn't fully supported.\n */\n\nimport type { Fetch } from './builtin-types';\nimport type { ReadableStream } from './shim-types';\n\nexport function getDefaultFetch(): Fetch {\n  if (typeof fetch !== 'undefined') {\n    return fetch as any;\n  }\n\n  throw new Error(\n    '`fetch` is not defined as a global; Either pass `fetch` to the client, `new Anthropic({ fetch })` or polyfill the global, `globalThis.fetch = fetch`',\n  );\n}\n\ntype ReadableStreamArgs = ConstructorParameters<typeof ReadableStream>;\n\nexport function makeReadableStream(...args: ReadableStreamArgs): ReadableStream {\n  const ReadableStream = (globalThis as any).ReadableStream;\n  if (typeof ReadableStream === 'undefined') {\n    // Note: All of the platforms / runtimes we officially support already define\n    // `ReadableStream` as a global, so this should only ever be hit on unsupported runtimes.\n    throw new Error(\n      '`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`',\n    );\n  }\n\n  return new ReadableStream(...args);\n}\n\nexport function ReadableStreamFrom<T>(iterable: Iterable<T> | AsyncIterable<T>): ReadableStream<T> {\n  let iter: AsyncIterator<T> | Iterator<T> =\n    Symbol.asyncIterator in iterable ? iterable[Symbol.asyncIterator]() : iterable[Symbol.iterator]();\n\n  return makeReadableStream({\n    start() {},\n    async pull(controller: any) {\n      const { done, value } = await iter.next();\n      if (done) {\n        controller.close();\n      } else {\n        controller.enqueue(value);\n      }\n    },\n    async cancel() {\n      await iter.return?.();\n    },\n  });\n}\n\n/**\n * Most browsers don't yet have async iterable support for ReadableStream,\n * and Node has a very different way of reading bytes from its \"ReadableStream\".\n *\n * This polyfill was pulled from https://github.com/MattiasBuelens/web-streams-polyfill/pull/122#issuecomment-1627354490\n */\nexport function ReadableStreamToAsyncIterable<T>(stream: any): AsyncIterableIterator<T> {\n  if (stream[Symbol.asyncIterator]) return stream;\n\n  const reader = stream.getReader();\n  return {\n    async next() {\n      try {\n        const result = await reader.read();\n        if (result?.done) reader.releaseLock(); // release lock when stream becomes closed\n        return result;\n      } catch (e) {\n        reader.releaseLock(); // release lock when stream becomes errored\n        throw e;\n      }\n    },\n    async return() {\n      const cancelPromise = reader.cancel();\n      reader.releaseLock();\n      await cancelPromise;\n      return { done: true, value: undefined };\n    },\n    [Symbol.asyncIterator]() {\n      return this;\n    },\n  };\n}\n\n/**\n * Cancels a ReadableStream we don't need to consume.\n * See https://undici.nodejs.org/#/?id=garbage-collection\n */\nexport async function CancelReadableStream(stream: any): Promise<void> {\n  if (stream === null || typeof stream !== 'object') return;\n\n  if (stream[Symbol.asyncIterator]) {\n    await stream[Symbol.asyncIterator]().return?.();\n    return;\n  }\n\n  const reader = stream.getReader();\n  const cancelPromise = reader.cancel();\n  reader.releaseLock();\n  await cancelPromise;\n}\n","import type { Logger } from '../client';\nimport { AnthropicError } from '../core/error';\nimport {\n  BetaContentBlock,\n  BetaJSONOutputFormat,\n  BetaMessage,\n  BetaTextBlock,\n  MessageCreateParams,\n} from '../resources/beta/messages/messages';\n\n// vendored from typefest just to make things look a bit nicer on hover\ntype Simplify<T> = { [KeyType in keyof T]: T[KeyType] } & {};\n\nexport type BetaParseableMessageCreateParams = Simplify<\n  Omit<MessageCreateParams, 'output_format'> & {\n    output_format?: BetaJSONOutputFormat | AutoParseableBetaOutputFormat<any> | null;\n  }\n>;\n\nexport type ExtractParsedContentFromBetaParams<Params extends BetaParseableMessageCreateParams> =\n  Params['output_format'] extends AutoParseableBetaOutputFormat<infer P> ? P : null;\n\nexport type AutoParseableBetaOutputFormat<ParsedT> = BetaJSONOutputFormat & {\n  parse(content: string): ParsedT;\n};\n\nexport type ParsedBetaMessage<ParsedT> = BetaMessage & {\n  content: Array<ParsedBetaContentBlock<ParsedT>>;\n  parsed_output: ParsedT | null;\n};\n\nexport type ParsedBetaContentBlock<ParsedT> =\n  | (BetaTextBlock & { parsed_output: ParsedT | null })\n  | Exclude<BetaContentBlock, BetaTextBlock>;\n\nexport function maybeParseBetaMessage<Params extends BetaParseableMessageCreateParams | null>(\n  message: BetaMessage,\n  params: Params,\n  opts: { logger: Logger },\n): ParsedBetaMessage<ExtractParsedContentFromBetaParams<NonNullable<Params>>> {\n  if (!params || !('parse' in (params.output_format ?? {}))) {\n    return {\n      ...message,\n      content: message.content.map((block) => {\n        if (block.type === 'text') {\n          const parsedBlock = Object.defineProperty({ ...block }, 'parsed_output', {\n            value: null,\n            enumerable: false,\n          }) as ParsedBetaContentBlock<ExtractParsedContentFromBetaParams<NonNullable<Params>>>;\n\n          return Object.defineProperty(parsedBlock, 'parsed', {\n            get() {\n              opts.logger.warn(\n                'The `parsed` property on `text` blocks is deprecated, please use `parsed_output` instead.',\n              );\n              return null;\n            },\n            enumerable: false,\n          });\n        }\n        return block;\n      }),\n      parsed_output: null,\n    } as ParsedBetaMessage<ExtractParsedContentFromBetaParams<NonNullable<Params>>>;\n  }\n\n  return parseBetaMessage(message, params, opts);\n}\n\nexport function parseBetaMessage<Params extends BetaParseableMessageCreateParams>(\n  message: BetaMessage,\n  params: Params,\n  opts: { logger: Logger },\n): ParsedBetaMessage<ExtractParsedContentFromBetaParams<Params>> {\n  let firstParsedOutput: ReturnType<typeof parseBetaOutputFormat<Params>> | null = null;\n\n  const content: Array<ParsedBetaContentBlock<ExtractParsedContentFromBetaParams<Params>>> =\n    message.content.map((block) => {\n      if (block.type === 'text') {\n        const parsedOutput = parseBetaOutputFormat(params, block.text);\n\n        if (firstParsedOutput === null) {\n          firstParsedOutput = parsedOutput;\n        }\n\n        const parsedBlock = Object.defineProperty({ ...block }, 'parsed_output', {\n          value: parsedOutput,\n          enumerable: false,\n        }) as ParsedBetaContentBlock<ExtractParsedContentFromBetaParams<Params>>;\n        return Object.defineProperty(parsedBlock, 'parsed', {\n          get() {\n            opts.logger.warn(\n              'The `parsed` property on `text` blocks is deprecated, please use `parsed_output` instead.',\n            );\n            return parsedOutput;\n          },\n          enumerable: false,\n        });\n      }\n      return block;\n    });\n\n  return {\n    ...message,\n    content,\n    parsed_output: firstParsedOutput,\n  } as ParsedBetaMessage<ExtractParsedContentFromBetaParams<Params>>;\n}\n\nfunction parseBetaOutputFormat<Params extends BetaParseableMessageCreateParams>(\n  params: Params,\n  content: string,\n): ExtractParsedContentFromBetaParams<Params> | null {\n  if (params.output_format?.type !== 'json_schema') {\n    return null;\n  }\n\n  try {\n    if ('parse' in params.output_format) {\n      return params.output_format.parse(content);\n    }\n\n    return JSON.parse(content);\n  } catch (error) {\n    throw new AnthropicError(`Failed to parse structured output: ${error}`);\n  }\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { NullableHeaders } from './headers';\n\nimport type { BodyInit } from './builtin-types';\nimport { Stream } from '../core/streaming';\nimport type { HTTPMethod, MergedRequestInit } from './types';\nimport { type HeadersLike } from './headers';\n\nexport type FinalRequestOptions = RequestOptions & { method: HTTPMethod; path: string };\n\nexport type RequestOptions = {\n  /**\n   * The HTTP method for the request (e.g., 'get', 'post', 'put', 'delete').\n   */\n  method?: HTTPMethod;\n\n  /**\n   * The URL path for the request.\n   *\n   * @example \"/v1/foo\"\n   */\n  path?: string;\n\n  /**\n   * Query parameters to include in the request URL.\n   */\n  query?: object | undefined | null;\n\n  /**\n   * The request body. Can be a string, JSON object, FormData, or other supported types.\n   */\n  body?: unknown;\n\n  /**\n   * HTTP headers to include with the request. Can be a Headers object, plain object, or array of tuples.\n   */\n  headers?: HeadersLike;\n\n  /**\n   * The maximum number of times that the client will retry a request in case of a\n   * temporary failure, like a network error or a 5XX error from the server.\n   *\n   * @default 2\n   */\n  maxRetries?: number;\n\n  stream?: boolean | undefined;\n\n  /**\n   * The maximum amount of time (in milliseconds) that the client should wait for a response\n   * from the server before timing out a single request.\n   *\n   * @unit milliseconds\n   */\n  timeout?: number;\n\n  /**\n   * Additional `RequestInit` options to be passed to the underlying `fetch` call.\n   * These options will be merged with the client's default fetch options.\n   */\n  fetchOptions?: MergedRequestInit;\n\n  /**\n   * An AbortSignal that can be used to cancel the request.\n   */\n  signal?: AbortSignal | undefined | null;\n\n  /**\n   * A unique key for this request to enable idempotency.\n   */\n  idempotencyKey?: string;\n\n  /**\n   * Override the default base URL for this specific request.\n   */\n  defaultBaseURL?: string | undefined;\n\n  __binaryResponse?: boolean | undefined;\n  __streamClass?: typeof Stream;\n};\n\nexport type EncodedContent = { bodyHeaders: HeadersLike; body: BodyInit };\nexport type RequestEncoder = (request: { headers: NullableHeaders; body: unknown }) => EncodedContent;\n\nexport const FallbackEncoder: RequestEncoder = ({ headers, body }) => {\n  return {\n    bodyHeaders: {\n      'content-type': 'application/json',\n    },\n    body: JSON.stringify(body),\n  };\n};\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { BaseAnthropic } from '../client';\n\nexport abstract class APIResource {\n  protected _client: BaseAnthropic;\n\n  constructor(client: BaseAnthropic) {\n    this._client = client;\n  }\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nexport const sleep = (ms: number) => new Promise<void>((resolve) => setTimeout(resolve, ms));\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../../core/resource';\nimport * as Shared from '../shared';\nimport * as MessagesAPI from './messages';\nimport { APIPromise } from '../../core/api-promise';\nimport { Page, type PageParams, PagePromise } from '../../core/pagination';\nimport { buildHeaders } from '../../internal/headers';\nimport { RequestOptions } from '../../internal/request-options';\nimport { JSONLDecoder } from '../../internal/decoders/jsonl';\nimport { AnthropicError } from '../../error';\nimport { path } from '../../internal/utils/path';\n\nexport class Batches extends APIResource {\n  /**\n   * Send a batch of Message creation requests.\n   *\n   * The Message Batches API can be used to process multiple Messages API requests at\n   * once. Once a Message Batch is created, it begins processing immediately. Batches\n   * can take up to 24 hours to complete.\n   *\n   * Learn more about the Message Batches API in our\n   * [user guide](https://docs.claude.com/en/docs/build-with-claude/batch-processing)\n   *\n   * @example\n   * ```ts\n   * const messageBatch = await client.messages.batches.create({\n   *   requests: [\n   *     {\n   *       custom_id: 'my-custom-id-1',\n   *       params: {\n   *         max_tokens: 1024,\n   *         messages: [\n   *           { content: 'Hello, world', role: 'user' },\n   *         ],\n   *         model: 'claude-sonnet-4-5-20250929',\n   *       },\n   *     },\n   *   ],\n   * });\n   * ```\n   */\n  create(body: BatchCreateParams, options?: RequestOptions): APIPromise<MessageBatch> {\n    return this._client.post('/v1/messages/batches', { body, ...options });\n  }\n\n  /**\n   * This endpoint is idempotent and can be used to poll for Message Batch\n   * completion. To access the results of a Message Batch, make a request to the\n   * `results_url` field in the response.\n   *\n   * Learn more about the Message Batches API in our\n   * [user guide](https://docs.claude.com/en/docs/build-with-claude/batch-processing)\n   *\n   * @example\n   * ```ts\n   * const messageBatch = await client.messages.batches.retrieve(\n   *   'message_batch_id',\n   * );\n   * ```\n   */\n  retrieve(messageBatchID: string, options?: RequestOptions): APIPromise<MessageBatch> {\n    return this._client.get(path`/v1/messages/batches/${messageBatchID}`, options);\n  }\n\n  /**\n   * List all Message Batches within a Workspace. Most recently created batches are\n   * returned first.\n   *\n   * Learn more about the Message Batches API in our\n   * [user guide](https://docs.claude.com/en/docs/build-with-claude/batch-processing)\n   *\n   * @example\n   * ```ts\n   * // Automatically fetches more pages as needed.\n   * for await (const messageBatch of client.messages.batches.list()) {\n   *   // ...\n   * }\n   * ```\n   */\n  list(\n    query: BatchListParams | null | undefined = {},\n    options?: RequestOptions,\n  ): PagePromise<MessageBatchesPage, MessageBatch> {\n    return this._client.getAPIList('/v1/messages/batches', Page<MessageBatch>, { query, ...options });\n  }\n\n  /**\n   * Delete a Message Batch.\n   *\n   * Message Batches can only be deleted once they've finished processing. If you'd\n   * like to delete an in-progress batch, you must first cancel it.\n   *\n   * Learn more about the Message Batches API in our\n   * [user guide](https://docs.claude.com/en/docs/build-with-claude/batch-processing)\n   *\n   * @example\n   * ```ts\n   * const deletedMessageBatch =\n   *   await client.messages.batches.delete('message_batch_id');\n   * ```\n   */\n  delete(messageBatchID: string, options?: RequestOptions): APIPromise<DeletedMessageBatch> {\n    return this._client.delete(path`/v1/messages/batches/${messageBatchID}`, options);\n  }\n\n  /**\n   * Batches may be canceled any time before processing ends. Once cancellation is\n   * initiated, the batch enters a `canceling` state, at which time the system may\n   * complete any in-progress, non-interruptible requests before finalizing\n   * cancellation.\n   *\n   * The number of canceled requests is specified in `request_counts`. To determine\n   * which requests were canceled, check the individual results within the batch.\n   * Note that cancellation may not result in any canceled requests if they were\n   * non-interruptible.\n   *\n   * Learn more about the Message Batches API in our\n   * [user guide](https://docs.claude.com/en/docs/build-with-claude/batch-processing)\n   *\n   * @example\n   * ```ts\n   * const messageBatch = await client.messages.batches.cancel(\n   *   'message_batch_id',\n   * );\n   * ```\n   */\n  cancel(messageBatchID: string, options?: RequestOptions): APIPromise<MessageBatch> {\n    return this._client.post(path`/v1/messages/batches/${messageBatchID}/cancel`, options);\n  }\n\n  /**\n   * Streams the results of a Message Batch as a `.jsonl` file.\n   *\n   * Each line in the file is a JSON object containing the result of a single request\n   * in the Message Batch. Results are not guaranteed to be in the same order as\n   * requests. Use the `custom_id` field to match results to requests.\n   *\n   * Learn more about the Message Batches API in our\n   * [user guide](https://docs.claude.com/en/docs/build-with-claude/batch-processing)\n   *\n   * @example\n   * ```ts\n   * const messageBatchIndividualResponse =\n   *   await client.messages.batches.results('message_batch_id');\n   * ```\n   */\n  async results(\n    messageBatchID: string,\n    options?: RequestOptions,\n  ): Promise<JSONLDecoder<MessageBatchIndividualResponse>> {\n    const batch = await this.retrieve(messageBatchID);\n    if (!batch.results_url) {\n      throw new AnthropicError(\n        `No batch \\`results_url\\`; Has it finished processing? ${batch.processing_status} - ${batch.id}`,\n      );\n    }\n\n    return this._client\n      .get(batch.results_url, {\n        ...options,\n        headers: buildHeaders([{ Accept: 'application/binary' }, options?.headers]),\n        stream: true,\n        __binaryResponse: true,\n      })\n      ._thenUnwrap((_, props) => JSONLDecoder.fromResponse(props.response, props.controller)) as APIPromise<\n      JSONLDecoder<MessageBatchIndividualResponse>\n    >;\n  }\n}\n\nexport type MessageBatchesPage = Page<MessageBatch>;\n\nexport interface DeletedMessageBatch {\n  /**\n   * ID of the Message Batch.\n   */\n  id: string;\n\n  /**\n   * Deleted object type.\n   *\n   * For Message Batches, this is always `\"message_batch_deleted\"`.\n   */\n  type: 'message_batch_deleted';\n}\n\nexport interface MessageBatch {\n  /**\n   * Unique object identifier.\n   *\n   * The format and length of IDs may change over time.\n   */\n  id: string;\n\n  /**\n   * RFC 3339 datetime string representing the time at which the Message Batch was\n   * archived and its results became unavailable.\n   */\n  archived_at: string | null;\n\n  /**\n   * RFC 3339 datetime string representing the time at which cancellation was\n   * initiated for the Message Batch. Specified only if cancellation was initiated.\n   */\n  cancel_initiated_at: string | null;\n\n  /**\n   * RFC 3339 datetime string representing the time at which the Message Batch was\n   * created.\n   */\n  created_at: string;\n\n  /**\n   * RFC 3339 datetime string representing the time at which processing for the\n   * Message Batch ended. Specified only once processing ends.\n   *\n   * Processing ends when every request in a Message Batch has either succeeded,\n   * errored, canceled, or expired.\n   */\n  ended_at: string | null;\n\n  /**\n   * RFC 3339 datetime string representing the time at which the Message Batch will\n   * expire and end processing, which is 24 hours after creation.\n   */\n  expires_at: string;\n\n  /**\n   * Processing status of the Message Batch.\n   */\n  processing_status: 'in_progress' | 'canceling' | 'ended';\n\n  /**\n   * Tallies requests within the Message Batch, categorized by their status.\n   *\n   * Requests start as `processing` and move to one of the other statuses only once\n   * processing of the entire batch ends. The sum of all values always matches the\n   * total number of requests in the batch.\n   */\n  request_counts: MessageBatchRequestCounts;\n\n  /**\n   * URL to a `.jsonl` file containing the results of the Message Batch requests.\n   * Specified only once processing ends.\n   *\n   * Results in the file are not guaranteed to be in the same order as requests. Use\n   * the `custom_id` field to match results to requests.\n   */\n  results_url: string | null;\n\n  /**\n   * Object type.\n   *\n   * For Message Batches, this is always `\"message_batch\"`.\n   */\n  type: 'message_batch';\n}\n\nexport interface MessageBatchCanceledResult {\n  type: 'canceled';\n}\n\nexport interface MessageBatchErroredResult {\n  error: Shared.ErrorResponse;\n\n  type: 'errored';\n}\n\nexport interface MessageBatchExpiredResult {\n  type: 'expired';\n}\n\n/**\n * This is a single line in the response `.jsonl` file and does not represent the\n * response as a whole.\n */\nexport interface MessageBatchIndividualResponse {\n  /**\n   * Developer-provided ID created for each request in a Message Batch. Useful for\n   * matching results to requests, as results may be given out of request order.\n   *\n   * Must be unique for each request within the Message Batch.\n   */\n  custom_id: string;\n\n  /**\n   * Processing result for this request.\n   *\n   * Contains a Message output if processing was successful, an error response if\n   * processing failed, or the reason why processing was not attempted, such as\n   * cancellation or expiration.\n   */\n  result: MessageBatchResult;\n}\n\nexport interface MessageBatchRequestCounts {\n  /**\n   * Number of requests in the Message Batch that have been canceled.\n   *\n   * This is zero until processing of the entire Message Batch has ended.\n   */\n  canceled: number;\n\n  /**\n   * Number of requests in the Message Batch that encountered an error.\n   *\n   * This is zero until processing of the entire Message Batch has ended.\n   */\n  errored: number;\n\n  /**\n   * Number of requests in the Message Batch that have expired.\n   *\n   * This is zero until processing of the entire Message Batch has ended.\n   */\n  expired: number;\n\n  /**\n   * Number of requests in the Message Batch that are processing.\n   */\n  processing: number;\n\n  /**\n   * Number of requests in the Message Batch that have completed successfully.\n   *\n   * This is zero until processing of the entire Message Batch has ended.\n   */\n  succeeded: number;\n}\n\n/**\n * Processing result for this request.\n *\n * Contains a Message output if processing was successful, an error response if\n * processing failed, or the reason why processing was not attempted, such as\n * cancellation or expiration.\n */\nexport type MessageBatchResult =\n  | MessageBatchSucceededResult\n  | MessageBatchErroredResult\n  | MessageBatchCanceledResult\n  | MessageBatchExpiredResult;\n\nexport interface MessageBatchSucceededResult {\n  message: MessagesAPI.Message;\n\n  type: 'succeeded';\n}\n\nexport interface BatchCreateParams {\n  /**\n   * List of requests for prompt completion. Each is an individual request to create\n   * a Message.\n   */\n  requests: Array<BatchCreateParams.Request>;\n}\n\nexport namespace BatchCreateParams {\n  export interface Request {\n    /**\n     * Developer-provided ID created for each request in a Message Batch. Useful for\n     * matching results to requests, as results may be given out of request order.\n     *\n     * Must be unique for each request within the Message Batch.\n     */\n    custom_id: string;\n\n    /**\n     * Messages API creation parameters for the individual request.\n     *\n     * See the [Messages API reference](https://docs.claude.com/en/api/messages) for\n     * full documentation on available parameters.\n     */\n    params: MessagesAPI.MessageCreateParamsNonStreaming;\n  }\n}\n\nexport interface BatchListParams extends PageParams {}\n\nexport declare namespace Batches {\n  export {\n    type DeletedMessageBatch as DeletedMessageBatch,\n    type MessageBatch as MessageBatch,\n    type MessageBatchCanceledResult as MessageBatchCanceledResult,\n    type MessageBatchErroredResult as MessageBatchErroredResult,\n    type MessageBatchExpiredResult as MessageBatchExpiredResult,\n    type MessageBatchIndividualResponse as MessageBatchIndividualResponse,\n    type MessageBatchRequestCounts as MessageBatchRequestCounts,\n    type MessageBatchResult as MessageBatchResult,\n    type MessageBatchSucceededResult as MessageBatchSucceededResult,\n    type MessageBatchesPage as MessageBatchesPage,\n    type BatchCreateParams as BatchCreateParams,\n    type BatchListParams as BatchListParams,\n  };\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../../../core/resource';\nimport * as BetaAPI from '../beta';\nimport { APIPromise } from '../../../core/api-promise';\nimport { PageCursor, type PageCursorParams, PagePromise } from '../../../core/pagination';\nimport { type Uploadable } from '../../../core/uploads';\nimport { buildHeaders } from '../../../internal/headers';\nimport { RequestOptions } from '../../../internal/request-options';\nimport { multipartFormRequestOptions } from '../../../internal/uploads';\nimport { path } from '../../../internal/utils/path';\n\nexport class Versions extends APIResource {\n  /**\n   * Create Skill Version\n   *\n   * @example\n   * ```ts\n   * const version = await client.beta.skills.versions.create(\n   *   'skill_id',\n   * );\n   * ```\n   */\n  create(\n    skillID: string,\n    params: VersionCreateParams | null | undefined = {},\n    options?: RequestOptions,\n  ): APIPromise<VersionCreateResponse> {\n    const { betas, ...body } = params ?? {};\n    return this._client.post(\n      path`/v1/skills/${skillID}/versions?beta=true`,\n      multipartFormRequestOptions(\n        {\n          body,\n          ...options,\n          headers: buildHeaders([\n            { 'anthropic-beta': [...(betas ?? []), 'skills-2025-10-02'].toString() },\n            options?.headers,\n          ]),\n        },\n        this._client,\n      ),\n    );\n  }\n\n  /**\n   * Get Skill Version\n   *\n   * @example\n   * ```ts\n   * const version = await client.beta.skills.versions.retrieve(\n   *   'version',\n   *   { skill_id: 'skill_id' },\n   * );\n   * ```\n   */\n  retrieve(\n    version: string,\n    params: VersionRetrieveParams,\n    options?: RequestOptions,\n  ): APIPromise<VersionRetrieveResponse> {\n    const { skill_id, betas } = params;\n    return this._client.get(path`/v1/skills/${skill_id}/versions/${version}?beta=true`, {\n      ...options,\n      headers: buildHeaders([\n        { 'anthropic-beta': [...(betas ?? []), 'skills-2025-10-02'].toString() },\n        options?.headers,\n      ]),\n    });\n  }\n\n  /**\n   * List Skill Versions\n   *\n   * @example\n   * ```ts\n   * // Automatically fetches more pages as needed.\n   * for await (const versionListResponse of client.beta.skills.versions.list(\n   *   'skill_id',\n   * )) {\n   *   // ...\n   * }\n   * ```\n   */\n  list(\n    skillID: string,\n    params: VersionListParams | null | undefined = {},\n    options?: RequestOptions,\n  ): PagePromise<VersionListResponsesPageCursor, VersionListResponse> {\n    const { betas, ...query } = params ?? {};\n    return this._client.getAPIList(\n      path`/v1/skills/${skillID}/versions?beta=true`,\n      PageCursor<VersionListResponse>,\n      {\n        query,\n        ...options,\n        headers: buildHeaders([\n          { 'anthropic-beta': [...(betas ?? []), 'skills-2025-10-02'].toString() },\n          options?.headers,\n        ]),\n      },\n    );\n  }\n\n  /**\n   * Delete Skill Version\n   *\n   * @example\n   * ```ts\n   * const version = await client.beta.skills.versions.delete(\n   *   'version',\n   *   { skill_id: 'skill_id' },\n   * );\n   * ```\n   */\n  delete(\n    version: string,\n    params: VersionDeleteParams,\n    options?: RequestOptions,\n  ): APIPromise<VersionDeleteResponse> {\n    const { skill_id, betas } = params;\n    return this._client.delete(path`/v1/skills/${skill_id}/versions/${version}?beta=true`, {\n      ...options,\n      headers: buildHeaders([\n        { 'anthropic-beta': [...(betas ?? []), 'skills-2025-10-02'].toString() },\n        options?.headers,\n      ]),\n    });\n  }\n}\n\nexport type VersionListResponsesPageCursor = PageCursor<VersionListResponse>;\n\nexport interface VersionCreateResponse {\n  /**\n   * Unique identifier for the skill version.\n   *\n   * The format and length of IDs may change over time.\n   */\n  id: string;\n\n  /**\n   * ISO 8601 timestamp of when the skill version was created.\n   */\n  created_at: string;\n\n  /**\n   * Description of the skill version.\n   *\n   * This is extracted from the SKILL.md file in the skill upload.\n   */\n  description: string;\n\n  /**\n   * Directory name of the skill version.\n   *\n   * This is the top-level directory name that was extracted from the uploaded files.\n   */\n  directory: string;\n\n  /**\n   * Human-readable name of the skill version.\n   *\n   * This is extracted from the SKILL.md file in the skill upload.\n   */\n  name: string;\n\n  /**\n   * Identifier for the skill that this version belongs to.\n   */\n  skill_id: string;\n\n  /**\n   * Object type.\n   *\n   * For Skill Versions, this is always `\"skill_version\"`.\n   */\n  type: string;\n\n  /**\n   * Version identifier for the skill.\n   *\n   * Each version is identified by a Unix epoch timestamp (e.g., \"1759178010641129\").\n   */\n  version: string;\n}\n\nexport interface VersionRetrieveResponse {\n  /**\n   * Unique identifier for the skill version.\n   *\n   * The format and length of IDs may change over time.\n   */\n  id: string;\n\n  /**\n   * ISO 8601 timestamp of when the skill version was created.\n   */\n  created_at: string;\n\n  /**\n   * Description of the skill version.\n   *\n   * This is extracted from the SKILL.md file in the skill upload.\n   */\n  description: string;\n\n  /**\n   * Directory name of the skill version.\n   *\n   * This is the top-level directory name that was extracted from the uploaded files.\n   */\n  directory: string;\n\n  /**\n   * Human-readable name of the skill version.\n   *\n   * This is extracted from the SKILL.md file in the skill upload.\n   */\n  name: string;\n\n  /**\n   * Identifier for the skill that this version belongs to.\n   */\n  skill_id: string;\n\n  /**\n   * Object type.\n   *\n   * For Skill Versions, this is always `\"skill_version\"`.\n   */\n  type: string;\n\n  /**\n   * Version identifier for the skill.\n   *\n   * Each version is identified by a Unix epoch timestamp (e.g., \"1759178010641129\").\n   */\n  version: string;\n}\n\nexport interface VersionListResponse {\n  /**\n   * Unique identifier for the skill version.\n   *\n   * The format and length of IDs may change over time.\n   */\n  id: string;\n\n  /**\n   * ISO 8601 timestamp of when the skill version was created.\n   */\n  created_at: string;\n\n  /**\n   * Description of the skill version.\n   *\n   * This is extracted from the SKILL.md file in the skill upload.\n   */\n  description: string;\n\n  /**\n   * Directory name of the skill version.\n   *\n   * This is the top-level directory name that was extracted from the uploaded files.\n   */\n  directory: string;\n\n  /**\n   * Human-readable name of the skill version.\n   *\n   * This is extracted from the SKILL.md file in the skill upload.\n   */\n  name: string;\n\n  /**\n   * Identifier for the skill that this version belongs to.\n   */\n  skill_id: string;\n\n  /**\n   * Object type.\n   *\n   * For Skill Versions, this is always `\"skill_version\"`.\n   */\n  type: string;\n\n  /**\n   * Version identifier for the skill.\n   *\n   * Each version is identified by a Unix epoch timestamp (e.g., \"1759178010641129\").\n   */\n  version: string;\n}\n\nexport interface VersionDeleteResponse {\n  /**\n   * Version identifier for the skill.\n   *\n   * Each version is identified by a Unix epoch timestamp (e.g., \"1759178010641129\").\n   */\n  id: string;\n\n  /**\n   * Deleted object type.\n   *\n   * For Skill Versions, this is always `\"skill_version_deleted\"`.\n   */\n  type: string;\n}\n\nexport interface VersionCreateParams {\n  /**\n   * Body param: Files to upload for the skill.\n   *\n   * All files must be in the same top-level directory and must include a SKILL.md\n   * file at the root of that directory.\n   */\n  files?: Array<Uploadable> | null;\n\n  /**\n   * Header param: Optional header to specify the beta version(s) you want to use.\n   */\n  betas?: Array<BetaAPI.AnthropicBeta>;\n}\n\nexport interface VersionRetrieveParams {\n  /**\n   * Path param: Unique identifier for the skill.\n   *\n   * The format and length of IDs may change over time.\n   */\n  skill_id: string;\n\n  /**\n   * Header param: Optional header to specify the beta version(s) you want to use.\n   */\n  betas?: Array<BetaAPI.AnthropicBeta>;\n}\n\nexport interface VersionListParams extends PageCursorParams {\n  /**\n   * Header param: Optional header to specify the beta version(s) you want to use.\n   */\n  betas?: Array<BetaAPI.AnthropicBeta>;\n}\n\nexport interface VersionDeleteParams {\n  /**\n   * Path param: Unique identifier for the skill.\n   *\n   * The format and length of IDs may change over time.\n   */\n  skill_id: string;\n\n  /**\n   * Header param: Optional header to specify the beta version(s) you want to use.\n   */\n  betas?: Array<BetaAPI.AnthropicBeta>;\n}\n\nexport declare namespace Versions {\n  export {\n    type VersionCreateResponse as VersionCreateResponse,\n    type VersionRetrieveResponse as VersionRetrieveResponse,\n    type VersionListResponse as VersionListResponse,\n    type VersionDeleteResponse as VersionDeleteResponse,\n    type VersionListResponsesPageCursor as VersionListResponsesPageCursor,\n    type VersionCreateParams as VersionCreateParams,\n    type VersionRetrieveParams as VersionRetrieveParams,\n    type VersionListParams as VersionListParams,\n    type VersionDeleteParams as VersionDeleteParams,\n  };\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIPromise } from '../../core/api-promise';\nimport { APIResource } from '../../core/resource';\nimport { Stream } from '../../core/streaming';\nimport { RequestOptions } from '../../internal/request-options';\nimport { MessageStream } from '../../lib/MessageStream';\nimport * as BatchesAPI from './batches';\nimport {\n  BatchCreateParams,\n  BatchListParams,\n  Batches,\n  DeletedMessageBatch,\n  MessageBatch,\n  MessageBatchCanceledResult,\n  MessageBatchErroredResult,\n  MessageBatchExpiredResult,\n  MessageBatchIndividualResponse,\n  MessageBatchRequestCounts,\n  MessageBatchResult,\n  MessageBatchSucceededResult,\n  MessageBatchesPage,\n} from './batches';\nimport * as MessagesAPI from './messages';\n\nimport { MODEL_NONSTREAMING_TOKENS } from '../../internal/constants';\n\nexport class Messages extends APIResource {\n  batches: BatchesAPI.Batches = new BatchesAPI.Batches(this._client);\n\n  /**\n   * Send a structured list of input messages with text and/or image content, and the\n   * model will generate the next message in the conversation.\n   *\n   * The Messages API can be used for either single queries or stateless multi-turn\n   * conversations.\n   *\n   * Learn more about the Messages API in our\n   * [user guide](https://docs.claude.com/en/docs/initial-setup)\n   *\n   * @example\n   * ```ts\n   * const message = await client.messages.create({\n   *   max_tokens: 1024,\n   *   messages: [{ content: 'Hello, world', role: 'user' }],\n   *   model: 'claude-sonnet-4-5-20250929',\n   * });\n   * ```\n   */\n  create(body: MessageCreateParamsNonStreaming, options?: RequestOptions): APIPromise<Message>;\n  create(\n    body: MessageCreateParamsStreaming,\n    options?: RequestOptions,\n  ): APIPromise<Stream<RawMessageStreamEvent>>;\n  create(\n    body: MessageCreateParamsBase,\n    options?: RequestOptions,\n  ): APIPromise<Stream<RawMessageStreamEvent> | Message>;\n  create(\n    body: MessageCreateParams,\n    options?: RequestOptions,\n  ): APIPromise<Message> | APIPromise<Stream<RawMessageStreamEvent>> {\n    if (body.model in DEPRECATED_MODELS) {\n      console.warn(\n        `The model '${body.model}' is deprecated and will reach end-of-life on ${\n          DEPRECATED_MODELS[body.model]\n        }\\nPlease migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`,\n      );\n    }\n    let timeout = (this._client as any)._options.timeout as number | null;\n    if (!body.stream && timeout == null) {\n      const maxNonstreamingTokens = MODEL_NONSTREAMING_TOKENS[body.model] ?? undefined;\n      timeout = this._client.calculateNonstreamingTimeout(body.max_tokens, maxNonstreamingTokens);\n    }\n    return this._client.post('/v1/messages', {\n      body,\n      timeout: timeout ?? 600000,\n      ...options,\n      stream: body.stream ?? false,\n    }) as APIPromise<Message> | APIPromise<Stream<RawMessageStreamEvent>>;\n  }\n\n  /**\n   * Create a Message stream\n   */\n  stream(body: MessageStreamParams, options?: RequestOptions): MessageStream {\n    return MessageStream.createMessage(this, body, options);\n  }\n\n  /**\n   * Count the number of tokens in a Message.\n   *\n   * The Token Count API can be used to count the number of tokens in a Message,\n   * including tools, images, and documents, without creating it.\n   *\n   * Learn more about token counting in our\n   * [user guide](https://docs.claude.com/en/docs/build-with-claude/token-counting)\n   *\n   * @example\n   * ```ts\n   * const messageTokensCount =\n   *   await client.messages.countTokens({\n   *     messages: [{ content: 'string', role: 'user' }],\n   *     model: 'claude-opus-4-5-20251101',\n   *   });\n   * ```\n   */\n  countTokens(body: MessageCountTokensParams, options?: RequestOptions): APIPromise<MessageTokensCount> {\n    return this._client.post('/v1/messages/count_tokens', { body, ...options });\n  }\n}\n\nexport interface Base64ImageSource {\n  data: string;\n\n  media_type: 'image/jpeg' | 'image/png' | 'image/gif' | 'image/webp';\n\n  type: 'base64';\n}\n\nexport interface Base64PDFSource {\n  data: string;\n\n  media_type: 'application/pdf';\n\n  type: 'base64';\n}\n\nexport interface CacheControlEphemeral {\n  type: 'ephemeral';\n\n  /**\n   * The time-to-live for the cache control breakpoint.\n   *\n   * This may be one the following values:\n   *\n   * - `5m`: 5 minutes\n   * - `1h`: 1 hour\n   *\n   * Defaults to `5m`.\n   */\n  ttl?: '5m' | '1h';\n}\n\nexport interface CacheCreation {\n  /**\n   * The number of input tokens used to create the 1 hour cache entry.\n   */\n  ephemeral_1h_input_tokens: number;\n\n  /**\n   * The number of input tokens used to create the 5 minute cache entry.\n   */\n  ephemeral_5m_input_tokens: number;\n}\n\nexport interface CitationCharLocation {\n  cited_text: string;\n\n  document_index: number;\n\n  document_title: string | null;\n\n  end_char_index: number;\n\n  file_id: string | null;\n\n  start_char_index: number;\n\n  type: 'char_location';\n}\n\nexport interface CitationCharLocationParam {\n  cited_text: string;\n\n  document_index: number;\n\n  document_title: string | null;\n\n  end_char_index: number;\n\n  start_char_index: number;\n\n  type: 'char_location';\n}\n\nexport interface CitationContentBlockLocation {\n  cited_text: string;\n\n  document_index: number;\n\n  document_title: string | null;\n\n  end_block_index: number;\n\n  file_id: string | null;\n\n  start_block_index: number;\n\n  type: 'content_block_location';\n}\n\nexport interface CitationContentBlockLocationParam {\n  cited_text: string;\n\n  document_index: number;\n\n  document_title: string | null;\n\n  end_block_index: number;\n\n  start_block_index: number;\n\n  type: 'content_block_location';\n}\n\nexport interface CitationPageLocation {\n  cited_text: string;\n\n  document_index: number;\n\n  document_title: string | null;\n\n  end_page_number: number;\n\n  file_id: string | null;\n\n  start_page_number: number;\n\n  type: 'page_location';\n}\n\nexport interface CitationPageLocationParam {\n  cited_text: string;\n\n  document_index: number;\n\n  document_title: string | null;\n\n  end_page_number: number;\n\n  start_page_number: number;\n\n  type: 'page_location';\n}\n\nexport interface CitationSearchResultLocationParam {\n  cited_text: string;\n\n  end_block_index: number;\n\n  search_result_index: number;\n\n  source: string;\n\n  start_block_index: number;\n\n  title: string | null;\n\n  type: 'search_result_location';\n}\n\nexport interface CitationWebSearchResultLocationParam {\n  cited_text: string;\n\n  encrypted_index: string;\n\n  title: string | null;\n\n  type: 'web_search_result_location';\n\n  url: string;\n}\n\nexport interface CitationsConfigParam {\n  enabled?: boolean;\n}\n\nexport interface CitationsDelta {\n  citation:\n    | CitationCharLocation\n    | CitationPageLocation\n    | CitationContentBlockLocation\n    | CitationsWebSearchResultLocation\n    | CitationsSearchResultLocation;\n\n  type: 'citations_delta';\n}\n\nexport interface CitationsSearchResultLocation {\n  cited_text: string;\n\n  end_block_index: number;\n\n  search_result_index: number;\n\n  source: string;\n\n  start_block_index: number;\n\n  title: string | null;\n\n  type: 'search_result_location';\n}\n\nexport interface CitationsWebSearchResultLocation {\n  cited_text: string;\n\n  encrypted_index: string;\n\n  title: string | null;\n\n  type: 'web_search_result_location';\n\n  url: string;\n}\n\nexport type ContentBlock =\n  | TextBlock\n  | ThinkingBlock\n  | RedactedThinkingBlock\n  | ToolUseBlock\n  | ServerToolUseBlock\n  | WebSearchToolResultBlock;\n\n/**\n * Regular text content.\n */\nexport type ContentBlockParam =\n  | TextBlockParam\n  | ImageBlockParam\n  | DocumentBlockParam\n  | SearchResultBlockParam\n  | ThinkingBlockParam\n  | RedactedThinkingBlockParam\n  | ToolUseBlockParam\n  | ToolResultBlockParam\n  | ServerToolUseBlockParam\n  | WebSearchToolResultBlockParam;\n\nexport interface ContentBlockSource {\n  content: string | Array<ContentBlockSourceContent>;\n\n  type: 'content';\n}\n\nexport type ContentBlockSourceContent = TextBlockParam | ImageBlockParam;\n\nexport interface DocumentBlockParam {\n  source: Base64PDFSource | PlainTextSource | ContentBlockSource | URLPDFSource;\n\n  type: 'document';\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: CacheControlEphemeral | null;\n\n  citations?: CitationsConfigParam | null;\n\n  context?: string | null;\n\n  title?: string | null;\n}\n\nexport interface ImageBlockParam {\n  source: Base64ImageSource | URLImageSource;\n\n  type: 'image';\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: CacheControlEphemeral | null;\n}\n\nexport interface InputJSONDelta {\n  partial_json: string;\n\n  type: 'input_json_delta';\n}\n\nexport interface Message {\n  /**\n   * Unique object identifier.\n   *\n   * The format and length of IDs may change over time.\n   */\n  id: string;\n\n  /**\n   * Content generated by the model.\n   *\n   * This is an array of content blocks, each of which has a `type` that determines\n   * its shape.\n   *\n   * Example:\n   *\n   * ```json\n   * [{ \"type\": \"text\", \"text\": \"Hi, I'm Claude.\" }]\n   * ```\n   *\n   * If the request input `messages` ended with an `assistant` turn, then the\n   * response `content` will continue directly from that last turn. You can use this\n   * to constrain the model's output.\n   *\n   * For example, if the input `messages` were:\n   *\n   * ```json\n   * [\n   *   {\n   *     \"role\": \"user\",\n   *     \"content\": \"What's the Greek name for Sun? (A) Sol (B) Helios (C) Sun\"\n   *   },\n   *   { \"role\": \"assistant\", \"content\": \"The best answer is (\" }\n   * ]\n   * ```\n   *\n   * Then the response `content` might be:\n   *\n   * ```json\n   * [{ \"type\": \"text\", \"text\": \"B)\" }]\n   * ```\n   */\n  content: Array<ContentBlock>;\n\n  /**\n   * The model that will complete your prompt.\\n\\nSee\n   * [models](https://docs.anthropic.com/en/docs/models-overview) for additional\n   * details and options.\n   */\n  model: Model;\n\n  /**\n   * Conversational role of the generated message.\n   *\n   * This will always be `\"assistant\"`.\n   */\n  role: 'assistant';\n\n  /**\n   * The reason that we stopped.\n   *\n   * This may be one the following values:\n   *\n   * - `\"end_turn\"`: the model reached a natural stopping point\n   * - `\"max_tokens\"`: we exceeded the requested `max_tokens` or the model's maximum\n   * - `\"stop_sequence\"`: one of your provided custom `stop_sequences` was generated\n   * - `\"tool_use\"`: the model invoked one or more tools\n   * - `\"pause_turn\"`: we paused a long-running turn. You may provide the response\n   *   back as-is in a subsequent request to let the model continue.\n   * - `\"refusal\"`: when streaming classifiers intervene to handle potential policy\n   *   violations\n   *\n   * In non-streaming mode this value is always non-null. In streaming mode, it is\n   * null in the `message_start` event and non-null otherwise.\n   */\n  stop_reason: StopReason | null;\n\n  /**\n   * Which custom stop sequence was generated, if any.\n   *\n   * This value will be a non-null string if one of your custom stop sequences was\n   * generated.\n   */\n  stop_sequence: string | null;\n\n  /**\n   * Object type.\n   *\n   * For Messages, this is always `\"message\"`.\n   */\n  type: 'message';\n\n  /**\n   * Billing and rate-limit usage.\n   *\n   * Anthropic's API bills and rate-limits by token counts, as tokens represent the\n   * underlying cost to our systems.\n   *\n   * Under the hood, the API transforms requests into a format suitable for the\n   * model. The model's output then goes through a parsing stage before becoming an\n   * API response. As a result, the token counts in `usage` will not match one-to-one\n   * with the exact visible content of an API request or response.\n   *\n   * For example, `output_tokens` will be non-zero, even for an empty string response\n   * from Claude.\n   *\n   * Total input tokens in a request is the summation of `input_tokens`,\n   * `cache_creation_input_tokens`, and `cache_read_input_tokens`.\n   */\n  usage: Usage;\n}\n\nexport type MessageCountTokensTool =\n  | Tool\n  | ToolBash20250124\n  | ToolTextEditor20250124\n  | ToolTextEditor20250429\n  | ToolTextEditor20250728\n  | WebSearchTool20250305;\n\nexport interface MessageDeltaUsage {\n  /**\n   * The cumulative number of input tokens used to create the cache entry.\n   */\n  cache_creation_input_tokens: number | null;\n\n  /**\n   * The cumulative number of input tokens read from the cache.\n   */\n  cache_read_input_tokens: number | null;\n\n  /**\n   * The cumulative number of input tokens which were used.\n   */\n  input_tokens: number | null;\n\n  /**\n   * The cumulative number of output tokens which were used.\n   */\n  output_tokens: number;\n\n  /**\n   * The number of server tool requests.\n   */\n  server_tool_use: ServerToolUsage | null;\n}\n\nexport interface MessageParam {\n  content: string | Array<ContentBlockParam>;\n\n  role: 'user' | 'assistant';\n}\n\nexport interface MessageTokensCount {\n  /**\n   * The total number of tokens across the provided list of messages, system prompt,\n   * and tools.\n   */\n  input_tokens: number;\n}\n\nexport interface Metadata {\n  /**\n   * An external identifier for the user who is associated with the request.\n   *\n   * This should be a uuid, hash value, or other opaque identifier. Anthropic may use\n   * this id to help detect abuse. Do not include any identifying information such as\n   * name, email address, or phone number.\n   */\n  user_id?: string | null;\n}\n\n/**\n * The model that will complete your prompt.\\n\\nSee\n * [models](https://docs.anthropic.com/en/docs/models-overview) for additional\n * details and options.\n */\nexport type Model =\n  | 'claude-opus-4-5-20251101'\n  | 'claude-opus-4-5'\n  | 'claude-3-7-sonnet-latest'\n  | 'claude-3-7-sonnet-20250219'\n  | 'claude-3-5-haiku-latest'\n  | 'claude-3-5-haiku-20241022'\n  | 'claude-haiku-4-5'\n  | 'claude-haiku-4-5-20251001'\n  | 'claude-sonnet-4-20250514'\n  | 'claude-sonnet-4-0'\n  | 'claude-4-sonnet-20250514'\n  | 'claude-sonnet-4-5'\n  | 'claude-sonnet-4-5-20250929'\n  | 'claude-opus-4-0'\n  | 'claude-opus-4-20250514'\n  | 'claude-4-opus-20250514'\n  | 'claude-opus-4-1-20250805'\n  | 'claude-3-opus-latest'\n  | 'claude-3-opus-20240229'\n  | 'claude-3-haiku-20240307'\n  | (string & {});\n\nconst DEPRECATED_MODELS: {\n  [K in Model]?: string;\n} = {\n  'claude-1.3': 'November 6th, 2024',\n  'claude-1.3-100k': 'November 6th, 2024',\n  'claude-instant-1.1': 'November 6th, 2024',\n  'claude-instant-1.1-100k': 'November 6th, 2024',\n  'claude-instant-1.2': 'November 6th, 2024',\n  'claude-3-sonnet-20240229': 'July 21st, 2025',\n  'claude-3-opus-20240229': 'January 5th, 2026',\n  'claude-2.1': 'July 21st, 2025',\n  'claude-2.0': 'July 21st, 2025',\n  'claude-3-7-sonnet-latest': 'February 19th, 2026',\n  'claude-3-7-sonnet-20250219': 'February 19th, 2026',\n};\n\nexport interface PlainTextSource {\n  data: string;\n\n  media_type: 'text/plain';\n\n  type: 'text';\n}\n\nexport type RawContentBlockDelta =\n  | TextDelta\n  | InputJSONDelta\n  | CitationsDelta\n  | ThinkingDelta\n  | SignatureDelta;\n\nexport interface RawContentBlockDeltaEvent {\n  delta: RawContentBlockDelta;\n\n  index: number;\n\n  type: 'content_block_delta';\n}\n\nexport interface RawContentBlockStartEvent {\n  content_block:\n    | TextBlock\n    | ThinkingBlock\n    | RedactedThinkingBlock\n    | ToolUseBlock\n    | ServerToolUseBlock\n    | WebSearchToolResultBlock;\n\n  index: number;\n\n  type: 'content_block_start';\n}\n\nexport interface RawContentBlockStopEvent {\n  index: number;\n\n  type: 'content_block_stop';\n}\n\nexport interface RawMessageDeltaEvent {\n  delta: RawMessageDeltaEvent.Delta;\n\n  type: 'message_delta';\n\n  /**\n   * Billing and rate-limit usage.\n   *\n   * Anthropic's API bills and rate-limits by token counts, as tokens represent the\n   * underlying cost to our systems.\n   *\n   * Under the hood, the API transforms requests into a format suitable for the\n   * model. The model's output then goes through a parsing stage before becoming an\n   * API response. As a result, the token counts in `usage` will not match one-to-one\n   * with the exact visible content of an API request or response.\n   *\n   * For example, `output_tokens` will be non-zero, even for an empty string response\n   * from Claude.\n   *\n   * Total input tokens in a request is the summation of `input_tokens`,\n   * `cache_creation_input_tokens`, and `cache_read_input_tokens`.\n   */\n  usage: MessageDeltaUsage;\n}\n\nexport namespace RawMessageDeltaEvent {\n  export interface Delta {\n    stop_reason: MessagesAPI.StopReason | null;\n\n    stop_sequence: string | null;\n  }\n}\n\nexport interface RawMessageStartEvent {\n  message: Message;\n\n  type: 'message_start';\n}\n\nexport interface RawMessageStopEvent {\n  type: 'message_stop';\n}\n\nexport type RawMessageStreamEvent =\n  | RawMessageStartEvent\n  | RawMessageDeltaEvent\n  | RawMessageStopEvent\n  | RawContentBlockStartEvent\n  | RawContentBlockDeltaEvent\n  | RawContentBlockStopEvent;\n\nexport interface RedactedThinkingBlock {\n  data: string;\n\n  type: 'redacted_thinking';\n}\n\nexport interface RedactedThinkingBlockParam {\n  data: string;\n\n  type: 'redacted_thinking';\n}\n\nexport interface SearchResultBlockParam {\n  content: Array<TextBlockParam>;\n\n  source: string;\n\n  title: string;\n\n  type: 'search_result';\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: CacheControlEphemeral | null;\n\n  citations?: CitationsConfigParam;\n}\n\nexport interface ServerToolUsage {\n  /**\n   * The number of web search tool requests.\n   */\n  web_search_requests: number;\n}\n\nexport interface ServerToolUseBlock {\n  id: string;\n\n  input: unknown;\n\n  name: 'web_search';\n\n  type: 'server_tool_use';\n}\n\nexport interface ServerToolUseBlockParam {\n  id: string;\n\n  input: unknown;\n\n  name: 'web_search';\n\n  type: 'server_tool_use';\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: CacheControlEphemeral | null;\n}\n\nexport interface SignatureDelta {\n  signature: string;\n\n  type: 'signature_delta';\n}\n\nexport type StopReason = 'end_turn' | 'max_tokens' | 'stop_sequence' | 'tool_use' | 'pause_turn' | 'refusal';\n\nexport interface TextBlock {\n  /**\n   * Citations supporting the text block.\n   *\n   * The type of citation returned will depend on the type of document being cited.\n   * Citing a PDF results in `page_location`, plain text results in `char_location`,\n   * and content document results in `content_block_location`.\n   */\n  citations: Array<TextCitation> | null;\n\n  text: string;\n\n  type: 'text';\n}\n\nexport interface TextBlockParam {\n  text: string;\n\n  type: 'text';\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: CacheControlEphemeral | null;\n\n  citations?: Array<TextCitationParam> | null;\n}\n\nexport type TextCitation =\n  | CitationCharLocation\n  | CitationPageLocation\n  | CitationContentBlockLocation\n  | CitationsWebSearchResultLocation\n  | CitationsSearchResultLocation;\n\nexport type TextCitationParam =\n  | CitationCharLocationParam\n  | CitationPageLocationParam\n  | CitationContentBlockLocationParam\n  | CitationWebSearchResultLocationParam\n  | CitationSearchResultLocationParam;\n\nexport interface TextDelta {\n  text: string;\n\n  type: 'text_delta';\n}\n\nexport interface ThinkingBlock {\n  signature: string;\n\n  thinking: string;\n\n  type: 'thinking';\n}\n\nexport interface ThinkingBlockParam {\n  signature: string;\n\n  thinking: string;\n\n  type: 'thinking';\n}\n\nexport interface ThinkingConfigDisabled {\n  type: 'disabled';\n}\n\nexport interface ThinkingConfigEnabled {\n  /**\n   * Determines how many tokens Claude can use for its internal reasoning process.\n   * Larger budgets can enable more thorough analysis for complex problems, improving\n   * response quality.\n   *\n   * Must be 1024 and less than `max_tokens`.\n   *\n   * See\n   * [extended thinking](https://docs.claude.com/en/docs/build-with-claude/extended-thinking)\n   * for details.\n   */\n  budget_tokens: number;\n\n  type: 'enabled';\n}\n\n/**\n * Configuration for enabling Claude's extended thinking.\n *\n * When enabled, responses include `thinking` content blocks showing Claude's\n * thinking process before the final answer. Requires a minimum budget of 1,024\n * tokens and counts towards your `max_tokens` limit.\n *\n * See\n * [extended thinking](https://docs.claude.com/en/docs/build-with-claude/extended-thinking)\n * for details.\n */\nexport type ThinkingConfigParam = ThinkingConfigEnabled | ThinkingConfigDisabled;\n\nexport interface ThinkingDelta {\n  thinking: string;\n\n  type: 'thinking_delta';\n}\n\nexport interface Tool {\n  /**\n   * [JSON schema](https://json-schema.org/draft/2020-12) for this tool's input.\n   *\n   * This defines the shape of the `input` that your tool accepts and that the model\n   * will produce.\n   */\n  input_schema: Tool.InputSchema;\n\n  /**\n   * Name of the tool.\n   *\n   * This is how the tool will be called by the model and in `tool_use` blocks.\n   */\n  name: string;\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: CacheControlEphemeral | null;\n\n  /**\n   * Description of what this tool does.\n   *\n   * Tool descriptions should be as detailed as possible. The more information that\n   * the model has about what the tool is and how to use it, the better it will\n   * perform. You can use natural language descriptions to reinforce important\n   * aspects of the tool input JSON schema.\n   */\n  description?: string;\n\n  type?: 'custom' | null;\n}\n\nexport namespace Tool {\n  /**\n   * [JSON schema](https://json-schema.org/draft/2020-12) for this tool's input.\n   *\n   * This defines the shape of the `input` that your tool accepts and that the model\n   * will produce.\n   */\n  export interface InputSchema {\n    type: 'object';\n\n    properties?: unknown | null;\n\n    required?: Array<string> | null;\n\n    [k: string]: unknown;\n  }\n}\n\nexport interface ToolBash20250124 {\n  /**\n   * Name of the tool.\n   *\n   * This is how the tool will be called by the model and in `tool_use` blocks.\n   */\n  name: 'bash';\n\n  type: 'bash_20250124';\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: CacheControlEphemeral | null;\n}\n\n/**\n * How the model should use the provided tools. The model can use a specific tool,\n * any available tool, decide by itself, or not use tools at all.\n */\nexport type ToolChoice = ToolChoiceAuto | ToolChoiceAny | ToolChoiceTool | ToolChoiceNone;\n\n/**\n * The model will use any available tools.\n */\nexport interface ToolChoiceAny {\n  type: 'any';\n\n  /**\n   * Whether to disable parallel tool use.\n   *\n   * Defaults to `false`. If set to `true`, the model will output exactly one tool\n   * use.\n   */\n  disable_parallel_tool_use?: boolean;\n}\n\n/**\n * The model will automatically decide whether to use tools.\n */\nexport interface ToolChoiceAuto {\n  type: 'auto';\n\n  /**\n   * Whether to disable parallel tool use.\n   *\n   * Defaults to `false`. If set to `true`, the model will output at most one tool\n   * use.\n   */\n  disable_parallel_tool_use?: boolean;\n}\n\n/**\n * The model will not be allowed to use tools.\n */\nexport interface ToolChoiceNone {\n  type: 'none';\n}\n\n/**\n * The model will use the specified tool with `tool_choice.name`.\n */\nexport interface ToolChoiceTool {\n  /**\n   * The name of the tool to use.\n   */\n  name: string;\n\n  type: 'tool';\n\n  /**\n   * Whether to disable parallel tool use.\n   *\n   * Defaults to `false`. If set to `true`, the model will output exactly one tool\n   * use.\n   */\n  disable_parallel_tool_use?: boolean;\n}\n\nexport interface ToolResultBlockParam {\n  tool_use_id: string;\n\n  type: 'tool_result';\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: CacheControlEphemeral | null;\n\n  content?: string | Array<TextBlockParam | ImageBlockParam | SearchResultBlockParam | DocumentBlockParam>;\n\n  is_error?: boolean;\n}\n\nexport interface ToolTextEditor20250124 {\n  /**\n   * Name of the tool.\n   *\n   * This is how the tool will be called by the model and in `tool_use` blocks.\n   */\n  name: 'str_replace_editor';\n\n  type: 'text_editor_20250124';\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: CacheControlEphemeral | null;\n}\n\nexport interface ToolTextEditor20250429 {\n  /**\n   * Name of the tool.\n   *\n   * This is how the tool will be called by the model and in `tool_use` blocks.\n   */\n  name: 'str_replace_based_edit_tool';\n\n  type: 'text_editor_20250429';\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: CacheControlEphemeral | null;\n}\n\nexport interface ToolTextEditor20250728 {\n  /**\n   * Name of the tool.\n   *\n   * This is how the tool will be called by the model and in `tool_use` blocks.\n   */\n  name: 'str_replace_based_edit_tool';\n\n  type: 'text_editor_20250728';\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: CacheControlEphemeral | null;\n\n  /**\n   * Maximum number of characters to display when viewing a file. If not specified,\n   * defaults to displaying the full file.\n   */\n  max_characters?: number | null;\n}\n\nexport type ToolUnion =\n  | Tool\n  | ToolBash20250124\n  | ToolTextEditor20250124\n  | ToolTextEditor20250429\n  | ToolTextEditor20250728\n  | WebSearchTool20250305;\n\nexport interface ToolUseBlock {\n  id: string;\n\n  input: unknown;\n\n  name: string;\n\n  type: 'tool_use';\n}\n\nexport interface ToolUseBlockParam {\n  id: string;\n\n  input: unknown;\n\n  name: string;\n\n  type: 'tool_use';\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: CacheControlEphemeral | null;\n}\n\nexport interface URLImageSource {\n  type: 'url';\n\n  url: string;\n}\n\nexport interface URLPDFSource {\n  type: 'url';\n\n  url: string;\n}\n\nexport interface Usage {\n  /**\n   * Breakdown of cached tokens by TTL\n   */\n  cache_creation: CacheCreation | null;\n\n  /**\n   * The number of input tokens used to create the cache entry.\n   */\n  cache_creation_input_tokens: number | null;\n\n  /**\n   * The number of input tokens read from the cache.\n   */\n  cache_read_input_tokens: number | null;\n\n  /**\n   * The number of input tokens which were used.\n   */\n  input_tokens: number;\n\n  /**\n   * The number of output tokens which were used.\n   */\n  output_tokens: number;\n\n  /**\n   * The number of server tool requests.\n   */\n  server_tool_use: ServerToolUsage | null;\n\n  /**\n   * If the request used the priority, standard, or batch tier.\n   */\n  service_tier: 'standard' | 'priority' | 'batch' | null;\n}\n\nexport interface WebSearchResultBlock {\n  encrypted_content: string;\n\n  page_age: string | null;\n\n  title: string;\n\n  type: 'web_search_result';\n\n  url: string;\n}\n\nexport interface WebSearchResultBlockParam {\n  encrypted_content: string;\n\n  title: string;\n\n  type: 'web_search_result';\n\n  url: string;\n\n  page_age?: string | null;\n}\n\nexport interface WebSearchTool20250305 {\n  /**\n   * Name of the tool.\n   *\n   * This is how the tool will be called by the model and in `tool_use` blocks.\n   */\n  name: 'web_search';\n\n  type: 'web_search_20250305';\n\n  /**\n   * If provided, only these domains will be included in results. Cannot be used\n   * alongside `blocked_domains`.\n   */\n  allowed_domains?: Array<string> | null;\n\n  /**\n   * If provided, these domains will never appear in results. Cannot be used\n   * alongside `allowed_domains`.\n   */\n  blocked_domains?: Array<string> | null;\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: CacheControlEphemeral | null;\n\n  /**\n   * Maximum number of times the tool can be used in the API request.\n   */\n  max_uses?: number | null;\n\n  /**\n   * Parameters for the user's location. Used to provide more relevant search\n   * results.\n   */\n  user_location?: WebSearchTool20250305.UserLocation | null;\n}\n\nexport namespace WebSearchTool20250305 {\n  /**\n   * Parameters for the user's location. Used to provide more relevant search\n   * results.\n   */\n  export interface UserLocation {\n    type: 'approximate';\n\n    /**\n     * The city of the user.\n     */\n    city?: string | null;\n\n    /**\n     * The two letter\n     * [ISO country code](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2) of the\n     * user.\n     */\n    country?: string | null;\n\n    /**\n     * The region of the user.\n     */\n    region?: string | null;\n\n    /**\n     * The [IANA timezone](https://nodatime.org/TimeZones) of the user.\n     */\n    timezone?: string | null;\n  }\n}\n\nexport interface WebSearchToolRequestError {\n  error_code:\n    | 'invalid_tool_input'\n    | 'unavailable'\n    | 'max_uses_exceeded'\n    | 'too_many_requests'\n    | 'query_too_long';\n\n  type: 'web_search_tool_result_error';\n}\n\nexport interface WebSearchToolResultBlock {\n  content: WebSearchToolResultBlockContent;\n\n  tool_use_id: string;\n\n  type: 'web_search_tool_result';\n}\n\nexport type WebSearchToolResultBlockContent = WebSearchToolResultError | Array<WebSearchResultBlock>;\n\nexport interface WebSearchToolResultBlockParam {\n  content: WebSearchToolResultBlockParamContent;\n\n  tool_use_id: string;\n\n  type: 'web_search_tool_result';\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: CacheControlEphemeral | null;\n}\n\nexport type WebSearchToolResultBlockParamContent =\n  | Array<WebSearchResultBlockParam>\n  | WebSearchToolRequestError;\n\nexport interface WebSearchToolResultError {\n  error_code:\n    | 'invalid_tool_input'\n    | 'unavailable'\n    | 'max_uses_exceeded'\n    | 'too_many_requests'\n    | 'query_too_long';\n\n  type: 'web_search_tool_result_error';\n}\n\nexport type MessageStreamEvent = RawMessageStreamEvent;\n\nexport type MessageStartEvent = RawMessageStartEvent;\n\nexport type MessageDeltaEvent = RawMessageDeltaEvent;\n\nexport type MessageStopEvent = RawMessageStopEvent;\n\nexport type ContentBlockStartEvent = RawContentBlockStartEvent;\n\nexport type ContentBlockDeltaEvent = RawContentBlockDeltaEvent;\n\nexport type ContentBlockStopEvent = RawContentBlockStopEvent;\n\nexport type MessageCreateParams = MessageCreateParamsNonStreaming | MessageCreateParamsStreaming;\n\nexport interface MessageCreateParamsBase {\n  /**\n   * The maximum number of tokens to generate before stopping.\n   *\n   * Note that our models may stop _before_ reaching this maximum. This parameter\n   * only specifies the absolute maximum number of tokens to generate.\n   *\n   * Different models have different maximum values for this parameter. See\n   * [models](https://docs.claude.com/en/docs/models-overview) for details.\n   */\n  max_tokens: number;\n\n  /**\n   * Input messages.\n   *\n   * Our models are trained to operate on alternating `user` and `assistant`\n   * conversational turns. When creating a new `Message`, you specify the prior\n   * conversational turns with the `messages` parameter, and the model then generates\n   * the next `Message` in the conversation. Consecutive `user` or `assistant` turns\n   * in your request will be combined into a single turn.\n   *\n   * Each input message must be an object with a `role` and `content`. You can\n   * specify a single `user`-role message, or you can include multiple `user` and\n   * `assistant` messages.\n   *\n   * If the final message uses the `assistant` role, the response content will\n   * continue immediately from the content in that message. This can be used to\n   * constrain part of the model's response.\n   *\n   * Example with a single `user` message:\n   *\n   * ```json\n   * [{ \"role\": \"user\", \"content\": \"Hello, Claude\" }]\n   * ```\n   *\n   * Example with multiple conversational turns:\n   *\n   * ```json\n   * [\n   *   { \"role\": \"user\", \"content\": \"Hello there.\" },\n   *   { \"role\": \"assistant\", \"content\": \"Hi, I'm Claude. How can I help you?\" },\n   *   { \"role\": \"user\", \"content\": \"Can you explain LLMs in plain English?\" }\n   * ]\n   * ```\n   *\n   * Example with a partially-filled response from Claude:\n   *\n   * ```json\n   * [\n   *   {\n   *     \"role\": \"user\",\n   *     \"content\": \"What's the Greek name for Sun? (A) Sol (B) Helios (C) Sun\"\n   *   },\n   *   { \"role\": \"assistant\", \"content\": \"The best answer is (\" }\n   * ]\n   * ```\n   *\n   * Each input message `content` may be either a single `string` or an array of\n   * content blocks, where each block has a specific `type`. Using a `string` for\n   * `content` is shorthand for an array of one content block of type `\"text\"`. The\n   * following input messages are equivalent:\n   *\n   * ```json\n   * { \"role\": \"user\", \"content\": \"Hello, Claude\" }\n   * ```\n   *\n   * ```json\n   * { \"role\": \"user\", \"content\": [{ \"type\": \"text\", \"text\": \"Hello, Claude\" }] }\n   * ```\n   *\n   * See [input examples](https://docs.claude.com/en/api/messages-examples).\n   *\n   * Note that if you want to include a\n   * [system prompt](https://docs.claude.com/en/docs/system-prompts), you can use the\n   * top-level `system` parameter  there is no `\"system\"` role for input messages in\n   * the Messages API.\n   *\n   * There is a limit of 100,000 messages in a single request.\n   */\n  messages: Array<MessageParam>;\n\n  /**\n   * The model that will complete your prompt.\\n\\nSee\n   * [models](https://docs.anthropic.com/en/docs/models-overview) for additional\n   * details and options.\n   */\n  model: Model;\n\n  /**\n   * An object describing metadata about the request.\n   */\n  metadata?: Metadata;\n\n  /**\n   * Determines whether to use priority capacity (if available) or standard capacity\n   * for this request.\n   *\n   * Anthropic offers different levels of service for your API requests. See\n   * [service-tiers](https://docs.claude.com/en/api/service-tiers) for details.\n   */\n  service_tier?: 'auto' | 'standard_only';\n\n  /**\n   * Custom text sequences that will cause the model to stop generating.\n   *\n   * Our models will normally stop when they have naturally completed their turn,\n   * which will result in a response `stop_reason` of `\"end_turn\"`.\n   *\n   * If you want the model to stop generating when it encounters custom strings of\n   * text, you can use the `stop_sequences` parameter. If the model encounters one of\n   * the custom sequences, the response `stop_reason` value will be `\"stop_sequence\"`\n   * and the response `stop_sequence` value will contain the matched stop sequence.\n   */\n  stop_sequences?: Array<string>;\n\n  /**\n   * Whether to incrementally stream the response using server-sent events.\n   *\n   * See [streaming](https://docs.claude.com/en/api/messages-streaming) for details.\n   */\n  stream?: boolean;\n\n  /**\n   * System prompt.\n   *\n   * A system prompt is a way of providing context and instructions to Claude, such\n   * as specifying a particular goal or role. See our\n   * [guide to system prompts](https://docs.claude.com/en/docs/system-prompts).\n   */\n  system?: string | Array<TextBlockParam>;\n\n  /**\n   * Amount of randomness injected into the response.\n   *\n   * Defaults to `1.0`. Ranges from `0.0` to `1.0`. Use `temperature` closer to `0.0`\n   * for analytical / multiple choice, and closer to `1.0` for creative and\n   * generative tasks.\n   *\n   * Note that even with `temperature` of `0.0`, the results will not be fully\n   * deterministic.\n   */\n  temperature?: number;\n\n  /**\n   * Configuration for enabling Claude's extended thinking.\n   *\n   * When enabled, responses include `thinking` content blocks showing Claude's\n   * thinking process before the final answer. Requires a minimum budget of 1,024\n   * tokens and counts towards your `max_tokens` limit.\n   *\n   * See\n   * [extended thinking](https://docs.claude.com/en/docs/build-with-claude/extended-thinking)\n   * for details.\n   */\n  thinking?: ThinkingConfigParam;\n\n  /**\n   * How the model should use the provided tools. The model can use a specific tool,\n   * any available tool, decide by itself, or not use tools at all.\n   */\n  tool_choice?: ToolChoice;\n\n  /**\n   * Definitions of tools that the model may use.\n   *\n   * If you include `tools` in your API request, the model may return `tool_use`\n   * content blocks that represent the model's use of those tools. You can then run\n   * those tools using the tool input generated by the model and then optionally\n   * return results back to the model using `tool_result` content blocks.\n   *\n   * There are two types of tools: **client tools** and **server tools**. The\n   * behavior described below applies to client tools. For\n   * [server tools](https://docs.claude.com/en/docs/agents-and-tools/tool-use/overview#server-tools),\n   * see their individual documentation as each has its own behavior (e.g., the\n   * [web search tool](https://docs.claude.com/en/docs/agents-and-tools/tool-use/web-search-tool)).\n   *\n   * Each tool definition includes:\n   *\n   * - `name`: Name of the tool.\n   * - `description`: Optional, but strongly-recommended description of the tool.\n   * - `input_schema`: [JSON schema](https://json-schema.org/draft/2020-12) for the\n   *   tool `input` shape that the model will produce in `tool_use` output content\n   *   blocks.\n   *\n   * For example, if you defined `tools` as:\n   *\n   * ```json\n   * [\n   *   {\n   *     \"name\": \"get_stock_price\",\n   *     \"description\": \"Get the current stock price for a given ticker symbol.\",\n   *     \"input_schema\": {\n   *       \"type\": \"object\",\n   *       \"properties\": {\n   *         \"ticker\": {\n   *           \"type\": \"string\",\n   *           \"description\": \"The stock ticker symbol, e.g. AAPL for Apple Inc.\"\n   *         }\n   *       },\n   *       \"required\": [\"ticker\"]\n   *     }\n   *   }\n   * ]\n   * ```\n   *\n   * And then asked the model \"What's the S&P 500 at today?\", the model might produce\n   * `tool_use` content blocks in the response like this:\n   *\n   * ```json\n   * [\n   *   {\n   *     \"type\": \"tool_use\",\n   *     \"id\": \"toolu_01D7FLrfh4GYq7yT1ULFeyMV\",\n   *     \"name\": \"get_stock_price\",\n   *     \"input\": { \"ticker\": \"^GSPC\" }\n   *   }\n   * ]\n   * ```\n   *\n   * You might then run your `get_stock_price` tool with `{\"ticker\": \"^GSPC\"}` as an\n   * input, and return the following back to the model in a subsequent `user`\n   * message:\n   *\n   * ```json\n   * [\n   *   {\n   *     \"type\": \"tool_result\",\n   *     \"tool_use_id\": \"toolu_01D7FLrfh4GYq7yT1ULFeyMV\",\n   *     \"content\": \"259.75 USD\"\n   *   }\n   * ]\n   * ```\n   *\n   * Tools can be used for workflows that include running client-side tools and\n   * functions, or more generally whenever you want the model to produce a particular\n   * JSON structure of output.\n   *\n   * See our [guide](https://docs.claude.com/en/docs/tool-use) for more details.\n   */\n  tools?: Array<ToolUnion>;\n\n  /**\n   * Only sample from the top K options for each subsequent token.\n   *\n   * Used to remove \"long tail\" low probability responses.\n   * [Learn more technical details here](https://towardsdatascience.com/how-to-sample-from-language-models-682bceb97277).\n   *\n   * Recommended for advanced use cases only. You usually only need to use\n   * `temperature`.\n   */\n  top_k?: number;\n\n  /**\n   * Use nucleus sampling.\n   *\n   * In nucleus sampling, we compute the cumulative distribution over all the options\n   * for each subsequent token in decreasing probability order and cut it off once it\n   * reaches a particular probability specified by `top_p`. You should either alter\n   * `temperature` or `top_p`, but not both.\n   *\n   * Recommended for advanced use cases only. You usually only need to use\n   * `temperature`.\n   */\n  top_p?: number;\n}\n\nexport namespace MessageCreateParams {\n  export type MessageCreateParamsNonStreaming = MessagesAPI.MessageCreateParamsNonStreaming;\n  export type MessageCreateParamsStreaming = MessagesAPI.MessageCreateParamsStreaming;\n}\n\nexport interface MessageCreateParamsNonStreaming extends MessageCreateParamsBase {\n  /**\n   * Whether to incrementally stream the response using server-sent events.\n   *\n   * See [streaming](https://docs.claude.com/en/api/messages-streaming) for details.\n   */\n  stream?: false;\n}\n\nexport interface MessageCreateParamsStreaming extends MessageCreateParamsBase {\n  /**\n   * Whether to incrementally stream the response using server-sent events.\n   *\n   * See [streaming](https://docs.claude.com/en/api/messages-streaming) for details.\n   */\n  stream: true;\n}\n\nexport type MessageStreamParams = MessageCreateParamsBase;\n\nexport interface MessageCountTokensParams {\n  /**\n   * Input messages.\n   *\n   * Our models are trained to operate on alternating `user` and `assistant`\n   * conversational turns. When creating a new `Message`, you specify the prior\n   * conversational turns with the `messages` parameter, and the model then generates\n   * the next `Message` in the conversation. Consecutive `user` or `assistant` turns\n   * in your request will be combined into a single turn.\n   *\n   * Each input message must be an object with a `role` and `content`. You can\n   * specify a single `user`-role message, or you can include multiple `user` and\n   * `assistant` messages.\n   *\n   * If the final message uses the `assistant` role, the response content will\n   * continue immediately from the content in that message. This can be used to\n   * constrain part of the model's response.\n   *\n   * Example with a single `user` message:\n   *\n   * ```json\n   * [{ \"role\": \"user\", \"content\": \"Hello, Claude\" }]\n   * ```\n   *\n   * Example with multiple conversational turns:\n   *\n   * ```json\n   * [\n   *   { \"role\": \"user\", \"content\": \"Hello there.\" },\n   *   { \"role\": \"assistant\", \"content\": \"Hi, I'm Claude. How can I help you?\" },\n   *   { \"role\": \"user\", \"content\": \"Can you explain LLMs in plain English?\" }\n   * ]\n   * ```\n   *\n   * Example with a partially-filled response from Claude:\n   *\n   * ```json\n   * [\n   *   {\n   *     \"role\": \"user\",\n   *     \"content\": \"What's the Greek name for Sun? (A) Sol (B) Helios (C) Sun\"\n   *   },\n   *   { \"role\": \"assistant\", \"content\": \"The best answer is (\" }\n   * ]\n   * ```\n   *\n   * Each input message `content` may be either a single `string` or an array of\n   * content blocks, where each block has a specific `type`. Using a `string` for\n   * `content` is shorthand for an array of one content block of type `\"text\"`. The\n   * following input messages are equivalent:\n   *\n   * ```json\n   * { \"role\": \"user\", \"content\": \"Hello, Claude\" }\n   * ```\n   *\n   * ```json\n   * { \"role\": \"user\", \"content\": [{ \"type\": \"text\", \"text\": \"Hello, Claude\" }] }\n   * ```\n   *\n   * See [input examples](https://docs.claude.com/en/api/messages-examples).\n   *\n   * Note that if you want to include a\n   * [system prompt](https://docs.claude.com/en/docs/system-prompts), you can use the\n   * top-level `system` parameter  there is no `\"system\"` role for input messages in\n   * the Messages API.\n   *\n   * There is a limit of 100,000 messages in a single request.\n   */\n  messages: Array<MessageParam>;\n\n  /**\n   * The model that will complete your prompt.\\n\\nSee\n   * [models](https://docs.anthropic.com/en/docs/models-overview) for additional\n   * details and options.\n   */\n  model: Model;\n\n  /**\n   * System prompt.\n   *\n   * A system prompt is a way of providing context and instructions to Claude, such\n   * as specifying a particular goal or role. See our\n   * [guide to system prompts](https://docs.claude.com/en/docs/system-prompts).\n   */\n  system?: string | Array<TextBlockParam>;\n\n  /**\n   * Configuration for enabling Claude's extended thinking.\n   *\n   * When enabled, responses include `thinking` content blocks showing Claude's\n   * thinking process before the final answer. Requires a minimum budget of 1,024\n   * tokens and counts towards your `max_tokens` limit.\n   *\n   * See\n   * [extended thinking](https://docs.claude.com/en/docs/build-with-claude/extended-thinking)\n   * for details.\n   */\n  thinking?: ThinkingConfigParam;\n\n  /**\n   * How the model should use the provided tools. The model can use a specific tool,\n   * any available tool, decide by itself, or not use tools at all.\n   */\n  tool_choice?: ToolChoice;\n\n  /**\n   * Definitions of tools that the model may use.\n   *\n   * If you include `tools` in your API request, the model may return `tool_use`\n   * content blocks that represent the model's use of those tools. You can then run\n   * those tools using the tool input generated by the model and then optionally\n   * return results back to the model using `tool_result` content blocks.\n   *\n   * There are two types of tools: **client tools** and **server tools**. The\n   * behavior described below applies to client tools. For\n   * [server tools](https://docs.claude.com/en/docs/agents-and-tools/tool-use/overview#server-tools),\n   * see their individual documentation as each has its own behavior (e.g., the\n   * [web search tool](https://docs.claude.com/en/docs/agents-and-tools/tool-use/web-search-tool)).\n   *\n   * Each tool definition includes:\n   *\n   * - `name`: Name of the tool.\n   * - `description`: Optional, but strongly-recommended description of the tool.\n   * - `input_schema`: [JSON schema](https://json-schema.org/draft/2020-12) for the\n   *   tool `input` shape that the model will produce in `tool_use` output content\n   *   blocks.\n   *\n   * For example, if you defined `tools` as:\n   *\n   * ```json\n   * [\n   *   {\n   *     \"name\": \"get_stock_price\",\n   *     \"description\": \"Get the current stock price for a given ticker symbol.\",\n   *     \"input_schema\": {\n   *       \"type\": \"object\",\n   *       \"properties\": {\n   *         \"ticker\": {\n   *           \"type\": \"string\",\n   *           \"description\": \"The stock ticker symbol, e.g. AAPL for Apple Inc.\"\n   *         }\n   *       },\n   *       \"required\": [\"ticker\"]\n   *     }\n   *   }\n   * ]\n   * ```\n   *\n   * And then asked the model \"What's the S&P 500 at today?\", the model might produce\n   * `tool_use` content blocks in the response like this:\n   *\n   * ```json\n   * [\n   *   {\n   *     \"type\": \"tool_use\",\n   *     \"id\": \"toolu_01D7FLrfh4GYq7yT1ULFeyMV\",\n   *     \"name\": \"get_stock_price\",\n   *     \"input\": { \"ticker\": \"^GSPC\" }\n   *   }\n   * ]\n   * ```\n   *\n   * You might then run your `get_stock_price` tool with `{\"ticker\": \"^GSPC\"}` as an\n   * input, and return the following back to the model in a subsequent `user`\n   * message:\n   *\n   * ```json\n   * [\n   *   {\n   *     \"type\": \"tool_result\",\n   *     \"tool_use_id\": \"toolu_01D7FLrfh4GYq7yT1ULFeyMV\",\n   *     \"content\": \"259.75 USD\"\n   *   }\n   * ]\n   * ```\n   *\n   * Tools can be used for workflows that include running client-side tools and\n   * functions, or more generally whenever you want the model to produce a particular\n   * JSON structure of output.\n   *\n   * See our [guide](https://docs.claude.com/en/docs/tool-use) for more details.\n   */\n  tools?: Array<MessageCountTokensTool>;\n}\n\nMessages.Batches = Batches;\n\nexport declare namespace Messages {\n  export {\n    type Base64ImageSource as Base64ImageSource,\n    type Base64PDFSource as Base64PDFSource,\n    type CacheControlEphemeral as CacheControlEphemeral,\n    type CacheCreation as CacheCreation,\n    type CitationCharLocation as CitationCharLocation,\n    type CitationCharLocationParam as CitationCharLocationParam,\n    type CitationContentBlockLocation as CitationContentBlockLocation,\n    type CitationContentBlockLocationParam as CitationContentBlockLocationParam,\n    type CitationPageLocation as CitationPageLocation,\n    type CitationPageLocationParam as CitationPageLocationParam,\n    type CitationSearchResultLocationParam as CitationSearchResultLocationParam,\n    type CitationWebSearchResultLocationParam as CitationWebSearchResultLocationParam,\n    type CitationsConfigParam as CitationsConfigParam,\n    type CitationsDelta as CitationsDelta,\n    type CitationsSearchResultLocation as CitationsSearchResultLocation,\n    type CitationsWebSearchResultLocation as CitationsWebSearchResultLocation,\n    type ContentBlock as ContentBlock,\n    type ContentBlockParam as ContentBlockParam,\n    type ContentBlockStartEvent as ContentBlockStartEvent,\n    type ContentBlockStopEvent as ContentBlockStopEvent,\n    type ContentBlockSource as ContentBlockSource,\n    type ContentBlockSourceContent as ContentBlockSourceContent,\n    type DocumentBlockParam as DocumentBlockParam,\n    type ImageBlockParam as ImageBlockParam,\n    type InputJSONDelta as InputJSONDelta,\n    type Message as Message,\n    type MessageCountTokensTool as MessageCountTokensTool,\n    type MessageDeltaEvent as MessageDeltaEvent,\n    type MessageDeltaUsage as MessageDeltaUsage,\n    type MessageParam as MessageParam,\n    type MessageTokensCount as MessageTokensCount,\n    type Metadata as Metadata,\n    type Model as Model,\n    type PlainTextSource as PlainTextSource,\n    type RawContentBlockDelta as RawContentBlockDelta,\n    type RawContentBlockDeltaEvent as RawContentBlockDeltaEvent,\n    type RawContentBlockStartEvent as RawContentBlockStartEvent,\n    type RawContentBlockStopEvent as RawContentBlockStopEvent,\n    type RawMessageDeltaEvent as RawMessageDeltaEvent,\n    type RawMessageStartEvent as RawMessageStartEvent,\n    type RawMessageStopEvent as RawMessageStopEvent,\n    type RawMessageStreamEvent as RawMessageStreamEvent,\n    type RedactedThinkingBlock as RedactedThinkingBlock,\n    type RedactedThinkingBlockParam as RedactedThinkingBlockParam,\n    type SearchResultBlockParam as SearchResultBlockParam,\n    type ServerToolUsage as ServerToolUsage,\n    type ServerToolUseBlock as ServerToolUseBlock,\n    type ServerToolUseBlockParam as ServerToolUseBlockParam,\n    type SignatureDelta as SignatureDelta,\n    type StopReason as StopReason,\n    type TextBlock as TextBlock,\n    type TextBlockParam as TextBlockParam,\n    type TextCitation as TextCitation,\n    type TextCitationParam as TextCitationParam,\n    type TextDelta as TextDelta,\n    type ThinkingBlock as ThinkingBlock,\n    type ThinkingBlockParam as ThinkingBlockParam,\n    type ThinkingConfigDisabled as ThinkingConfigDisabled,\n    type ThinkingConfigEnabled as ThinkingConfigEnabled,\n    type ThinkingConfigParam as ThinkingConfigParam,\n    type ThinkingDelta as ThinkingDelta,\n    type Tool as Tool,\n    type ToolBash20250124 as ToolBash20250124,\n    type ToolChoice as ToolChoice,\n    type ToolChoiceAny as ToolChoiceAny,\n    type ToolChoiceAuto as ToolChoiceAuto,\n    type ToolChoiceNone as ToolChoiceNone,\n    type ToolChoiceTool as ToolChoiceTool,\n    type ToolResultBlockParam as ToolResultBlockParam,\n    type ToolTextEditor20250124 as ToolTextEditor20250124,\n    type ToolTextEditor20250429 as ToolTextEditor20250429,\n    type ToolTextEditor20250728 as ToolTextEditor20250728,\n    type ToolUnion as ToolUnion,\n    type ToolUseBlock as ToolUseBlock,\n    type ToolUseBlockParam as ToolUseBlockParam,\n    type URLImageSource as URLImageSource,\n    type URLPDFSource as URLPDFSource,\n    type Usage as Usage,\n    type WebSearchResultBlock as WebSearchResultBlock,\n    type WebSearchResultBlockParam as WebSearchResultBlockParam,\n    type WebSearchTool20250305 as WebSearchTool20250305,\n    type WebSearchToolRequestError as WebSearchToolRequestError,\n    type WebSearchToolResultBlock as WebSearchToolResultBlock,\n    type WebSearchToolResultBlockContent as WebSearchToolResultBlockContent,\n    type WebSearchToolResultBlockParam as WebSearchToolResultBlockParam,\n    type WebSearchToolResultBlockParamContent as WebSearchToolResultBlockParamContent,\n    type WebSearchToolResultError as WebSearchToolResultError,\n    type MessageStreamEvent as MessageStreamEvent,\n    type MessageStartEvent as MessageStartEvent,\n    type MessageStopEvent as MessageStopEvent,\n    type ContentBlockDeltaEvent as ContentBlockDeltaEvent,\n    type MessageCreateParams as MessageCreateParams,\n    type MessageCreateParamsNonStreaming as MessageCreateParamsNonStreaming,\n    type MessageCreateParamsStreaming as MessageCreateParamsStreaming,\n    type MessageStreamParams as MessageStreamParams,\n    type MessageCountTokensParams as MessageCountTokensParams,\n  };\n\n  export {\n    Batches as Batches,\n    type DeletedMessageBatch as DeletedMessageBatch,\n    type MessageBatch as MessageBatch,\n    type MessageBatchCanceledResult as MessageBatchCanceledResult,\n    type MessageBatchErroredResult as MessageBatchErroredResult,\n    type MessageBatchExpiredResult as MessageBatchExpiredResult,\n    type MessageBatchIndividualResponse as MessageBatchIndividualResponse,\n    type MessageBatchRequestCounts as MessageBatchRequestCounts,\n    type MessageBatchResult as MessageBatchResult,\n    type MessageBatchSucceededResult as MessageBatchSucceededResult,\n    type MessageBatchesPage as MessageBatchesPage,\n    type BatchCreateParams as BatchCreateParams,\n    type BatchListParams as BatchListParams,\n  };\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../core/resource';\nimport * as BetaAPI from './beta/beta';\nimport { APIPromise } from '../core/api-promise';\nimport { Page, type PageParams, PagePromise } from '../core/pagination';\nimport { buildHeaders } from '../internal/headers';\nimport { RequestOptions } from '../internal/request-options';\nimport { path } from '../internal/utils/path';\n\nexport class Models extends APIResource {\n  /**\n   * Get a specific model.\n   *\n   * The Models API response can be used to determine information about a specific\n   * model or resolve a model alias to a model ID.\n   */\n  retrieve(\n    modelID: string,\n    params: ModelRetrieveParams | null | undefined = {},\n    options?: RequestOptions,\n  ): APIPromise<ModelInfo> {\n    const { betas } = params ?? {};\n    return this._client.get(path`/v1/models/${modelID}`, {\n      ...options,\n      headers: buildHeaders([\n        { ...(betas?.toString() != null ? { 'anthropic-beta': betas?.toString() } : undefined) },\n        options?.headers,\n      ]),\n    });\n  }\n\n  /**\n   * List available models.\n   *\n   * The Models API response can be used to determine which models are available for\n   * use in the API. More recently released models are listed first.\n   */\n  list(\n    params: ModelListParams | null | undefined = {},\n    options?: RequestOptions,\n  ): PagePromise<ModelInfosPage, ModelInfo> {\n    const { betas, ...query } = params ?? {};\n    return this._client.getAPIList('/v1/models', Page<ModelInfo>, {\n      query,\n      ...options,\n      headers: buildHeaders([\n        { ...(betas?.toString() != null ? { 'anthropic-beta': betas?.toString() } : undefined) },\n        options?.headers,\n      ]),\n    });\n  }\n}\n\nexport type ModelInfosPage = Page<ModelInfo>;\n\nexport interface ModelInfo {\n  /**\n   * Unique model identifier.\n   */\n  id: string;\n\n  /**\n   * RFC 3339 datetime string representing the time at which the model was released.\n   * May be set to an epoch value if the release date is unknown.\n   */\n  created_at: string;\n\n  /**\n   * A human-readable name for the model.\n   */\n  display_name: string;\n\n  /**\n   * Object type.\n   *\n   * For Models, this is always `\"model\"`.\n   */\n  type: 'model';\n}\n\nexport interface ModelRetrieveParams {\n  /**\n   * Optional header to specify the beta version(s) you want to use.\n   */\n  betas?: Array<BetaAPI.AnthropicBeta>;\n}\n\nexport interface ModelListParams extends PageParams {\n  /**\n   * Header param: Optional header to specify the beta version(s) you want to use.\n   */\n  betas?: Array<BetaAPI.AnthropicBeta>;\n}\n\nexport declare namespace Models {\n  export {\n    type ModelInfo as ModelInfo,\n    type ModelInfosPage as ModelInfosPage,\n    type ModelRetrieveParams as ModelRetrieveParams,\n    type ModelListParams as ModelListParams,\n  };\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../../../core/resource';\nimport * as BetaAPI from '../beta';\nimport * as VersionsAPI from './versions';\nimport {\n  VersionCreateParams,\n  VersionCreateResponse,\n  VersionDeleteParams,\n  VersionDeleteResponse,\n  VersionListParams,\n  VersionListResponse,\n  VersionListResponsesPageCursor,\n  VersionRetrieveParams,\n  VersionRetrieveResponse,\n  Versions,\n} from './versions';\nimport { APIPromise } from '../../../core/api-promise';\nimport { PageCursor, type PageCursorParams, PagePromise } from '../../../core/pagination';\nimport { type Uploadable } from '../../../core/uploads';\nimport { buildHeaders } from '../../../internal/headers';\nimport { RequestOptions } from '../../../internal/request-options';\nimport { multipartFormRequestOptions } from '../../../internal/uploads';\nimport { path } from '../../../internal/utils/path';\n\nexport class Skills extends APIResource {\n  versions: VersionsAPI.Versions = new VersionsAPI.Versions(this._client);\n\n  /**\n   * Create Skill\n   *\n   * @example\n   * ```ts\n   * const skill = await client.beta.skills.create();\n   * ```\n   */\n  create(\n    params: SkillCreateParams | null | undefined = {},\n    options?: RequestOptions,\n  ): APIPromise<SkillCreateResponse> {\n    const { betas, ...body } = params ?? {};\n    return this._client.post(\n      '/v1/skills?beta=true',\n      multipartFormRequestOptions(\n        {\n          body,\n          ...options,\n          headers: buildHeaders([\n            { 'anthropic-beta': [...(betas ?? []), 'skills-2025-10-02'].toString() },\n            options?.headers,\n          ]),\n        },\n        this._client,\n      ),\n    );\n  }\n\n  /**\n   * Get Skill\n   *\n   * @example\n   * ```ts\n   * const skill = await client.beta.skills.retrieve('skill_id');\n   * ```\n   */\n  retrieve(\n    skillID: string,\n    params: SkillRetrieveParams | null | undefined = {},\n    options?: RequestOptions,\n  ): APIPromise<SkillRetrieveResponse> {\n    const { betas } = params ?? {};\n    return this._client.get(path`/v1/skills/${skillID}?beta=true`, {\n      ...options,\n      headers: buildHeaders([\n        { 'anthropic-beta': [...(betas ?? []), 'skills-2025-10-02'].toString() },\n        options?.headers,\n      ]),\n    });\n  }\n\n  /**\n   * List Skills\n   *\n   * @example\n   * ```ts\n   * // Automatically fetches more pages as needed.\n   * for await (const skillListResponse of client.beta.skills.list()) {\n   *   // ...\n   * }\n   * ```\n   */\n  list(\n    params: SkillListParams | null | undefined = {},\n    options?: RequestOptions,\n  ): PagePromise<SkillListResponsesPageCursor, SkillListResponse> {\n    const { betas, ...query } = params ?? {};\n    return this._client.getAPIList('/v1/skills?beta=true', PageCursor<SkillListResponse>, {\n      query,\n      ...options,\n      headers: buildHeaders([\n        { 'anthropic-beta': [...(betas ?? []), 'skills-2025-10-02'].toString() },\n        options?.headers,\n      ]),\n    });\n  }\n\n  /**\n   * Delete Skill\n   *\n   * @example\n   * ```ts\n   * const skill = await client.beta.skills.delete('skill_id');\n   * ```\n   */\n  delete(\n    skillID: string,\n    params: SkillDeleteParams | null | undefined = {},\n    options?: RequestOptions,\n  ): APIPromise<SkillDeleteResponse> {\n    const { betas } = params ?? {};\n    return this._client.delete(path`/v1/skills/${skillID}?beta=true`, {\n      ...options,\n      headers: buildHeaders([\n        { 'anthropic-beta': [...(betas ?? []), 'skills-2025-10-02'].toString() },\n        options?.headers,\n      ]),\n    });\n  }\n}\n\nexport type SkillListResponsesPageCursor = PageCursor<SkillListResponse>;\n\nexport interface SkillCreateResponse {\n  /**\n   * Unique identifier for the skill.\n   *\n   * The format and length of IDs may change over time.\n   */\n  id: string;\n\n  /**\n   * ISO 8601 timestamp of when the skill was created.\n   */\n  created_at: string;\n\n  /**\n   * Display title for the skill.\n   *\n   * This is a human-readable label that is not included in the prompt sent to the\n   * model.\n   */\n  display_title: string | null;\n\n  /**\n   * The latest version identifier for the skill.\n   *\n   * This represents the most recent version of the skill that has been created.\n   */\n  latest_version: string | null;\n\n  /**\n   * Source of the skill.\n   *\n   * This may be one of the following values:\n   *\n   * - `\"custom\"`: the skill was created by a user\n   * - `\"anthropic\"`: the skill was created by Anthropic\n   */\n  source: string;\n\n  /**\n   * Object type.\n   *\n   * For Skills, this is always `\"skill\"`.\n   */\n  type: string;\n\n  /**\n   * ISO 8601 timestamp of when the skill was last updated.\n   */\n  updated_at: string;\n}\n\nexport interface SkillRetrieveResponse {\n  /**\n   * Unique identifier for the skill.\n   *\n   * The format and length of IDs may change over time.\n   */\n  id: string;\n\n  /**\n   * ISO 8601 timestamp of when the skill was created.\n   */\n  created_at: string;\n\n  /**\n   * Display title for the skill.\n   *\n   * This is a human-readable label that is not included in the prompt sent to the\n   * model.\n   */\n  display_title: string | null;\n\n  /**\n   * The latest version identifier for the skill.\n   *\n   * This represents the most recent version of the skill that has been created.\n   */\n  latest_version: string | null;\n\n  /**\n   * Source of the skill.\n   *\n   * This may be one of the following values:\n   *\n   * - `\"custom\"`: the skill was created by a user\n   * - `\"anthropic\"`: the skill was created by Anthropic\n   */\n  source: string;\n\n  /**\n   * Object type.\n   *\n   * For Skills, this is always `\"skill\"`.\n   */\n  type: string;\n\n  /**\n   * ISO 8601 timestamp of when the skill was last updated.\n   */\n  updated_at: string;\n}\n\nexport interface SkillListResponse {\n  /**\n   * Unique identifier for the skill.\n   *\n   * The format and length of IDs may change over time.\n   */\n  id: string;\n\n  /**\n   * ISO 8601 timestamp of when the skill was created.\n   */\n  created_at: string;\n\n  /**\n   * Display title for the skill.\n   *\n   * This is a human-readable label that is not included in the prompt sent to the\n   * model.\n   */\n  display_title: string | null;\n\n  /**\n   * The latest version identifier for the skill.\n   *\n   * This represents the most recent version of the skill that has been created.\n   */\n  latest_version: string | null;\n\n  /**\n   * Source of the skill.\n   *\n   * This may be one of the following values:\n   *\n   * - `\"custom\"`: the skill was created by a user\n   * - `\"anthropic\"`: the skill was created by Anthropic\n   */\n  source: string;\n\n  /**\n   * Object type.\n   *\n   * For Skills, this is always `\"skill\"`.\n   */\n  type: string;\n\n  /**\n   * ISO 8601 timestamp of when the skill was last updated.\n   */\n  updated_at: string;\n}\n\nexport interface SkillDeleteResponse {\n  /**\n   * Unique identifier for the skill.\n   *\n   * The format and length of IDs may change over time.\n   */\n  id: string;\n\n  /**\n   * Deleted object type.\n   *\n   * For Skills, this is always `\"skill_deleted\"`.\n   */\n  type: string;\n}\n\nexport interface SkillCreateParams {\n  /**\n   * Body param: Display title for the skill.\n   *\n   * This is a human-readable label that is not included in the prompt sent to the\n   * model.\n   */\n  display_title?: string | null;\n\n  /**\n   * Body param: Files to upload for the skill.\n   *\n   * All files must be in the same top-level directory and must include a SKILL.md\n   * file at the root of that directory.\n   */\n  files?: Array<Uploadable> | null;\n\n  /**\n   * Header param: Optional header to specify the beta version(s) you want to use.\n   */\n  betas?: Array<BetaAPI.AnthropicBeta>;\n}\n\nexport interface SkillRetrieveParams {\n  /**\n   * Optional header to specify the beta version(s) you want to use.\n   */\n  betas?: Array<BetaAPI.AnthropicBeta>;\n}\n\nexport interface SkillListParams extends PageCursorParams {\n  /**\n   * Query param: Filter skills by source.\n   *\n   * If provided, only skills from the specified source will be returned:\n   *\n   * - `\"custom\"`: only return user-created skills\n   * - `\"anthropic\"`: only return Anthropic-created skills\n   */\n  source?: string | null;\n\n  /**\n   * Header param: Optional header to specify the beta version(s) you want to use.\n   */\n  betas?: Array<BetaAPI.AnthropicBeta>;\n}\n\nexport interface SkillDeleteParams {\n  /**\n   * Optional header to specify the beta version(s) you want to use.\n   */\n  betas?: Array<BetaAPI.AnthropicBeta>;\n}\n\nSkills.Versions = Versions;\n\nexport declare namespace Skills {\n  export {\n    type SkillCreateResponse as SkillCreateResponse,\n    type SkillRetrieveResponse as SkillRetrieveResponse,\n    type SkillListResponse as SkillListResponse,\n    type SkillDeleteResponse as SkillDeleteResponse,\n    type SkillListResponsesPageCursor as SkillListResponsesPageCursor,\n    type SkillCreateParams as SkillCreateParams,\n    type SkillRetrieveParams as SkillRetrieveParams,\n    type SkillListParams as SkillListParams,\n    type SkillDeleteParams as SkillDeleteParams,\n  };\n\n  export {\n    Versions as Versions,\n    type VersionCreateResponse as VersionCreateResponse,\n    type VersionRetrieveResponse as VersionRetrieveResponse,\n    type VersionListResponse as VersionListResponse,\n    type VersionDeleteResponse as VersionDeleteResponse,\n    type VersionListResponsesPageCursor as VersionListResponsesPageCursor,\n    type VersionCreateParams as VersionCreateParams,\n    type VersionRetrieveParams as VersionRetrieveParams,\n    type VersionListParams as VersionListParams,\n    type VersionDeleteParams as VersionDeleteParams,\n  };\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../../../core/resource';\nimport * as BetaAPI from '../beta';\nimport { APIPromise } from '../../../core/api-promise';\nimport * as BetaMessagesAPI from './messages';\nimport { Page, type PageParams, PagePromise } from '../../../core/pagination';\nimport { buildHeaders } from '../../../internal/headers';\nimport { RequestOptions } from '../../../internal/request-options';\nimport { JSONLDecoder } from '../../../internal/decoders/jsonl';\nimport { AnthropicError } from '../../../error';\nimport { path } from '../../../internal/utils/path';\nimport * as MessagesApi from '../../messages/messages';\n\nexport class Batches extends APIResource {\n  /**\n   * Send a batch of Message creation requests.\n   *\n   * The Message Batches API can be used to process multiple Messages API requests at\n   * once. Once a Message Batch is created, it begins processing immediately. Batches\n   * can take up to 24 hours to complete.\n   *\n   * Learn more about the Message Batches API in our\n   * [user guide](https://docs.claude.com/en/docs/build-with-claude/batch-processing)\n   *\n   * @example\n   * ```ts\n   * const betaMessageBatch =\n   *   await client.beta.messages.batches.create({\n   *     requests: [\n   *       {\n   *         custom_id: 'my-custom-id-1',\n   *         params: {\n   *           max_tokens: 1024,\n   *           messages: [\n   *             { content: 'Hello, world', role: 'user' },\n   *           ],\n   *           model: 'claude-sonnet-4-5-20250929',\n   *         },\n   *       },\n   *     ],\n   *   });\n   * ```\n   */\n  create(params: BatchCreateParams, options?: RequestOptions): APIPromise<BetaMessageBatch> {\n    const { betas, ...body } = params;\n    return this._client.post('/v1/messages/batches?beta=true', {\n      body,\n      ...options,\n      headers: buildHeaders([\n        { 'anthropic-beta': [...(betas ?? []), 'message-batches-2024-09-24'].toString() },\n        options?.headers,\n      ]),\n    });\n  }\n\n  /**\n   * This endpoint is idempotent and can be used to poll for Message Batch\n   * completion. To access the results of a Message Batch, make a request to the\n   * `results_url` field in the response.\n   *\n   * Learn more about the Message Batches API in our\n   * [user guide](https://docs.claude.com/en/docs/build-with-claude/batch-processing)\n   *\n   * @example\n   * ```ts\n   * const betaMessageBatch =\n   *   await client.beta.messages.batches.retrieve(\n   *     'message_batch_id',\n   *   );\n   * ```\n   */\n  retrieve(\n    messageBatchID: string,\n    params: BatchRetrieveParams | null | undefined = {},\n    options?: RequestOptions,\n  ): APIPromise<BetaMessageBatch> {\n    const { betas } = params ?? {};\n    return this._client.get(path`/v1/messages/batches/${messageBatchID}?beta=true`, {\n      ...options,\n      headers: buildHeaders([\n        { 'anthropic-beta': [...(betas ?? []), 'message-batches-2024-09-24'].toString() },\n        options?.headers,\n      ]),\n    });\n  }\n\n  /**\n   * List all Message Batches within a Workspace. Most recently created batches are\n   * returned first.\n   *\n   * Learn more about the Message Batches API in our\n   * [user guide](https://docs.claude.com/en/docs/build-with-claude/batch-processing)\n   *\n   * @example\n   * ```ts\n   * // Automatically fetches more pages as needed.\n   * for await (const betaMessageBatch of client.beta.messages.batches.list()) {\n   *   // ...\n   * }\n   * ```\n   */\n  list(\n    params: BatchListParams | null | undefined = {},\n    options?: RequestOptions,\n  ): PagePromise<BetaMessageBatchesPage, BetaMessageBatch> {\n    const { betas, ...query } = params ?? {};\n    return this._client.getAPIList('/v1/messages/batches?beta=true', Page<BetaMessageBatch>, {\n      query,\n      ...options,\n      headers: buildHeaders([\n        { 'anthropic-beta': [...(betas ?? []), 'message-batches-2024-09-24'].toString() },\n        options?.headers,\n      ]),\n    });\n  }\n\n  /**\n   * Delete a Message Batch.\n   *\n   * Message Batches can only be deleted once they've finished processing. If you'd\n   * like to delete an in-progress batch, you must first cancel it.\n   *\n   * Learn more about the Message Batches API in our\n   * [user guide](https://docs.claude.com/en/docs/build-with-claude/batch-processing)\n   *\n   * @example\n   * ```ts\n   * const betaDeletedMessageBatch =\n   *   await client.beta.messages.batches.delete(\n   *     'message_batch_id',\n   *   );\n   * ```\n   */\n  delete(\n    messageBatchID: string,\n    params: BatchDeleteParams | null | undefined = {},\n    options?: RequestOptions,\n  ): APIPromise<BetaDeletedMessageBatch> {\n    const { betas } = params ?? {};\n    return this._client.delete(path`/v1/messages/batches/${messageBatchID}?beta=true`, {\n      ...options,\n      headers: buildHeaders([\n        { 'anthropic-beta': [...(betas ?? []), 'message-batches-2024-09-24'].toString() },\n        options?.headers,\n      ]),\n    });\n  }\n\n  /**\n   * Batches may be canceled any time before processing ends. Once cancellation is\n   * initiated, the batch enters a `canceling` state, at which time the system may\n   * complete any in-progress, non-interruptible requests before finalizing\n   * cancellation.\n   *\n   * The number of canceled requests is specified in `request_counts`. To determine\n   * which requests were canceled, check the individual results within the batch.\n   * Note that cancellation may not result in any canceled requests if they were\n   * non-interruptible.\n   *\n   * Learn more about the Message Batches API in our\n   * [user guide](https://docs.claude.com/en/docs/build-with-claude/batch-processing)\n   *\n   * @example\n   * ```ts\n   * const betaMessageBatch =\n   *   await client.beta.messages.batches.cancel(\n   *     'message_batch_id',\n   *   );\n   * ```\n   */\n  cancel(\n    messageBatchID: string,\n    params: BatchCancelParams | null | undefined = {},\n    options?: RequestOptions,\n  ): APIPromise<BetaMessageBatch> {\n    const { betas } = params ?? {};\n    return this._client.post(path`/v1/messages/batches/${messageBatchID}/cancel?beta=true`, {\n      ...options,\n      headers: buildHeaders([\n        { 'anthropic-beta': [...(betas ?? []), 'message-batches-2024-09-24'].toString() },\n        options?.headers,\n      ]),\n    });\n  }\n\n  /**\n   * Streams the results of a Message Batch as a `.jsonl` file.\n   *\n   * Each line in the file is a JSON object containing the result of a single request\n   * in the Message Batch. Results are not guaranteed to be in the same order as\n   * requests. Use the `custom_id` field to match results to requests.\n   *\n   * Learn more about the Message Batches API in our\n   * [user guide](https://docs.claude.com/en/docs/build-with-claude/batch-processing)\n   *\n   * @example\n   * ```ts\n   * const betaMessageBatchIndividualResponse =\n   *   await client.beta.messages.batches.results(\n   *     'message_batch_id',\n   *   );\n   * ```\n   */\n  async results(\n    messageBatchID: string,\n    params: BatchResultsParams | undefined = {},\n    options?: RequestOptions,\n  ): Promise<JSONLDecoder<BetaMessageBatchIndividualResponse>> {\n    const batch = await this.retrieve(messageBatchID);\n    if (!batch.results_url) {\n      throw new AnthropicError(\n        `No batch \\`results_url\\`; Has it finished processing? ${batch.processing_status} - ${batch.id}`,\n      );\n    }\n\n    const { betas } = params ?? {};\n    return this._client\n      .get(batch.results_url, {\n        ...options,\n        headers: buildHeaders([\n          {\n            'anthropic-beta': [...(betas ?? []), 'message-batches-2024-09-24'].toString(),\n            Accept: 'application/binary',\n          },\n          options?.headers,\n        ]),\n        stream: true,\n        __binaryResponse: true,\n      })\n      ._thenUnwrap((_, props) => JSONLDecoder.fromResponse(props.response, props.controller)) as APIPromise<\n      JSONLDecoder<BetaMessageBatchIndividualResponse>\n    >;\n  }\n}\n\nexport type BetaMessageBatchesPage = Page<BetaMessageBatch>;\n\nexport interface BetaDeletedMessageBatch {\n  /**\n   * ID of the Message Batch.\n   */\n  id: string;\n\n  /**\n   * Deleted object type.\n   *\n   * For Message Batches, this is always `\"message_batch_deleted\"`.\n   */\n  type: 'message_batch_deleted';\n}\n\nexport interface BetaMessageBatch {\n  /**\n   * Unique object identifier.\n   *\n   * The format and length of IDs may change over time.\n   */\n  id: string;\n\n  /**\n   * RFC 3339 datetime string representing the time at which the Message Batch was\n   * archived and its results became unavailable.\n   */\n  archived_at: string | null;\n\n  /**\n   * RFC 3339 datetime string representing the time at which cancellation was\n   * initiated for the Message Batch. Specified only if cancellation was initiated.\n   */\n  cancel_initiated_at: string | null;\n\n  /**\n   * RFC 3339 datetime string representing the time at which the Message Batch was\n   * created.\n   */\n  created_at: string;\n\n  /**\n   * RFC 3339 datetime string representing the time at which processing for the\n   * Message Batch ended. Specified only once processing ends.\n   *\n   * Processing ends when every request in a Message Batch has either succeeded,\n   * errored, canceled, or expired.\n   */\n  ended_at: string | null;\n\n  /**\n   * RFC 3339 datetime string representing the time at which the Message Batch will\n   * expire and end processing, which is 24 hours after creation.\n   */\n  expires_at: string;\n\n  /**\n   * Processing status of the Message Batch.\n   */\n  processing_status: 'in_progress' | 'canceling' | 'ended';\n\n  /**\n   * Tallies requests within the Message Batch, categorized by their status.\n   *\n   * Requests start as `processing` and move to one of the other statuses only once\n   * processing of the entire batch ends. The sum of all values always matches the\n   * total number of requests in the batch.\n   */\n  request_counts: BetaMessageBatchRequestCounts;\n\n  /**\n   * URL to a `.jsonl` file containing the results of the Message Batch requests.\n   * Specified only once processing ends.\n   *\n   * Results in the file are not guaranteed to be in the same order as requests. Use\n   * the `custom_id` field to match results to requests.\n   */\n  results_url: string | null;\n\n  /**\n   * Object type.\n   *\n   * For Message Batches, this is always `\"message_batch\"`.\n   */\n  type: 'message_batch';\n}\n\nexport interface BetaMessageBatchCanceledResult {\n  type: 'canceled';\n}\n\nexport interface BetaMessageBatchErroredResult {\n  error: BetaAPI.BetaErrorResponse;\n\n  type: 'errored';\n}\n\nexport interface BetaMessageBatchExpiredResult {\n  type: 'expired';\n}\n\n/**\n * This is a single line in the response `.jsonl` file and does not represent the\n * response as a whole.\n */\nexport interface BetaMessageBatchIndividualResponse {\n  /**\n   * Developer-provided ID created for each request in a Message Batch. Useful for\n   * matching results to requests, as results may be given out of request order.\n   *\n   * Must be unique for each request within the Message Batch.\n   */\n  custom_id: string;\n\n  /**\n   * Processing result for this request.\n   *\n   * Contains a Message output if processing was successful, an error response if\n   * processing failed, or the reason why processing was not attempted, such as\n   * cancellation or expiration.\n   */\n  result: BetaMessageBatchResult;\n}\n\nexport interface BetaMessageBatchRequestCounts {\n  /**\n   * Number of requests in the Message Batch that have been canceled.\n   *\n   * This is zero until processing of the entire Message Batch has ended.\n   */\n  canceled: number;\n\n  /**\n   * Number of requests in the Message Batch that encountered an error.\n   *\n   * This is zero until processing of the entire Message Batch has ended.\n   */\n  errored: number;\n\n  /**\n   * Number of requests in the Message Batch that have expired.\n   *\n   * This is zero until processing of the entire Message Batch has ended.\n   */\n  expired: number;\n\n  /**\n   * Number of requests in the Message Batch that are processing.\n   */\n  processing: number;\n\n  /**\n   * Number of requests in the Message Batch that have completed successfully.\n   *\n   * This is zero until processing of the entire Message Batch has ended.\n   */\n  succeeded: number;\n}\n\n/**\n * Processing result for this request.\n *\n * Contains a Message output if processing was successful, an error response if\n * processing failed, or the reason why processing was not attempted, such as\n * cancellation or expiration.\n */\nexport type BetaMessageBatchResult =\n  | BetaMessageBatchSucceededResult\n  | BetaMessageBatchErroredResult\n  | BetaMessageBatchCanceledResult\n  | BetaMessageBatchExpiredResult;\n\nexport interface BetaMessageBatchSucceededResult {\n  message: BetaMessagesAPI.BetaMessage;\n\n  type: 'succeeded';\n}\n\nexport interface BatchCreateParams {\n  /**\n   * Body param: List of requests for prompt completion. Each is an individual\n   * request to create a Message.\n   */\n  requests: Array<BatchCreateParams.Request>;\n\n  /**\n   * Header param: Optional header to specify the beta version(s) you want to use.\n   */\n  betas?: Array<BetaAPI.AnthropicBeta>;\n}\n\nexport namespace BatchCreateParams {\n  export interface Request {\n    /**\n     * Developer-provided ID created for each request in a Message Batch. Useful for\n     * matching results to requests, as results may be given out of request order.\n     *\n     * Must be unique for each request within the Message Batch.\n     */\n    custom_id: string;\n\n    /**\n     * Messages API creation parameters for the individual request.\n     *\n     * See the [Messages API reference](https://docs.claude.com/en/api/messages) for\n     * full documentation on available parameters.\n     */\n    params: Request.Params;\n  }\n\n  export namespace Request {\n    /**\n     * Messages API creation parameters for the individual request.\n     *\n     * See the [Messages API reference](https://docs.claude.com/en/api/messages) for\n     * full documentation on available parameters.\n     */\n    export interface Params {\n      /**\n       * The maximum number of tokens to generate before stopping.\n       *\n       * Note that our models may stop _before_ reaching this maximum. This parameter\n       * only specifies the absolute maximum number of tokens to generate.\n       *\n       * Different models have different maximum values for this parameter. See\n       * [models](https://docs.claude.com/en/docs/models-overview) for details.\n       */\n      max_tokens: number;\n\n      /**\n       * Input messages.\n       *\n       * Our models are trained to operate on alternating `user` and `assistant`\n       * conversational turns. When creating a new `Message`, you specify the prior\n       * conversational turns with the `messages` parameter, and the model then generates\n       * the next `Message` in the conversation. Consecutive `user` or `assistant` turns\n       * in your request will be combined into a single turn.\n       *\n       * Each input message must be an object with a `role` and `content`. You can\n       * specify a single `user`-role message, or you can include multiple `user` and\n       * `assistant` messages.\n       *\n       * If the final message uses the `assistant` role, the response content will\n       * continue immediately from the content in that message. This can be used to\n       * constrain part of the model's response.\n       *\n       * Example with a single `user` message:\n       *\n       * ```json\n       * [{ \"role\": \"user\", \"content\": \"Hello, Claude\" }]\n       * ```\n       *\n       * Example with multiple conversational turns:\n       *\n       * ```json\n       * [\n       *   { \"role\": \"user\", \"content\": \"Hello there.\" },\n       *   { \"role\": \"assistant\", \"content\": \"Hi, I'm Claude. How can I help you?\" },\n       *   { \"role\": \"user\", \"content\": \"Can you explain LLMs in plain English?\" }\n       * ]\n       * ```\n       *\n       * Example with a partially-filled response from Claude:\n       *\n       * ```json\n       * [\n       *   {\n       *     \"role\": \"user\",\n       *     \"content\": \"What's the Greek name for Sun? (A) Sol (B) Helios (C) Sun\"\n       *   },\n       *   { \"role\": \"assistant\", \"content\": \"The best answer is (\" }\n       * ]\n       * ```\n       *\n       * Each input message `content` may be either a single `string` or an array of\n       * content blocks, where each block has a specific `type`. Using a `string` for\n       * `content` is shorthand for an array of one content block of type `\"text\"`. The\n       * following input messages are equivalent:\n       *\n       * ```json\n       * { \"role\": \"user\", \"content\": \"Hello, Claude\" }\n       * ```\n       *\n       * ```json\n       * { \"role\": \"user\", \"content\": [{ \"type\": \"text\", \"text\": \"Hello, Claude\" }] }\n       * ```\n       *\n       * See [input examples](https://docs.claude.com/en/api/messages-examples).\n       *\n       * Note that if you want to include a\n       * [system prompt](https://docs.claude.com/en/docs/system-prompts), you can use the\n       * top-level `system` parameter  there is no `\"system\"` role for input messages in\n       * the Messages API.\n       *\n       * There is a limit of 100,000 messages in a single request.\n       */\n      messages: Array<BetaMessagesAPI.BetaMessageParam>;\n\n      /**\n       * The model that will complete your prompt.\\n\\nSee\n       * [models](https://docs.anthropic.com/en/docs/models-overview) for additional\n       * details and options.\n       */\n      model: MessagesApi.Model;\n\n      /**\n       * Container identifier for reuse across requests.\n       */\n      container?: BetaMessagesAPI.BetaContainerParams | string | null;\n\n      /**\n       * Context management configuration.\n       *\n       * This allows you to control how Claude manages context across multiple requests,\n       * such as whether to clear function results or not.\n       */\n      context_management?: BetaMessagesAPI.BetaContextManagementConfig | null;\n\n      /**\n       * MCP servers to be utilized in this request\n       */\n      mcp_servers?: Array<BetaMessagesAPI.BetaRequestMCPServerURLDefinition>;\n\n      /**\n       * An object describing metadata about the request.\n       */\n      metadata?: BetaMessagesAPI.BetaMetadata;\n\n      /**\n       * Configuration options for the model's output. Controls aspects like how much\n       * effort the model puts into its response.\n       */\n      output_config?: BetaMessagesAPI.BetaOutputConfig;\n\n      /**\n       * A schema to specify Claude's output format in responses.\n       */\n      output_format?: BetaMessagesAPI.BetaJSONOutputFormat | null;\n\n      /**\n       * Determines whether to use priority capacity (if available) or standard capacity\n       * for this request.\n       *\n       * Anthropic offers different levels of service for your API requests. See\n       * [service-tiers](https://docs.claude.com/en/api/service-tiers) for details.\n       */\n      service_tier?: 'auto' | 'standard_only';\n\n      /**\n       * Custom text sequences that will cause the model to stop generating.\n       *\n       * Our models will normally stop when they have naturally completed their turn,\n       * which will result in a response `stop_reason` of `\"end_turn\"`.\n       *\n       * If you want the model to stop generating when it encounters custom strings of\n       * text, you can use the `stop_sequences` parameter. If the model encounters one of\n       * the custom sequences, the response `stop_reason` value will be `\"stop_sequence\"`\n       * and the response `stop_sequence` value will contain the matched stop sequence.\n       */\n      stop_sequences?: Array<string>;\n\n      /**\n       * Whether to incrementally stream the response using server-sent events.\n       *\n       * See [streaming](https://docs.claude.com/en/api/messages-streaming) for details.\n       */\n      stream?: boolean;\n\n      /**\n       * System prompt.\n       *\n       * A system prompt is a way of providing context and instructions to Claude, such\n       * as specifying a particular goal or role. See our\n       * [guide to system prompts](https://docs.claude.com/en/docs/system-prompts).\n       */\n      system?: string | Array<BetaMessagesAPI.BetaTextBlockParam>;\n\n      /**\n       * Amount of randomness injected into the response.\n       *\n       * Defaults to `1.0`. Ranges from `0.0` to `1.0`. Use `temperature` closer to `0.0`\n       * for analytical / multiple choice, and closer to `1.0` for creative and\n       * generative tasks.\n       *\n       * Note that even with `temperature` of `0.0`, the results will not be fully\n       * deterministic.\n       */\n      temperature?: number;\n\n      /**\n       * Configuration for enabling Claude's extended thinking.\n       *\n       * When enabled, responses include `thinking` content blocks showing Claude's\n       * thinking process before the final answer. Requires a minimum budget of 1,024\n       * tokens and counts towards your `max_tokens` limit.\n       *\n       * See\n       * [extended thinking](https://docs.claude.com/en/docs/build-with-claude/extended-thinking)\n       * for details.\n       */\n      thinking?: BetaMessagesAPI.BetaThinkingConfigParam;\n\n      /**\n       * How the model should use the provided tools. The model can use a specific tool,\n       * any available tool, decide by itself, or not use tools at all.\n       */\n      tool_choice?: BetaMessagesAPI.BetaToolChoice;\n\n      /**\n       * Definitions of tools that the model may use.\n       *\n       * If you include `tools` in your API request, the model may return `tool_use`\n       * content blocks that represent the model's use of those tools. You can then run\n       * those tools using the tool input generated by the model and then optionally\n       * return results back to the model using `tool_result` content blocks.\n       *\n       * There are two types of tools: **client tools** and **server tools**. The\n       * behavior described below applies to client tools. For\n       * [server tools](https://docs.claude.com/en/docs/agents-and-tools/tool-use/overview#server-tools),\n       * see their individual documentation as each has its own behavior (e.g., the\n       * [web search tool](https://docs.claude.com/en/docs/agents-and-tools/tool-use/web-search-tool)).\n       *\n       * Each tool definition includes:\n       *\n       * - `name`: Name of the tool.\n       * - `description`: Optional, but strongly-recommended description of the tool.\n       * - `input_schema`: [JSON schema](https://json-schema.org/draft/2020-12) for the\n       *   tool `input` shape that the model will produce in `tool_use` output content\n       *   blocks.\n       *\n       * For example, if you defined `tools` as:\n       *\n       * ```json\n       * [\n       *   {\n       *     \"name\": \"get_stock_price\",\n       *     \"description\": \"Get the current stock price for a given ticker symbol.\",\n       *     \"input_schema\": {\n       *       \"type\": \"object\",\n       *       \"properties\": {\n       *         \"ticker\": {\n       *           \"type\": \"string\",\n       *           \"description\": \"The stock ticker symbol, e.g. AAPL for Apple Inc.\"\n       *         }\n       *       },\n       *       \"required\": [\"ticker\"]\n       *     }\n       *   }\n       * ]\n       * ```\n       *\n       * And then asked the model \"What's the S&P 500 at today?\", the model might produce\n       * `tool_use` content blocks in the response like this:\n       *\n       * ```json\n       * [\n       *   {\n       *     \"type\": \"tool_use\",\n       *     \"id\": \"toolu_01D7FLrfh4GYq7yT1ULFeyMV\",\n       *     \"name\": \"get_stock_price\",\n       *     \"input\": { \"ticker\": \"^GSPC\" }\n       *   }\n       * ]\n       * ```\n       *\n       * You might then run your `get_stock_price` tool with `{\"ticker\": \"^GSPC\"}` as an\n       * input, and return the following back to the model in a subsequent `user`\n       * message:\n       *\n       * ```json\n       * [\n       *   {\n       *     \"type\": \"tool_result\",\n       *     \"tool_use_id\": \"toolu_01D7FLrfh4GYq7yT1ULFeyMV\",\n       *     \"content\": \"259.75 USD\"\n       *   }\n       * ]\n       * ```\n       *\n       * Tools can be used for workflows that include running client-side tools and\n       * functions, or more generally whenever you want the model to produce a particular\n       * JSON structure of output.\n       *\n       * See our [guide](https://docs.claude.com/en/docs/tool-use) for more details.\n       */\n      tools?: Array<BetaMessagesAPI.BetaToolUnion>;\n\n      /**\n       * Only sample from the top K options for each subsequent token.\n       *\n       * Used to remove \"long tail\" low probability responses.\n       * [Learn more technical details here](https://towardsdatascience.com/how-to-sample-from-language-models-682bceb97277).\n       *\n       * Recommended for advanced use cases only. You usually only need to use\n       * `temperature`.\n       */\n      top_k?: number;\n\n      /**\n       * Use nucleus sampling.\n       *\n       * In nucleus sampling, we compute the cumulative distribution over all the options\n       * for each subsequent token in decreasing probability order and cut it off once it\n       * reaches a particular probability specified by `top_p`. You should either alter\n       * `temperature` or `top_p`, but not both.\n       *\n       * Recommended for advanced use cases only. You usually only need to use\n       * `temperature`.\n       */\n      top_p?: number;\n    }\n  }\n}\n\nexport interface BatchRetrieveParams {\n  /**\n   * Optional header to specify the beta version(s) you want to use.\n   */\n  betas?: Array<BetaAPI.AnthropicBeta>;\n}\n\nexport interface BatchListParams extends PageParams {\n  /**\n   * Header param: Optional header to specify the beta version(s) you want to use.\n   */\n  betas?: Array<BetaAPI.AnthropicBeta>;\n}\n\nexport interface BatchDeleteParams {\n  /**\n   * Optional header to specify the beta version(s) you want to use.\n   */\n  betas?: Array<BetaAPI.AnthropicBeta>;\n}\n\nexport interface BatchCancelParams {\n  /**\n   * Optional header to specify the beta version(s) you want to use.\n   */\n  betas?: Array<BetaAPI.AnthropicBeta>;\n}\n\nexport interface BatchResultsParams {\n  /**\n   * Optional header to specify the beta version(s) you want to use.\n   */\n  betas?: Array<BetaAPI.AnthropicBeta>;\n}\n\nexport declare namespace Batches {\n  export {\n    type BetaDeletedMessageBatch as BetaDeletedMessageBatch,\n    type BetaMessageBatch as BetaMessageBatch,\n    type BetaMessageBatchCanceledResult as BetaMessageBatchCanceledResult,\n    type BetaMessageBatchErroredResult as BetaMessageBatchErroredResult,\n    type BetaMessageBatchExpiredResult as BetaMessageBatchExpiredResult,\n    type BetaMessageBatchIndividualResponse as BetaMessageBatchIndividualResponse,\n    type BetaMessageBatchRequestCounts as BetaMessageBatchRequestCounts,\n    type BetaMessageBatchResult as BetaMessageBatchResult,\n    type BetaMessageBatchSucceededResult as BetaMessageBatchSucceededResult,\n    type BetaMessageBatchesPage as BetaMessageBatchesPage,\n    type BatchCreateParams as BatchCreateParams,\n    type BatchRetrieveParams as BatchRetrieveParams,\n    type BatchListParams as BatchListParams,\n    type BatchDeleteParams as BatchDeleteParams,\n    type BatchCancelParams as BatchCancelParams,\n    type BatchResultsParams as BatchResultsParams,\n  };\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../../core/resource';\nimport * as FilesAPI from './files';\nimport {\n  DeletedFile,\n  FileDeleteParams,\n  FileDownloadParams,\n  FileListParams,\n  FileMetadata,\n  FileMetadataPage,\n  FileRetrieveMetadataParams,\n  FileUploadParams,\n  Files,\n} from './files';\nimport * as ModelsAPI from './models';\nimport { BetaModelInfo, BetaModelInfosPage, ModelListParams, ModelRetrieveParams, Models } from './models';\nimport * as MessagesAPI from './messages/messages';\nimport {\n  BetaAllThinkingTurns,\n  BetaBase64ImageSource,\n  BetaBase64PDFBlock,\n  BetaBase64PDFSource,\n  BetaBashCodeExecutionOutputBlock,\n  BetaBashCodeExecutionOutputBlockParam,\n  BetaBashCodeExecutionResultBlock,\n  BetaBashCodeExecutionResultBlockParam,\n  BetaBashCodeExecutionToolResultBlock,\n  BetaBashCodeExecutionToolResultBlockParam,\n  BetaBashCodeExecutionToolResultError,\n  BetaBashCodeExecutionToolResultErrorParam,\n  BetaCacheControlEphemeral,\n  BetaCacheCreation,\n  BetaCitationCharLocation,\n  BetaCitationCharLocationParam,\n  BetaCitationConfig,\n  BetaCitationContentBlockLocation,\n  BetaCitationContentBlockLocationParam,\n  BetaCitationPageLocation,\n  BetaCitationPageLocationParam,\n  BetaCitationSearchResultLocation,\n  BetaCitationSearchResultLocationParam,\n  BetaCitationWebSearchResultLocationParam,\n  BetaCitationsConfigParam,\n  BetaCitationsDelta,\n  BetaCitationsWebSearchResultLocation,\n  BetaClearThinking20251015Edit,\n  BetaClearThinking20251015EditResponse,\n  BetaClearToolUses20250919Edit,\n  BetaClearToolUses20250919EditResponse,\n  BetaCodeExecutionOutputBlock,\n  BetaCodeExecutionOutputBlockParam,\n  BetaCodeExecutionResultBlock,\n  BetaCodeExecutionResultBlockParam,\n  BetaCodeExecutionTool20250522,\n  BetaCodeExecutionTool20250825,\n  BetaCodeExecutionToolResultBlock,\n  BetaCodeExecutionToolResultBlockContent,\n  BetaCodeExecutionToolResultBlockParam,\n  BetaCodeExecutionToolResultBlockParamContent,\n  BetaCodeExecutionToolResultError,\n  BetaCodeExecutionToolResultErrorCode,\n  BetaCodeExecutionToolResultErrorParam,\n  BetaContainer,\n  BetaContainerParams,\n  BetaContainerUploadBlock,\n  BetaContainerUploadBlockParam,\n  BetaContentBlock,\n  BetaContentBlockParam,\n  BetaContentBlockSource,\n  BetaContentBlockSourceContent,\n  BetaContextManagementConfig,\n  BetaContextManagementResponse,\n  BetaCountTokensContextManagementResponse,\n  BetaDirectCaller,\n  BetaDocumentBlock,\n  BetaFileDocumentSource,\n  BetaFileImageSource,\n  BetaImageBlockParam,\n  BetaInputJSONDelta,\n  BetaJSONOutputFormat,\n  BetaInputTokensClearAtLeast,\n  BetaInputTokensTrigger,\n  BetaMCPToolResultBlock,\n  BetaMCPToolUseBlock,\n  BetaMCPToolUseBlockParam,\n  BetaMCPToolset,\n  BetaMemoryTool20250818,\n  BetaMemoryTool20250818Command,\n  BetaMemoryTool20250818CreateCommand,\n  BetaMemoryTool20250818DeleteCommand,\n  BetaMemoryTool20250818InsertCommand,\n  BetaMemoryTool20250818RenameCommand,\n  BetaMemoryTool20250818StrReplaceCommand,\n  BetaMemoryTool20250818ViewCommand,\n  BetaMessage,\n  BetaMessageDeltaUsage,\n  BetaMessageParam,\n  BetaMessageTokensCount,\n  BetaMetadata,\n  BetaOutputConfig,\n  BetaPlainTextSource,\n  BetaRawContentBlockDelta,\n  BetaRawContentBlockDeltaEvent,\n  BetaRawContentBlockStartEvent,\n  BetaRawContentBlockStopEvent,\n  BetaRawMessageDeltaEvent,\n  BetaRawMessageStartEvent,\n  BetaRawMessageStopEvent,\n  BetaRawMessageStreamEvent,\n  BetaRedactedThinkingBlock,\n  BetaRedactedThinkingBlockParam,\n  BetaRequestDocumentBlock,\n  BetaRequestMCPServerToolConfiguration,\n  BetaRequestMCPServerURLDefinition,\n  BetaRequestMCPToolResultBlockParam,\n  BetaSearchResultBlockParam,\n  BetaServerToolCaller,\n  BetaServerToolUsage,\n  BetaServerToolUseBlock,\n  BetaServerToolUseBlockParam,\n  BetaSignatureDelta,\n  BetaSkill,\n  BetaSkillParams,\n  BetaStopReason,\n  BetaTextBlock,\n  BetaTextBlockParam,\n  BetaTextCitation,\n  BetaTextCitationParam,\n  BetaTextDelta,\n  BetaTextEditorCodeExecutionCreateResultBlock,\n  BetaTextEditorCodeExecutionCreateResultBlockParam,\n  BetaTextEditorCodeExecutionStrReplaceResultBlock,\n  BetaTextEditorCodeExecutionStrReplaceResultBlockParam,\n  BetaTextEditorCodeExecutionToolResultBlock,\n  BetaTextEditorCodeExecutionToolResultBlockParam,\n  BetaTextEditorCodeExecutionToolResultError,\n  BetaTextEditorCodeExecutionToolResultErrorParam,\n  BetaTextEditorCodeExecutionViewResultBlock,\n  BetaTextEditorCodeExecutionViewResultBlockParam,\n  BetaThinkingBlock,\n  BetaThinkingBlockParam,\n  BetaThinkingConfigDisabled,\n  BetaThinkingConfigEnabled,\n  BetaThinkingConfigParam,\n  BetaThinkingDelta,\n  BetaThinkingTurns,\n  BetaTool,\n  BetaToolBash20241022,\n  BetaToolBash20250124,\n  BetaToolChoice,\n  BetaToolChoiceAny,\n  BetaToolChoiceAuto,\n  BetaToolChoiceNone,\n  BetaToolChoiceTool,\n  BetaToolComputerUse20241022,\n  BetaToolComputerUse20250124,\n  BetaToolComputerUse20251124,\n  BetaToolReferenceBlock,\n  BetaToolReferenceBlockParam,\n  BetaToolResultBlockParam,\n  BetaToolTextEditor20241022,\n  BetaToolTextEditor20250124,\n  BetaToolTextEditor20250429,\n  BetaToolTextEditor20250728,\n  BetaToolUnion,\n  BetaToolUseBlock,\n  BetaToolUseBlockParam,\n  BetaToolUsesKeep,\n  BetaToolUsesTrigger,\n  BetaURLImageSource,\n  BetaURLPDFSource,\n  BetaUsage,\n  BetaWebFetchBlock,\n  BetaWebFetchBlockParam,\n  BetaWebFetchTool20250910,\n  BetaWebFetchToolResultBlock,\n  BetaWebFetchToolResultBlockParam,\n  BetaWebFetchToolResultErrorBlock,\n  BetaWebFetchToolResultErrorBlockParam,\n  BetaWebFetchToolResultErrorCode,\n  BetaWebSearchResultBlock,\n  BetaWebSearchResultBlockParam,\n  BetaWebSearchTool20250305,\n  BetaWebSearchToolRequestError,\n  BetaWebSearchToolResultBlock,\n  BetaWebSearchToolResultBlockContent,\n  BetaWebSearchToolResultBlockParam,\n  BetaWebSearchToolResultBlockParamContent,\n  BetaWebSearchToolResultError,\n  BetaWebSearchToolResultErrorCode,\n  MessageCountTokensParams,\n  MessageCreateParams,\n  MessageCreateParamsNonStreaming,\n  MessageCreateParamsStreaming,\n  Messages,\n  BetaMCPToolConfig,\n  BetaMCPToolDefaultConfig,\n} from './messages/messages';\nimport * as SkillsAPI from './skills/skills';\nimport {\n  SkillCreateParams,\n  SkillCreateResponse,\n  SkillDeleteParams,\n  SkillDeleteResponse,\n  SkillListParams,\n  SkillListResponse,\n  SkillListResponsesPageCursor,\n  SkillRetrieveParams,\n  SkillRetrieveResponse,\n  Skills,\n} from './skills/skills';\n\nexport class Beta extends APIResource {\n  models: ModelsAPI.Models = new ModelsAPI.Models(this._client);\n  messages: MessagesAPI.Messages = new MessagesAPI.Messages(this._client);\n  files: FilesAPI.Files = new FilesAPI.Files(this._client);\n  skills: SkillsAPI.Skills = new SkillsAPI.Skills(this._client);\n}\n\nexport type AnthropicBeta =\n  | (string & {})\n  | 'message-batches-2024-09-24'\n  | 'prompt-caching-2024-07-31'\n  | 'computer-use-2024-10-22'\n  | 'computer-use-2025-01-24'\n  | 'pdfs-2024-09-25'\n  | 'token-counting-2024-11-01'\n  | 'token-efficient-tools-2025-02-19'\n  | 'output-128k-2025-02-19'\n  | 'files-api-2025-04-14'\n  | 'mcp-client-2025-04-04'\n  | 'mcp-client-2025-11-20'\n  | 'dev-full-thinking-2025-05-14'\n  | 'interleaved-thinking-2025-05-14'\n  | 'code-execution-2025-05-22'\n  | 'extended-cache-ttl-2025-04-11'\n  | 'context-1m-2025-08-07'\n  | 'context-management-2025-06-27'\n  | 'model-context-window-exceeded-2025-08-26'\n  | 'skills-2025-10-02';\n\nexport interface BetaAPIError {\n  message: string;\n\n  type: 'api_error';\n}\n\nexport interface BetaAuthenticationError {\n  message: string;\n\n  type: 'authentication_error';\n}\n\nexport interface BetaBillingError {\n  message: string;\n\n  type: 'billing_error';\n}\n\nexport type BetaError =\n  | BetaInvalidRequestError\n  | BetaAuthenticationError\n  | BetaBillingError\n  | BetaPermissionError\n  | BetaNotFoundError\n  | BetaRateLimitError\n  | BetaGatewayTimeoutError\n  | BetaAPIError\n  | BetaOverloadedError;\n\nexport interface BetaErrorResponse {\n  error: BetaError;\n\n  request_id: string | null;\n\n  type: 'error';\n}\n\nexport interface BetaGatewayTimeoutError {\n  message: string;\n\n  type: 'timeout_error';\n}\n\nexport interface BetaInvalidRequestError {\n  message: string;\n\n  type: 'invalid_request_error';\n}\n\nexport interface BetaNotFoundError {\n  message: string;\n\n  type: 'not_found_error';\n}\n\nexport interface BetaOverloadedError {\n  message: string;\n\n  type: 'overloaded_error';\n}\n\nexport interface BetaPermissionError {\n  message: string;\n\n  type: 'permission_error';\n}\n\nexport interface BetaRateLimitError {\n  message: string;\n\n  type: 'rate_limit_error';\n}\n\nBeta.Models = Models;\nBeta.Messages = Messages;\nBeta.Files = Files;\nBeta.Skills = Skills;\n\nexport declare namespace Beta {\n  export {\n    type AnthropicBeta as AnthropicBeta,\n    type BetaAPIError as BetaAPIError,\n    type BetaAuthenticationError as BetaAuthenticationError,\n    type BetaBillingError as BetaBillingError,\n    type BetaError as BetaError,\n    type BetaErrorResponse as BetaErrorResponse,\n    type BetaGatewayTimeoutError as BetaGatewayTimeoutError,\n    type BetaInvalidRequestError as BetaInvalidRequestError,\n    type BetaNotFoundError as BetaNotFoundError,\n    type BetaOverloadedError as BetaOverloadedError,\n    type BetaPermissionError as BetaPermissionError,\n    type BetaRateLimitError as BetaRateLimitError,\n  };\n\n  export {\n    Models as Models,\n    type BetaModelInfo as BetaModelInfo,\n    type BetaModelInfosPage as BetaModelInfosPage,\n    type ModelRetrieveParams as ModelRetrieveParams,\n    type ModelListParams as ModelListParams,\n  };\n\n  export {\n    Messages as Messages,\n    type BetaAllThinkingTurns as BetaAllThinkingTurns,\n    type BetaBase64ImageSource as BetaBase64ImageSource,\n    type BetaBase64PDFSource as BetaBase64PDFSource,\n    type BetaBashCodeExecutionOutputBlock as BetaBashCodeExecutionOutputBlock,\n    type BetaBashCodeExecutionOutputBlockParam as BetaBashCodeExecutionOutputBlockParam,\n    type BetaBashCodeExecutionResultBlock as BetaBashCodeExecutionResultBlock,\n    type BetaBashCodeExecutionResultBlockParam as BetaBashCodeExecutionResultBlockParam,\n    type BetaBashCodeExecutionToolResultBlock as BetaBashCodeExecutionToolResultBlock,\n    type BetaBashCodeExecutionToolResultBlockParam as BetaBashCodeExecutionToolResultBlockParam,\n    type BetaBashCodeExecutionToolResultError as BetaBashCodeExecutionToolResultError,\n    type BetaBashCodeExecutionToolResultErrorParam as BetaBashCodeExecutionToolResultErrorParam,\n    type BetaCacheControlEphemeral as BetaCacheControlEphemeral,\n    type BetaCacheCreation as BetaCacheCreation,\n    type BetaCitationCharLocation as BetaCitationCharLocation,\n    type BetaCitationCharLocationParam as BetaCitationCharLocationParam,\n    type BetaCitationConfig as BetaCitationConfig,\n    type BetaCitationContentBlockLocation as BetaCitationContentBlockLocation,\n    type BetaCitationContentBlockLocationParam as BetaCitationContentBlockLocationParam,\n    type BetaCitationPageLocation as BetaCitationPageLocation,\n    type BetaCitationPageLocationParam as BetaCitationPageLocationParam,\n    type BetaCitationSearchResultLocation as BetaCitationSearchResultLocation,\n    type BetaCitationSearchResultLocationParam as BetaCitationSearchResultLocationParam,\n    type BetaCitationWebSearchResultLocationParam as BetaCitationWebSearchResultLocationParam,\n    type BetaCitationsConfigParam as BetaCitationsConfigParam,\n    type BetaCitationsDelta as BetaCitationsDelta,\n    type BetaCitationsWebSearchResultLocation as BetaCitationsWebSearchResultLocation,\n    type BetaClearThinking20251015Edit as BetaClearThinking20251015Edit,\n    type BetaClearThinking20251015EditResponse as BetaClearThinking20251015EditResponse,\n    type BetaClearToolUses20250919Edit as BetaClearToolUses20250919Edit,\n    type BetaClearToolUses20250919EditResponse as BetaClearToolUses20250919EditResponse,\n    type BetaCodeExecutionOutputBlock as BetaCodeExecutionOutputBlock,\n    type BetaCodeExecutionOutputBlockParam as BetaCodeExecutionOutputBlockParam,\n    type BetaCodeExecutionResultBlock as BetaCodeExecutionResultBlock,\n    type BetaCodeExecutionResultBlockParam as BetaCodeExecutionResultBlockParam,\n    type BetaCodeExecutionTool20250522 as BetaCodeExecutionTool20250522,\n    type BetaCodeExecutionTool20250825 as BetaCodeExecutionTool20250825,\n    type BetaCodeExecutionToolResultBlock as BetaCodeExecutionToolResultBlock,\n    type BetaCodeExecutionToolResultBlockContent as BetaCodeExecutionToolResultBlockContent,\n    type BetaCodeExecutionToolResultBlockParam as BetaCodeExecutionToolResultBlockParam,\n    type BetaCodeExecutionToolResultBlockParamContent as BetaCodeExecutionToolResultBlockParamContent,\n    type BetaCodeExecutionToolResultError as BetaCodeExecutionToolResultError,\n    type BetaCodeExecutionToolResultErrorCode as BetaCodeExecutionToolResultErrorCode,\n    type BetaCodeExecutionToolResultErrorParam as BetaCodeExecutionToolResultErrorParam,\n    type BetaContainer as BetaContainer,\n    type BetaContainerParams as BetaContainerParams,\n    type BetaContainerUploadBlock as BetaContainerUploadBlock,\n    type BetaContainerUploadBlockParam as BetaContainerUploadBlockParam,\n    type BetaContentBlock as BetaContentBlock,\n    type BetaContentBlockParam as BetaContentBlockParam,\n    type BetaContentBlockSource as BetaContentBlockSource,\n    type BetaContentBlockSourceContent as BetaContentBlockSourceContent,\n    type BetaContextManagementConfig as BetaContextManagementConfig,\n    type BetaContextManagementResponse as BetaContextManagementResponse,\n    type BetaCountTokensContextManagementResponse as BetaCountTokensContextManagementResponse,\n    type BetaDirectCaller as BetaDirectCaller,\n    type BetaDocumentBlock as BetaDocumentBlock,\n    type BetaFileDocumentSource as BetaFileDocumentSource,\n    type BetaFileImageSource as BetaFileImageSource,\n    type BetaImageBlockParam as BetaImageBlockParam,\n    type BetaInputJSONDelta as BetaInputJSONDelta,\n    type BetaJSONOutputFormat as BetaJSONOutputFormat,\n    type BetaInputTokensClearAtLeast as BetaInputTokensClearAtLeast,\n    type BetaInputTokensTrigger as BetaInputTokensTrigger,\n    type BetaMCPToolConfig as BetaMCPToolConfig,\n    type BetaMCPToolDefaultConfig as BetaMCPToolDefaultConfig,\n    type BetaMCPToolResultBlock as BetaMCPToolResultBlock,\n    type BetaMCPToolUseBlock as BetaMCPToolUseBlock,\n    type BetaMCPToolUseBlockParam as BetaMCPToolUseBlockParam,\n    type BetaMCPToolset as BetaMCPToolset,\n    type BetaMemoryTool20250818 as BetaMemoryTool20250818,\n    type BetaMemoryTool20250818Command as BetaMemoryTool20250818Command,\n    type BetaMemoryTool20250818CreateCommand as BetaMemoryTool20250818CreateCommand,\n    type BetaMemoryTool20250818DeleteCommand as BetaMemoryTool20250818DeleteCommand,\n    type BetaMemoryTool20250818InsertCommand as BetaMemoryTool20250818InsertCommand,\n    type BetaMemoryTool20250818RenameCommand as BetaMemoryTool20250818RenameCommand,\n    type BetaMemoryTool20250818StrReplaceCommand as BetaMemoryTool20250818StrReplaceCommand,\n    type BetaMemoryTool20250818ViewCommand as BetaMemoryTool20250818ViewCommand,\n    type BetaMessage as BetaMessage,\n    type BetaMessageDeltaUsage as BetaMessageDeltaUsage,\n    type BetaMessageParam as BetaMessageParam,\n    type BetaMessageTokensCount as BetaMessageTokensCount,\n    type BetaMetadata as BetaMetadata,\n    type BetaOutputConfig as BetaOutputConfig,\n    type BetaPlainTextSource as BetaPlainTextSource,\n    type BetaRawContentBlockDelta as BetaRawContentBlockDelta,\n    type BetaRawContentBlockDeltaEvent as BetaRawContentBlockDeltaEvent,\n    type BetaRawContentBlockStartEvent as BetaRawContentBlockStartEvent,\n    type BetaRawContentBlockStopEvent as BetaRawContentBlockStopEvent,\n    type BetaRawMessageDeltaEvent as BetaRawMessageDeltaEvent,\n    type BetaRawMessageStartEvent as BetaRawMessageStartEvent,\n    type BetaRawMessageStopEvent as BetaRawMessageStopEvent,\n    type BetaRawMessageStreamEvent as BetaRawMessageStreamEvent,\n    type BetaRedactedThinkingBlock as BetaRedactedThinkingBlock,\n    type BetaRedactedThinkingBlockParam as BetaRedactedThinkingBlockParam,\n    type BetaRequestDocumentBlock as BetaRequestDocumentBlock,\n    type BetaRequestMCPServerToolConfiguration as BetaRequestMCPServerToolConfiguration,\n    type BetaRequestMCPServerURLDefinition as BetaRequestMCPServerURLDefinition,\n    type BetaRequestMCPToolResultBlockParam as BetaRequestMCPToolResultBlockParam,\n    type BetaSearchResultBlockParam as BetaSearchResultBlockParam,\n    type BetaServerToolCaller as BetaServerToolCaller,\n    type BetaServerToolUsage as BetaServerToolUsage,\n    type BetaServerToolUseBlock as BetaServerToolUseBlock,\n    type BetaServerToolUseBlockParam as BetaServerToolUseBlockParam,\n    type BetaSignatureDelta as BetaSignatureDelta,\n    type BetaSkill as BetaSkill,\n    type BetaSkillParams as BetaSkillParams,\n    type BetaStopReason as BetaStopReason,\n    type BetaTextBlock as BetaTextBlock,\n    type BetaTextBlockParam as BetaTextBlockParam,\n    type BetaTextCitation as BetaTextCitation,\n    type BetaTextCitationParam as BetaTextCitationParam,\n    type BetaTextDelta as BetaTextDelta,\n    type BetaTextEditorCodeExecutionCreateResultBlock as BetaTextEditorCodeExecutionCreateResultBlock,\n    type BetaTextEditorCodeExecutionCreateResultBlockParam as BetaTextEditorCodeExecutionCreateResultBlockParam,\n    type BetaTextEditorCodeExecutionStrReplaceResultBlock as BetaTextEditorCodeExecutionStrReplaceResultBlock,\n    type BetaTextEditorCodeExecutionStrReplaceResultBlockParam as BetaTextEditorCodeExecutionStrReplaceResultBlockParam,\n    type BetaTextEditorCodeExecutionToolResultBlock as BetaTextEditorCodeExecutionToolResultBlock,\n    type BetaTextEditorCodeExecutionToolResultBlockParam as BetaTextEditorCodeExecutionToolResultBlockParam,\n    type BetaTextEditorCodeExecutionToolResultError as BetaTextEditorCodeExecutionToolResultError,\n    type BetaTextEditorCodeExecutionToolResultErrorParam as BetaTextEditorCodeExecutionToolResultErrorParam,\n    type BetaTextEditorCodeExecutionViewResultBlock as BetaTextEditorCodeExecutionViewResultBlock,\n    type BetaTextEditorCodeExecutionViewResultBlockParam as BetaTextEditorCodeExecutionViewResultBlockParam,\n    type BetaThinkingBlock as BetaThinkingBlock,\n    type BetaThinkingBlockParam as BetaThinkingBlockParam,\n    type BetaThinkingConfigDisabled as BetaThinkingConfigDisabled,\n    type BetaThinkingConfigEnabled as BetaThinkingConfigEnabled,\n    type BetaThinkingConfigParam as BetaThinkingConfigParam,\n    type BetaThinkingDelta as BetaThinkingDelta,\n    type BetaThinkingTurns as BetaThinkingTurns,\n    type BetaTool as BetaTool,\n    type BetaToolBash20241022 as BetaToolBash20241022,\n    type BetaToolBash20250124 as BetaToolBash20250124,\n    type BetaToolChoice as BetaToolChoice,\n    type BetaToolChoiceAny as BetaToolChoiceAny,\n    type BetaToolChoiceAuto as BetaToolChoiceAuto,\n    type BetaToolChoiceNone as BetaToolChoiceNone,\n    type BetaToolChoiceTool as BetaToolChoiceTool,\n    type BetaToolComputerUse20241022 as BetaToolComputerUse20241022,\n    type BetaToolComputerUse20250124 as BetaToolComputerUse20250124,\n    type BetaToolComputerUse20251124 as BetaToolComputerUse20251124,\n    type BetaToolReferenceBlock as BetaToolReferenceBlock,\n    type BetaToolReferenceBlockParam as BetaToolReferenceBlockParam,\n    type BetaToolResultBlockParam as BetaToolResultBlockParam,\n    type BetaToolTextEditor20241022 as BetaToolTextEditor20241022,\n    type BetaToolTextEditor20250124 as BetaToolTextEditor20250124,\n    type BetaToolTextEditor20250429 as BetaToolTextEditor20250429,\n    type BetaToolTextEditor20250728 as BetaToolTextEditor20250728,\n    type BetaToolUnion as BetaToolUnion,\n    type BetaToolUseBlock as BetaToolUseBlock,\n    type BetaToolUseBlockParam as BetaToolUseBlockParam,\n    type BetaToolUsesKeep as BetaToolUsesKeep,\n    type BetaToolUsesTrigger as BetaToolUsesTrigger,\n    type BetaURLImageSource as BetaURLImageSource,\n    type BetaURLPDFSource as BetaURLPDFSource,\n    type BetaUsage as BetaUsage,\n    type BetaWebFetchBlock as BetaWebFetchBlock,\n    type BetaWebFetchBlockParam as BetaWebFetchBlockParam,\n    type BetaWebFetchTool20250910 as BetaWebFetchTool20250910,\n    type BetaWebFetchToolResultBlock as BetaWebFetchToolResultBlock,\n    type BetaWebFetchToolResultBlockParam as BetaWebFetchToolResultBlockParam,\n    type BetaWebFetchToolResultErrorBlock as BetaWebFetchToolResultErrorBlock,\n    type BetaWebFetchToolResultErrorBlockParam as BetaWebFetchToolResultErrorBlockParam,\n    type BetaWebFetchToolResultErrorCode as BetaWebFetchToolResultErrorCode,\n    type BetaWebSearchResultBlock as BetaWebSearchResultBlock,\n    type BetaWebSearchResultBlockParam as BetaWebSearchResultBlockParam,\n    type BetaWebSearchTool20250305 as BetaWebSearchTool20250305,\n    type BetaWebSearchToolRequestError as BetaWebSearchToolRequestError,\n    type BetaWebSearchToolResultBlock as BetaWebSearchToolResultBlock,\n    type BetaWebSearchToolResultBlockContent as BetaWebSearchToolResultBlockContent,\n    type BetaWebSearchToolResultBlockParam as BetaWebSearchToolResultBlockParam,\n    type BetaWebSearchToolResultBlockParamContent as BetaWebSearchToolResultBlockParamContent,\n    type BetaWebSearchToolResultError as BetaWebSearchToolResultError,\n    type BetaWebSearchToolResultErrorCode as BetaWebSearchToolResultErrorCode,\n    type BetaBase64PDFBlock as BetaBase64PDFBlock,\n    type MessageCreateParams as MessageCreateParams,\n    type MessageCreateParamsNonStreaming as MessageCreateParamsNonStreaming,\n    type MessageCreateParamsStreaming as MessageCreateParamsStreaming,\n    type MessageCountTokensParams as MessageCountTokensParams,\n  };\n\n  export {\n    Files as Files,\n    type DeletedFile as DeletedFile,\n    type FileMetadata as FileMetadata,\n    type FileMetadataPage as FileMetadataPage,\n    type FileListParams as FileListParams,\n    type FileDeleteParams as FileDeleteParams,\n    type FileDownloadParams as FileDownloadParams,\n    type FileRetrieveMetadataParams as FileRetrieveMetadataParams,\n    type FileUploadParams as FileUploadParams,\n  };\n\n  export {\n    Skills as Skills,\n    type SkillCreateResponse as SkillCreateResponse,\n    type SkillRetrieveResponse as SkillRetrieveResponse,\n    type SkillListResponse as SkillListResponse,\n    type SkillDeleteResponse as SkillDeleteResponse,\n    type SkillListResponsesPageCursor as SkillListResponsesPageCursor,\n    type SkillCreateParams as SkillCreateParams,\n    type SkillRetrieveParams as SkillRetrieveParams,\n    type SkillListParams as SkillListParams,\n    type SkillDeleteParams as SkillDeleteParams,\n  };\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { castToError } from '../internal/errors';\n\nexport class AnthropicError extends Error {}\n\nexport class APIError<\n  TStatus extends number | undefined = number | undefined,\n  THeaders extends Headers | undefined = Headers | undefined,\n  TError extends Object | undefined = Object | undefined,\n> extends AnthropicError {\n  /** HTTP status for the response that caused the error */\n  readonly status: TStatus;\n  /** HTTP headers for the response that caused the error */\n  readonly headers: THeaders;\n  /** JSON body of the response that caused the error */\n  readonly error: TError;\n\n  readonly requestID: string | null | undefined;\n\n  constructor(status: TStatus, error: TError, message: string | undefined, headers: THeaders) {\n    super(`${APIError.makeMessage(status, error, message)}`);\n    this.status = status;\n    this.headers = headers;\n    this.requestID = headers?.get('request-id');\n    this.error = error;\n  }\n\n  private static makeMessage(status: number | undefined, error: any, message: string | undefined) {\n    const msg =\n      error?.message ?\n        typeof error.message === 'string' ?\n          error.message\n        : JSON.stringify(error.message)\n      : error ? JSON.stringify(error)\n      : message;\n\n    if (status && msg) {\n      return `${status} ${msg}`;\n    }\n    if (status) {\n      return `${status} status code (no body)`;\n    }\n    if (msg) {\n      return msg;\n    }\n    return '(no status code or body)';\n  }\n\n  static generate(\n    status: number | undefined,\n    errorResponse: Object | undefined,\n    message: string | undefined,\n    headers: Headers | undefined,\n  ): APIError {\n    if (!status || !headers) {\n      return new APIConnectionError({ message, cause: castToError(errorResponse) });\n    }\n\n    const error = errorResponse as Record<string, any>;\n\n    if (status === 400) {\n      return new BadRequestError(status, error, message, headers);\n    }\n\n    if (status === 401) {\n      return new AuthenticationError(status, error, message, headers);\n    }\n\n    if (status === 403) {\n      return new PermissionDeniedError(status, error, message, headers);\n    }\n\n    if (status === 404) {\n      return new NotFoundError(status, error, message, headers);\n    }\n\n    if (status === 409) {\n      return new ConflictError(status, error, message, headers);\n    }\n\n    if (status === 422) {\n      return new UnprocessableEntityError(status, error, message, headers);\n    }\n\n    if (status === 429) {\n      return new RateLimitError(status, error, message, headers);\n    }\n\n    if (status >= 500) {\n      return new InternalServerError(status, error, message, headers);\n    }\n\n    return new APIError(status, error, message, headers);\n  }\n}\n\nexport class APIUserAbortError extends APIError<undefined, undefined, undefined> {\n  constructor({ message }: { message?: string } = {}) {\n    super(undefined, undefined, message || 'Request was aborted.', undefined);\n  }\n}\n\nexport class APIConnectionError extends APIError<undefined, undefined, undefined> {\n  constructor({ message, cause }: { message?: string | undefined; cause?: Error | undefined }) {\n    super(undefined, undefined, message || 'Connection error.', undefined);\n    // in some environments the 'cause' property is already declared\n    // @ts-ignore\n    if (cause) this.cause = cause;\n  }\n}\n\nexport class APIConnectionTimeoutError extends APIConnectionError {\n  constructor({ message }: { message?: string } = {}) {\n    super({ message: message ?? 'Request timed out.' });\n  }\n}\n\nexport class BadRequestError extends APIError<400, Headers> {}\n\nexport class AuthenticationError extends APIError<401, Headers> {}\n\nexport class PermissionDeniedError extends APIError<403, Headers> {}\n\nexport class NotFoundError extends APIError<404, Headers> {}\n\nexport class ConflictError extends APIError<409, Headers> {}\n\nexport class UnprocessableEntityError extends APIError<422, Headers> {}\n\nexport class RateLimitError extends APIError<429, Headers> {}\n\nexport class InternalServerError extends APIError<number, Headers> {}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../../core/resource';\nimport * as BetaAPI from './beta';\nimport { APIPromise } from '../../core/api-promise';\nimport { Page, type PageParams, PagePromise } from '../../core/pagination';\nimport { type Uploadable } from '../../core/uploads';\nimport { buildHeaders } from '../../internal/headers';\nimport { RequestOptions } from '../../internal/request-options';\nimport { multipartFormRequestOptions } from '../../internal/uploads';\nimport { path } from '../../internal/utils/path';\n\nexport class Files extends APIResource {\n  /**\n   * List Files\n   *\n   * @example\n   * ```ts\n   * // Automatically fetches more pages as needed.\n   * for await (const fileMetadata of client.beta.files.list()) {\n   *   // ...\n   * }\n   * ```\n   */\n  list(\n    params: FileListParams | null | undefined = {},\n    options?: RequestOptions,\n  ): PagePromise<FileMetadataPage, FileMetadata> {\n    const { betas, ...query } = params ?? {};\n    return this._client.getAPIList('/v1/files', Page<FileMetadata>, {\n      query,\n      ...options,\n      headers: buildHeaders([\n        { 'anthropic-beta': [...(betas ?? []), 'files-api-2025-04-14'].toString() },\n        options?.headers,\n      ]),\n    });\n  }\n\n  /**\n   * Delete File\n   *\n   * @example\n   * ```ts\n   * const deletedFile = await client.beta.files.delete(\n   *   'file_id',\n   * );\n   * ```\n   */\n  delete(\n    fileID: string,\n    params: FileDeleteParams | null | undefined = {},\n    options?: RequestOptions,\n  ): APIPromise<DeletedFile> {\n    const { betas } = params ?? {};\n    return this._client.delete(path`/v1/files/${fileID}`, {\n      ...options,\n      headers: buildHeaders([\n        { 'anthropic-beta': [...(betas ?? []), 'files-api-2025-04-14'].toString() },\n        options?.headers,\n      ]),\n    });\n  }\n\n  /**\n   * Download File\n   *\n   * @example\n   * ```ts\n   * const response = await client.beta.files.download(\n   *   'file_id',\n   * );\n   *\n   * const content = await response.blob();\n   * console.log(content);\n   * ```\n   */\n  download(\n    fileID: string,\n    params: FileDownloadParams | null | undefined = {},\n    options?: RequestOptions,\n  ): APIPromise<Response> {\n    const { betas } = params ?? {};\n    return this._client.get(path`/v1/files/${fileID}/content`, {\n      ...options,\n      headers: buildHeaders([\n        {\n          'anthropic-beta': [...(betas ?? []), 'files-api-2025-04-14'].toString(),\n          Accept: 'application/binary',\n        },\n        options?.headers,\n      ]),\n      __binaryResponse: true,\n    });\n  }\n\n  /**\n   * Get File Metadata\n   *\n   * @example\n   * ```ts\n   * const fileMetadata =\n   *   await client.beta.files.retrieveMetadata('file_id');\n   * ```\n   */\n  retrieveMetadata(\n    fileID: string,\n    params: FileRetrieveMetadataParams | null | undefined = {},\n    options?: RequestOptions,\n  ): APIPromise<FileMetadata> {\n    const { betas } = params ?? {};\n    return this._client.get(path`/v1/files/${fileID}`, {\n      ...options,\n      headers: buildHeaders([\n        { 'anthropic-beta': [...(betas ?? []), 'files-api-2025-04-14'].toString() },\n        options?.headers,\n      ]),\n    });\n  }\n\n  /**\n   * Upload File\n   *\n   * @example\n   * ```ts\n   * const fileMetadata = await client.beta.files.upload({\n   *   file: fs.createReadStream('path/to/file'),\n   * });\n   * ```\n   */\n  upload(params: FileUploadParams, options?: RequestOptions): APIPromise<FileMetadata> {\n    const { betas, ...body } = params;\n    return this._client.post(\n      '/v1/files',\n      multipartFormRequestOptions(\n        {\n          body,\n          ...options,\n          headers: buildHeaders([\n            { 'anthropic-beta': [...(betas ?? []), 'files-api-2025-04-14'].toString() },\n            options?.headers,\n          ]),\n        },\n        this._client,\n      ),\n    );\n  }\n}\n\nexport type FileMetadataPage = Page<FileMetadata>;\n\nexport interface DeletedFile {\n  /**\n   * ID of the deleted file.\n   */\n  id: string;\n\n  /**\n   * Deleted object type.\n   *\n   * For file deletion, this is always `\"file_deleted\"`.\n   */\n  type?: 'file_deleted';\n}\n\nexport interface FileMetadata {\n  /**\n   * Unique object identifier.\n   *\n   * The format and length of IDs may change over time.\n   */\n  id: string;\n\n  /**\n   * RFC 3339 datetime string representing when the file was created.\n   */\n  created_at: string;\n\n  /**\n   * Original filename of the uploaded file.\n   */\n  filename: string;\n\n  /**\n   * MIME type of the file.\n   */\n  mime_type: string;\n\n  /**\n   * Size of the file in bytes.\n   */\n  size_bytes: number;\n\n  /**\n   * Object type.\n   *\n   * For files, this is always `\"file\"`.\n   */\n  type: 'file';\n\n  /**\n   * Whether the file can be downloaded.\n   */\n  downloadable?: boolean;\n}\n\nexport interface FileListParams extends PageParams {\n  /**\n   * Header param: Optional header to specify the beta version(s) you want to use.\n   */\n  betas?: Array<BetaAPI.AnthropicBeta>;\n}\n\nexport interface FileDeleteParams {\n  /**\n   * Optional header to specify the beta version(s) you want to use.\n   */\n  betas?: Array<BetaAPI.AnthropicBeta>;\n}\n\nexport interface FileDownloadParams {\n  /**\n   * Optional header to specify the beta version(s) you want to use.\n   */\n  betas?: Array<BetaAPI.AnthropicBeta>;\n}\n\nexport interface FileRetrieveMetadataParams {\n  /**\n   * Optional header to specify the beta version(s) you want to use.\n   */\n  betas?: Array<BetaAPI.AnthropicBeta>;\n}\n\nexport interface FileUploadParams {\n  /**\n   * Body param: The file to upload\n   */\n  file: Uploadable;\n\n  /**\n   * Header param: Optional header to specify the beta version(s) you want to use.\n   */\n  betas?: Array<BetaAPI.AnthropicBeta>;\n}\n\nexport declare namespace Files {\n  export {\n    type DeletedFile as DeletedFile,\n    type FileMetadata as FileMetadata,\n    type FileMetadataPage as FileMetadataPage,\n    type FileListParams as FileListParams,\n    type FileDeleteParams as FileDeleteParams,\n    type FileDownloadParams as FileDownloadParams,\n    type FileRetrieveMetadataParams as FileRetrieveMetadataParams,\n    type FileUploadParams as FileUploadParams,\n  };\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { Anthropic } from '../../../client';\nimport { APIPromise } from '../../../core/api-promise';\nimport { APIResource } from '../../../core/resource';\nimport { Stream } from '../../../core/streaming';\nimport { MODEL_NONSTREAMING_TOKENS } from '../../../internal/constants';\nimport { buildHeaders } from '../../../internal/headers';\nimport { RequestOptions } from '../../../internal/request-options';\nimport {\n  parseBetaMessage,\n  type ExtractParsedContentFromBetaParams,\n  type ParsedBetaMessage,\n} from '../../../lib/beta-parser';\nimport { BetaMessageStream } from '../../../lib/BetaMessageStream';\nimport {\n  BetaToolRunner,\n  BetaToolRunnerParams,\n  BetaToolRunnerRequestOptions,\n} from '../../../lib/tools/BetaToolRunner';\nimport type { Model } from '../../messages/messages';\nimport * as MessagesAPI from '../../messages/messages';\nimport * as BetaAPI from '../beta';\nimport * as BatchesAPI from './batches';\nimport {\n  BatchCancelParams,\n  BatchCreateParams,\n  BatchDeleteParams,\n  BatchListParams,\n  BatchResultsParams,\n  BatchRetrieveParams,\n  Batches,\n  BetaDeletedMessageBatch,\n  BetaMessageBatch,\n  BetaMessageBatchCanceledResult,\n  BetaMessageBatchErroredResult,\n  BetaMessageBatchExpiredResult,\n  BetaMessageBatchIndividualResponse,\n  BetaMessageBatchRequestCounts,\n  BetaMessageBatchResult,\n  BetaMessageBatchSucceededResult,\n  BetaMessageBatchesPage,\n} from './batches';\nimport * as MessagesMessagesAPI from './messages';\n\nconst DEPRECATED_MODELS: {\n  [K in Model]?: string;\n} = {\n  'claude-1.3': 'November 6th, 2024',\n  'claude-1.3-100k': 'November 6th, 2024',\n  'claude-instant-1.1': 'November 6th, 2024',\n  'claude-instant-1.1-100k': 'November 6th, 2024',\n  'claude-instant-1.2': 'November 6th, 2024',\n  'claude-3-sonnet-20240229': 'July 21st, 2025',\n  'claude-3-opus-20240229': 'January 5th, 2026',\n  'claude-2.1': 'July 21st, 2025',\n  'claude-2.0': 'July 21st, 2025',\n  'claude-3-7-sonnet-latest': 'February 19th, 2026',\n  'claude-3-7-sonnet-20250219': 'February 19th, 2026',\n};\n\nexport class Messages extends APIResource {\n  batches: BatchesAPI.Batches = new BatchesAPI.Batches(this._client);\n\n  /**\n   * Send a structured list of input messages with text and/or image content, and the\n   * model will generate the next message in the conversation.\n   *\n   * The Messages API can be used for either single queries or stateless multi-turn\n   * conversations.\n   *\n   * Learn more about the Messages API in our\n   * [user guide](https://docs.claude.com/en/docs/initial-setup)\n   *\n   * @example\n   * ```ts\n   * const betaMessage = await client.beta.messages.create({\n   *   max_tokens: 1024,\n   *   messages: [{ content: 'Hello, world', role: 'user' }],\n   *   model: 'claude-sonnet-4-5-20250929',\n   * });\n   * ```\n   */\n  create(params: MessageCreateParamsNonStreaming, options?: RequestOptions): APIPromise<BetaMessage>;\n  create(\n    params: MessageCreateParamsStreaming,\n    options?: RequestOptions,\n  ): APIPromise<Stream<BetaRawMessageStreamEvent>>;\n  create(\n    params: MessageCreateParamsBase,\n    options?: RequestOptions,\n  ): APIPromise<Stream<BetaRawMessageStreamEvent> | BetaMessage>;\n  create(\n    params: MessageCreateParams,\n    options?: RequestOptions,\n  ): APIPromise<BetaMessage> | APIPromise<Stream<BetaRawMessageStreamEvent>> {\n    const { betas, ...body } = params;\n\n    if (body.model in DEPRECATED_MODELS) {\n      console.warn(\n        `The model '${body.model}' is deprecated and will reach end-of-life on ${\n          DEPRECATED_MODELS[body.model]\n        }\\nPlease migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`,\n      );\n    }\n\n    let timeout = (this._client as any)._options.timeout as number | null;\n    if (!body.stream && timeout == null) {\n      const maxNonstreamingTokens = MODEL_NONSTREAMING_TOKENS[body.model] ?? undefined;\n      timeout = this._client.calculateNonstreamingTimeout(body.max_tokens, maxNonstreamingTokens);\n    }\n    return this._client.post('/v1/messages?beta=true', {\n      body,\n      timeout: timeout ?? 600000,\n      ...options,\n      headers: buildHeaders([\n        { ...(betas?.toString() != null ? { 'anthropic-beta': betas?.toString() } : undefined) },\n        options?.headers,\n      ]),\n      stream: params.stream ?? false,\n    }) as APIPromise<BetaMessage> | APIPromise<Stream<BetaRawMessageStreamEvent>>;\n  }\n\n  /**\n   * Send a structured list of input messages with text and/or image content, along with an expected `output_format` and\n   * the response will be automatically parsed and available in the `parsed_output` property of the message.\n   *\n   * @example\n   * ```ts\n   * const message = await client.beta.messages.parse({\n   *   model: 'claude-3-5-sonnet-20241022',\n   *   max_tokens: 1024,\n   *   messages: [{ role: 'user', content: 'What is 2+2?' }],\n   *   output_format: zodOutputFormat(z.object({ answer: z.number() }), 'math'),\n   * });\n   *\n   * console.log(message.parsed_output?.answer); // 4\n   * ```\n   */\n  parse<Params extends MessageCreateParamsNonStreaming>(\n    params: Params,\n    options?: RequestOptions,\n  ): APIPromise<ParsedBetaMessage<ExtractParsedContentFromBetaParams<Params>>> {\n    options = {\n      ...options,\n      headers: buildHeaders([\n        { 'anthropic-beta': [...(params.betas ?? []), 'structured-outputs-2025-11-13'].toString() },\n        options?.headers,\n      ]),\n    };\n\n    return this.create(params, options).then((message) =>\n      parseBetaMessage(message, params, { logger: this._client.logger ?? console }),\n    ) as APIPromise<ParsedBetaMessage<ExtractParsedContentFromBetaParams<Params>>>;\n  }\n\n  /**\n   * Create a Message stream\n   */\n  stream<Params extends BetaMessageStreamParams>(\n    body: Params,\n    options?: RequestOptions,\n  ): BetaMessageStream<ExtractParsedContentFromBetaParams<Params>> {\n    return BetaMessageStream.createMessage(this, body, options);\n  }\n\n  /**\n   * Count the number of tokens in a Message.\n   *\n   * The Token Count API can be used to count the number of tokens in a Message,\n   * including tools, images, and documents, without creating it.\n   *\n   * Learn more about token counting in our\n   * [user guide](https://docs.claude.com/en/docs/build-with-claude/token-counting)\n   *\n   * @example\n   * ```ts\n   * const betaMessageTokensCount =\n   *   await client.beta.messages.countTokens({\n   *     messages: [{ content: 'string', role: 'user' }],\n   *     model: 'claude-opus-4-5-20251101',\n   *   });\n   * ```\n   */\n  countTokens(\n    params: MessageCountTokensParams,\n    options?: RequestOptions,\n  ): APIPromise<BetaMessageTokensCount> {\n    const { betas, ...body } = params;\n    return this._client.post('/v1/messages/count_tokens?beta=true', {\n      body,\n      ...options,\n      headers: buildHeaders([\n        { 'anthropic-beta': [...(betas ?? []), 'token-counting-2024-11-01'].toString() },\n        options?.headers,\n      ]),\n    });\n  }\n\n  toolRunner(\n    body: BetaToolRunnerParams & { stream?: false },\n    options?: BetaToolRunnerRequestOptions,\n  ): BetaToolRunner<false>;\n  toolRunner(\n    body: BetaToolRunnerParams & { stream: true },\n    options?: BetaToolRunnerRequestOptions,\n  ): BetaToolRunner<true>;\n  toolRunner(body: BetaToolRunnerParams, options?: BetaToolRunnerRequestOptions): BetaToolRunner<boolean>;\n  toolRunner(body: BetaToolRunnerParams, options?: BetaToolRunnerRequestOptions): BetaToolRunner<boolean> {\n    return new BetaToolRunner(this._client as Anthropic, body, options);\n  }\n}\n\nexport interface BetaAllThinkingTurns {\n  type: 'all';\n}\n\nexport type BetaMessageStreamParams = MessageCreateParamsBase;\n\nexport interface BetaBase64ImageSource {\n  data: string;\n\n  media_type: 'image/jpeg' | 'image/png' | 'image/gif' | 'image/webp';\n\n  type: 'base64';\n}\n\nexport interface BetaBase64PDFSource {\n  data: string;\n\n  media_type: 'application/pdf';\n\n  type: 'base64';\n}\n\nexport interface BetaBashCodeExecutionOutputBlock {\n  file_id: string;\n\n  type: 'bash_code_execution_output';\n}\n\nexport interface BetaBashCodeExecutionOutputBlockParam {\n  file_id: string;\n\n  type: 'bash_code_execution_output';\n}\n\nexport interface BetaBashCodeExecutionResultBlock {\n  content: Array<BetaBashCodeExecutionOutputBlock>;\n\n  return_code: number;\n\n  stderr: string;\n\n  stdout: string;\n\n  type: 'bash_code_execution_result';\n}\n\nexport interface BetaBashCodeExecutionResultBlockParam {\n  content: Array<BetaBashCodeExecutionOutputBlockParam>;\n\n  return_code: number;\n\n  stderr: string;\n\n  stdout: string;\n\n  type: 'bash_code_execution_result';\n}\n\nexport interface BetaBashCodeExecutionToolResultBlock {\n  content: BetaBashCodeExecutionToolResultError | BetaBashCodeExecutionResultBlock;\n\n  tool_use_id: string;\n\n  type: 'bash_code_execution_tool_result';\n}\n\nexport interface BetaBashCodeExecutionToolResultBlockParam {\n  content: BetaBashCodeExecutionToolResultErrorParam | BetaBashCodeExecutionResultBlockParam;\n\n  tool_use_id: string;\n\n  type: 'bash_code_execution_tool_result';\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n}\n\nexport interface BetaBashCodeExecutionToolResultError {\n  error_code:\n    | 'invalid_tool_input'\n    | 'unavailable'\n    | 'too_many_requests'\n    | 'execution_time_exceeded'\n    | 'output_file_too_large';\n\n  type: 'bash_code_execution_tool_result_error';\n}\n\nexport interface BetaBashCodeExecutionToolResultErrorParam {\n  error_code:\n    | 'invalid_tool_input'\n    | 'unavailable'\n    | 'too_many_requests'\n    | 'execution_time_exceeded'\n    | 'output_file_too_large';\n\n  type: 'bash_code_execution_tool_result_error';\n}\n\nexport interface BetaCacheControlEphemeral {\n  type: 'ephemeral';\n\n  /**\n   * The time-to-live for the cache control breakpoint.\n   *\n   * This may be one the following values:\n   *\n   * - `5m`: 5 minutes\n   * - `1h`: 1 hour\n   *\n   * Defaults to `5m`.\n   */\n  ttl?: '5m' | '1h';\n}\n\nexport interface BetaCacheCreation {\n  /**\n   * The number of input tokens used to create the 1 hour cache entry.\n   */\n  ephemeral_1h_input_tokens: number;\n\n  /**\n   * The number of input tokens used to create the 5 minute cache entry.\n   */\n  ephemeral_5m_input_tokens: number;\n}\n\nexport interface BetaCitationCharLocation {\n  cited_text: string;\n\n  document_index: number;\n\n  document_title: string | null;\n\n  end_char_index: number;\n\n  file_id: string | null;\n\n  start_char_index: number;\n\n  type: 'char_location';\n}\n\nexport interface BetaCitationCharLocationParam {\n  cited_text: string;\n\n  document_index: number;\n\n  document_title: string | null;\n\n  end_char_index: number;\n\n  start_char_index: number;\n\n  type: 'char_location';\n}\n\nexport interface BetaCitationConfig {\n  enabled: boolean;\n}\n\nexport interface BetaCitationContentBlockLocation {\n  cited_text: string;\n\n  document_index: number;\n\n  document_title: string | null;\n\n  end_block_index: number;\n\n  file_id: string | null;\n\n  start_block_index: number;\n\n  type: 'content_block_location';\n}\n\nexport interface BetaCitationContentBlockLocationParam {\n  cited_text: string;\n\n  document_index: number;\n\n  document_title: string | null;\n\n  end_block_index: number;\n\n  start_block_index: number;\n\n  type: 'content_block_location';\n}\n\nexport interface BetaCitationPageLocation {\n  cited_text: string;\n\n  document_index: number;\n\n  document_title: string | null;\n\n  end_page_number: number;\n\n  file_id: string | null;\n\n  start_page_number: number;\n\n  type: 'page_location';\n}\n\nexport interface BetaCitationPageLocationParam {\n  cited_text: string;\n\n  document_index: number;\n\n  document_title: string | null;\n\n  end_page_number: number;\n\n  start_page_number: number;\n\n  type: 'page_location';\n}\n\nexport interface BetaCitationSearchResultLocation {\n  cited_text: string;\n\n  end_block_index: number;\n\n  search_result_index: number;\n\n  source: string;\n\n  start_block_index: number;\n\n  title: string | null;\n\n  type: 'search_result_location';\n}\n\nexport interface BetaCitationSearchResultLocationParam {\n  cited_text: string;\n\n  end_block_index: number;\n\n  search_result_index: number;\n\n  source: string;\n\n  start_block_index: number;\n\n  title: string | null;\n\n  type: 'search_result_location';\n}\n\nexport interface BetaCitationWebSearchResultLocationParam {\n  cited_text: string;\n\n  encrypted_index: string;\n\n  title: string | null;\n\n  type: 'web_search_result_location';\n\n  url: string;\n}\n\nexport interface BetaCitationsConfigParam {\n  enabled?: boolean;\n}\n\nexport interface BetaCitationsDelta {\n  citation:\n    | BetaCitationCharLocation\n    | BetaCitationPageLocation\n    | BetaCitationContentBlockLocation\n    | BetaCitationsWebSearchResultLocation\n    | BetaCitationSearchResultLocation;\n\n  type: 'citations_delta';\n}\n\nexport interface BetaCitationsWebSearchResultLocation {\n  cited_text: string;\n\n  encrypted_index: string;\n\n  title: string | null;\n\n  type: 'web_search_result_location';\n\n  url: string;\n}\n\nexport interface BetaClearThinking20251015Edit {\n  type: 'clear_thinking_20251015';\n\n  /**\n   * Number of most recent assistant turns to keep thinking blocks for. Older turns\n   * will have their thinking blocks removed.\n   */\n  keep?: BetaThinkingTurns | BetaAllThinkingTurns | 'all';\n}\n\nexport interface BetaClearThinking20251015EditResponse {\n  /**\n   * Number of input tokens cleared by this edit.\n   */\n  cleared_input_tokens: number;\n\n  /**\n   * Number of thinking turns that were cleared.\n   */\n  cleared_thinking_turns: number;\n\n  /**\n   * The type of context management edit applied.\n   */\n  type: 'clear_thinking_20251015';\n}\n\nexport interface BetaClearToolUses20250919Edit {\n  type: 'clear_tool_uses_20250919';\n\n  /**\n   * Minimum number of tokens that must be cleared when triggered. Context will only\n   * be modified if at least this many tokens can be removed.\n   */\n  clear_at_least?: BetaInputTokensClearAtLeast | null;\n\n  /**\n   * Whether to clear all tool inputs (bool) or specific tool inputs to clear (list)\n   */\n  clear_tool_inputs?: boolean | Array<string> | null;\n\n  /**\n   * Tool names whose uses are preserved from clearing\n   */\n  exclude_tools?: Array<string> | null;\n\n  /**\n   * Number of tool uses to retain in the conversation\n   */\n  keep?: BetaToolUsesKeep;\n\n  /**\n   * Condition that triggers the context management strategy\n   */\n  trigger?: BetaInputTokensTrigger | BetaToolUsesTrigger;\n}\n\nexport interface BetaClearToolUses20250919EditResponse {\n  /**\n   * Number of input tokens cleared by this edit.\n   */\n  cleared_input_tokens: number;\n\n  /**\n   * Number of tool uses that were cleared.\n   */\n  cleared_tool_uses: number;\n\n  /**\n   * The type of context management edit applied.\n   */\n  type: 'clear_tool_uses_20250919';\n}\n\nexport interface BetaCodeExecutionOutputBlock {\n  file_id: string;\n\n  type: 'code_execution_output';\n}\n\nexport interface BetaCodeExecutionOutputBlockParam {\n  file_id: string;\n\n  type: 'code_execution_output';\n}\n\nexport interface BetaCodeExecutionResultBlock {\n  content: Array<BetaCodeExecutionOutputBlock>;\n\n  return_code: number;\n\n  stderr: string;\n\n  stdout: string;\n\n  type: 'code_execution_result';\n}\n\nexport interface BetaCodeExecutionResultBlockParam {\n  content: Array<BetaCodeExecutionOutputBlockParam>;\n\n  return_code: number;\n\n  stderr: string;\n\n  stdout: string;\n\n  type: 'code_execution_result';\n}\n\nexport interface BetaCodeExecutionTool20250522 {\n  /**\n   * Name of the tool.\n   *\n   * This is how the tool will be called by the model and in `tool_use` blocks.\n   */\n  name: 'code_execution';\n\n  type: 'code_execution_20250522';\n\n  allowed_callers?: Array<'direct' | 'code_execution_20250825'>;\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n\n  /**\n   * If true, tool will not be included in initial system prompt. Only loaded when\n   * returned via tool_reference from tool search.\n   */\n  defer_loading?: boolean;\n\n  strict?: boolean;\n}\n\nexport interface BetaCodeExecutionTool20250825 {\n  /**\n   * Name of the tool.\n   *\n   * This is how the tool will be called by the model and in `tool_use` blocks.\n   */\n  name: 'code_execution';\n\n  type: 'code_execution_20250825';\n\n  allowed_callers?: Array<'direct' | 'code_execution_20250825'>;\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n\n  /**\n   * If true, tool will not be included in initial system prompt. Only loaded when\n   * returned via tool_reference from tool search.\n   */\n  defer_loading?: boolean;\n\n  strict?: boolean;\n}\n\nexport interface BetaCodeExecutionToolResultBlock {\n  content: BetaCodeExecutionToolResultBlockContent;\n\n  tool_use_id: string;\n\n  type: 'code_execution_tool_result';\n}\n\nexport type BetaCodeExecutionToolResultBlockContent =\n  | BetaCodeExecutionToolResultError\n  | BetaCodeExecutionResultBlock;\n\nexport interface BetaCodeExecutionToolResultBlockParam {\n  content: BetaCodeExecutionToolResultBlockParamContent;\n\n  tool_use_id: string;\n\n  type: 'code_execution_tool_result';\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n}\n\nexport type BetaCodeExecutionToolResultBlockParamContent =\n  | BetaCodeExecutionToolResultErrorParam\n  | BetaCodeExecutionResultBlockParam;\n\nexport interface BetaCodeExecutionToolResultError {\n  error_code: BetaCodeExecutionToolResultErrorCode;\n\n  type: 'code_execution_tool_result_error';\n}\n\nexport type BetaCodeExecutionToolResultErrorCode =\n  | 'invalid_tool_input'\n  | 'unavailable'\n  | 'too_many_requests'\n  | 'execution_time_exceeded';\n\nexport interface BetaCodeExecutionToolResultErrorParam {\n  error_code: BetaCodeExecutionToolResultErrorCode;\n\n  type: 'code_execution_tool_result_error';\n}\n\n/**\n * Information about the container used in the request (for the code execution\n * tool)\n */\nexport interface BetaContainer {\n  /**\n   * Identifier for the container used in this request\n   */\n  id: string;\n\n  /**\n   * The time at which the container will expire.\n   */\n  expires_at: string;\n\n  /**\n   * Skills loaded in the container\n   */\n  skills: Array<BetaSkill> | null;\n}\n\n/**\n * Container parameters with skills to be loaded.\n */\nexport interface BetaContainerParams {\n  /**\n   * Container id\n   */\n  id?: string | null;\n\n  /**\n   * List of skills to load in the container\n   */\n  skills?: Array<BetaSkillParams> | null;\n}\n\n/**\n * Response model for a file uploaded to the container.\n */\nexport interface BetaContainerUploadBlock {\n  file_id: string;\n\n  type: 'container_upload';\n}\n\n/**\n * A content block that represents a file to be uploaded to the container Files\n * uploaded via this block will be available in the container's input directory.\n */\nexport interface BetaContainerUploadBlockParam {\n  file_id: string;\n\n  type: 'container_upload';\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n}\n\n/**\n * Response model for a file uploaded to the container.\n */\nexport type BetaContentBlock =\n  | BetaTextBlock\n  | BetaThinkingBlock\n  | BetaRedactedThinkingBlock\n  | BetaToolUseBlock\n  | BetaServerToolUseBlock\n  | BetaWebSearchToolResultBlock\n  | BetaWebFetchToolResultBlock\n  | BetaCodeExecutionToolResultBlock\n  | BetaBashCodeExecutionToolResultBlock\n  | BetaTextEditorCodeExecutionToolResultBlock\n  | BetaToolSearchToolResultBlock\n  | BetaMCPToolUseBlock\n  | BetaMCPToolResultBlock\n  | BetaContainerUploadBlock;\n\n/**\n * Regular text content.\n */\nexport type BetaContentBlockParam =\n  | BetaTextBlockParam\n  | BetaImageBlockParam\n  | BetaRequestDocumentBlock\n  | BetaSearchResultBlockParam\n  | BetaThinkingBlockParam\n  | BetaRedactedThinkingBlockParam\n  | BetaToolUseBlockParam\n  | BetaToolResultBlockParam\n  | BetaServerToolUseBlockParam\n  | BetaWebSearchToolResultBlockParam\n  | BetaWebFetchToolResultBlockParam\n  | BetaCodeExecutionToolResultBlockParam\n  | BetaBashCodeExecutionToolResultBlockParam\n  | BetaTextEditorCodeExecutionToolResultBlockParam\n  | BetaToolSearchToolResultBlockParam\n  | BetaMCPToolUseBlockParam\n  | BetaRequestMCPToolResultBlockParam\n  | BetaContainerUploadBlockParam;\n\nexport interface BetaContentBlockSource {\n  content: string | Array<BetaContentBlockSourceContent>;\n\n  type: 'content';\n}\n\nexport type BetaContentBlockSourceContent = BetaTextBlockParam | BetaImageBlockParam;\n\nexport interface BetaContextManagementConfig {\n  /**\n   * List of context management edits to apply\n   */\n  edits?: Array<BetaClearToolUses20250919Edit | BetaClearThinking20251015Edit>;\n}\n\nexport interface BetaContextManagementResponse {\n  /**\n   * List of context management edits that were applied.\n   */\n  applied_edits: Array<BetaClearToolUses20250919EditResponse | BetaClearThinking20251015EditResponse>;\n}\n\nexport interface BetaCountTokensContextManagementResponse {\n  /**\n   * The original token count before context management was applied\n   */\n  original_input_tokens: number;\n}\n\n/**\n * Tool invocation directly from the model.\n */\nexport interface BetaDirectCaller {\n  type: 'direct';\n}\n\nexport interface BetaDocumentBlock {\n  /**\n   * Citation configuration for the document\n   */\n  citations: BetaCitationConfig | null;\n\n  source: BetaBase64PDFSource | BetaPlainTextSource;\n\n  /**\n   * The title of the document\n   */\n  title: string | null;\n\n  type: 'document';\n}\n\nexport interface BetaFileDocumentSource {\n  file_id: string;\n\n  type: 'file';\n}\n\nexport interface BetaFileImageSource {\n  file_id: string;\n\n  type: 'file';\n}\n\nexport interface BetaImageBlockParam {\n  source: BetaBase64ImageSource | BetaURLImageSource | BetaFileImageSource;\n\n  type: 'image';\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n}\n\nexport interface BetaInputJSONDelta {\n  partial_json: string;\n\n  type: 'input_json_delta';\n}\n\nexport interface BetaInputTokensClearAtLeast {\n  type: 'input_tokens';\n\n  value: number;\n}\n\nexport interface BetaInputTokensTrigger {\n  type: 'input_tokens';\n\n  value: number;\n}\n\nexport interface BetaJSONOutputFormat {\n  /**\n   * The JSON schema of the format\n   */\n  schema: { [key: string]: unknown };\n\n  type: 'json_schema';\n}\n\n/**\n * Configuration for a specific tool in an MCP toolset.\n */\nexport interface BetaMCPToolConfig {\n  defer_loading?: boolean;\n\n  enabled?: boolean;\n}\n\n/**\n * Default configuration for tools in an MCP toolset.\n */\nexport interface BetaMCPToolDefaultConfig {\n  defer_loading?: boolean;\n\n  enabled?: boolean;\n}\n\nexport interface BetaMCPToolResultBlock {\n  content: string | Array<BetaTextBlock>;\n\n  is_error: boolean;\n\n  tool_use_id: string;\n\n  type: 'mcp_tool_result';\n}\n\nexport interface BetaMCPToolUseBlock {\n  id: string;\n\n  input: unknown;\n\n  /**\n   * The name of the MCP tool\n   */\n  name: string;\n\n  /**\n   * The name of the MCP server\n   */\n  server_name: string;\n\n  type: 'mcp_tool_use';\n}\n\nexport interface BetaMCPToolUseBlockParam {\n  id: string;\n\n  input: unknown;\n\n  name: string;\n\n  /**\n   * The name of the MCP server\n   */\n  server_name: string;\n\n  type: 'mcp_tool_use';\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n}\n\n/**\n * Configuration for a group of tools from an MCP server.\n *\n * Allows configuring enabled status and defer_loading for all tools from an MCP\n * server, with optional per-tool overrides.\n */\nexport interface BetaMCPToolset {\n  /**\n   * Name of the MCP server to configure tools for\n   */\n  mcp_server_name: string;\n\n  type: 'mcp_toolset';\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n\n  /**\n   * Configuration overrides for specific tools, keyed by tool name\n   */\n  configs?: { [key: string]: BetaMCPToolConfig } | null;\n\n  /**\n   * Default configuration applied to all tools from this server\n   */\n  default_config?: BetaMCPToolDefaultConfig;\n}\n\nexport interface BetaMemoryTool20250818 {\n  /**\n   * Name of the tool.\n   *\n   * This is how the tool will be called by the model and in `tool_use` blocks.\n   */\n  name: 'memory';\n\n  type: 'memory_20250818';\n\n  allowed_callers?: Array<'direct' | 'code_execution_20250825'>;\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n\n  /**\n   * If true, tool will not be included in initial system prompt. Only loaded when\n   * returned via tool_reference from tool search.\n   */\n  defer_loading?: boolean;\n\n  input_examples?: Array<{ [key: string]: unknown }>;\n\n  strict?: boolean;\n}\n\nexport type BetaMemoryTool20250818Command =\n  | BetaMemoryTool20250818ViewCommand\n  | BetaMemoryTool20250818CreateCommand\n  | BetaMemoryTool20250818StrReplaceCommand\n  | BetaMemoryTool20250818InsertCommand\n  | BetaMemoryTool20250818DeleteCommand\n  | BetaMemoryTool20250818RenameCommand;\n\nexport interface BetaMemoryTool20250818CreateCommand {\n  /**\n   * Command type identifier\n   */\n  command: 'create';\n\n  /**\n   * Content to write to the file\n   */\n  file_text: string;\n\n  /**\n   * Path where the file should be created\n   */\n  path: string;\n}\n\nexport interface BetaMemoryTool20250818DeleteCommand {\n  /**\n   * Command type identifier\n   */\n  command: 'delete';\n\n  /**\n   * Path to the file or directory to delete\n   */\n  path: string;\n}\n\nexport interface BetaMemoryTool20250818InsertCommand {\n  /**\n   * Command type identifier\n   */\n  command: 'insert';\n\n  /**\n   * Line number where text should be inserted\n   */\n  insert_line: number;\n\n  /**\n   * Text to insert at the specified line\n   */\n  insert_text: string;\n\n  /**\n   * Path to the file where text should be inserted\n   */\n  path: string;\n}\n\nexport interface BetaMemoryTool20250818RenameCommand {\n  /**\n   * Command type identifier\n   */\n  command: 'rename';\n\n  /**\n   * New path for the file or directory\n   */\n  new_path: string;\n\n  /**\n   * Current path of the file or directory\n   */\n  old_path: string;\n}\n\nexport interface BetaMemoryTool20250818StrReplaceCommand {\n  /**\n   * Command type identifier\n   */\n  command: 'str_replace';\n\n  /**\n   * Text to replace with\n   */\n  new_str: string;\n\n  /**\n   * Text to search for and replace\n   */\n  old_str: string;\n\n  /**\n   * Path to the file where text should be replaced\n   */\n  path: string;\n}\n\nexport interface BetaMemoryTool20250818ViewCommand {\n  /**\n   * Command type identifier\n   */\n  command: 'view';\n\n  /**\n   * Path to directory or file to view\n   */\n  path: string;\n\n  /**\n   * Optional line range for viewing specific lines\n   */\n  view_range?: Array<number>;\n}\n\nexport interface BetaMessage {\n  /**\n   * Unique object identifier.\n   *\n   * The format and length of IDs may change over time.\n   */\n  id: string;\n\n  /**\n   * Information about the container used in the request (for the code execution\n   * tool)\n   */\n  container: BetaContainer | null;\n\n  /**\n   * Content generated by the model.\n   *\n   * This is an array of content blocks, each of which has a `type` that determines\n   * its shape.\n   *\n   * Example:\n   *\n   * ```json\n   * [{ \"type\": \"text\", \"text\": \"Hi, I'm Claude.\" }]\n   * ```\n   *\n   * If the request input `messages` ended with an `assistant` turn, then the\n   * response `content` will continue directly from that last turn. You can use this\n   * to constrain the model's output.\n   *\n   * For example, if the input `messages` were:\n   *\n   * ```json\n   * [\n   *   {\n   *     \"role\": \"user\",\n   *     \"content\": \"What's the Greek name for Sun? (A) Sol (B) Helios (C) Sun\"\n   *   },\n   *   { \"role\": \"assistant\", \"content\": \"The best answer is (\" }\n   * ]\n   * ```\n   *\n   * Then the response `content` might be:\n   *\n   * ```json\n   * [{ \"type\": \"text\", \"text\": \"B)\" }]\n   * ```\n   */\n  content: Array<BetaContentBlock>;\n\n  /**\n   * Context management response.\n   *\n   * Information about context management strategies applied during the request.\n   */\n  context_management: BetaContextManagementResponse | null;\n\n  /**\n   * The model that will complete your prompt.\\n\\nSee\n   * [models](https://docs.anthropic.com/en/docs/models-overview) for additional\n   * details and options.\n   */\n  model: MessagesAPI.Model;\n\n  /**\n   * Conversational role of the generated message.\n   *\n   * This will always be `\"assistant\"`.\n   */\n  role: 'assistant';\n\n  /**\n   * The reason that we stopped.\n   *\n   * This may be one the following values:\n   *\n   * - `\"end_turn\"`: the model reached a natural stopping point\n   * - `\"max_tokens\"`: we exceeded the requested `max_tokens` or the model's maximum\n   * - `\"stop_sequence\"`: one of your provided custom `stop_sequences` was generated\n   * - `\"tool_use\"`: the model invoked one or more tools\n   * - `\"pause_turn\"`: we paused a long-running turn. You may provide the response\n   *   back as-is in a subsequent request to let the model continue.\n   * - `\"refusal\"`: when streaming classifiers intervene to handle potential policy\n   *   violations\n   *\n   * In non-streaming mode this value is always non-null. In streaming mode, it is\n   * null in the `message_start` event and non-null otherwise.\n   */\n  stop_reason: BetaStopReason | null;\n\n  /**\n   * Which custom stop sequence was generated, if any.\n   *\n   * This value will be a non-null string if one of your custom stop sequences was\n   * generated.\n   */\n  stop_sequence: string | null;\n\n  /**\n   * Object type.\n   *\n   * For Messages, this is always `\"message\"`.\n   */\n  type: 'message';\n\n  /**\n   * Billing and rate-limit usage.\n   *\n   * Anthropic's API bills and rate-limits by token counts, as tokens represent the\n   * underlying cost to our systems.\n   *\n   * Under the hood, the API transforms requests into a format suitable for the\n   * model. The model's output then goes through a parsing stage before becoming an\n   * API response. As a result, the token counts in `usage` will not match one-to-one\n   * with the exact visible content of an API request or response.\n   *\n   * For example, `output_tokens` will be non-zero, even for an empty string response\n   * from Claude.\n   *\n   * Total input tokens in a request is the summation of `input_tokens`,\n   * `cache_creation_input_tokens`, and `cache_read_input_tokens`.\n   */\n  usage: BetaUsage;\n}\n\nexport interface BetaMessageDeltaUsage {\n  /**\n   * The cumulative number of input tokens used to create the cache entry.\n   */\n  cache_creation_input_tokens: number | null;\n\n  /**\n   * The cumulative number of input tokens read from the cache.\n   */\n  cache_read_input_tokens: number | null;\n\n  /**\n   * The cumulative number of input tokens which were used.\n   */\n  input_tokens: number | null;\n\n  /**\n   * The cumulative number of output tokens which were used.\n   */\n  output_tokens: number;\n\n  /**\n   * The number of server tool requests.\n   */\n  server_tool_use: BetaServerToolUsage | null;\n}\n\nexport interface BetaMessageParam {\n  content: string | Array<BetaContentBlockParam>;\n\n  role: 'user' | 'assistant';\n}\n\nexport interface BetaMessageTokensCount {\n  /**\n   * Information about context management applied to the message.\n   */\n  context_management: BetaCountTokensContextManagementResponse | null;\n\n  /**\n   * The total number of tokens across the provided list of messages, system prompt,\n   * and tools.\n   */\n  input_tokens: number;\n}\n\nexport interface BetaMetadata {\n  /**\n   * An external identifier for the user who is associated with the request.\n   *\n   * This should be a uuid, hash value, or other opaque identifier. Anthropic may use\n   * this id to help detect abuse. Do not include any identifying information such as\n   * name, email address, or phone number.\n   */\n  user_id?: string | null;\n}\n\nexport interface BetaOutputConfig {\n  /**\n   * All possible effort levels.\n   */\n  effort?: 'low' | 'medium' | 'high' | null;\n}\n\nexport interface BetaPlainTextSource {\n  data: string;\n\n  media_type: 'text/plain';\n\n  type: 'text';\n}\n\nexport type BetaRawContentBlockDelta =\n  | BetaTextDelta\n  | BetaInputJSONDelta\n  | BetaCitationsDelta\n  | BetaThinkingDelta\n  | BetaSignatureDelta;\n\nexport interface BetaRawContentBlockDeltaEvent {\n  delta: BetaRawContentBlockDelta;\n\n  index: number;\n\n  type: 'content_block_delta';\n}\n\nexport interface BetaRawContentBlockStartEvent {\n  /**\n   * Response model for a file uploaded to the container.\n   */\n  content_block:\n    | BetaTextBlock\n    | BetaThinkingBlock\n    | BetaRedactedThinkingBlock\n    | BetaToolUseBlock\n    | BetaServerToolUseBlock\n    | BetaWebSearchToolResultBlock\n    | BetaWebFetchToolResultBlock\n    | BetaCodeExecutionToolResultBlock\n    | BetaBashCodeExecutionToolResultBlock\n    | BetaTextEditorCodeExecutionToolResultBlock\n    | BetaToolSearchToolResultBlock\n    | BetaMCPToolUseBlock\n    | BetaMCPToolResultBlock\n    | BetaContainerUploadBlock;\n\n  index: number;\n\n  type: 'content_block_start';\n}\n\nexport interface BetaRawContentBlockStopEvent {\n  index: number;\n\n  type: 'content_block_stop';\n}\n\nexport interface BetaRawMessageDeltaEvent {\n  /**\n   * Information about context management strategies applied during the request\n   */\n  context_management: BetaContextManagementResponse | null;\n\n  delta: BetaRawMessageDeltaEvent.Delta;\n\n  type: 'message_delta';\n\n  /**\n   * Billing and rate-limit usage.\n   *\n   * Anthropic's API bills and rate-limits by token counts, as tokens represent the\n   * underlying cost to our systems.\n   *\n   * Under the hood, the API transforms requests into a format suitable for the\n   * model. The model's output then goes through a parsing stage before becoming an\n   * API response. As a result, the token counts in `usage` will not match one-to-one\n   * with the exact visible content of an API request or response.\n   *\n   * For example, `output_tokens` will be non-zero, even for an empty string response\n   * from Claude.\n   *\n   * Total input tokens in a request is the summation of `input_tokens`,\n   * `cache_creation_input_tokens`, and `cache_read_input_tokens`.\n   */\n  usage: BetaMessageDeltaUsage;\n}\n\nexport namespace BetaRawMessageDeltaEvent {\n  export interface Delta {\n    /**\n     * Information about the container used in the request (for the code execution\n     * tool)\n     */\n    container: MessagesMessagesAPI.BetaContainer | null;\n\n    stop_reason: MessagesMessagesAPI.BetaStopReason | null;\n\n    stop_sequence: string | null;\n  }\n}\n\nexport interface BetaRawMessageStartEvent {\n  message: BetaMessage;\n\n  type: 'message_start';\n}\n\nexport interface BetaRawMessageStopEvent {\n  type: 'message_stop';\n}\n\nexport type BetaRawMessageStreamEvent =\n  | BetaRawMessageStartEvent\n  | BetaRawMessageDeltaEvent\n  | BetaRawMessageStopEvent\n  | BetaRawContentBlockStartEvent\n  | BetaRawContentBlockDeltaEvent\n  | BetaRawContentBlockStopEvent;\n\nexport interface BetaRedactedThinkingBlock {\n  data: string;\n\n  type: 'redacted_thinking';\n}\n\nexport interface BetaRedactedThinkingBlockParam {\n  data: string;\n\n  type: 'redacted_thinking';\n}\n\nexport interface BetaRequestDocumentBlock {\n  source:\n    | BetaBase64PDFSource\n    | BetaPlainTextSource\n    | BetaContentBlockSource\n    | BetaURLPDFSource\n    | BetaFileDocumentSource;\n\n  type: 'document';\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n\n  citations?: BetaCitationsConfigParam | null;\n\n  context?: string | null;\n\n  title?: string | null;\n}\n\nexport interface BetaRequestMCPServerToolConfiguration {\n  allowed_tools?: Array<string> | null;\n\n  enabled?: boolean | null;\n}\n\nexport interface BetaRequestMCPServerURLDefinition {\n  name: string;\n\n  type: 'url';\n\n  url: string;\n\n  authorization_token?: string | null;\n\n  tool_configuration?: BetaRequestMCPServerToolConfiguration | null;\n}\n\nexport interface BetaRequestMCPToolResultBlockParam {\n  tool_use_id: string;\n\n  type: 'mcp_tool_result';\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n\n  content?: string | Array<BetaTextBlockParam>;\n\n  is_error?: boolean;\n}\n\nexport interface BetaSearchResultBlockParam {\n  content: Array<BetaTextBlockParam>;\n\n  source: string;\n\n  title: string;\n\n  type: 'search_result';\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n\n  citations?: BetaCitationsConfigParam;\n}\n\n/**\n * Tool invocation generated by a server-side tool.\n */\nexport interface BetaServerToolCaller {\n  tool_id: string;\n\n  type: 'code_execution_20250825';\n}\n\nexport interface BetaServerToolUsage {\n  /**\n   * The number of web fetch tool requests.\n   */\n  web_fetch_requests: number;\n\n  /**\n   * The number of web search tool requests.\n   */\n  web_search_requests: number;\n}\n\nexport interface BetaServerToolUseBlock {\n  id: string;\n\n  /**\n   * Tool invocation directly from the model.\n   */\n  caller: BetaDirectCaller | BetaServerToolCaller;\n\n  input: { [key: string]: unknown };\n\n  name:\n    | 'web_search'\n    | 'web_fetch'\n    | 'code_execution'\n    | 'bash_code_execution'\n    | 'text_editor_code_execution'\n    | 'tool_search_tool_regex'\n    | 'tool_search_tool_bm25';\n\n  type: 'server_tool_use';\n}\n\nexport interface BetaServerToolUseBlockParam {\n  id: string;\n\n  input: unknown;\n\n  name:\n    | 'web_search'\n    | 'web_fetch'\n    | 'code_execution'\n    | 'bash_code_execution'\n    | 'text_editor_code_execution'\n    | 'tool_search_tool_regex'\n    | 'tool_search_tool_bm25';\n\n  type: 'server_tool_use';\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n\n  /**\n   * Tool invocation directly from the model.\n   */\n  caller?: BetaDirectCaller | BetaServerToolCaller;\n}\n\nexport interface BetaSignatureDelta {\n  signature: string;\n\n  type: 'signature_delta';\n}\n\n/**\n * A skill that was loaded in a container (response model).\n */\nexport interface BetaSkill {\n  /**\n   * Skill ID\n   */\n  skill_id: string;\n\n  /**\n   * Type of skill - either 'anthropic' (built-in) or 'custom' (user-defined)\n   */\n  type: 'anthropic' | 'custom';\n\n  /**\n   * Skill version or 'latest' for most recent version\n   */\n  version: string;\n}\n\n/**\n * Specification for a skill to be loaded in a container (request model).\n */\nexport interface BetaSkillParams {\n  /**\n   * Skill ID\n   */\n  skill_id: string;\n\n  /**\n   * Type of skill - either 'anthropic' (built-in) or 'custom' (user-defined)\n   */\n  type: 'anthropic' | 'custom';\n\n  /**\n   * Skill version or 'latest' for most recent version\n   */\n  version?: string;\n}\n\nexport type BetaStopReason =\n  | 'end_turn'\n  | 'max_tokens'\n  | 'stop_sequence'\n  | 'tool_use'\n  | 'pause_turn'\n  | 'refusal'\n  | 'model_context_window_exceeded';\n\nexport interface BetaTextBlock {\n  /**\n   * Citations supporting the text block.\n   *\n   * The type of citation returned will depend on the type of document being cited.\n   * Citing a PDF results in `page_location`, plain text results in `char_location`,\n   * and content document results in `content_block_location`.\n   */\n  citations: Array<BetaTextCitation> | null;\n\n  text: string;\n\n  type: 'text';\n}\n\nexport interface BetaTextBlockParam {\n  text: string;\n\n  type: 'text';\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n\n  citations?: Array<BetaTextCitationParam> | null;\n}\n\nexport type BetaTextCitation =\n  | BetaCitationCharLocation\n  | BetaCitationPageLocation\n  | BetaCitationContentBlockLocation\n  | BetaCitationsWebSearchResultLocation\n  | BetaCitationSearchResultLocation;\n\nexport type BetaTextCitationParam =\n  | BetaCitationCharLocationParam\n  | BetaCitationPageLocationParam\n  | BetaCitationContentBlockLocationParam\n  | BetaCitationWebSearchResultLocationParam\n  | BetaCitationSearchResultLocationParam;\n\nexport interface BetaTextDelta {\n  text: string;\n\n  type: 'text_delta';\n}\n\nexport interface BetaTextEditorCodeExecutionCreateResultBlock {\n  is_file_update: boolean;\n\n  type: 'text_editor_code_execution_create_result';\n}\n\nexport interface BetaTextEditorCodeExecutionCreateResultBlockParam {\n  is_file_update: boolean;\n\n  type: 'text_editor_code_execution_create_result';\n}\n\nexport interface BetaTextEditorCodeExecutionStrReplaceResultBlock {\n  lines: Array<string> | null;\n\n  new_lines: number | null;\n\n  new_start: number | null;\n\n  old_lines: number | null;\n\n  old_start: number | null;\n\n  type: 'text_editor_code_execution_str_replace_result';\n}\n\nexport interface BetaTextEditorCodeExecutionStrReplaceResultBlockParam {\n  type: 'text_editor_code_execution_str_replace_result';\n\n  lines?: Array<string> | null;\n\n  new_lines?: number | null;\n\n  new_start?: number | null;\n\n  old_lines?: number | null;\n\n  old_start?: number | null;\n}\n\nexport interface BetaTextEditorCodeExecutionToolResultBlock {\n  content:\n    | BetaTextEditorCodeExecutionToolResultError\n    | BetaTextEditorCodeExecutionViewResultBlock\n    | BetaTextEditorCodeExecutionCreateResultBlock\n    | BetaTextEditorCodeExecutionStrReplaceResultBlock;\n\n  tool_use_id: string;\n\n  type: 'text_editor_code_execution_tool_result';\n}\n\nexport interface BetaTextEditorCodeExecutionToolResultBlockParam {\n  content:\n    | BetaTextEditorCodeExecutionToolResultErrorParam\n    | BetaTextEditorCodeExecutionViewResultBlockParam\n    | BetaTextEditorCodeExecutionCreateResultBlockParam\n    | BetaTextEditorCodeExecutionStrReplaceResultBlockParam;\n\n  tool_use_id: string;\n\n  type: 'text_editor_code_execution_tool_result';\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n}\n\nexport interface BetaTextEditorCodeExecutionToolResultError {\n  error_code:\n    | 'invalid_tool_input'\n    | 'unavailable'\n    | 'too_many_requests'\n    | 'execution_time_exceeded'\n    | 'file_not_found';\n\n  error_message: string | null;\n\n  type: 'text_editor_code_execution_tool_result_error';\n}\n\nexport interface BetaTextEditorCodeExecutionToolResultErrorParam {\n  error_code:\n    | 'invalid_tool_input'\n    | 'unavailable'\n    | 'too_many_requests'\n    | 'execution_time_exceeded'\n    | 'file_not_found';\n\n  type: 'text_editor_code_execution_tool_result_error';\n\n  error_message?: string | null;\n}\n\nexport interface BetaTextEditorCodeExecutionViewResultBlock {\n  content: string;\n\n  file_type: 'text' | 'image' | 'pdf';\n\n  num_lines: number | null;\n\n  start_line: number | null;\n\n  total_lines: number | null;\n\n  type: 'text_editor_code_execution_view_result';\n}\n\nexport interface BetaTextEditorCodeExecutionViewResultBlockParam {\n  content: string;\n\n  file_type: 'text' | 'image' | 'pdf';\n\n  type: 'text_editor_code_execution_view_result';\n\n  num_lines?: number | null;\n\n  start_line?: number | null;\n\n  total_lines?: number | null;\n}\n\nexport interface BetaThinkingBlock {\n  signature: string;\n\n  thinking: string;\n\n  type: 'thinking';\n}\n\nexport interface BetaThinkingBlockParam {\n  signature: string;\n\n  thinking: string;\n\n  type: 'thinking';\n}\n\nexport interface BetaThinkingConfigDisabled {\n  type: 'disabled';\n}\n\nexport interface BetaThinkingConfigEnabled {\n  /**\n   * Determines how many tokens Claude can use for its internal reasoning process.\n   * Larger budgets can enable more thorough analysis for complex problems, improving\n   * response quality.\n   *\n   * Must be 1024 and less than `max_tokens`.\n   *\n   * See\n   * [extended thinking](https://docs.claude.com/en/docs/build-with-claude/extended-thinking)\n   * for details.\n   */\n  budget_tokens: number;\n\n  type: 'enabled';\n}\n\n/**\n * Configuration for enabling Claude's extended thinking.\n *\n * When enabled, responses include `thinking` content blocks showing Claude's\n * thinking process before the final answer. Requires a minimum budget of 1,024\n * tokens and counts towards your `max_tokens` limit.\n *\n * See\n * [extended thinking](https://docs.claude.com/en/docs/build-with-claude/extended-thinking)\n * for details.\n */\nexport type BetaThinkingConfigParam = BetaThinkingConfigEnabled | BetaThinkingConfigDisabled;\n\nexport interface BetaThinkingDelta {\n  thinking: string;\n\n  type: 'thinking_delta';\n}\n\nexport interface BetaThinkingTurns {\n  type: 'thinking_turns';\n\n  value: number;\n}\n\nexport interface BetaTool {\n  /**\n   * [JSON schema](https://json-schema.org/draft/2020-12) for this tool's input.\n   *\n   * This defines the shape of the `input` that your tool accepts and that the model\n   * will produce.\n   */\n  input_schema: BetaTool.InputSchema;\n\n  /**\n   * Name of the tool.\n   *\n   * This is how the tool will be called by the model and in `tool_use` blocks.\n   */\n  name: string;\n\n  allowed_callers?: Array<'direct' | 'code_execution_20250825'>;\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n\n  /**\n   * If true, tool will not be included in initial system prompt. Only loaded when\n   * returned via tool_reference from tool search.\n   */\n  defer_loading?: boolean;\n\n  /**\n   * Description of what this tool does.\n   *\n   * Tool descriptions should be as detailed as possible. The more information that\n   * the model has about what the tool is and how to use it, the better it will\n   * perform. You can use natural language descriptions to reinforce important\n   * aspects of the tool input JSON schema.\n   */\n  description?: string;\n\n  input_examples?: Array<{ [key: string]: unknown }>;\n\n  strict?: boolean;\n\n  type?: 'custom' | null;\n}\n\nexport namespace BetaTool {\n  /**\n   * [JSON schema](https://json-schema.org/draft/2020-12) for this tool's input.\n   *\n   * This defines the shape of the `input` that your tool accepts and that the model\n   * will produce.\n   */\n  export interface InputSchema {\n    type: 'object';\n\n    properties?: unknown | null;\n\n    required?: string[] | readonly string[] | null;\n\n    [k: string]: unknown;\n  }\n}\n\nexport interface BetaToolBash20241022 {\n  /**\n   * Name of the tool.\n   *\n   * This is how the tool will be called by the model and in `tool_use` blocks.\n   */\n  name: 'bash';\n\n  type: 'bash_20241022';\n\n  allowed_callers?: Array<'direct' | 'code_execution_20250825'>;\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n\n  /**\n   * If true, tool will not be included in initial system prompt. Only loaded when\n   * returned via tool_reference from tool search.\n   */\n  defer_loading?: boolean;\n\n  input_examples?: Array<{ [key: string]: unknown }>;\n\n  strict?: boolean;\n}\n\nexport interface BetaToolBash20250124 {\n  /**\n   * Name of the tool.\n   *\n   * This is how the tool will be called by the model and in `tool_use` blocks.\n   */\n  name: 'bash';\n\n  type: 'bash_20250124';\n\n  allowed_callers?: Array<'direct' | 'code_execution_20250825'>;\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n\n  /**\n   * If true, tool will not be included in initial system prompt. Only loaded when\n   * returned via tool_reference from tool search.\n   */\n  defer_loading?: boolean;\n\n  input_examples?: Array<{ [key: string]: unknown }>;\n\n  strict?: boolean;\n}\n\n/**\n * How the model should use the provided tools. The model can use a specific tool,\n * any available tool, decide by itself, or not use tools at all.\n */\nexport type BetaToolChoice = BetaToolChoiceAuto | BetaToolChoiceAny | BetaToolChoiceTool | BetaToolChoiceNone;\n\n/**\n * The model will use any available tools.\n */\nexport interface BetaToolChoiceAny {\n  type: 'any';\n\n  /**\n   * Whether to disable parallel tool use.\n   *\n   * Defaults to `false`. If set to `true`, the model will output exactly one tool\n   * use.\n   */\n  disable_parallel_tool_use?: boolean;\n}\n\n/**\n * The model will automatically decide whether to use tools.\n */\nexport interface BetaToolChoiceAuto {\n  type: 'auto';\n\n  /**\n   * Whether to disable parallel tool use.\n   *\n   * Defaults to `false`. If set to `true`, the model will output at most one tool\n   * use.\n   */\n  disable_parallel_tool_use?: boolean;\n}\n\n/**\n * The model will not be allowed to use tools.\n */\nexport interface BetaToolChoiceNone {\n  type: 'none';\n}\n\n/**\n * The model will use the specified tool with `tool_choice.name`.\n */\nexport interface BetaToolChoiceTool {\n  /**\n   * The name of the tool to use.\n   */\n  name: string;\n\n  type: 'tool';\n\n  /**\n   * Whether to disable parallel tool use.\n   *\n   * Defaults to `false`. If set to `true`, the model will output exactly one tool\n   * use.\n   */\n  disable_parallel_tool_use?: boolean;\n}\n\nexport interface BetaToolComputerUse20241022 {\n  /**\n   * The height of the display in pixels.\n   */\n  display_height_px: number;\n\n  /**\n   * The width of the display in pixels.\n   */\n  display_width_px: number;\n\n  /**\n   * Name of the tool.\n   *\n   * This is how the tool will be called by the model and in `tool_use` blocks.\n   */\n  name: 'computer';\n\n  type: 'computer_20241022';\n\n  allowed_callers?: Array<'direct' | 'code_execution_20250825'>;\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n\n  /**\n   * If true, tool will not be included in initial system prompt. Only loaded when\n   * returned via tool_reference from tool search.\n   */\n  defer_loading?: boolean;\n\n  /**\n   * The X11 display number (e.g. 0, 1) for the display.\n   */\n  display_number?: number | null;\n\n  input_examples?: Array<{ [key: string]: unknown }>;\n\n  strict?: boolean;\n}\n\nexport interface BetaToolComputerUse20250124 {\n  /**\n   * The height of the display in pixels.\n   */\n  display_height_px: number;\n\n  /**\n   * The width of the display in pixels.\n   */\n  display_width_px: number;\n\n  /**\n   * Name of the tool.\n   *\n   * This is how the tool will be called by the model and in `tool_use` blocks.\n   */\n  name: 'computer';\n\n  type: 'computer_20250124';\n\n  allowed_callers?: Array<'direct' | 'code_execution_20250825'>;\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n\n  /**\n   * If true, tool will not be included in initial system prompt. Only loaded when\n   * returned via tool_reference from tool search.\n   */\n  defer_loading?: boolean;\n\n  /**\n   * The X11 display number (e.g. 0, 1) for the display.\n   */\n  display_number?: number | null;\n\n  input_examples?: Array<{ [key: string]: unknown }>;\n\n  strict?: boolean;\n}\n\nexport interface BetaToolComputerUse20251124 {\n  /**\n   * The height of the display in pixels.\n   */\n  display_height_px: number;\n\n  /**\n   * The width of the display in pixels.\n   */\n  display_width_px: number;\n\n  /**\n   * Name of the tool.\n   *\n   * This is how the tool will be called by the model and in `tool_use` blocks.\n   */\n  name: 'computer';\n\n  type: 'computer_20251124';\n\n  allowed_callers?: Array<'direct' | 'code_execution_20250825'>;\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n\n  /**\n   * If true, tool will not be included in initial system prompt. Only loaded when\n   * returned via tool_reference from tool search.\n   */\n  defer_loading?: boolean;\n\n  /**\n   * The X11 display number (e.g. 0, 1) for the display.\n   */\n  display_number?: number | null;\n\n  /**\n   * Whether to enable an action to take a zoomed-in screenshot of the screen.\n   */\n  enable_zoom?: boolean;\n\n  input_examples?: Array<{ [key: string]: unknown }>;\n\n  strict?: boolean;\n}\n\nexport interface BetaToolReferenceBlock {\n  tool_name: string;\n\n  type: 'tool_reference';\n}\n\n/**\n * Tool reference block that can be included in tool_result content.\n */\nexport interface BetaToolReferenceBlockParam {\n  tool_name: string;\n\n  type: 'tool_reference';\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n}\n\nexport interface BetaToolResultBlockParam {\n  tool_use_id: string;\n\n  type: 'tool_result';\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n\n  content?:\n    | string\n    | Array<\n        | BetaTextBlockParam\n        | BetaImageBlockParam\n        | BetaSearchResultBlockParam\n        | BetaRequestDocumentBlock\n        | BetaToolReferenceBlockParam\n      >;\n\n  is_error?: boolean;\n}\n\nexport interface BetaToolSearchToolBm25_20251119 {\n  /**\n   * Name of the tool.\n   *\n   * This is how the tool will be called by the model and in `tool_use` blocks.\n   */\n  name: 'tool_search_tool_bm25';\n\n  type: 'tool_search_tool_bm25_20251119' | 'tool_search_tool_bm25';\n\n  allowed_callers?: Array<'direct' | 'code_execution_20250825'>;\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n\n  /**\n   * If true, tool will not be included in initial system prompt. Only loaded when\n   * returned via tool_reference from tool search.\n   */\n  defer_loading?: boolean;\n\n  strict?: boolean;\n}\n\nexport interface BetaToolSearchToolRegex20251119 {\n  /**\n   * Name of the tool.\n   *\n   * This is how the tool will be called by the model and in `tool_use` blocks.\n   */\n  name: 'tool_search_tool_regex';\n\n  type: 'tool_search_tool_regex_20251119' | 'tool_search_tool_regex';\n\n  allowed_callers?: Array<'direct' | 'code_execution_20250825'>;\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n\n  /**\n   * If true, tool will not be included in initial system prompt. Only loaded when\n   * returned via tool_reference from tool search.\n   */\n  defer_loading?: boolean;\n\n  strict?: boolean;\n}\n\nexport interface BetaToolSearchToolResultBlock {\n  content: BetaToolSearchToolResultError | BetaToolSearchToolSearchResultBlock;\n\n  tool_use_id: string;\n\n  type: 'tool_search_tool_result';\n}\n\nexport interface BetaToolSearchToolResultBlockParam {\n  content: BetaToolSearchToolResultErrorParam | BetaToolSearchToolSearchResultBlockParam;\n\n  tool_use_id: string;\n\n  type: 'tool_search_tool_result';\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n}\n\nexport interface BetaToolSearchToolResultError {\n  error_code: 'invalid_tool_input' | 'unavailable' | 'too_many_requests' | 'execution_time_exceeded';\n\n  error_message: string | null;\n\n  type: 'tool_search_tool_result_error';\n}\n\nexport interface BetaToolSearchToolResultErrorParam {\n  error_code: 'invalid_tool_input' | 'unavailable' | 'too_many_requests' | 'execution_time_exceeded';\n\n  type: 'tool_search_tool_result_error';\n}\n\nexport interface BetaToolSearchToolSearchResultBlock {\n  tool_references: Array<BetaToolReferenceBlock>;\n\n  type: 'tool_search_tool_search_result';\n}\n\nexport interface BetaToolSearchToolSearchResultBlockParam {\n  tool_references: Array<BetaToolReferenceBlockParam>;\n\n  type: 'tool_search_tool_search_result';\n}\n\nexport type BetaToolResultContentBlockParam = Extract<BetaToolResultBlockParam['content'], any[]>[number];\n\nexport interface BetaToolTextEditor20241022 {\n  /**\n   * Name of the tool.\n   *\n   * This is how the tool will be called by the model and in `tool_use` blocks.\n   */\n  name: 'str_replace_editor';\n\n  type: 'text_editor_20241022';\n\n  allowed_callers?: Array<'direct' | 'code_execution_20250825'>;\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n\n  /**\n   * If true, tool will not be included in initial system prompt. Only loaded when\n   * returned via tool_reference from tool search.\n   */\n  defer_loading?: boolean;\n\n  input_examples?: Array<{ [key: string]: unknown }>;\n\n  strict?: boolean;\n}\n\nexport interface BetaToolTextEditor20250124 {\n  /**\n   * Name of the tool.\n   *\n   * This is how the tool will be called by the model and in `tool_use` blocks.\n   */\n  name: 'str_replace_editor';\n\n  type: 'text_editor_20250124';\n\n  allowed_callers?: Array<'direct' | 'code_execution_20250825'>;\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n\n  /**\n   * If true, tool will not be included in initial system prompt. Only loaded when\n   * returned via tool_reference from tool search.\n   */\n  defer_loading?: boolean;\n\n  input_examples?: Array<{ [key: string]: unknown }>;\n\n  strict?: boolean;\n}\n\nexport interface BetaToolTextEditor20250429 {\n  /**\n   * Name of the tool.\n   *\n   * This is how the tool will be called by the model and in `tool_use` blocks.\n   */\n  name: 'str_replace_based_edit_tool';\n\n  type: 'text_editor_20250429';\n\n  allowed_callers?: Array<'direct' | 'code_execution_20250825'>;\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n\n  /**\n   * If true, tool will not be included in initial system prompt. Only loaded when\n   * returned via tool_reference from tool search.\n   */\n  defer_loading?: boolean;\n\n  input_examples?: Array<{ [key: string]: unknown }>;\n\n  strict?: boolean;\n}\n\nexport interface BetaToolTextEditor20250728 {\n  /**\n   * Name of the tool.\n   *\n   * This is how the tool will be called by the model and in `tool_use` blocks.\n   */\n  name: 'str_replace_based_edit_tool';\n\n  type: 'text_editor_20250728';\n\n  allowed_callers?: Array<'direct' | 'code_execution_20250825'>;\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n\n  /**\n   * If true, tool will not be included in initial system prompt. Only loaded when\n   * returned via tool_reference from tool search.\n   */\n  defer_loading?: boolean;\n\n  input_examples?: Array<{ [key: string]: unknown }>;\n\n  /**\n   * Maximum number of characters to display when viewing a file. If not specified,\n   * defaults to displaying the full file.\n   */\n  max_characters?: number | null;\n\n  strict?: boolean;\n}\n\n/**\n * Configuration for a group of tools from an MCP server.\n *\n * Allows configuring enabled status and defer_loading for all tools from an MCP\n * server, with optional per-tool overrides.\n */\nexport type BetaToolUnion =\n  | BetaTool\n  | BetaToolBash20241022\n  | BetaToolBash20250124\n  | BetaCodeExecutionTool20250522\n  | BetaCodeExecutionTool20250825\n  | BetaToolComputerUse20241022\n  | BetaMemoryTool20250818\n  | BetaToolComputerUse20250124\n  | BetaToolTextEditor20241022\n  | BetaToolComputerUse20251124\n  | BetaToolTextEditor20250124\n  | BetaToolTextEditor20250429\n  | BetaToolTextEditor20250728\n  | BetaWebSearchTool20250305\n  | BetaWebFetchTool20250910\n  | BetaToolSearchToolBm25_20251119\n  | BetaToolSearchToolRegex20251119\n  | BetaMCPToolset;\n\nexport interface BetaToolUseBlock {\n  id: string;\n\n  input: unknown;\n\n  name: string;\n\n  type: 'tool_use';\n\n  /**\n   * Tool invocation directly from the model.\n   */\n  caller?: BetaDirectCaller | BetaServerToolCaller;\n}\n\nexport interface BetaToolUseBlockParam {\n  id: string;\n\n  input: unknown;\n\n  name: string;\n\n  type: 'tool_use';\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n\n  /**\n   * Tool invocation directly from the model.\n   */\n  caller?: BetaDirectCaller | BetaServerToolCaller;\n}\n\nexport interface BetaToolUsesKeep {\n  type: 'tool_uses';\n\n  value: number;\n}\n\nexport interface BetaToolUsesTrigger {\n  type: 'tool_uses';\n\n  value: number;\n}\n\nexport interface BetaURLImageSource {\n  type: 'url';\n\n  url: string;\n}\n\nexport interface BetaURLPDFSource {\n  type: 'url';\n\n  url: string;\n}\n\nexport interface BetaUsage {\n  /**\n   * Breakdown of cached tokens by TTL\n   */\n  cache_creation: BetaCacheCreation | null;\n\n  /**\n   * The number of input tokens used to create the cache entry.\n   */\n  cache_creation_input_tokens: number | null;\n\n  /**\n   * The number of input tokens read from the cache.\n   */\n  cache_read_input_tokens: number | null;\n\n  /**\n   * The number of input tokens which were used.\n   */\n  input_tokens: number;\n\n  /**\n   * The number of output tokens which were used.\n   */\n  output_tokens: number;\n\n  /**\n   * The number of server tool requests.\n   */\n  server_tool_use: BetaServerToolUsage | null;\n\n  /**\n   * If the request used the priority, standard, or batch tier.\n   */\n  service_tier: 'standard' | 'priority' | 'batch' | null;\n}\n\nexport interface BetaWebFetchBlock {\n  content: BetaDocumentBlock;\n\n  /**\n   * ISO 8601 timestamp when the content was retrieved\n   */\n  retrieved_at: string | null;\n\n  type: 'web_fetch_result';\n\n  /**\n   * Fetched content URL\n   */\n  url: string;\n}\n\nexport interface BetaWebFetchBlockParam {\n  content: BetaRequestDocumentBlock;\n\n  type: 'web_fetch_result';\n\n  /**\n   * Fetched content URL\n   */\n  url: string;\n\n  /**\n   * ISO 8601 timestamp when the content was retrieved\n   */\n  retrieved_at?: string | null;\n}\n\nexport interface BetaWebFetchTool20250910 {\n  /**\n   * Name of the tool.\n   *\n   * This is how the tool will be called by the model and in `tool_use` blocks.\n   */\n  name: 'web_fetch';\n\n  type: 'web_fetch_20250910';\n\n  allowed_callers?: Array<'direct' | 'code_execution_20250825'>;\n\n  /**\n   * List of domains to allow fetching from\n   */\n  allowed_domains?: Array<string> | null;\n\n  /**\n   * List of domains to block fetching from\n   */\n  blocked_domains?: Array<string> | null;\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n\n  /**\n   * Citations configuration for fetched documents. Citations are disabled by\n   * default.\n   */\n  citations?: BetaCitationsConfigParam | null;\n\n  /**\n   * If true, tool will not be included in initial system prompt. Only loaded when\n   * returned via tool_reference from tool search.\n   */\n  defer_loading?: boolean;\n\n  /**\n   * Maximum number of tokens used by including web page text content in the context.\n   * The limit is approximate and does not apply to binary content such as PDFs.\n   */\n  max_content_tokens?: number | null;\n\n  /**\n   * Maximum number of times the tool can be used in the API request.\n   */\n  max_uses?: number | null;\n\n  strict?: boolean;\n}\n\nexport interface BetaWebFetchToolResultBlock {\n  content: BetaWebFetchToolResultErrorBlock | BetaWebFetchBlock;\n\n  tool_use_id: string;\n\n  type: 'web_fetch_tool_result';\n}\n\nexport interface BetaWebFetchToolResultBlockParam {\n  content: BetaWebFetchToolResultErrorBlockParam | BetaWebFetchBlockParam;\n\n  tool_use_id: string;\n\n  type: 'web_fetch_tool_result';\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n}\n\nexport interface BetaWebFetchToolResultErrorBlock {\n  error_code: BetaWebFetchToolResultErrorCode;\n\n  type: 'web_fetch_tool_result_error';\n}\n\nexport interface BetaWebFetchToolResultErrorBlockParam {\n  error_code: BetaWebFetchToolResultErrorCode;\n\n  type: 'web_fetch_tool_result_error';\n}\n\nexport type BetaWebFetchToolResultErrorCode =\n  | 'invalid_tool_input'\n  | 'url_too_long'\n  | 'url_not_allowed'\n  | 'url_not_accessible'\n  | 'unsupported_content_type'\n  | 'too_many_requests'\n  | 'max_uses_exceeded'\n  | 'unavailable';\n\nexport interface BetaWebSearchResultBlock {\n  encrypted_content: string;\n\n  page_age: string | null;\n\n  title: string;\n\n  type: 'web_search_result';\n\n  url: string;\n}\n\nexport interface BetaWebSearchResultBlockParam {\n  encrypted_content: string;\n\n  title: string;\n\n  type: 'web_search_result';\n\n  url: string;\n\n  page_age?: string | null;\n}\n\nexport interface BetaWebSearchTool20250305 {\n  /**\n   * Name of the tool.\n   *\n   * This is how the tool will be called by the model and in `tool_use` blocks.\n   */\n  name: 'web_search';\n\n  type: 'web_search_20250305';\n\n  allowed_callers?: Array<'direct' | 'code_execution_20250825'>;\n\n  /**\n   * If provided, only these domains will be included in results. Cannot be used\n   * alongside `blocked_domains`.\n   */\n  allowed_domains?: Array<string> | null;\n\n  /**\n   * If provided, these domains will never appear in results. Cannot be used\n   * alongside `allowed_domains`.\n   */\n  blocked_domains?: Array<string> | null;\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n\n  /**\n   * If true, tool will not be included in initial system prompt. Only loaded when\n   * returned via tool_reference from tool search.\n   */\n  defer_loading?: boolean;\n\n  /**\n   * Maximum number of times the tool can be used in the API request.\n   */\n  max_uses?: number | null;\n\n  strict?: boolean;\n\n  /**\n   * Parameters for the user's location. Used to provide more relevant search\n   * results.\n   */\n  user_location?: BetaWebSearchTool20250305.UserLocation | null;\n}\n\nexport namespace BetaWebSearchTool20250305 {\n  /**\n   * Parameters for the user's location. Used to provide more relevant search\n   * results.\n   */\n  export interface UserLocation {\n    type: 'approximate';\n\n    /**\n     * The city of the user.\n     */\n    city?: string | null;\n\n    /**\n     * The two letter\n     * [ISO country code](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2) of the\n     * user.\n     */\n    country?: string | null;\n\n    /**\n     * The region of the user.\n     */\n    region?: string | null;\n\n    /**\n     * The [IANA timezone](https://nodatime.org/TimeZones) of the user.\n     */\n    timezone?: string | null;\n  }\n}\n\nexport interface BetaWebSearchToolRequestError {\n  error_code: BetaWebSearchToolResultErrorCode;\n\n  type: 'web_search_tool_result_error';\n}\n\nexport interface BetaWebSearchToolResultBlock {\n  content: BetaWebSearchToolResultBlockContent;\n\n  tool_use_id: string;\n\n  type: 'web_search_tool_result';\n}\n\nexport type BetaWebSearchToolResultBlockContent =\n  | BetaWebSearchToolResultError\n  | Array<BetaWebSearchResultBlock>;\n\nexport interface BetaWebSearchToolResultBlockParam {\n  content: BetaWebSearchToolResultBlockParamContent;\n\n  tool_use_id: string;\n\n  type: 'web_search_tool_result';\n\n  /**\n   * Create a cache control breakpoint at this content block.\n   */\n  cache_control?: BetaCacheControlEphemeral | null;\n}\n\nexport type BetaWebSearchToolResultBlockParamContent =\n  | Array<BetaWebSearchResultBlockParam>\n  | BetaWebSearchToolRequestError;\n\nexport interface BetaWebSearchToolResultError {\n  error_code: BetaWebSearchToolResultErrorCode;\n\n  type: 'web_search_tool_result_error';\n}\n\nexport type BetaWebSearchToolResultErrorCode =\n  | 'invalid_tool_input'\n  | 'unavailable'\n  | 'max_uses_exceeded'\n  | 'too_many_requests'\n  | 'query_too_long';\n\n/**\n * @deprecated BetaRequestDocumentBlock should be used insated\n */\nexport type BetaBase64PDFBlock = BetaRequestDocumentBlock;\n\nexport type MessageCreateParams = MessageCreateParamsNonStreaming | MessageCreateParamsStreaming;\n\nexport interface MessageCreateParamsBase {\n  /**\n   * Body param: The maximum number of tokens to generate before stopping.\n   *\n   * Note that our models may stop _before_ reaching this maximum. This parameter\n   * only specifies the absolute maximum number of tokens to generate.\n   *\n   * Different models have different maximum values for this parameter. See\n   * [models](https://docs.claude.com/en/docs/models-overview) for details.\n   */\n  max_tokens: number;\n\n  /**\n   * Body param: Input messages.\n   *\n   * Our models are trained to operate on alternating `user` and `assistant`\n   * conversational turns. When creating a new `Message`, you specify the prior\n   * conversational turns with the `messages` parameter, and the model then generates\n   * the next `Message` in the conversation. Consecutive `user` or `assistant` turns\n   * in your request will be combined into a single turn.\n   *\n   * Each input message must be an object with a `role` and `content`. You can\n   * specify a single `user`-role message, or you can include multiple `user` and\n   * `assistant` messages.\n   *\n   * If the final message uses the `assistant` role, the response content will\n   * continue immediately from the content in that message. This can be used to\n   * constrain part of the model's response.\n   *\n   * Example with a single `user` message:\n   *\n   * ```json\n   * [{ \"role\": \"user\", \"content\": \"Hello, Claude\" }]\n   * ```\n   *\n   * Example with multiple conversational turns:\n   *\n   * ```json\n   * [\n   *   { \"role\": \"user\", \"content\": \"Hello there.\" },\n   *   { \"role\": \"assistant\", \"content\": \"Hi, I'm Claude. How can I help you?\" },\n   *   { \"role\": \"user\", \"content\": \"Can you explain LLMs in plain English?\" }\n   * ]\n   * ```\n   *\n   * Example with a partially-filled response from Claude:\n   *\n   * ```json\n   * [\n   *   {\n   *     \"role\": \"user\",\n   *     \"content\": \"What's the Greek name for Sun? (A) Sol (B) Helios (C) Sun\"\n   *   },\n   *   { \"role\": \"assistant\", \"content\": \"The best answer is (\" }\n   * ]\n   * ```\n   *\n   * Each input message `content` may be either a single `string` or an array of\n   * content blocks, where each block has a specific `type`. Using a `string` for\n   * `content` is shorthand for an array of one content block of type `\"text\"`. The\n   * following input messages are equivalent:\n   *\n   * ```json\n   * { \"role\": \"user\", \"content\": \"Hello, Claude\" }\n   * ```\n   *\n   * ```json\n   * { \"role\": \"user\", \"content\": [{ \"type\": \"text\", \"text\": \"Hello, Claude\" }] }\n   * ```\n   *\n   * See [input examples](https://docs.claude.com/en/api/messages-examples).\n   *\n   * Note that if you want to include a\n   * [system prompt](https://docs.claude.com/en/docs/system-prompts), you can use the\n   * top-level `system` parameter  there is no `\"system\"` role for input messages in\n   * the Messages API.\n   *\n   * There is a limit of 100,000 messages in a single request.\n   */\n  messages: Array<BetaMessageParam>;\n\n  /**\n   * Body param: The model that will complete your prompt.\\n\\nSee\n   * [models](https://docs.anthropic.com/en/docs/models-overview) for additional\n   * details and options.\n   */\n  model: MessagesAPI.Model;\n\n  /**\n   * Body param: Container identifier for reuse across requests.\n   */\n  container?: BetaContainerParams | string | null;\n\n  /**\n   * Body param: Context management configuration.\n   *\n   * This allows you to control how Claude manages context across multiple requests,\n   * such as whether to clear function results or not.\n   */\n  context_management?: BetaContextManagementConfig | null;\n\n  /**\n   * Body param: MCP servers to be utilized in this request\n   */\n  mcp_servers?: Array<BetaRequestMCPServerURLDefinition>;\n\n  /**\n   * Body param: An object describing metadata about the request.\n   */\n  metadata?: BetaMetadata;\n\n  /**\n   * Body param: Configuration options for the model's output. Controls aspects like\n   * how much effort the model puts into its response.\n   */\n  output_config?: BetaOutputConfig;\n\n  /**\n   * Body param: A schema to specify Claude's output format in responses.\n   */\n  output_format?: BetaJSONOutputFormat | null;\n\n  /**\n   * Body param: Determines whether to use priority capacity (if available) or\n   * standard capacity for this request.\n   *\n   * Anthropic offers different levels of service for your API requests. See\n   * [service-tiers](https://docs.claude.com/en/api/service-tiers) for details.\n   */\n  service_tier?: 'auto' | 'standard_only';\n\n  /**\n   * Body param: Custom text sequences that will cause the model to stop generating.\n   *\n   * Our models will normally stop when they have naturally completed their turn,\n   * which will result in a response `stop_reason` of `\"end_turn\"`.\n   *\n   * If you want the model to stop generating when it encounters custom strings of\n   * text, you can use the `stop_sequences` parameter. If the model encounters one of\n   * the custom sequences, the response `stop_reason` value will be `\"stop_sequence\"`\n   * and the response `stop_sequence` value will contain the matched stop sequence.\n   */\n  stop_sequences?: Array<string>;\n\n  /**\n   * Body param: Whether to incrementally stream the response using server-sent\n   * events.\n   *\n   * See [streaming](https://docs.claude.com/en/api/messages-streaming) for details.\n   */\n  stream?: boolean;\n\n  /**\n   * Body param: System prompt.\n   *\n   * A system prompt is a way of providing context and instructions to Claude, such\n   * as specifying a particular goal or role. See our\n   * [guide to system prompts](https://docs.claude.com/en/docs/system-prompts).\n   */\n  system?: string | Array<BetaTextBlockParam>;\n\n  /**\n   * Body param: Amount of randomness injected into the response.\n   *\n   * Defaults to `1.0`. Ranges from `0.0` to `1.0`. Use `temperature` closer to `0.0`\n   * for analytical / multiple choice, and closer to `1.0` for creative and\n   * generative tasks.\n   *\n   * Note that even with `temperature` of `0.0`, the results will not be fully\n   * deterministic.\n   */\n  temperature?: number;\n\n  /**\n   * Body param: Configuration for enabling Claude's extended thinking.\n   *\n   * When enabled, responses include `thinking` content blocks showing Claude's\n   * thinking process before the final answer. Requires a minimum budget of 1,024\n   * tokens and counts towards your `max_tokens` limit.\n   *\n   * See\n   * [extended thinking](https://docs.claude.com/en/docs/build-with-claude/extended-thinking)\n   * for details.\n   */\n  thinking?: BetaThinkingConfigParam;\n\n  /**\n   * Body param: How the model should use the provided tools. The model can use a\n   * specific tool, any available tool, decide by itself, or not use tools at all.\n   */\n  tool_choice?: BetaToolChoice;\n\n  /**\n   * Body param: Definitions of tools that the model may use.\n   *\n   * If you include `tools` in your API request, the model may return `tool_use`\n   * content blocks that represent the model's use of those tools. You can then run\n   * those tools using the tool input generated by the model and then optionally\n   * return results back to the model using `tool_result` content blocks.\n   *\n   * There are two types of tools: **client tools** and **server tools**. The\n   * behavior described below applies to client tools. For\n   * [server tools](https://docs.claude.com/en/docs/agents-and-tools/tool-use/overview#server-tools),\n   * see their individual documentation as each has its own behavior (e.g., the\n   * [web search tool](https://docs.claude.com/en/docs/agents-and-tools/tool-use/web-search-tool)).\n   *\n   * Each tool definition includes:\n   *\n   * - `name`: Name of the tool.\n   * - `description`: Optional, but strongly-recommended description of the tool.\n   * - `input_schema`: [JSON schema](https://json-schema.org/draft/2020-12) for the\n   *   tool `input` shape that the model will produce in `tool_use` output content\n   *   blocks.\n   *\n   * For example, if you defined `tools` as:\n   *\n   * ```json\n   * [\n   *   {\n   *     \"name\": \"get_stock_price\",\n   *     \"description\": \"Get the current stock price for a given ticker symbol.\",\n   *     \"input_schema\": {\n   *       \"type\": \"object\",\n   *       \"properties\": {\n   *         \"ticker\": {\n   *           \"type\": \"string\",\n   *           \"description\": \"The stock ticker symbol, e.g. AAPL for Apple Inc.\"\n   *         }\n   *       },\n   *       \"required\": [\"ticker\"]\n   *     }\n   *   }\n   * ]\n   * ```\n   *\n   * And then asked the model \"What's the S&P 500 at today?\", the model might produce\n   * `tool_use` content blocks in the response like this:\n   *\n   * ```json\n   * [\n   *   {\n   *     \"type\": \"tool_use\",\n   *     \"id\": \"toolu_01D7FLrfh4GYq7yT1ULFeyMV\",\n   *     \"name\": \"get_stock_price\",\n   *     \"input\": { \"ticker\": \"^GSPC\" }\n   *   }\n   * ]\n   * ```\n   *\n   * You might then run your `get_stock_price` tool with `{\"ticker\": \"^GSPC\"}` as an\n   * input, and return the following back to the model in a subsequent `user`\n   * message:\n   *\n   * ```json\n   * [\n   *   {\n   *     \"type\": \"tool_result\",\n   *     \"tool_use_id\": \"toolu_01D7FLrfh4GYq7yT1ULFeyMV\",\n   *     \"content\": \"259.75 USD\"\n   *   }\n   * ]\n   * ```\n   *\n   * Tools can be used for workflows that include running client-side tools and\n   * functions, or more generally whenever you want the model to produce a particular\n   * JSON structure of output.\n   *\n   * See our [guide](https://docs.claude.com/en/docs/tool-use) for more details.\n   */\n  tools?: Array<BetaToolUnion>;\n\n  /**\n   * Body param: Only sample from the top K options for each subsequent token.\n   *\n   * Used to remove \"long tail\" low probability responses.\n   * [Learn more technical details here](https://towardsdatascience.com/how-to-sample-from-language-models-682bceb97277).\n   *\n   * Recommended for advanced use cases only. You usually only need to use\n   * `temperature`.\n   */\n  top_k?: number;\n\n  /**\n   * Body param: Use nucleus sampling.\n   *\n   * In nucleus sampling, we compute the cumulative distribution over all the options\n   * for each subsequent token in decreasing probability order and cut it off once it\n   * reaches a particular probability specified by `top_p`. You should either alter\n   * `temperature` or `top_p`, but not both.\n   *\n   * Recommended for advanced use cases only. You usually only need to use\n   * `temperature`.\n   */\n  top_p?: number;\n\n  /**\n   * Header param: Optional header to specify the beta version(s) you want to use.\n   */\n  betas?: Array<BetaAPI.AnthropicBeta>;\n}\n\nexport namespace MessageCreateParams {\n  export type MessageCreateParamsNonStreaming = MessagesMessagesAPI.MessageCreateParamsNonStreaming;\n  export type MessageCreateParamsStreaming = MessagesMessagesAPI.MessageCreateParamsStreaming;\n}\n\nexport interface MessageCreateParamsNonStreaming extends MessageCreateParamsBase {\n  /**\n   * Body param: Whether to incrementally stream the response using server-sent\n   * events.\n   *\n   * See [streaming](https://docs.claude.com/en/api/messages-streaming) for details.\n   */\n  stream?: false;\n}\n\nexport interface MessageCreateParamsStreaming extends MessageCreateParamsBase {\n  /**\n   * Body param: Whether to incrementally stream the response using server-sent\n   * events.\n   *\n   * See [streaming](https://docs.claude.com/en/api/messages-streaming) for details.\n   */\n  stream: true;\n}\n\nexport interface MessageCountTokensParams {\n  /**\n   * Body param: Input messages.\n   *\n   * Our models are trained to operate on alternating `user` and `assistant`\n   * conversational turns. When creating a new `Message`, you specify the prior\n   * conversational turns with the `messages` parameter, and the model then generates\n   * the next `Message` in the conversation. Consecutive `user` or `assistant` turns\n   * in your request will be combined into a single turn.\n   *\n   * Each input message must be an object with a `role` and `content`. You can\n   * specify a single `user`-role message, or you can include multiple `user` and\n   * `assistant` messages.\n   *\n   * If the final message uses the `assistant` role, the response content will\n   * continue immediately from the content in that message. This can be used to\n   * constrain part of the model's response.\n   *\n   * Example with a single `user` message:\n   *\n   * ```json\n   * [{ \"role\": \"user\", \"content\": \"Hello, Claude\" }]\n   * ```\n   *\n   * Example with multiple conversational turns:\n   *\n   * ```json\n   * [\n   *   { \"role\": \"user\", \"content\": \"Hello there.\" },\n   *   { \"role\": \"assistant\", \"content\": \"Hi, I'm Claude. How can I help you?\" },\n   *   { \"role\": \"user\", \"content\": \"Can you explain LLMs in plain English?\" }\n   * ]\n   * ```\n   *\n   * Example with a partially-filled response from Claude:\n   *\n   * ```json\n   * [\n   *   {\n   *     \"role\": \"user\",\n   *     \"content\": \"What's the Greek name for Sun? (A) Sol (B) Helios (C) Sun\"\n   *   },\n   *   { \"role\": \"assistant\", \"content\": \"The best answer is (\" }\n   * ]\n   * ```\n   *\n   * Each input message `content` may be either a single `string` or an array of\n   * content blocks, where each block has a specific `type`. Using a `string` for\n   * `content` is shorthand for an array of one content block of type `\"text\"`. The\n   * following input messages are equivalent:\n   *\n   * ```json\n   * { \"role\": \"user\", \"content\": \"Hello, Claude\" }\n   * ```\n   *\n   * ```json\n   * { \"role\": \"user\", \"content\": [{ \"type\": \"text\", \"text\": \"Hello, Claude\" }] }\n   * ```\n   *\n   * See [input examples](https://docs.claude.com/en/api/messages-examples).\n   *\n   * Note that if you want to include a\n   * [system prompt](https://docs.claude.com/en/docs/system-prompts), you can use the\n   * top-level `system` parameter  there is no `\"system\"` role for input messages in\n   * the Messages API.\n   *\n   * There is a limit of 100,000 messages in a single request.\n   */\n  messages: Array<BetaMessageParam>;\n\n  /**\n   * Body param: The model that will complete your prompt.\\n\\nSee\n   * [models](https://docs.anthropic.com/en/docs/models-overview) for additional\n   * details and options.\n   */\n  model: MessagesAPI.Model;\n\n  /**\n   * Body param: Context management configuration.\n   *\n   * This allows you to control how Claude manages context across multiple requests,\n   * such as whether to clear function results or not.\n   */\n  context_management?: BetaContextManagementConfig | null;\n\n  /**\n   * Body param: MCP servers to be utilized in this request\n   */\n  mcp_servers?: Array<BetaRequestMCPServerURLDefinition>;\n\n  /**\n   * Body param: Configuration options for the model's output. Controls aspects like\n   * how much effort the model puts into its response.\n   */\n  output_config?: BetaOutputConfig;\n\n  /**\n   * Body param: A schema to specify Claude's output format in responses.\n   */\n  output_format?: BetaJSONOutputFormat | null;\n\n  /**\n   * Body param: System prompt.\n   *\n   * A system prompt is a way of providing context and instructions to Claude, such\n   * as specifying a particular goal or role. See our\n   * [guide to system prompts](https://docs.claude.com/en/docs/system-prompts).\n   */\n  system?: string | Array<BetaTextBlockParam>;\n\n  /**\n   * Body param: Configuration for enabling Claude's extended thinking.\n   *\n   * When enabled, responses include `thinking` content blocks showing Claude's\n   * thinking process before the final answer. Requires a minimum budget of 1,024\n   * tokens and counts towards your `max_tokens` limit.\n   *\n   * See\n   * [extended thinking](https://docs.claude.com/en/docs/build-with-claude/extended-thinking)\n   * for details.\n   */\n  thinking?: BetaThinkingConfigParam;\n\n  /**\n   * Body param: How the model should use the provided tools. The model can use a\n   * specific tool, any available tool, decide by itself, or not use tools at all.\n   */\n  tool_choice?: BetaToolChoice;\n\n  /**\n   * Body param: Definitions of tools that the model may use.\n   *\n   * If you include `tools` in your API request, the model may return `tool_use`\n   * content blocks that represent the model's use of those tools. You can then run\n   * those tools using the tool input generated by the model and then optionally\n   * return results back to the model using `tool_result` content blocks.\n   *\n   * There are two types of tools: **client tools** and **server tools**. The\n   * behavior described below applies to client tools. For\n   * [server tools](https://docs.claude.com/en/docs/agents-and-tools/tool-use/overview#server-tools),\n   * see their individual documentation as each has its own behavior (e.g., the\n   * [web search tool](https://docs.claude.com/en/docs/agents-and-tools/tool-use/web-search-tool)).\n   *\n   * Each tool definition includes:\n   *\n   * - `name`: Name of the tool.\n   * - `description`: Optional, but strongly-recommended description of the tool.\n   * - `input_schema`: [JSON schema](https://json-schema.org/draft/2020-12) for the\n   *   tool `input` shape that the model will produce in `tool_use` output content\n   *   blocks.\n   *\n   * For example, if you defined `tools` as:\n   *\n   * ```json\n   * [\n   *   {\n   *     \"name\": \"get_stock_price\",\n   *     \"description\": \"Get the current stock price for a given ticker symbol.\",\n   *     \"input_schema\": {\n   *       \"type\": \"object\",\n   *       \"properties\": {\n   *         \"ticker\": {\n   *           \"type\": \"string\",\n   *           \"description\": \"The stock ticker symbol, e.g. AAPL for Apple Inc.\"\n   *         }\n   *       },\n   *       \"required\": [\"ticker\"]\n   *     }\n   *   }\n   * ]\n   * ```\n   *\n   * And then asked the model \"What's the S&P 500 at today?\", the model might produce\n   * `tool_use` content blocks in the response like this:\n   *\n   * ```json\n   * [\n   *   {\n   *     \"type\": \"tool_use\",\n   *     \"id\": \"toolu_01D7FLrfh4GYq7yT1ULFeyMV\",\n   *     \"name\": \"get_stock_price\",\n   *     \"input\": { \"ticker\": \"^GSPC\" }\n   *   }\n   * ]\n   * ```\n   *\n   * You might then run your `get_stock_price` tool with `{\"ticker\": \"^GSPC\"}` as an\n   * input, and return the following back to the model in a subsequent `user`\n   * message:\n   *\n   * ```json\n   * [\n   *   {\n   *     \"type\": \"tool_result\",\n   *     \"tool_use_id\": \"toolu_01D7FLrfh4GYq7yT1ULFeyMV\",\n   *     \"content\": \"259.75 USD\"\n   *   }\n   * ]\n   * ```\n   *\n   * Tools can be used for workflows that include running client-side tools and\n   * functions, or more generally whenever you want the model to produce a particular\n   * JSON structure of output.\n   *\n   * See our [guide](https://docs.claude.com/en/docs/tool-use) for more details.\n   */\n  tools?: Array<\n    | BetaTool\n    | BetaToolBash20241022\n    | BetaToolBash20250124\n    | BetaCodeExecutionTool20250522\n    | BetaCodeExecutionTool20250825\n    | BetaToolComputerUse20241022\n    | BetaMemoryTool20250818\n    | BetaToolComputerUse20250124\n    | BetaToolTextEditor20241022\n    | BetaToolComputerUse20251124\n    | BetaToolTextEditor20250124\n    | BetaToolTextEditor20250429\n    | BetaToolTextEditor20250728\n    | BetaWebSearchTool20250305\n    | BetaWebFetchTool20250910\n    | BetaToolSearchToolBm25_20251119\n    | BetaToolSearchToolRegex20251119\n    | BetaMCPToolset\n  >;\n\n  /**\n   * Header param: Optional header to specify the beta version(s) you want to use.\n   */\n  betas?: Array<BetaAPI.AnthropicBeta>;\n}\n\nexport { BetaToolRunner, type BetaToolRunnerParams } from '../../../lib/tools/BetaToolRunner';\n\nMessages.Batches = Batches;\n\nMessages.BetaToolRunner = BetaToolRunner;\n\nexport declare namespace Messages {\n  export {\n    type BetaAllThinkingTurns as BetaAllThinkingTurns,\n    type BetaBase64ImageSource as BetaBase64ImageSource,\n    type BetaBase64PDFSource as BetaBase64PDFSource,\n    type BetaBashCodeExecutionOutputBlock as BetaBashCodeExecutionOutputBlock,\n    type BetaBashCodeExecutionOutputBlockParam as BetaBashCodeExecutionOutputBlockParam,\n    type BetaBashCodeExecutionResultBlock as BetaBashCodeExecutionResultBlock,\n    type BetaBashCodeExecutionResultBlockParam as BetaBashCodeExecutionResultBlockParam,\n    type BetaBashCodeExecutionToolResultBlock as BetaBashCodeExecutionToolResultBlock,\n    type BetaBashCodeExecutionToolResultBlockParam as BetaBashCodeExecutionToolResultBlockParam,\n    type BetaBashCodeExecutionToolResultError as BetaBashCodeExecutionToolResultError,\n    type BetaBashCodeExecutionToolResultErrorParam as BetaBashCodeExecutionToolResultErrorParam,\n    type BetaCacheControlEphemeral as BetaCacheControlEphemeral,\n    type BetaCacheCreation as BetaCacheCreation,\n    type BetaCitationCharLocation as BetaCitationCharLocation,\n    type BetaCitationCharLocationParam as BetaCitationCharLocationParam,\n    type BetaCitationConfig as BetaCitationConfig,\n    type BetaCitationContentBlockLocation as BetaCitationContentBlockLocation,\n    type BetaCitationContentBlockLocationParam as BetaCitationContentBlockLocationParam,\n    type BetaCitationPageLocation as BetaCitationPageLocation,\n    type BetaCitationPageLocationParam as BetaCitationPageLocationParam,\n    type BetaCitationSearchResultLocation as BetaCitationSearchResultLocation,\n    type BetaCitationSearchResultLocationParam as BetaCitationSearchResultLocationParam,\n    type BetaCitationWebSearchResultLocationParam as BetaCitationWebSearchResultLocationParam,\n    type BetaCitationsConfigParam as BetaCitationsConfigParam,\n    type BetaCitationsDelta as BetaCitationsDelta,\n    type BetaCitationsWebSearchResultLocation as BetaCitationsWebSearchResultLocation,\n    type BetaClearThinking20251015Edit as BetaClearThinking20251015Edit,\n    type BetaClearThinking20251015EditResponse as BetaClearThinking20251015EditResponse,\n    type BetaClearToolUses20250919Edit as BetaClearToolUses20250919Edit,\n    type BetaClearToolUses20250919EditResponse as BetaClearToolUses20250919EditResponse,\n    type BetaCodeExecutionOutputBlock as BetaCodeExecutionOutputBlock,\n    type BetaCodeExecutionOutputBlockParam as BetaCodeExecutionOutputBlockParam,\n    type BetaCodeExecutionResultBlock as BetaCodeExecutionResultBlock,\n    type BetaCodeExecutionResultBlockParam as BetaCodeExecutionResultBlockParam,\n    type BetaCodeExecutionTool20250522 as BetaCodeExecutionTool20250522,\n    type BetaCodeExecutionTool20250825 as BetaCodeExecutionTool20250825,\n    type BetaCodeExecutionToolResultBlock as BetaCodeExecutionToolResultBlock,\n    type BetaCodeExecutionToolResultBlockContent as BetaCodeExecutionToolResultBlockContent,\n    type BetaCodeExecutionToolResultBlockParam as BetaCodeExecutionToolResultBlockParam,\n    type BetaCodeExecutionToolResultBlockParamContent as BetaCodeExecutionToolResultBlockParamContent,\n    type BetaCodeExecutionToolResultError as BetaCodeExecutionToolResultError,\n    type BetaCodeExecutionToolResultErrorCode as BetaCodeExecutionToolResultErrorCode,\n    type BetaCodeExecutionToolResultErrorParam as BetaCodeExecutionToolResultErrorParam,\n    type BetaContainer as BetaContainer,\n    type BetaContainerParams as BetaContainerParams,\n    type BetaContainerUploadBlock as BetaContainerUploadBlock,\n    type BetaContainerUploadBlockParam as BetaContainerUploadBlockParam,\n    type BetaContentBlock as BetaContentBlock,\n    type BetaContentBlockParam as BetaContentBlockParam,\n    type BetaContentBlockSource as BetaContentBlockSource,\n    type BetaContentBlockSourceContent as BetaContentBlockSourceContent,\n    type BetaContextManagementConfig as BetaContextManagementConfig,\n    type BetaContextManagementResponse as BetaContextManagementResponse,\n    type BetaCountTokensContextManagementResponse as BetaCountTokensContextManagementResponse,\n    type BetaDirectCaller as BetaDirectCaller,\n    type BetaDocumentBlock as BetaDocumentBlock,\n    type BetaFileDocumentSource as BetaFileDocumentSource,\n    type BetaFileImageSource as BetaFileImageSource,\n    type BetaImageBlockParam as BetaImageBlockParam,\n    type BetaInputJSONDelta as BetaInputJSONDelta,\n    type BetaInputTokensClearAtLeast as BetaInputTokensClearAtLeast,\n    type BetaInputTokensTrigger as BetaInputTokensTrigger,\n    type BetaJSONOutputFormat as BetaJSONOutputFormat,\n    type BetaMCPToolConfig as BetaMCPToolConfig,\n    type BetaMCPToolDefaultConfig as BetaMCPToolDefaultConfig,\n    type BetaMCPToolResultBlock as BetaMCPToolResultBlock,\n    type BetaMCPToolUseBlock as BetaMCPToolUseBlock,\n    type BetaMCPToolUseBlockParam as BetaMCPToolUseBlockParam,\n    type BetaMCPToolset as BetaMCPToolset,\n    type BetaMemoryTool20250818 as BetaMemoryTool20250818,\n    type BetaMemoryTool20250818Command as BetaMemoryTool20250818Command,\n    type BetaMemoryTool20250818CreateCommand as BetaMemoryTool20250818CreateCommand,\n    type BetaMemoryTool20250818DeleteCommand as BetaMemoryTool20250818DeleteCommand,\n    type BetaMemoryTool20250818InsertCommand as BetaMemoryTool20250818InsertCommand,\n    type BetaMemoryTool20250818RenameCommand as BetaMemoryTool20250818RenameCommand,\n    type BetaMemoryTool20250818StrReplaceCommand as BetaMemoryTool20250818StrReplaceCommand,\n    type BetaMemoryTool20250818ViewCommand as BetaMemoryTool20250818ViewCommand,\n    type BetaMessage as BetaMessage,\n    type BetaMessageDeltaUsage as BetaMessageDeltaUsage,\n    type BetaMessageParam as BetaMessageParam,\n    type BetaMessageTokensCount as BetaMessageTokensCount,\n    type BetaMetadata as BetaMetadata,\n    type BetaOutputConfig as BetaOutputConfig,\n    type BetaPlainTextSource as BetaPlainTextSource,\n    type BetaRawContentBlockDelta as BetaRawContentBlockDelta,\n    type BetaRawContentBlockDeltaEvent as BetaRawContentBlockDeltaEvent,\n    type BetaRawContentBlockStartEvent as BetaRawContentBlockStartEvent,\n    type BetaRawContentBlockStopEvent as BetaRawContentBlockStopEvent,\n    type BetaRawMessageDeltaEvent as BetaRawMessageDeltaEvent,\n    type BetaRawMessageStartEvent as BetaRawMessageStartEvent,\n    type BetaRawMessageStopEvent as BetaRawMessageStopEvent,\n    type BetaRawMessageStreamEvent as BetaRawMessageStreamEvent,\n    type BetaRedactedThinkingBlock as BetaRedactedThinkingBlock,\n    type BetaRedactedThinkingBlockParam as BetaRedactedThinkingBlockParam,\n    type BetaRequestDocumentBlock as BetaRequestDocumentBlock,\n    type BetaRequestMCPServerToolConfiguration as BetaRequestMCPServerToolConfiguration,\n    type BetaRequestMCPServerURLDefinition as BetaRequestMCPServerURLDefinition,\n    type BetaRequestMCPToolResultBlockParam as BetaRequestMCPToolResultBlockParam,\n    type BetaSearchResultBlockParam as BetaSearchResultBlockParam,\n    type BetaServerToolCaller as BetaServerToolCaller,\n    type BetaServerToolUsage as BetaServerToolUsage,\n    type BetaServerToolUseBlock as BetaServerToolUseBlock,\n    type BetaServerToolUseBlockParam as BetaServerToolUseBlockParam,\n    type BetaSignatureDelta as BetaSignatureDelta,\n    type BetaSkill as BetaSkill,\n    type BetaSkillParams as BetaSkillParams,\n    type BetaStopReason as BetaStopReason,\n    type BetaTextBlock as BetaTextBlock,\n    type BetaTextBlockParam as BetaTextBlockParam,\n    type BetaTextCitation as BetaTextCitation,\n    type BetaTextCitationParam as BetaTextCitationParam,\n    type BetaTextDelta as BetaTextDelta,\n    type BetaTextEditorCodeExecutionCreateResultBlock as BetaTextEditorCodeExecutionCreateResultBlock,\n    type BetaTextEditorCodeExecutionCreateResultBlockParam as BetaTextEditorCodeExecutionCreateResultBlockParam,\n    type BetaTextEditorCodeExecutionStrReplaceResultBlock as BetaTextEditorCodeExecutionStrReplaceResultBlock,\n    type BetaTextEditorCodeExecutionStrReplaceResultBlockParam as BetaTextEditorCodeExecutionStrReplaceResultBlockParam,\n    type BetaTextEditorCodeExecutionToolResultBlock as BetaTextEditorCodeExecutionToolResultBlock,\n    type BetaTextEditorCodeExecutionToolResultBlockParam as BetaTextEditorCodeExecutionToolResultBlockParam,\n    type BetaTextEditorCodeExecutionToolResultError as BetaTextEditorCodeExecutionToolResultError,\n    type BetaTextEditorCodeExecutionToolResultErrorParam as BetaTextEditorCodeExecutionToolResultErrorParam,\n    type BetaTextEditorCodeExecutionViewResultBlock as BetaTextEditorCodeExecutionViewResultBlock,\n    type BetaTextEditorCodeExecutionViewResultBlockParam as BetaTextEditorCodeExecutionViewResultBlockParam,\n    type BetaThinkingBlock as BetaThinkingBlock,\n    type BetaThinkingBlockParam as BetaThinkingBlockParam,\n    type BetaThinkingConfigDisabled as BetaThinkingConfigDisabled,\n    type BetaThinkingConfigEnabled as BetaThinkingConfigEnabled,\n    type BetaThinkingConfigParam as BetaThinkingConfigParam,\n    type BetaThinkingDelta as BetaThinkingDelta,\n    type BetaThinkingTurns as BetaThinkingTurns,\n    type BetaTool as BetaTool,\n    type BetaToolBash20241022 as BetaToolBash20241022,\n    type BetaToolBash20250124 as BetaToolBash20250124,\n    type BetaToolChoice as BetaToolChoice,\n    type BetaToolChoiceAny as BetaToolChoiceAny,\n    type BetaToolChoiceAuto as BetaToolChoiceAuto,\n    type BetaToolChoiceNone as BetaToolChoiceNone,\n    type BetaToolChoiceTool as BetaToolChoiceTool,\n    type BetaToolComputerUse20241022 as BetaToolComputerUse20241022,\n    type BetaToolComputerUse20250124 as BetaToolComputerUse20250124,\n    type BetaToolComputerUse20251124 as BetaToolComputerUse20251124,\n    type BetaToolReferenceBlock as BetaToolReferenceBlock,\n    type BetaToolReferenceBlockParam as BetaToolReferenceBlockParam,\n    type BetaToolResultBlockParam as BetaToolResultBlockParam,\n    type BetaToolResultContentBlockParam as BetaToolResultContentBlockParam,\n    type BetaToolSearchToolBm25_20251119 as BetaToolSearchToolBm25_20251119,\n    type BetaToolSearchToolRegex20251119 as BetaToolSearchToolRegex20251119,\n    type BetaToolSearchToolResultBlock as BetaToolSearchToolResultBlock,\n    type BetaToolSearchToolResultBlockParam as BetaToolSearchToolResultBlockParam,\n    type BetaToolSearchToolResultError as BetaToolSearchToolResultError,\n    type BetaToolSearchToolResultErrorParam as BetaToolSearchToolResultErrorParam,\n    type BetaToolSearchToolSearchResultBlock as BetaToolSearchToolSearchResultBlock,\n    type BetaToolSearchToolSearchResultBlockParam as BetaToolSearchToolSearchResultBlockParam,\n    type BetaToolTextEditor20241022 as BetaToolTextEditor20241022,\n    type BetaToolTextEditor20250124 as BetaToolTextEditor20250124,\n    type BetaToolTextEditor20250429 as BetaToolTextEditor20250429,\n    type BetaToolTextEditor20250728 as BetaToolTextEditor20250728,\n    type BetaToolUnion as BetaToolUnion,\n    type BetaToolUseBlock as BetaToolUseBlock,\n    type BetaToolUseBlockParam as BetaToolUseBlockParam,\n    type BetaToolUsesKeep as BetaToolUsesKeep,\n    type BetaToolUsesTrigger as BetaToolUsesTrigger,\n    type BetaURLImageSource as BetaURLImageSource,\n    type BetaURLPDFSource as BetaURLPDFSource,\n    type BetaUsage as BetaUsage,\n    type BetaWebFetchBlock as BetaWebFetchBlock,\n    type BetaWebFetchBlockParam as BetaWebFetchBlockParam,\n    type BetaWebFetchTool20250910 as BetaWebFetchTool20250910,\n    type BetaWebFetchToolResultBlock as BetaWebFetchToolResultBlock,\n    type BetaWebFetchToolResultBlockParam as BetaWebFetchToolResultBlockParam,\n    type BetaWebFetchToolResultErrorBlock as BetaWebFetchToolResultErrorBlock,\n    type BetaWebFetchToolResultErrorBlockParam as BetaWebFetchToolResultErrorBlockParam,\n    type BetaWebFetchToolResultErrorCode as BetaWebFetchToolResultErrorCode,\n    type BetaWebSearchResultBlock as BetaWebSearchResultBlock,\n    type BetaWebSearchResultBlockParam as BetaWebSearchResultBlockParam,\n    type BetaWebSearchTool20250305 as BetaWebSearchTool20250305,\n    type BetaWebSearchToolRequestError as BetaWebSearchToolRequestError,\n    type BetaWebSearchToolResultBlock as BetaWebSearchToolResultBlock,\n    type BetaWebSearchToolResultBlockContent as BetaWebSearchToolResultBlockContent,\n    type BetaWebSearchToolResultBlockParam as BetaWebSearchToolResultBlockParam,\n    type BetaWebSearchToolResultBlockParamContent as BetaWebSearchToolResultBlockParamContent,\n    type BetaWebSearchToolResultError as BetaWebSearchToolResultError,\n    type BetaWebSearchToolResultErrorCode as BetaWebSearchToolResultErrorCode,\n    type BetaBase64PDFBlock as BetaBase64PDFBlock,\n    type MessageCreateParams as MessageCreateParams,\n    type MessageCreateParamsNonStreaming as MessageCreateParamsNonStreaming,\n    type MessageCreateParamsStreaming as MessageCreateParamsStreaming,\n    type MessageCountTokensParams as MessageCountTokensParams,\n  };\n\n  export { type BetaToolRunnerParams, BetaToolRunner };\n\n  export {\n    Batches as Batches,\n    type BetaDeletedMessageBatch as BetaDeletedMessageBatch,\n    type BetaMessageBatch as BetaMessageBatch,\n    type BetaMessageBatchCanceledResult as BetaMessageBatchCanceledResult,\n    type BetaMessageBatchErroredResult as BetaMessageBatchErroredResult,\n    type BetaMessageBatchExpiredResult as BetaMessageBatchExpiredResult,\n    type BetaMessageBatchIndividualResponse as BetaMessageBatchIndividualResponse,\n    type BetaMessageBatchRequestCounts as BetaMessageBatchRequestCounts,\n    type BetaMessageBatchResult as BetaMessageBatchResult,\n    type BetaMessageBatchSucceededResult as BetaMessageBatchSucceededResult,\n    type BetaMessageBatchesPage as BetaMessageBatchesPage,\n    type BatchCreateParams as BatchCreateParams,\n    type BatchRetrieveParams as BatchRetrieveParams,\n    type BatchListParams as BatchListParams,\n    type BatchDeleteParams as BatchDeleteParams,\n    type BatchCancelParams as BatchCancelParams,\n    type BatchResultsParams as BatchResultsParams,\n  };\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../core/resource';\nimport * as CompletionsAPI from './completions';\nimport * as BetaAPI from './beta/beta';\nimport * as MessagesAPI from './messages/messages';\nimport { APIPromise } from '../core/api-promise';\nimport { Stream } from '../core/streaming';\nimport { buildHeaders } from '../internal/headers';\nimport { RequestOptions } from '../internal/request-options';\n\nexport class Completions extends APIResource {\n  /**\n   * [Legacy] Create a Text Completion.\n   *\n   * The Text Completions API is a legacy API. We recommend using the\n   * [Messages API](https://docs.claude.com/en/api/messages) going forward.\n   *\n   * Future models and features will not be compatible with Text Completions. See our\n   * [migration guide](https://docs.claude.com/en/api/migrating-from-text-completions-to-messages)\n   * for guidance in migrating from Text Completions to Messages.\n   *\n   * @example\n   * ```ts\n   * const completion = await client.completions.create({\n   *   max_tokens_to_sample: 256,\n   *   model: 'claude-opus-4-5-20251101',\n   *   prompt: '\\n\\nHuman: Hello, world!\\n\\nAssistant:',\n   * });\n   * ```\n   */\n  create(params: CompletionCreateParamsNonStreaming, options?: RequestOptions): APIPromise<Completion>;\n  create(params: CompletionCreateParamsStreaming, options?: RequestOptions): APIPromise<Stream<Completion>>;\n  create(\n    params: CompletionCreateParamsBase,\n    options?: RequestOptions,\n  ): APIPromise<Stream<Completion> | Completion>;\n  create(\n    params: CompletionCreateParams,\n    options?: RequestOptions,\n  ): APIPromise<Completion> | APIPromise<Stream<Completion>> {\n    const { betas, ...body } = params;\n    return this._client.post('/v1/complete', {\n      body,\n      timeout: (this._client as any)._options.timeout ?? 600000,\n      ...options,\n      headers: buildHeaders([\n        { ...(betas?.toString() != null ? { 'anthropic-beta': betas?.toString() } : undefined) },\n        options?.headers,\n      ]),\n      stream: params.stream ?? false,\n    }) as APIPromise<Completion> | APIPromise<Stream<Completion>>;\n  }\n}\n\nexport interface Completion {\n  /**\n   * Unique object identifier.\n   *\n   * The format and length of IDs may change over time.\n   */\n  id: string;\n\n  /**\n   * The resulting completion up to and excluding the stop sequences.\n   */\n  completion: string;\n\n  /**\n   * The model that will complete your prompt.\\n\\nSee\n   * [models](https://docs.anthropic.com/en/docs/models-overview) for additional\n   * details and options.\n   */\n  model: MessagesAPI.Model;\n\n  /**\n   * The reason that we stopped.\n   *\n   * This may be one the following values:\n   *\n   * - `\"stop_sequence\"`: we reached a stop sequence  either provided by you via the\n   *   `stop_sequences` parameter, or a stop sequence built into the model\n   * - `\"max_tokens\"`: we exceeded `max_tokens_to_sample` or the model's maximum\n   */\n  stop_reason: string | null;\n\n  /**\n   * Object type.\n   *\n   * For Text Completions, this is always `\"completion\"`.\n   */\n  type: 'completion';\n}\n\nexport type CompletionCreateParams = CompletionCreateParamsNonStreaming | CompletionCreateParamsStreaming;\n\nexport interface CompletionCreateParamsBase {\n  /**\n   * Body param: The maximum number of tokens to generate before stopping.\n   *\n   * Note that our models may stop _before_ reaching this maximum. This parameter\n   * only specifies the absolute maximum number of tokens to generate.\n   */\n  max_tokens_to_sample: number;\n\n  /**\n   * Body param: The model that will complete your prompt.\\n\\nSee\n   * [models](https://docs.anthropic.com/en/docs/models-overview) for additional\n   * details and options.\n   */\n  model: MessagesAPI.Model;\n\n  /**\n   * Body param: The prompt that you want Claude to complete.\n   *\n   * For proper response generation you will need to format your prompt using\n   * alternating `\\n\\nHuman:` and `\\n\\nAssistant:` conversational turns. For example:\n   *\n   * ```\n   * \"\\n\\nHuman: {userQuestion}\\n\\nAssistant:\"\n   * ```\n   *\n   * See [prompt validation](https://docs.claude.com/en/api/prompt-validation) and\n   * our guide to [prompt design](https://docs.claude.com/en/docs/intro-to-prompting)\n   * for more details.\n   */\n  prompt: string;\n\n  /**\n   * Body param: An object describing metadata about the request.\n   */\n  metadata?: MessagesAPI.Metadata;\n\n  /**\n   * Body param: Sequences that will cause the model to stop generating.\n   *\n   * Our models stop on `\"\\n\\nHuman:\"`, and may include additional built-in stop\n   * sequences in the future. By providing the stop_sequences parameter, you may\n   * include additional strings that will cause the model to stop generating.\n   */\n  stop_sequences?: Array<string>;\n\n  /**\n   * Body param: Whether to incrementally stream the response using server-sent\n   * events.\n   *\n   * See [streaming](https://docs.claude.com/en/api/streaming) for details.\n   */\n  stream?: boolean;\n\n  /**\n   * Body param: Amount of randomness injected into the response.\n   *\n   * Defaults to `1.0`. Ranges from `0.0` to `1.0`. Use `temperature` closer to `0.0`\n   * for analytical / multiple choice, and closer to `1.0` for creative and\n   * generative tasks.\n   *\n   * Note that even with `temperature` of `0.0`, the results will not be fully\n   * deterministic.\n   */\n  temperature?: number;\n\n  /**\n   * Body param: Only sample from the top K options for each subsequent token.\n   *\n   * Used to remove \"long tail\" low probability responses.\n   * [Learn more technical details here](https://towardsdatascience.com/how-to-sample-from-language-models-682bceb97277).\n   *\n   * Recommended for advanced use cases only. You usually only need to use\n   * `temperature`.\n   */\n  top_k?: number;\n\n  /**\n   * Body param: Use nucleus sampling.\n   *\n   * In nucleus sampling, we compute the cumulative distribution over all the options\n   * for each subsequent token in decreasing probability order and cut it off once it\n   * reaches a particular probability specified by `top_p`. You should either alter\n   * `temperature` or `top_p`, but not both.\n   *\n   * Recommended for advanced use cases only. You usually only need to use\n   * `temperature`.\n   */\n  top_p?: number;\n\n  /**\n   * Header param: Optional header to specify the beta version(s) you want to use.\n   */\n  betas?: Array<BetaAPI.AnthropicBeta>;\n}\n\nexport namespace CompletionCreateParams {\n  /**\n   * @deprecated use `Anthropic.Messages.Metadata` instead\n   */\n  export type Metadata = MessagesAPI.Metadata;\n\n  export type CompletionCreateParamsNonStreaming = CompletionsAPI.CompletionCreateParamsNonStreaming;\n  export type CompletionCreateParamsStreaming = CompletionsAPI.CompletionCreateParamsStreaming;\n}\n\nexport interface CompletionCreateParamsNonStreaming extends CompletionCreateParamsBase {\n  /**\n   * Body param: Whether to incrementally stream the response using server-sent\n   * events.\n   *\n   * See [streaming](https://docs.claude.com/en/api/streaming) for details.\n   */\n  stream?: false;\n}\n\nexport interface CompletionCreateParamsStreaming extends CompletionCreateParamsBase {\n  /**\n   * Body param: Whether to incrementally stream the response using server-sent\n   * events.\n   *\n   * See [streaming](https://docs.claude.com/en/api/streaming) for details.\n   */\n  stream: true;\n}\n\nexport declare namespace Completions {\n  export {\n    type Completion as Completion,\n    type CompletionCreateParams as CompletionCreateParams,\n    type CompletionCreateParamsNonStreaming as CompletionCreateParamsNonStreaming,\n    type CompletionCreateParamsStreaming as CompletionCreateParamsStreaming,\n  };\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../../core/resource';\nimport * as BetaAPI from './beta';\nimport { APIPromise } from '../../core/api-promise';\nimport { Page, type PageParams, PagePromise } from '../../core/pagination';\nimport { buildHeaders } from '../../internal/headers';\nimport { RequestOptions } from '../../internal/request-options';\nimport { path } from '../../internal/utils/path';\n\nexport class Models extends APIResource {\n  /**\n   * Get a specific model.\n   *\n   * The Models API response can be used to determine information about a specific\n   * model or resolve a model alias to a model ID.\n   *\n   * @example\n   * ```ts\n   * const betaModelInfo = await client.beta.models.retrieve(\n   *   'model_id',\n   * );\n   * ```\n   */\n  retrieve(\n    modelID: string,\n    params: ModelRetrieveParams | null | undefined = {},\n    options?: RequestOptions,\n  ): APIPromise<BetaModelInfo> {\n    const { betas } = params ?? {};\n    return this._client.get(path`/v1/models/${modelID}?beta=true`, {\n      ...options,\n      headers: buildHeaders([\n        { ...(betas?.toString() != null ? { 'anthropic-beta': betas?.toString() } : undefined) },\n        options?.headers,\n      ]),\n    });\n  }\n\n  /**\n   * List available models.\n   *\n   * The Models API response can be used to determine which models are available for\n   * use in the API. More recently released models are listed first.\n   *\n   * @example\n   * ```ts\n   * // Automatically fetches more pages as needed.\n   * for await (const betaModelInfo of client.beta.models.list()) {\n   *   // ...\n   * }\n   * ```\n   */\n  list(\n    params: ModelListParams | null | undefined = {},\n    options?: RequestOptions,\n  ): PagePromise<BetaModelInfosPage, BetaModelInfo> {\n    const { betas, ...query } = params ?? {};\n    return this._client.getAPIList('/v1/models?beta=true', Page<BetaModelInfo>, {\n      query,\n      ...options,\n      headers: buildHeaders([\n        { ...(betas?.toString() != null ? { 'anthropic-beta': betas?.toString() } : undefined) },\n        options?.headers,\n      ]),\n    });\n  }\n}\n\nexport type BetaModelInfosPage = Page<BetaModelInfo>;\n\nexport interface BetaModelInfo {\n  /**\n   * Unique model identifier.\n   */\n  id: string;\n\n  /**\n   * RFC 3339 datetime string representing the time at which the model was released.\n   * May be set to an epoch value if the release date is unknown.\n   */\n  created_at: string;\n\n  /**\n   * A human-readable name for the model.\n   */\n  display_name: string;\n\n  /**\n   * Object type.\n   *\n   * For Models, this is always `\"model\"`.\n   */\n  type: 'model';\n}\n\nexport interface ModelRetrieveParams {\n  /**\n   * Optional header to specify the beta version(s) you want to use.\n   */\n  betas?: Array<BetaAPI.AnthropicBeta>;\n}\n\nexport interface ModelListParams extends PageParams {\n  /**\n   * Header param: Optional header to specify the beta version(s) you want to use.\n   */\n  betas?: Array<BetaAPI.AnthropicBeta>;\n}\n\nexport declare namespace Models {\n  export {\n    type BetaModelInfo as BetaModelInfo,\n    type BetaModelInfosPage as BetaModelInfosPage,\n    type ModelRetrieveParams as ModelRetrieveParams,\n    type ModelListParams as ModelListParams,\n  };\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { VERSION } from '../version';\n\nexport const isRunningInBrowser = () => {\n  return (\n    // @ts-ignore\n    typeof window !== 'undefined' &&\n    // @ts-ignore\n    typeof window.document !== 'undefined' &&\n    // @ts-ignore\n    typeof navigator !== 'undefined'\n  );\n};\n\ntype DetectedPlatform = 'deno' | 'node' | 'edge' | 'unknown';\n\n/**\n * Note this does not detect 'browser'; for that, use getBrowserInfo().\n */\nfunction getDetectedPlatform(): DetectedPlatform {\n  if (typeof Deno !== 'undefined' && Deno.build != null) {\n    return 'deno';\n  }\n  if (typeof EdgeRuntime !== 'undefined') {\n    return 'edge';\n  }\n  if (\n    Object.prototype.toString.call(\n      typeof (globalThis as any).process !== 'undefined' ? (globalThis as any).process : 0,\n    ) === '[object process]'\n  ) {\n    return 'node';\n  }\n  return 'unknown';\n}\n\ndeclare const Deno: any;\ndeclare const EdgeRuntime: any;\ntype Arch = 'x32' | 'x64' | 'arm' | 'arm64' | `other:${string}` | 'unknown';\ntype PlatformName =\n  | 'MacOS'\n  | 'Linux'\n  | 'Windows'\n  | 'FreeBSD'\n  | 'OpenBSD'\n  | 'iOS'\n  | 'Android'\n  | `Other:${string}`\n  | 'Unknown';\ntype Browser = 'ie' | 'edge' | 'chrome' | 'firefox' | 'safari';\ntype PlatformProperties = {\n  'X-Stainless-Lang': 'js';\n  'X-Stainless-Package-Version': string;\n  'X-Stainless-OS': PlatformName;\n  'X-Stainless-Arch': Arch;\n  'X-Stainless-Runtime': 'node' | 'deno' | 'edge' | `browser:${Browser}` | 'unknown';\n  'X-Stainless-Runtime-Version': string;\n};\nconst getPlatformProperties = (): PlatformProperties => {\n  const detectedPlatform = getDetectedPlatform();\n  if (detectedPlatform === 'deno') {\n    return {\n      'X-Stainless-Lang': 'js',\n      'X-Stainless-Package-Version': VERSION,\n      'X-Stainless-OS': normalizePlatform(Deno.build.os),\n      'X-Stainless-Arch': normalizeArch(Deno.build.arch),\n      'X-Stainless-Runtime': 'deno',\n      'X-Stainless-Runtime-Version':\n        typeof Deno.version === 'string' ? Deno.version : Deno.version?.deno ?? 'unknown',\n    };\n  }\n  if (typeof EdgeRuntime !== 'undefined') {\n    return {\n      'X-Stainless-Lang': 'js',\n      'X-Stainless-Package-Version': VERSION,\n      'X-Stainless-OS': 'Unknown',\n      'X-Stainless-Arch': `other:${EdgeRuntime}`,\n      'X-Stainless-Runtime': 'edge',\n      'X-Stainless-Runtime-Version': (globalThis as any).process.version,\n    };\n  }\n  // Check if Node.js\n  if (detectedPlatform === 'node') {\n    return {\n      'X-Stainless-Lang': 'js',\n      'X-Stainless-Package-Version': VERSION,\n      'X-Stainless-OS': normalizePlatform((globalThis as any).process.platform ?? 'unknown'),\n      'X-Stainless-Arch': normalizeArch((globalThis as any).process.arch ?? 'unknown'),\n      'X-Stainless-Runtime': 'node',\n      'X-Stainless-Runtime-Version': (globalThis as any).process.version ?? 'unknown',\n    };\n  }\n\n  const browserInfo = getBrowserInfo();\n  if (browserInfo) {\n    return {\n      'X-Stainless-Lang': 'js',\n      'X-Stainless-Package-Version': VERSION,\n      'X-Stainless-OS': 'Unknown',\n      'X-Stainless-Arch': 'unknown',\n      'X-Stainless-Runtime': `browser:${browserInfo.browser}`,\n      'X-Stainless-Runtime-Version': browserInfo.version,\n    };\n  }\n\n  // TODO add support for Cloudflare workers, etc.\n  return {\n    'X-Stainless-Lang': 'js',\n    'X-Stainless-Package-Version': VERSION,\n    'X-Stainless-OS': 'Unknown',\n    'X-Stainless-Arch': 'unknown',\n    'X-Stainless-Runtime': 'unknown',\n    'X-Stainless-Runtime-Version': 'unknown',\n  };\n};\n\ntype BrowserInfo = {\n  browser: Browser;\n  version: string;\n};\n\ndeclare const navigator: { userAgent: string } | undefined;\n\n// Note: modified from https://github.com/JS-DevTools/host-environment/blob/b1ab79ecde37db5d6e163c050e54fe7d287d7c92/src/isomorphic.browser.ts\nfunction getBrowserInfo(): BrowserInfo | null {\n  if (typeof navigator === 'undefined' || !navigator) {\n    return null;\n  }\n\n  // NOTE: The order matters here!\n  const browserPatterns = [\n    { key: 'edge' as const, pattern: /Edge(?:\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/ },\n    { key: 'ie' as const, pattern: /MSIE(?:\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/ },\n    { key: 'ie' as const, pattern: /Trident(?:.*rv\\:(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/ },\n    { key: 'chrome' as const, pattern: /Chrome(?:\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/ },\n    { key: 'firefox' as const, pattern: /Firefox(?:\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/ },\n    { key: 'safari' as const, pattern: /(?:Version\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?(?:\\W+Mobile\\S*)?\\W+Safari/ },\n  ];\n\n  // Find the FIRST matching browser\n  for (const { key, pattern } of browserPatterns) {\n    const match = pattern.exec(navigator.userAgent);\n    if (match) {\n      const major = match[1] || 0;\n      const minor = match[2] || 0;\n      const patch = match[3] || 0;\n\n      return { browser: key, version: `${major}.${minor}.${patch}` };\n    }\n  }\n\n  return null;\n}\n\nconst normalizeArch = (arch: string): Arch => {\n  // Node docs:\n  // - https://nodejs.org/api/process.html#processarch\n  // Deno docs:\n  // - https://doc.deno.land/deno/stable/~/Deno.build\n  if (arch === 'x32') return 'x32';\n  if (arch === 'x86_64' || arch === 'x64') return 'x64';\n  if (arch === 'arm') return 'arm';\n  if (arch === 'aarch64' || arch === 'arm64') return 'arm64';\n  if (arch) return `other:${arch}`;\n  return 'unknown';\n};\n\nconst normalizePlatform = (platform: string): PlatformName => {\n  // Node platforms:\n  // - https://nodejs.org/api/process.html#processplatform\n  // Deno platforms:\n  // - https://doc.deno.land/deno/stable/~/Deno.build\n  // - https://github.com/denoland/deno/issues/14799\n\n  platform = platform.toLowerCase();\n\n  // NOTE: this iOS check is untested and may not work\n  // Node does not work natively on IOS, there is a fork at\n  // https://github.com/nodejs-mobile/nodejs-mobile\n  // however it is unknown at the time of writing how to detect if it is running\n  if (platform.includes('ios')) return 'iOS';\n  if (platform === 'android') return 'Android';\n  if (platform === 'darwin') return 'MacOS';\n  if (platform === 'win32') return 'Windows';\n  if (platform === 'freebsd') return 'FreeBSD';\n  if (platform === 'openbsd') return 'OpenBSD';\n  if (platform === 'linux') return 'Linux';\n  if (platform) return `Other:${platform}`;\n  return 'Unknown';\n};\n\nlet _platformHeaders: PlatformProperties;\nexport const getPlatformHeaders = () => {\n  return (_platformHeaders ??= getPlatformProperties());\n};\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { isReadonlyArray } from './utils/values';\n\ntype HeaderValue = string | undefined | null;\nexport type HeadersLike =\n  | Headers\n  | readonly HeaderValue[][]\n  | Record<string, HeaderValue | readonly HeaderValue[]>\n  | undefined\n  | null\n  | NullableHeaders;\n\nconst brand_privateNullableHeaders = Symbol.for('brand.privateNullableHeaders') as symbol & {\n  description: 'brand.privateNullableHeaders';\n};\n\n/**\n * @internal\n * Users can pass explicit nulls to unset default headers. When we parse them\n * into a standard headers type we need to preserve that information.\n */\nexport type NullableHeaders = {\n  /** Brand check, prevent users from creating a NullableHeaders. */\n  [_: typeof brand_privateNullableHeaders]: true;\n  /** Parsed headers. */\n  values: Headers;\n  /** Set of lowercase header names explicitly set to null. */\n  nulls: Set<string>;\n};\n\nfunction* iterateHeaders(headers: HeadersLike): IterableIterator<readonly [string, string | null]> {\n  if (!headers) return;\n\n  if (brand_privateNullableHeaders in headers) {\n    const { values, nulls } = headers as NullableHeaders;\n    yield* values.entries();\n    for (const name of nulls) {\n      yield [name, null];\n    }\n    return;\n  }\n\n  let shouldClear = false;\n  let iter: Iterable<readonly (HeaderValue | readonly HeaderValue[])[]>;\n  if (headers instanceof Headers) {\n    iter = headers.entries();\n  } else if (isReadonlyArray(headers)) {\n    iter = headers;\n  } else {\n    shouldClear = true;\n    iter = Object.entries(headers ?? {});\n  }\n  for (let row of iter) {\n    const name = row[0];\n    if (typeof name !== 'string') throw new TypeError('expected header name to be a string');\n    const values = isReadonlyArray(row[1]) ? row[1] : [row[1]];\n    let didClear = false;\n    for (const value of values) {\n      if (value === undefined) continue;\n\n      // Objects keys always overwrite older headers, they never append.\n      // Yield a null to clear the header before adding the new values.\n      if (shouldClear && !didClear) {\n        didClear = true;\n        yield [name, null];\n      }\n      yield [name, value];\n    }\n  }\n}\n\nexport const buildHeaders = (newHeaders: HeadersLike[]): NullableHeaders => {\n  const targetHeaders = new Headers();\n  const nullHeaders = new Set<string>();\n  for (const headers of newHeaders) {\n    const seenHeaders = new Set<string>();\n    for (const [name, value] of iterateHeaders(headers)) {\n      const lowerName = name.toLowerCase();\n      if (!seenHeaders.has(lowerName)) {\n        targetHeaders.delete(name);\n        seenHeaders.add(lowerName);\n      }\n      if (value === null) {\n        targetHeaders.delete(name);\n        nullHeaders.add(lowerName);\n      } else {\n        targetHeaders.append(name, value);\n        nullHeaders.delete(lowerName);\n      }\n    }\n  }\n  return { [brand_privateNullableHeaders]: true, values: targetHeaders, nulls: nullHeaders };\n};\n\nexport const isEmptyHeaders = (headers: HeadersLike) => {\n  for (const _ of iterateHeaders(headers)) return false;\n  return true;\n};\n","import { concatBytes, decodeUTF8, encodeUTF8 } from '../utils/bytes';\n\nexport type Bytes = string | ArrayBuffer | Uint8Array | null | undefined;\n\n/**\n * A re-implementation of httpx's `LineDecoder` in Python that handles incrementally\n * reading lines from text.\n *\n * https://github.com/encode/httpx/blob/920333ea98118e9cf617f246905d7b202510941c/httpx/_decoders.py#L258\n */\nexport class LineDecoder {\n  // prettier-ignore\n  static NEWLINE_CHARS = new Set(['\\n', '\\r']);\n  static NEWLINE_REGEXP = /\\r\\n|[\\n\\r]/g;\n\n  #buffer: Uint8Array;\n  #carriageReturnIndex: number | null;\n\n  constructor() {\n    this.#buffer = new Uint8Array();\n    this.#carriageReturnIndex = null;\n  }\n\n  decode(chunk: Bytes): string[] {\n    if (chunk == null) {\n      return [];\n    }\n\n    const binaryChunk =\n      chunk instanceof ArrayBuffer ? new Uint8Array(chunk)\n      : typeof chunk === 'string' ? encodeUTF8(chunk)\n      : chunk;\n\n    this.#buffer = concatBytes([this.#buffer, binaryChunk]);\n\n    const lines: string[] = [];\n    let patternIndex;\n    while ((patternIndex = findNewlineIndex(this.#buffer, this.#carriageReturnIndex)) != null) {\n      if (patternIndex.carriage && this.#carriageReturnIndex == null) {\n        // skip until we either get a corresponding `\\n`, a new `\\r` or nothing\n        this.#carriageReturnIndex = patternIndex.index;\n        continue;\n      }\n\n      // we got double \\r or \\rtext\\n\n      if (\n        this.#carriageReturnIndex != null &&\n        (patternIndex.index !== this.#carriageReturnIndex + 1 || patternIndex.carriage)\n      ) {\n        lines.push(decodeUTF8(this.#buffer.subarray(0, this.#carriageReturnIndex - 1)));\n        this.#buffer = this.#buffer.subarray(this.#carriageReturnIndex);\n        this.#carriageReturnIndex = null;\n        continue;\n      }\n\n      const endIndex =\n        this.#carriageReturnIndex !== null ? patternIndex.preceding - 1 : patternIndex.preceding;\n\n      const line = decodeUTF8(this.#buffer.subarray(0, endIndex));\n      lines.push(line);\n\n      this.#buffer = this.#buffer.subarray(patternIndex.index);\n      this.#carriageReturnIndex = null;\n    }\n\n    return lines;\n  }\n\n  flush(): string[] {\n    if (!this.#buffer.length) {\n      return [];\n    }\n    return this.decode('\\n');\n  }\n}\n\n/**\n * This function searches the buffer for the end patterns, (\\r or \\n)\n * and returns an object with the index preceding the matched newline and the\n * index after the newline char. `null` is returned if no new line is found.\n *\n * ```ts\n * findNewLineIndex('abc\\ndef') -> { preceding: 2, index: 3 }\n * ```\n */\nfunction findNewlineIndex(\n  buffer: Uint8Array,\n  startIndex: number | null,\n): { preceding: number; index: number; carriage: boolean } | null {\n  const newline = 0x0a; // \\n\n  const carriage = 0x0d; // \\r\n\n  for (let i = startIndex ?? 0; i < buffer.length; i++) {\n    if (buffer[i] === newline) {\n      return { preceding: i, index: i + 1, carriage: false };\n    }\n\n    if (buffer[i] === carriage) {\n      return { preceding: i, index: i + 1, carriage: true };\n    }\n  }\n\n  return null;\n}\n\nexport function findDoubleNewlineIndex(buffer: Uint8Array): number {\n  // This function searches the buffer for the end patterns (\\r\\r, \\n\\n, \\r\\n\\r\\n)\n  // and returns the index right after the first occurrence of any pattern,\n  // or -1 if none of the patterns are found.\n  const newline = 0x0a; // \\n\n  const carriage = 0x0d; // \\r\n\n  for (let i = 0; i < buffer.length - 1; i++) {\n    if (buffer[i] === newline && buffer[i + 1] === newline) {\n      // \\n\\n\n      return i + 2;\n    }\n    if (buffer[i] === carriage && buffer[i + 1] === carriage) {\n      // \\r\\r\n      return i + 2;\n    }\n    if (\n      buffer[i] === carriage &&\n      buffer[i + 1] === newline &&\n      i + 3 < buffer.length &&\n      buffer[i + 2] === carriage &&\n      buffer[i + 3] === newline\n    ) {\n      // \\r\\n\\r\\n\n      return i + 4;\n    }\n  }\n\n  return -1;\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { AnthropicError } from '../../core/error';\n\n// https://url.spec.whatwg.org/#url-scheme-string\nconst startsWithSchemeRegexp = /^[a-z][a-z0-9+.-]*:/i;\n\nexport const isAbsoluteURL = (url: string): boolean => {\n  return startsWithSchemeRegexp.test(url);\n};\n\nexport let isArray = (val: unknown): val is unknown[] => ((isArray = Array.isArray), isArray(val));\nexport let isReadonlyArray = isArray as (val: unknown) => val is readonly unknown[];\n\n/** Returns an object if the given value isn't an object, otherwise returns as-is */\nexport function maybeObj(x: unknown): object {\n  if (typeof x !== 'object') {\n    return {};\n  }\n\n  return x ?? {};\n}\n\n// https://stackoverflow.com/a/34491287\nexport function isEmptyObj(obj: Object | null | undefined): boolean {\n  if (!obj) return true;\n  for (const _k in obj) return false;\n  return true;\n}\n\n// https://eslint.org/docs/latest/rules/no-prototype-builtins\nexport function hasOwn<T extends object = object>(obj: T, key: PropertyKey): key is keyof T {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\nexport function isObj(obj: unknown): obj is Record<string, unknown> {\n  return obj != null && typeof obj === 'object' && !Array.isArray(obj);\n}\n\nexport const ensurePresent = <T>(value: T | null | undefined): T => {\n  if (value == null) {\n    throw new AnthropicError(`Expected a value to be given but received ${value} instead.`);\n  }\n\n  return value;\n};\n\nexport const validatePositiveInteger = (name: string, n: unknown): number => {\n  if (typeof n !== 'number' || !Number.isInteger(n)) {\n    throw new AnthropicError(`${name} must be an integer`);\n  }\n  if (n < 0) {\n    throw new AnthropicError(`${name} must be a positive integer`);\n  }\n  return n;\n};\n\nexport const coerceInteger = (value: unknown): number => {\n  if (typeof value === 'number') return Math.round(value);\n  if (typeof value === 'string') return parseInt(value, 10);\n\n  throw new AnthropicError(`Could not coerce ${value} (type: ${typeof value}) into a number`);\n};\n\nexport const coerceFloat = (value: unknown): number => {\n  if (typeof value === 'number') return value;\n  if (typeof value === 'string') return parseFloat(value);\n\n  throw new AnthropicError(`Could not coerce ${value} (type: ${typeof value}) into a number`);\n};\n\nexport const coerceBoolean = (value: unknown): boolean => {\n  if (typeof value === 'boolean') return value;\n  if (typeof value === 'string') return value === 'true';\n  return Boolean(value);\n};\n\nexport const maybeCoerceInteger = (value: unknown): number | undefined => {\n  if (value == null) {\n    return undefined;\n  }\n  return coerceInteger(value);\n};\n\nexport const maybeCoerceFloat = (value: unknown): number | undefined => {\n  if (value == null) {\n    return undefined;\n  }\n  return coerceFloat(value);\n};\n\nexport const maybeCoerceBoolean = (value: unknown): boolean | undefined => {\n  if (value == null) {\n    return undefined;\n  }\n  return coerceBoolean(value);\n};\n\nexport const safeJSON = (text: string) => {\n  try {\n    return JSON.parse(text);\n  } catch (err) {\n    return undefined;\n  }\n};\n\n// Gets a value from an object, deletes the key, and returns the value (or undefined if not found)\nexport const pop = <T extends Record<string, any>, K extends string>(obj: T, key: K): T[K] => {\n  const value = obj[key];\n  delete obj[key];\n  return value;\n};\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { type BaseAnthropic } from '../client';\n\nimport { type PromiseOrValue } from '../internal/types';\nimport {\n  type APIResponseProps,\n  type WithRequestID,\n  defaultParseResponse,\n  addRequestID,\n} from '../internal/parse';\n\n/**\n * A subclass of `Promise` providing additional helper methods\n * for interacting with the SDK.\n */\nexport class APIPromise<T> extends Promise<WithRequestID<T>> {\n  private parsedPromise: Promise<WithRequestID<T>> | undefined;\n  #client: BaseAnthropic;\n\n  constructor(\n    client: BaseAnthropic,\n    private responsePromise: Promise<APIResponseProps>,\n    private parseResponse: (\n      client: BaseAnthropic,\n      props: APIResponseProps,\n    ) => PromiseOrValue<WithRequestID<T>> = defaultParseResponse,\n  ) {\n    super((resolve) => {\n      // this is maybe a bit weird but this has to be a no-op to not implicitly\n      // parse the response body; instead .then, .catch, .finally are overridden\n      // to parse the response\n      resolve(null as any);\n    });\n    this.#client = client;\n  }\n\n  _thenUnwrap<U>(transform: (data: T, props: APIResponseProps) => U): APIPromise<U> {\n    return new APIPromise(this.#client, this.responsePromise, async (client, props) =>\n      addRequestID(transform(await this.parseResponse(client, props), props), props.response),\n    );\n  }\n\n  /**\n   * Gets the raw `Response` instance instead of parsing the response\n   * data.\n   *\n   * If you want to parse the response body but still get the `Response`\n   * instance, you can use {@link withResponse()}.\n   *\n   *  Getting the wrong TypeScript type for `Response`?\n   * Try setting `\"moduleResolution\": \"NodeNext\"` or add `\"lib\": [\"DOM\"]`\n   * to your `tsconfig.json`.\n   */\n  asResponse(): Promise<Response> {\n    return this.responsePromise.then((p) => p.response);\n  }\n\n  /**\n   * Gets the parsed response data, the raw `Response` instance and the ID of the request,\n   * returned via the `request-id` header which is useful for debugging requests and resporting\n   * issues to Anthropic.\n   *\n   * If you just want to get the raw `Response` instance without parsing it,\n   * you can use {@link asResponse()}.\n   *\n   *  Getting the wrong TypeScript type for `Response`?\n   * Try setting `\"moduleResolution\": \"NodeNext\"` or add `\"lib\": [\"DOM\"]`\n   * to your `tsconfig.json`.\n   */\n  async withResponse(): Promise<{ data: T; response: Response; request_id: string | null | undefined }> {\n    const [data, response] = await Promise.all([this.parse(), this.asResponse()]);\n    return { data, response, request_id: response.headers.get('request-id') };\n  }\n\n  private parse(): Promise<WithRequestID<T>> {\n    if (!this.parsedPromise) {\n      this.parsedPromise = this.responsePromise.then(\n        (data) => this.parseResponse(this.#client, data) as any as Promise<WithRequestID<T>>,\n      );\n    }\n    return this.parsedPromise;\n  }\n\n  override then<TResult1 = WithRequestID<T>, TResult2 = never>(\n    onfulfilled?: ((value: WithRequestID<T>) => TResult1 | PromiseLike<TResult1>) | undefined | null,\n    onrejected?: ((reason: any) => TResult2 | PromiseLike<TResult2>) | undefined | null,\n  ): Promise<TResult1 | TResult2> {\n    return this.parse().then(onfulfilled, onrejected);\n  }\n\n  override catch<TResult = never>(\n    onrejected?: ((reason: any) => TResult | PromiseLike<TResult>) | undefined | null,\n  ): Promise<WithRequestID<T> | TResult> {\n    return this.parse().catch(onrejected);\n  }\n\n  override finally(onfinally?: (() => void) | undefined | null): Promise<WithRequestID<T>> {\n    return this.parse().finally(onfinally);\n  }\n}\n","import { AnthropicError } from './error';\nimport { type ReadableStream } from '../internal/shim-types';\nimport { makeReadableStream } from '../internal/shims';\nimport { findDoubleNewlineIndex, LineDecoder } from '../internal/decoders/line';\nimport { ReadableStreamToAsyncIterable } from '../internal/shims';\nimport { isAbortError } from '../internal/errors';\nimport { safeJSON } from '../internal/utils/values';\nimport { encodeUTF8 } from '../internal/utils/bytes';\nimport { loggerFor } from '../internal/utils/log';\nimport type { BaseAnthropic } from '../client';\n\nimport { APIError } from './error';\n\ntype Bytes = string | ArrayBuffer | Uint8Array | null | undefined;\n\nexport type ServerSentEvent = {\n  event: string | null;\n  data: string;\n  raw: string[];\n};\n\nexport class Stream<Item> implements AsyncIterable<Item> {\n  controller: AbortController;\n  #client: BaseAnthropic | undefined;\n\n  constructor(\n    private iterator: () => AsyncIterator<Item>,\n    controller: AbortController,\n    client?: BaseAnthropic,\n  ) {\n    this.controller = controller;\n    this.#client = client;\n  }\n\n  static fromSSEResponse<Item>(\n    response: Response,\n    controller: AbortController,\n    client?: BaseAnthropic,\n  ): Stream<Item> {\n    let consumed = false;\n    const logger = client ? loggerFor(client) : console;\n\n    async function* iterator(): AsyncIterator<Item, any, undefined> {\n      if (consumed) {\n        throw new AnthropicError('Cannot iterate over a consumed stream, use `.tee()` to split the stream.');\n      }\n      consumed = true;\n      let done = false;\n      try {\n        for await (const sse of _iterSSEMessages(response, controller)) {\n          if (sse.event === 'completion') {\n            try {\n              yield JSON.parse(sse.data);\n            } catch (e) {\n              logger.error(`Could not parse message into JSON:`, sse.data);\n              logger.error(`From chunk:`, sse.raw);\n              throw e;\n            }\n          }\n\n          if (\n            sse.event === 'message_start' ||\n            sse.event === 'message_delta' ||\n            sse.event === 'message_stop' ||\n            sse.event === 'content_block_start' ||\n            sse.event === 'content_block_delta' ||\n            sse.event === 'content_block_stop'\n          ) {\n            try {\n              yield JSON.parse(sse.data);\n            } catch (e) {\n              logger.error(`Could not parse message into JSON:`, sse.data);\n              logger.error(`From chunk:`, sse.raw);\n              throw e;\n            }\n          }\n\n          if (sse.event === 'ping') {\n            continue;\n          }\n\n          if (sse.event === 'error') {\n            throw new APIError(undefined, safeJSON(sse.data) ?? sse.data, undefined, response.headers);\n          }\n        }\n        done = true;\n      } catch (e) {\n        // If the user calls `stream.controller.abort()`, we should exit without throwing.\n        if (isAbortError(e)) return;\n        throw e;\n      } finally {\n        // If the user `break`s, abort the ongoing request.\n        if (!done) controller.abort();\n      }\n    }\n\n    return new Stream(iterator, controller, client);\n  }\n\n  /**\n   * Generates a Stream from a newline-separated ReadableStream\n   * where each item is a JSON value.\n   */\n  static fromReadableStream<Item>(\n    readableStream: ReadableStream,\n    controller: AbortController,\n    client?: BaseAnthropic,\n  ): Stream<Item> {\n    let consumed = false;\n\n    async function* iterLines(): AsyncGenerator<string, void, unknown> {\n      const lineDecoder = new LineDecoder();\n\n      const iter = ReadableStreamToAsyncIterable<Bytes>(readableStream);\n      for await (const chunk of iter) {\n        for (const line of lineDecoder.decode(chunk)) {\n          yield line;\n        }\n      }\n\n      for (const line of lineDecoder.flush()) {\n        yield line;\n      }\n    }\n\n    async function* iterator(): AsyncIterator<Item, any, undefined> {\n      if (consumed) {\n        throw new AnthropicError('Cannot iterate over a consumed stream, use `.tee()` to split the stream.');\n      }\n      consumed = true;\n      let done = false;\n      try {\n        for await (const line of iterLines()) {\n          if (done) continue;\n          if (line) yield JSON.parse(line);\n        }\n        done = true;\n      } catch (e) {\n        // If the user calls `stream.controller.abort()`, we should exit without throwing.\n        if (isAbortError(e)) return;\n        throw e;\n      } finally {\n        // If the user `break`s, abort the ongoing request.\n        if (!done) controller.abort();\n      }\n    }\n\n    return new Stream(iterator, controller, client);\n  }\n\n  [Symbol.asyncIterator](): AsyncIterator<Item> {\n    return this.iterator();\n  }\n\n  /**\n   * Splits the stream into two streams which can be\n   * independently read from at different speeds.\n   */\n  tee(): [Stream<Item>, Stream<Item>] {\n    const left: Array<Promise<IteratorResult<Item>>> = [];\n    const right: Array<Promise<IteratorResult<Item>>> = [];\n    const iterator = this.iterator();\n\n    const teeIterator = (queue: Array<Promise<IteratorResult<Item>>>): AsyncIterator<Item> => {\n      return {\n        next: () => {\n          if (queue.length === 0) {\n            const result = iterator.next();\n            left.push(result);\n            right.push(result);\n          }\n          return queue.shift()!;\n        },\n      };\n    };\n\n    return [\n      new Stream(() => teeIterator(left), this.controller, this.#client),\n      new Stream(() => teeIterator(right), this.controller, this.#client),\n    ];\n  }\n\n  /**\n   * Converts this stream to a newline-separated ReadableStream of\n   * JSON stringified values in the stream\n   * which can be turned back into a Stream with `Stream.fromReadableStream()`.\n   */\n  toReadableStream(): ReadableStream {\n    const self = this;\n    let iter: AsyncIterator<Item>;\n\n    return makeReadableStream({\n      async start() {\n        iter = self[Symbol.asyncIterator]();\n      },\n      async pull(ctrl: any) {\n        try {\n          const { value, done } = await iter.next();\n          if (done) return ctrl.close();\n\n          const bytes = encodeUTF8(JSON.stringify(value) + '\\n');\n\n          ctrl.enqueue(bytes);\n        } catch (err) {\n          ctrl.error(err);\n        }\n      },\n      async cancel() {\n        await iter.return?.();\n      },\n    });\n  }\n}\n\nexport async function* _iterSSEMessages(\n  response: Response,\n  controller: AbortController,\n): AsyncGenerator<ServerSentEvent, void, unknown> {\n  if (!response.body) {\n    controller.abort();\n    if (\n      typeof (globalThis as any).navigator !== 'undefined' &&\n      (globalThis as any).navigator.product === 'ReactNative'\n    ) {\n      throw new AnthropicError(\n        `The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api`,\n      );\n    }\n    throw new AnthropicError(`Attempted to iterate over a response with no body`);\n  }\n\n  const sseDecoder = new SSEDecoder();\n  const lineDecoder = new LineDecoder();\n\n  const iter = ReadableStreamToAsyncIterable<Bytes>(response.body);\n  for await (const sseChunk of iterSSEChunks(iter)) {\n    for (const line of lineDecoder.decode(sseChunk)) {\n      const sse = sseDecoder.decode(line);\n      if (sse) yield sse;\n    }\n  }\n\n  for (const line of lineDecoder.flush()) {\n    const sse = sseDecoder.decode(line);\n    if (sse) yield sse;\n  }\n}\n\n/**\n * Given an async iterable iterator, iterates over it and yields full\n * SSE chunks, i.e. yields when a double new-line is encountered.\n */\nasync function* iterSSEChunks(iterator: AsyncIterableIterator<Bytes>): AsyncGenerator<Uint8Array> {\n  let data = new Uint8Array();\n\n  for await (const chunk of iterator) {\n    if (chunk == null) {\n      continue;\n    }\n\n    const binaryChunk =\n      chunk instanceof ArrayBuffer ? new Uint8Array(chunk)\n      : typeof chunk === 'string' ? encodeUTF8(chunk)\n      : chunk;\n\n    let newData = new Uint8Array(data.length + binaryChunk.length);\n    newData.set(data);\n    newData.set(binaryChunk, data.length);\n    data = newData;\n\n    let patternIndex;\n    while ((patternIndex = findDoubleNewlineIndex(data)) !== -1) {\n      yield data.slice(0, patternIndex);\n      data = data.slice(patternIndex);\n    }\n  }\n\n  if (data.length > 0) {\n    yield data;\n  }\n}\n\nclass SSEDecoder {\n  private data: string[];\n  private event: string | null;\n  private chunks: string[];\n\n  constructor() {\n    this.event = null;\n    this.data = [];\n    this.chunks = [];\n  }\n\n  decode(line: string) {\n    if (line.endsWith('\\r')) {\n      line = line.substring(0, line.length - 1);\n    }\n\n    if (!line) {\n      // empty line and we didn't previously encounter any messages\n      if (!this.event && !this.data.length) return null;\n\n      const sse: ServerSentEvent = {\n        event: this.event,\n        data: this.data.join('\\n'),\n        raw: this.chunks,\n      };\n\n      this.event = null;\n      this.data = [];\n      this.chunks = [];\n\n      return sse;\n    }\n\n    this.chunks.push(line);\n\n    if (line.startsWith(':')) {\n      return null;\n    }\n\n    let [fieldname, _, value] = partition(line, ':');\n\n    if (value.startsWith(' ')) {\n      value = value.substring(1);\n    }\n\n    if (fieldname === 'event') {\n      this.event = value;\n    } else if (fieldname === 'data') {\n      this.data.push(value);\n    }\n\n    return null;\n  }\n}\n\nfunction partition(str: string, delimiter: string): [string, string, string] {\n  const index = str.indexOf(delimiter);\n  if (index !== -1) {\n    return [str.substring(0, index), delimiter, str.substring(index + delimiter.length)];\n  }\n\n  return [str, '', ''];\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport type { FinalRequestOptions } from './request-options';\nimport { Stream } from '../core/streaming';\nimport { type BaseAnthropic } from '../client';\nimport { formatRequestDetails, loggerFor } from './utils/log';\nimport type { AbstractPage } from '../core/pagination';\n\nexport type APIResponseProps = {\n  response: Response;\n  options: FinalRequestOptions;\n  controller: AbortController;\n  requestLogID: string;\n  retryOfRequestLogID: string | undefined;\n  startTime: number;\n};\n\nexport async function defaultParseResponse<T>(\n  client: BaseAnthropic,\n  props: APIResponseProps,\n): Promise<WithRequestID<T>> {\n  const { response, requestLogID, retryOfRequestLogID, startTime } = props;\n  const body = await (async () => {\n    if (props.options.stream) {\n      loggerFor(client).debug('response', response.status, response.url, response.headers, response.body);\n\n      // Note: there is an invariant here that isn't represented in the type system\n      // that if you set `stream: true` the response type must also be `Stream<T>`\n\n      if (props.options.__streamClass) {\n        return props.options.__streamClass.fromSSEResponse(response, props.controller) as any;\n      }\n\n      return Stream.fromSSEResponse(response, props.controller) as any;\n    }\n\n    // fetch refuses to read the body when the status code is 204.\n    if (response.status === 204) {\n      return null as T;\n    }\n\n    if (props.options.__binaryResponse) {\n      return response as unknown as T;\n    }\n\n    const contentType = response.headers.get('content-type');\n    const mediaType = contentType?.split(';')[0]?.trim();\n    const isJSON = mediaType?.includes('application/json') || mediaType?.endsWith('+json');\n    if (isJSON) {\n      const json = await response.json();\n      return addRequestID(json as T, response);\n    }\n\n    const text = await response.text();\n    return text as unknown as T;\n  })();\n  loggerFor(client).debug(\n    `[${requestLogID}] response parsed`,\n    formatRequestDetails({\n      retryOfRequestLogID,\n      url: response.url,\n      status: response.status,\n      body,\n      durationMs: Date.now() - startTime,\n    }),\n  );\n  return body;\n}\n\nexport type WithRequestID<T> =\n  T extends Array<any> | Response | AbstractPage<any> ? T\n  : T extends Record<string, any> ? T & { _request_id?: string | null }\n  : T;\n\nexport function addRequestID<T>(value: T, response: Response): WithRequestID<T> {\n  if (!value || typeof value !== 'object' || Array.isArray(value)) {\n    return value as WithRequestID<T>;\n  }\n\n  return Object.defineProperty(value, '_request_id', {\n    value: response.headers.get('request-id'),\n    enumerable: false,\n  }) as WithRequestID<T>;\n}\n","import { partialParse } from '../_vendor/partial-json-parser/parser';\nimport type { Logger } from '../client';\nimport { AnthropicError, APIUserAbortError } from '../error';\nimport { isAbortError } from '../internal/errors';\nimport { type RequestOptions } from '../internal/request-options';\nimport {\n  type BetaContentBlock,\n  type BetaMCPToolUseBlock,\n  type BetaMessage,\n  type BetaMessageParam,\n  Messages as BetaMessages,\n  type BetaRawMessageStreamEvent as BetaMessageStreamEvent,\n  type BetaServerToolUseBlock,\n  type BetaTextBlock,\n  type BetaTextCitation,\n  type BetaToolUseBlock,\n  type MessageCreateParams,\n  type MessageCreateParamsBase,\n  MessageCreateParamsStreaming,\n} from '../resources/beta/messages/messages';\nimport { Stream } from '../streaming';\nimport { maybeParseBetaMessage, type ParsedBetaMessage } from './beta-parser';\n\nexport interface MessageStreamEvents {\n  connect: () => void;\n  streamEvent: (event: BetaMessageStreamEvent, snapshot: BetaMessage) => void;\n  text: (textDelta: string, textSnapshot: string) => void;\n  citation: (citation: BetaTextCitation, citationsSnapshot: BetaTextCitation[]) => void;\n  inputJson: (partialJson: string, jsonSnapshot: unknown) => void;\n  thinking: (thinkingDelta: string, thinkingSnapshot: string) => void;\n  signature: (signature: string) => void;\n  message: (message: BetaMessage) => void;\n  contentBlock: (content: BetaContentBlock) => void;\n  finalMessage: (message: BetaMessage) => void;\n  error: (error: AnthropicError) => void;\n  abort: (error: APIUserAbortError) => void;\n  end: () => void;\n}\n\ntype MessageStreamEventListeners<Event extends keyof MessageStreamEvents> = {\n  listener: MessageStreamEvents[Event];\n  once?: boolean;\n}[];\n\nconst JSON_BUF_PROPERTY = '__json_buf';\n\nexport type TracksToolInput = BetaToolUseBlock | BetaServerToolUseBlock | BetaMCPToolUseBlock;\n\nfunction tracksToolInput(content: BetaContentBlock): content is TracksToolInput {\n  return content.type === 'tool_use' || content.type === 'server_tool_use' || content.type === 'mcp_tool_use';\n}\n\nexport class BetaMessageStream<ParsedT = null> implements AsyncIterable<BetaMessageStreamEvent> {\n  messages: BetaMessageParam[] = [];\n  receivedMessages: ParsedBetaMessage<ParsedT>[] = [];\n  #currentMessageSnapshot: BetaMessage | undefined;\n  #params: MessageCreateParams | null = null;\n\n  controller: AbortController = new AbortController();\n\n  #connectedPromise: Promise<Response | null>;\n  #resolveConnectedPromise: (response: Response | null) => void = () => {};\n  #rejectConnectedPromise: (error: AnthropicError) => void = () => {};\n\n  #endPromise: Promise<void>;\n  #resolveEndPromise: () => void = () => {};\n  #rejectEndPromise: (error: AnthropicError) => void = () => {};\n\n  #listeners: { [Event in keyof MessageStreamEvents]?: MessageStreamEventListeners<Event> } = {};\n\n  #ended = false;\n  #errored = false;\n  #aborted = false;\n  #catchingPromiseCreated = false;\n  #response: Response | null | undefined;\n  #request_id: string | null | undefined;\n  #logger: Logger;\n\n  constructor(params: MessageCreateParamsBase | null, opts?: { logger?: Logger | undefined }) {\n    this.#connectedPromise = new Promise<Response | null>((resolve, reject) => {\n      this.#resolveConnectedPromise = resolve;\n      this.#rejectConnectedPromise = reject;\n    });\n\n    this.#endPromise = new Promise<void>((resolve, reject) => {\n      this.#resolveEndPromise = resolve;\n      this.#rejectEndPromise = reject;\n    });\n\n    // Don't let these promises cause unhandled rejection errors.\n    // we will manually cause an unhandled rejection error later\n    // if the user hasn't registered any error listener or called\n    // any promise-returning method.\n    this.#connectedPromise.catch(() => {});\n    this.#endPromise.catch(() => {});\n\n    this.#params = params;\n    this.#logger = opts?.logger ?? console;\n  }\n\n  get response(): Response | null | undefined {\n    return this.#response;\n  }\n\n  get request_id(): string | null | undefined {\n    return this.#request_id;\n  }\n\n  /**\n   * Returns the `MessageStream` data, the raw `Response` instance and the ID of the request,\n   * returned vie the `request-id` header which is useful for debugging requests and resporting\n   * issues to Anthropic.\n   *\n   * This is the same as the `APIPromise.withResponse()` method.\n   *\n   * This method will raise an error if you created the stream using `MessageStream.fromReadableStream`\n   * as no `Response` is available.\n   */\n  async withResponse(): Promise<{\n    data: BetaMessageStream<ParsedT>;\n    response: Response;\n    request_id: string | null | undefined;\n  }> {\n    this.#catchingPromiseCreated = true;\n\n    const response = await this.#connectedPromise;\n    if (!response) {\n      throw new Error('Could not resolve a `Response` object');\n    }\n\n    return {\n      data: this,\n      response,\n      request_id: response.headers.get('request-id'),\n    };\n  }\n\n  /**\n   * Intended for use on the frontend, consuming a stream produced with\n   * `.toReadableStream()` on the backend.\n   *\n   * Note that messages sent to the model do not appear in `.on('message')`\n   * in this context.\n   */\n  static fromReadableStream(stream: ReadableStream): BetaMessageStream {\n    const runner = new BetaMessageStream(null);\n    runner._run(() => runner._fromReadableStream(stream));\n    return runner;\n  }\n\n  static createMessage<ParsedT>(\n    messages: BetaMessages,\n    params: MessageCreateParamsBase,\n    options?: RequestOptions,\n    { logger }: { logger?: Logger | undefined } = {},\n  ): BetaMessageStream<ParsedT> {\n    const runner = new BetaMessageStream<ParsedT>(params as MessageCreateParamsStreaming, { logger });\n    for (const message of params.messages) {\n      runner._addMessageParam(message);\n    }\n    runner.#params = { ...params, stream: true };\n    runner._run(() =>\n      runner._createMessage(\n        messages,\n        { ...params, stream: true },\n        { ...options, headers: { ...options?.headers, 'X-Stainless-Helper-Method': 'stream' } },\n      ),\n    );\n    return runner;\n  }\n\n  protected _run(executor: () => Promise<any>) {\n    executor().then(() => {\n      this._emitFinal();\n      this._emit('end');\n    }, this.#handleError);\n  }\n\n  protected _addMessageParam(message: BetaMessageParam) {\n    this.messages.push(message);\n  }\n\n  protected _addMessage(message: ParsedBetaMessage<ParsedT>, emit = true) {\n    this.receivedMessages.push(message);\n    if (emit) {\n      this._emit('message', message);\n    }\n  }\n\n  protected async _createMessage(\n    messages: BetaMessages,\n    params: MessageCreateParams,\n    options?: RequestOptions,\n  ): Promise<void> {\n    const signal = options?.signal;\n    let abortHandler: (() => void) | undefined;\n    if (signal) {\n      if (signal.aborted) this.controller.abort();\n      abortHandler = this.controller.abort.bind(this.controller);\n      signal.addEventListener('abort', abortHandler);\n    }\n    try {\n      this.#beginRequest();\n      const { response, data: stream } = await messages\n        .create({ ...params, stream: true }, { ...options, signal: this.controller.signal })\n        .withResponse();\n      this._connected(response);\n      for await (const event of stream) {\n        this.#addStreamEvent(event);\n      }\n      if (stream.controller.signal?.aborted) {\n        throw new APIUserAbortError();\n      }\n      this.#endRequest();\n    } finally {\n      if (signal && abortHandler) {\n        signal.removeEventListener('abort', abortHandler);\n      }\n    }\n  }\n\n  protected _connected(response: Response | null) {\n    if (this.ended) return;\n    this.#response = response;\n    this.#request_id = response?.headers.get('request-id');\n    this.#resolveConnectedPromise(response);\n    this._emit('connect');\n  }\n\n  get ended(): boolean {\n    return this.#ended;\n  }\n\n  get errored(): boolean {\n    return this.#errored;\n  }\n\n  get aborted(): boolean {\n    return this.#aborted;\n  }\n\n  abort() {\n    this.controller.abort();\n  }\n\n  /**\n   * Adds the listener function to the end of the listeners array for the event.\n   * No checks are made to see if the listener has already been added. Multiple calls passing\n   * the same combination of event and listener will result in the listener being added, and\n   * called, multiple times.\n   * @returns this MessageStream, so that calls can be chained\n   */\n  on<Event extends keyof MessageStreamEvents>(event: Event, listener: MessageStreamEvents[Event]): this {\n    const listeners: MessageStreamEventListeners<Event> =\n      this.#listeners[event] || (this.#listeners[event] = []);\n    listeners.push({ listener });\n    return this;\n  }\n\n  /**\n   * Removes the specified listener from the listener array for the event.\n   * off() will remove, at most, one instance of a listener from the listener array. If any single\n   * listener has been added multiple times to the listener array for the specified event, then\n   * off() must be called multiple times to remove each instance.\n   * @returns this MessageStream, so that calls can be chained\n   */\n  off<Event extends keyof MessageStreamEvents>(event: Event, listener: MessageStreamEvents[Event]): this {\n    const listeners = this.#listeners[event];\n    if (!listeners) return this;\n    const index = listeners.findIndex((l) => l.listener === listener);\n    if (index >= 0) listeners.splice(index, 1);\n    return this;\n  }\n\n  /**\n   * Adds a one-time listener function for the event. The next time the event is triggered,\n   * this listener is removed and then invoked.\n   * @returns this MessageStream, so that calls can be chained\n   */\n  once<Event extends keyof MessageStreamEvents>(event: Event, listener: MessageStreamEvents[Event]): this {\n    const listeners: MessageStreamEventListeners<Event> =\n      this.#listeners[event] || (this.#listeners[event] = []);\n    listeners.push({ listener, once: true });\n    return this;\n  }\n\n  /**\n   * This is similar to `.once()`, but returns a Promise that resolves the next time\n   * the event is triggered, instead of calling a listener callback.\n   * @returns a Promise that resolves the next time given event is triggered,\n   * or rejects if an error is emitted.  (If you request the 'error' event,\n   * returns a promise that resolves with the error).\n   *\n   * Example:\n   *\n   *   const message = await stream.emitted('message') // rejects if the stream errors\n   */\n  emitted<Event extends keyof MessageStreamEvents>(\n    event: Event,\n  ): Promise<\n    Parameters<MessageStreamEvents[Event]> extends [infer Param] ? Param\n    : Parameters<MessageStreamEvents[Event]> extends [] ? void\n    : Parameters<MessageStreamEvents[Event]>\n  > {\n    return new Promise((resolve, reject) => {\n      this.#catchingPromiseCreated = true;\n      if (event !== 'error') this.once('error', reject);\n      this.once(event, resolve as any);\n    });\n  }\n\n  async done(): Promise<void> {\n    this.#catchingPromiseCreated = true;\n    await this.#endPromise;\n  }\n\n  get currentMessage(): BetaMessage | undefined {\n    return this.#currentMessageSnapshot;\n  }\n\n  #getFinalMessage(): ParsedBetaMessage<ParsedT> {\n    if (this.receivedMessages.length === 0) {\n      throw new AnthropicError('stream ended without producing a Message with role=assistant');\n    }\n    return this.receivedMessages.at(-1)!;\n  }\n\n  /**\n   * @returns a promise that resolves with the the final assistant Message response,\n   * or rejects if an error occurred or the stream ended prematurely without producing a Message.\n   * If structured outputs were used, this will be a ParsedMessage with a `parsed` field.\n   */\n  async finalMessage(): Promise<ParsedBetaMessage<ParsedT>> {\n    await this.done();\n    return this.#getFinalMessage();\n  }\n\n  #getFinalText(): string {\n    if (this.receivedMessages.length === 0) {\n      throw new AnthropicError('stream ended without producing a Message with role=assistant');\n    }\n    const textBlocks = this.receivedMessages\n      .at(-1)!\n      .content.filter((block): block is BetaTextBlock => block.type === 'text')\n      .map((block) => block.text);\n    if (textBlocks.length === 0) {\n      throw new AnthropicError('stream ended without producing a content block with type=text');\n    }\n    return textBlocks.join(' ');\n  }\n\n  /**\n   * @returns a promise that resolves with the the final assistant Message's text response, concatenated\n   * together if there are more than one text blocks.\n   * Rejects if an error occurred or the stream ended prematurely without producing a Message.\n   */\n  async finalText(): Promise<string> {\n    await this.done();\n    return this.#getFinalText();\n  }\n\n  #handleError = (error: unknown) => {\n    this.#errored = true;\n    if (isAbortError(error)) {\n      error = new APIUserAbortError();\n    }\n    if (error instanceof APIUserAbortError) {\n      this.#aborted = true;\n      return this._emit('abort', error);\n    }\n    if (error instanceof AnthropicError) {\n      return this._emit('error', error);\n    }\n    if (error instanceof Error) {\n      const anthropicError: AnthropicError = new AnthropicError(error.message);\n      // @ts-ignore\n      anthropicError.cause = error;\n      return this._emit('error', anthropicError);\n    }\n    return this._emit('error', new AnthropicError(String(error)));\n  };\n\n  protected _emit<Event extends keyof MessageStreamEvents>(\n    event: Event,\n    ...args: Parameters<MessageStreamEvents[Event]>\n  ) {\n    // make sure we don't emit any MessageStreamEvents after end\n    if (this.#ended) return;\n\n    if (event === 'end') {\n      this.#ended = true;\n      this.#resolveEndPromise();\n    }\n\n    const listeners: MessageStreamEventListeners<Event> | undefined = this.#listeners[event];\n    if (listeners) {\n      this.#listeners[event] = listeners.filter((l) => !l.once) as any;\n      listeners.forEach(({ listener }: any) => listener(...args));\n    }\n\n    if (event === 'abort') {\n      const error = args[0] as APIUserAbortError;\n      if (!this.#catchingPromiseCreated && !listeners?.length) {\n        Promise.reject(error);\n      }\n      this.#rejectConnectedPromise(error);\n      this.#rejectEndPromise(error);\n      this._emit('end');\n      return;\n    }\n\n    if (event === 'error') {\n      // NOTE: _emit('error', error) should only be called from #handleError().\n\n      const error = args[0] as AnthropicError;\n      if (!this.#catchingPromiseCreated && !listeners?.length) {\n        // Trigger an unhandled rejection if the user hasn't registered any error handlers.\n        // If you are seeing stack traces here, make sure to handle errors via either:\n        // - runner.on('error', () => ...)\n        // - await runner.done()\n        // - await runner.final...()\n        // - etc.\n        Promise.reject(error);\n      }\n      this.#rejectConnectedPromise(error);\n      this.#rejectEndPromise(error);\n      this._emit('end');\n    }\n  }\n\n  protected _emitFinal() {\n    const finalMessage = this.receivedMessages.at(-1);\n    if (finalMessage) {\n      this._emit('finalMessage', this.#getFinalMessage());\n    }\n  }\n\n  #beginRequest() {\n    if (this.ended) return;\n    this.#currentMessageSnapshot = undefined;\n  }\n  #addStreamEvent(event: BetaMessageStreamEvent) {\n    if (this.ended) return;\n    const messageSnapshot = this.#accumulateMessage(event);\n    this._emit('streamEvent', event, messageSnapshot);\n\n    switch (event.type) {\n      case 'content_block_delta': {\n        const content = messageSnapshot.content.at(-1)!;\n        switch (event.delta.type) {\n          case 'text_delta': {\n            if (content.type === 'text') {\n              this._emit('text', event.delta.text, content.text || '');\n            }\n            break;\n          }\n          case 'citations_delta': {\n            if (content.type === 'text') {\n              this._emit('citation', event.delta.citation, content.citations ?? []);\n            }\n            break;\n          }\n          case 'input_json_delta': {\n            if (tracksToolInput(content) && content.input) {\n              this._emit('inputJson', event.delta.partial_json, content.input);\n            }\n            break;\n          }\n          case 'thinking_delta': {\n            if (content.type === 'thinking') {\n              this._emit('thinking', event.delta.thinking, content.thinking);\n            }\n            break;\n          }\n          case 'signature_delta': {\n            if (content.type === 'thinking') {\n              this._emit('signature', content.signature);\n            }\n            break;\n          }\n          default:\n            checkNever(event.delta);\n        }\n        break;\n      }\n      case 'message_stop': {\n        this._addMessageParam(messageSnapshot);\n        this._addMessage(\n          maybeParseBetaMessage(messageSnapshot, this.#params, { logger: this.#logger }),\n          true,\n        );\n        break;\n      }\n      case 'content_block_stop': {\n        this._emit('contentBlock', messageSnapshot.content.at(-1)!);\n        break;\n      }\n      case 'message_start': {\n        this.#currentMessageSnapshot = messageSnapshot;\n        break;\n      }\n      case 'content_block_start':\n      case 'message_delta':\n        break;\n    }\n  }\n  #endRequest(): ParsedBetaMessage<ParsedT> {\n    if (this.ended) {\n      throw new AnthropicError(`stream has ended, this shouldn't happen`);\n    }\n    const snapshot = this.#currentMessageSnapshot;\n    if (!snapshot) {\n      throw new AnthropicError(`request ended without sending any chunks`);\n    }\n    this.#currentMessageSnapshot = undefined;\n    return maybeParseBetaMessage(snapshot, this.#params, { logger: this.#logger });\n  }\n\n  protected async _fromReadableStream(\n    readableStream: ReadableStream,\n    options?: RequestOptions,\n  ): Promise<void> {\n    const signal = options?.signal;\n    let abortHandler: (() => void) | undefined;\n    if (signal) {\n      if (signal.aborted) this.controller.abort();\n      abortHandler = this.controller.abort.bind(this.controller);\n      signal.addEventListener('abort', abortHandler);\n    }\n    try {\n      this.#beginRequest();\n      this._connected(null);\n      const stream = Stream.fromReadableStream<BetaMessageStreamEvent>(readableStream, this.controller);\n      for await (const event of stream) {\n        this.#addStreamEvent(event);\n      }\n      if (stream.controller.signal?.aborted) {\n        throw new APIUserAbortError();\n      }\n      this.#endRequest();\n    } finally {\n      if (signal && abortHandler) {\n        signal.removeEventListener('abort', abortHandler);\n      }\n    }\n  }\n\n  /**\n   * Mutates this.#currentMessage with the current event. Handling the accumulation of multiple messages\n   * will be needed to be handled by the caller, this method will throw if you try to accumulate for multiple\n   * messages.\n   */\n  #accumulateMessage(event: BetaMessageStreamEvent): BetaMessage {\n    let snapshot = this.#currentMessageSnapshot;\n\n    if (event.type === 'message_start') {\n      if (snapshot) {\n        throw new AnthropicError(`Unexpected event order, got ${event.type} before receiving \"message_stop\"`);\n      }\n      return event.message;\n    }\n\n    if (!snapshot) {\n      throw new AnthropicError(`Unexpected event order, got ${event.type} before \"message_start\"`);\n    }\n\n    switch (event.type) {\n      case 'message_stop':\n        return snapshot;\n      case 'message_delta':\n        snapshot.container = event.delta.container;\n        snapshot.stop_reason = event.delta.stop_reason;\n        snapshot.stop_sequence = event.delta.stop_sequence;\n        snapshot.usage.output_tokens = event.usage.output_tokens;\n        snapshot.context_management = event.context_management;\n\n        if (event.usage.input_tokens != null) {\n          snapshot.usage.input_tokens = event.usage.input_tokens;\n        }\n\n        if (event.usage.cache_creation_input_tokens != null) {\n          snapshot.usage.cache_creation_input_tokens = event.usage.cache_creation_input_tokens;\n        }\n\n        if (event.usage.cache_read_input_tokens != null) {\n          snapshot.usage.cache_read_input_tokens = event.usage.cache_read_input_tokens;\n        }\n\n        if (event.usage.server_tool_use != null) {\n          snapshot.usage.server_tool_use = event.usage.server_tool_use;\n        }\n\n        return snapshot;\n      case 'content_block_start':\n        snapshot.content.push(event.content_block);\n        return snapshot;\n      case 'content_block_delta': {\n        const snapshotContent = snapshot.content.at(event.index);\n\n        switch (event.delta.type) {\n          case 'text_delta': {\n            if (snapshotContent?.type === 'text') {\n              snapshot.content[event.index] = {\n                ...snapshotContent,\n                text: (snapshotContent.text || '') + event.delta.text,\n              };\n            }\n            break;\n          }\n          case 'citations_delta': {\n            if (snapshotContent?.type === 'text') {\n              snapshot.content[event.index] = {\n                ...snapshotContent,\n                citations: [...(snapshotContent.citations ?? []), event.delta.citation],\n              };\n            }\n            break;\n          }\n          case 'input_json_delta': {\n            if (snapshotContent && tracksToolInput(snapshotContent)) {\n              // we need to keep track of the raw JSON string as well so that we can\n              // re-parse it for each delta, for now we just store it as an untyped\n              // non-enumerable property on the snapshot\n              let jsonBuf = (snapshotContent as any)[JSON_BUF_PROPERTY] || '';\n              jsonBuf += event.delta.partial_json;\n\n              const newContent = { ...snapshotContent };\n              Object.defineProperty(newContent, JSON_BUF_PROPERTY, {\n                value: jsonBuf,\n                enumerable: false,\n                writable: true,\n              });\n\n              if (jsonBuf) {\n                try {\n                  newContent.input = partialParse(jsonBuf);\n                } catch (err) {\n                  const error = new AnthropicError(\n                    `Unable to parse tool parameter JSON from model. Please retry your request or adjust your prompt. Error: ${err}. JSON: ${jsonBuf}`,\n                  );\n                  this.#handleError(error);\n                }\n              }\n              snapshot.content[event.index] = newContent;\n            }\n            break;\n          }\n          case 'thinking_delta': {\n            if (snapshotContent?.type === 'thinking') {\n              snapshot.content[event.index] = {\n                ...snapshotContent,\n                thinking: snapshotContent.thinking + event.delta.thinking,\n              };\n            }\n            break;\n          }\n          case 'signature_delta': {\n            if (snapshotContent?.type === 'thinking') {\n              snapshot.content[event.index] = {\n                ...snapshotContent,\n                signature: event.delta.signature,\n              };\n            }\n            break;\n          }\n          default:\n            checkNever(event.delta);\n        }\n        return snapshot;\n      }\n      case 'content_block_stop':\n        return snapshot;\n    }\n  }\n\n  [Symbol.asyncIterator](): AsyncIterator<BetaMessageStreamEvent> {\n    const pushQueue: BetaMessageStreamEvent[] = [];\n    const readQueue: {\n      resolve: (chunk: BetaMessageStreamEvent | undefined) => void;\n      reject: (error: unknown) => void;\n    }[] = [];\n    let done = false;\n\n    this.on('streamEvent', (event) => {\n      const reader = readQueue.shift();\n      if (reader) {\n        reader.resolve(event);\n      } else {\n        pushQueue.push(event);\n      }\n    });\n\n    this.on('end', () => {\n      done = true;\n      for (const reader of readQueue) {\n        reader.resolve(undefined);\n      }\n      readQueue.length = 0;\n    });\n\n    this.on('abort', (err) => {\n      done = true;\n      for (const reader of readQueue) {\n        reader.reject(err);\n      }\n      readQueue.length = 0;\n    });\n\n    this.on('error', (err) => {\n      done = true;\n      for (const reader of readQueue) {\n        reader.reject(err);\n      }\n      readQueue.length = 0;\n    });\n\n    return {\n      next: async (): Promise<IteratorResult<BetaMessageStreamEvent>> => {\n        if (!pushQueue.length) {\n          if (done) {\n            return { value: undefined, done: true };\n          }\n          return new Promise<BetaMessageStreamEvent | undefined>((resolve, reject) =>\n            readQueue.push({ resolve, reject }),\n          ).then((chunk) => (chunk ? { value: chunk, done: false } : { value: undefined, done: true }));\n        }\n        const chunk = pushQueue.shift()!;\n        return { value: chunk, done: false };\n      },\n      return: async () => {\n        this.abort();\n        return { value: undefined, done: true };\n      },\n    };\n  }\n\n  toReadableStream(): ReadableStream {\n    const stream = new Stream(this[Symbol.asyncIterator].bind(this), this.controller);\n    return stream.toReadableStream();\n  }\n}\n\n// used to ensure exhaustive case matching without throwing a runtime error\nfunction checkNever(x: never) {}\n","import { isAbortError } from '../internal/errors';\nimport { AnthropicError, APIUserAbortError } from '../error';\nimport {\n  type ContentBlock,\n  Messages,\n  type Message,\n  type MessageStreamEvent,\n  type MessageParam,\n  type MessageCreateParams,\n  type MessageCreateParamsBase,\n  type TextBlock,\n  type TextCitation,\n  type ToolUseBlock,\n  type ServerToolUseBlock,\n} from '../resources/messages';\nimport { Stream } from '../streaming';\nimport { partialParse } from '../_vendor/partial-json-parser/parser';\nimport { RequestOptions } from '../internal/request-options';\n\nexport interface MessageStreamEvents {\n  connect: () => void;\n  streamEvent: (event: MessageStreamEvent, snapshot: Message) => void;\n  text: (textDelta: string, textSnapshot: string) => void;\n  citation: (citation: TextCitation, citationsSnapshot: TextCitation[]) => void;\n  inputJson: (partialJson: string, jsonSnapshot: unknown) => void;\n  thinking: (thinkingDelta: string, thinkingSnapshot: string) => void;\n  signature: (signature: string) => void;\n  message: (message: Message) => void;\n  contentBlock: (content: ContentBlock) => void;\n  finalMessage: (message: Message) => void;\n  error: (error: AnthropicError) => void;\n  abort: (error: APIUserAbortError) => void;\n  end: () => void;\n}\n\ntype MessageStreamEventListeners<Event extends keyof MessageStreamEvents> = {\n  listener: MessageStreamEvents[Event];\n  once?: boolean;\n}[];\n\nconst JSON_BUF_PROPERTY = '__json_buf';\n\nexport type TracksToolInput = ToolUseBlock | ServerToolUseBlock;\n\nfunction tracksToolInput(content: ContentBlock): content is TracksToolInput {\n  return content.type === 'tool_use' || content.type === 'server_tool_use';\n}\n\nexport class MessageStream implements AsyncIterable<MessageStreamEvent> {\n  messages: MessageParam[] = [];\n  receivedMessages: Message[] = [];\n  #currentMessageSnapshot: Message | undefined;\n\n  controller: AbortController = new AbortController();\n\n  #connectedPromise: Promise<Response | null>;\n  #resolveConnectedPromise: (response: Response | null) => void = () => {};\n  #rejectConnectedPromise: (error: AnthropicError) => void = () => {};\n\n  #endPromise: Promise<void>;\n  #resolveEndPromise: () => void = () => {};\n  #rejectEndPromise: (error: AnthropicError) => void = () => {};\n\n  #listeners: { [Event in keyof MessageStreamEvents]?: MessageStreamEventListeners<Event> } = {};\n\n  #ended = false;\n  #errored = false;\n  #aborted = false;\n  #catchingPromiseCreated = false;\n  #response: Response | null | undefined;\n  #request_id: string | null | undefined;\n\n  constructor() {\n    this.#connectedPromise = new Promise<Response | null>((resolve, reject) => {\n      this.#resolveConnectedPromise = resolve;\n      this.#rejectConnectedPromise = reject;\n    });\n\n    this.#endPromise = new Promise<void>((resolve, reject) => {\n      this.#resolveEndPromise = resolve;\n      this.#rejectEndPromise = reject;\n    });\n\n    // Don't let these promises cause unhandled rejection errors.\n    // we will manually cause an unhandled rejection error later\n    // if the user hasn't registered any error listener or called\n    // any promise-returning method.\n    this.#connectedPromise.catch(() => {});\n    this.#endPromise.catch(() => {});\n  }\n\n  get response(): Response | null | undefined {\n    return this.#response;\n  }\n\n  get request_id(): string | null | undefined {\n    return this.#request_id;\n  }\n\n  /**\n   * Returns the `MessageStream` data, the raw `Response` instance and the ID of the request,\n   * returned vie the `request-id` header which is useful for debugging requests and resporting\n   * issues to Anthropic.\n   *\n   * This is the same as the `APIPromise.withResponse()` method.\n   *\n   * This method will raise an error if you created the stream using `MessageStream.fromReadableStream`\n   * as no `Response` is available.\n   */\n  async withResponse(): Promise<{\n    data: MessageStream;\n    response: Response;\n    request_id: string | null | undefined;\n  }> {\n    this.#catchingPromiseCreated = true;\n\n    const response = await this.#connectedPromise;\n    if (!response) {\n      throw new Error('Could not resolve a `Response` object');\n    }\n\n    return {\n      data: this,\n      response,\n      request_id: response.headers.get('request-id'),\n    };\n  }\n\n  /**\n   * Intended for use on the frontend, consuming a stream produced with\n   * `.toReadableStream()` on the backend.\n   *\n   * Note that messages sent to the model do not appear in `.on('message')`\n   * in this context.\n   */\n  static fromReadableStream(stream: ReadableStream): MessageStream {\n    const runner = new MessageStream();\n    runner._run(() => runner._fromReadableStream(stream));\n    return runner;\n  }\n\n  static createMessage(\n    messages: Messages,\n    params: MessageCreateParamsBase,\n    options?: RequestOptions,\n  ): MessageStream {\n    const runner = new MessageStream();\n    for (const message of params.messages) {\n      runner._addMessageParam(message);\n    }\n    runner._run(() =>\n      runner._createMessage(\n        messages,\n        { ...params, stream: true },\n        { ...options, headers: { ...options?.headers, 'X-Stainless-Helper-Method': 'stream' } },\n      ),\n    );\n    return runner;\n  }\n\n  protected _run(executor: () => Promise<any>) {\n    executor().then(() => {\n      this._emitFinal();\n      this._emit('end');\n    }, this.#handleError);\n  }\n\n  protected _addMessageParam(message: MessageParam) {\n    this.messages.push(message);\n  }\n\n  protected _addMessage(message: Message, emit = true) {\n    this.receivedMessages.push(message);\n    if (emit) {\n      this._emit('message', message);\n    }\n  }\n\n  protected async _createMessage(\n    messages: Messages,\n    params: MessageCreateParams,\n    options?: RequestOptions,\n  ): Promise<void> {\n    const signal = options?.signal;\n    let abortHandler: (() => void) | undefined;\n    if (signal) {\n      if (signal.aborted) this.controller.abort();\n      abortHandler = this.controller.abort.bind(this.controller);\n      signal.addEventListener('abort', abortHandler);\n    }\n    try {\n      this.#beginRequest();\n      const { response, data: stream } = await messages\n        .create({ ...params, stream: true }, { ...options, signal: this.controller.signal })\n        .withResponse();\n      this._connected(response);\n      for await (const event of stream) {\n        this.#addStreamEvent(event);\n      }\n      if (stream.controller.signal?.aborted) {\n        throw new APIUserAbortError();\n      }\n      this.#endRequest();\n    } finally {\n      if (signal && abortHandler) {\n        signal.removeEventListener('abort', abortHandler);\n      }\n    }\n  }\n\n  protected _connected(response: Response | null) {\n    if (this.ended) return;\n    this.#response = response;\n    this.#request_id = response?.headers.get('request-id');\n    this.#resolveConnectedPromise(response);\n    this._emit('connect');\n  }\n\n  get ended(): boolean {\n    return this.#ended;\n  }\n\n  get errored(): boolean {\n    return this.#errored;\n  }\n\n  get aborted(): boolean {\n    return this.#aborted;\n  }\n\n  abort() {\n    this.controller.abort();\n  }\n\n  /**\n   * Adds the listener function to the end of the listeners array for the event.\n   * No checks are made to see if the listener has already been added. Multiple calls passing\n   * the same combination of event and listener will result in the listener being added, and\n   * called, multiple times.\n   * @returns this MessageStream, so that calls can be chained\n   */\n  on<Event extends keyof MessageStreamEvents>(event: Event, listener: MessageStreamEvents[Event]): this {\n    const listeners: MessageStreamEventListeners<Event> =\n      this.#listeners[event] || (this.#listeners[event] = []);\n    listeners.push({ listener });\n    return this;\n  }\n\n  /**\n   * Removes the specified listener from the listener array for the event.\n   * off() will remove, at most, one instance of a listener from the listener array. If any single\n   * listener has been added multiple times to the listener array for the specified event, then\n   * off() must be called multiple times to remove each instance.\n   * @returns this MessageStream, so that calls can be chained\n   */\n  off<Event extends keyof MessageStreamEvents>(event: Event, listener: MessageStreamEvents[Event]): this {\n    const listeners = this.#listeners[event];\n    if (!listeners) return this;\n    const index = listeners.findIndex((l) => l.listener === listener);\n    if (index >= 0) listeners.splice(index, 1);\n    return this;\n  }\n\n  /**\n   * Adds a one-time listener function for the event. The next time the event is triggered,\n   * this listener is removed and then invoked.\n   * @returns this MessageStream, so that calls can be chained\n   */\n  once<Event extends keyof MessageStreamEvents>(event: Event, listener: MessageStreamEvents[Event]): this {\n    const listeners: MessageStreamEventListeners<Event> =\n      this.#listeners[event] || (this.#listeners[event] = []);\n    listeners.push({ listener, once: true });\n    return this;\n  }\n\n  /**\n   * This is similar to `.once()`, but returns a Promise that resolves the next time\n   * the event is triggered, instead of calling a listener callback.\n   * @returns a Promise that resolves the next time given event is triggered,\n   * or rejects if an error is emitted.  (If you request the 'error' event,\n   * returns a promise that resolves with the error).\n   *\n   * Example:\n   *\n   *   const message = await stream.emitted('message') // rejects if the stream errors\n   */\n  emitted<Event extends keyof MessageStreamEvents>(\n    event: Event,\n  ): Promise<\n    Parameters<MessageStreamEvents[Event]> extends [infer Param] ? Param\n    : Parameters<MessageStreamEvents[Event]> extends [] ? void\n    : Parameters<MessageStreamEvents[Event]>\n  > {\n    return new Promise((resolve, reject) => {\n      this.#catchingPromiseCreated = true;\n      if (event !== 'error') this.once('error', reject);\n      this.once(event, resolve as any);\n    });\n  }\n\n  async done(): Promise<void> {\n    this.#catchingPromiseCreated = true;\n    await this.#endPromise;\n  }\n\n  get currentMessage(): Message | undefined {\n    return this.#currentMessageSnapshot;\n  }\n\n  #getFinalMessage(): Message {\n    if (this.receivedMessages.length === 0) {\n      throw new AnthropicError('stream ended without producing a Message with role=assistant');\n    }\n    return this.receivedMessages.at(-1)!;\n  }\n\n  /**\n   * @returns a promise that resolves with the the final assistant Message response,\n   * or rejects if an error occurred or the stream ended prematurely without producing a Message.\n   */\n  async finalMessage(): Promise<Message> {\n    await this.done();\n    return this.#getFinalMessage();\n  }\n\n  #getFinalText(): string {\n    if (this.receivedMessages.length === 0) {\n      throw new AnthropicError('stream ended without producing a Message with role=assistant');\n    }\n    const textBlocks = this.receivedMessages\n      .at(-1)!\n      .content.filter((block): block is TextBlock => block.type === 'text')\n      .map((block) => block.text);\n    if (textBlocks.length === 0) {\n      throw new AnthropicError('stream ended without producing a content block with type=text');\n    }\n    return textBlocks.join(' ');\n  }\n\n  /**\n   * @returns a promise that resolves with the the final assistant Message's text response, concatenated\n   * together if there are more than one text blocks.\n   * Rejects if an error occurred or the stream ended prematurely without producing a Message.\n   */\n  async finalText(): Promise<string> {\n    await this.done();\n    return this.#getFinalText();\n  }\n\n  #handleError = (error: unknown) => {\n    this.#errored = true;\n    if (isAbortError(error)) {\n      error = new APIUserAbortError();\n    }\n    if (error instanceof APIUserAbortError) {\n      this.#aborted = true;\n      return this._emit('abort', error);\n    }\n    if (error instanceof AnthropicError) {\n      return this._emit('error', error);\n    }\n    if (error instanceof Error) {\n      const anthropicError: AnthropicError = new AnthropicError(error.message);\n      // @ts-ignore\n      anthropicError.cause = error;\n      return this._emit('error', anthropicError);\n    }\n    return this._emit('error', new AnthropicError(String(error)));\n  };\n\n  protected _emit<Event extends keyof MessageStreamEvents>(\n    event: Event,\n    ...args: Parameters<MessageStreamEvents[Event]>\n  ) {\n    // make sure we don't emit any MessageStreamEvents after end\n    if (this.#ended) return;\n\n    if (event === 'end') {\n      this.#ended = true;\n      this.#resolveEndPromise();\n    }\n\n    const listeners: MessageStreamEventListeners<Event> | undefined = this.#listeners[event];\n    if (listeners) {\n      this.#listeners[event] = listeners.filter((l) => !l.once) as any;\n      listeners.forEach(({ listener }: any) => listener(...args));\n    }\n\n    if (event === 'abort') {\n      const error = args[0] as APIUserAbortError;\n      if (!this.#catchingPromiseCreated && !listeners?.length) {\n        Promise.reject(error);\n      }\n      this.#rejectConnectedPromise(error);\n      this.#rejectEndPromise(error);\n      this._emit('end');\n      return;\n    }\n\n    if (event === 'error') {\n      // NOTE: _emit('error', error) should only be called from #handleError().\n\n      const error = args[0] as AnthropicError;\n      if (!this.#catchingPromiseCreated && !listeners?.length) {\n        // Trigger an unhandled rejection if the user hasn't registered any error handlers.\n        // If you are seeing stack traces here, make sure to handle errors via either:\n        // - runner.on('error', () => ...)\n        // - await runner.done()\n        // - await runner.final...()\n        // - etc.\n        Promise.reject(error);\n      }\n      this.#rejectConnectedPromise(error);\n      this.#rejectEndPromise(error);\n      this._emit('end');\n    }\n  }\n\n  protected _emitFinal() {\n    const finalMessage = this.receivedMessages.at(-1);\n    if (finalMessage) {\n      this._emit('finalMessage', this.#getFinalMessage());\n    }\n  }\n\n  #beginRequest() {\n    if (this.ended) return;\n    this.#currentMessageSnapshot = undefined;\n  }\n  #addStreamEvent(event: MessageStreamEvent) {\n    if (this.ended) return;\n    const messageSnapshot = this.#accumulateMessage(event);\n    this._emit('streamEvent', event, messageSnapshot);\n\n    switch (event.type) {\n      case 'content_block_delta': {\n        const content = messageSnapshot.content.at(-1)!;\n        switch (event.delta.type) {\n          case 'text_delta': {\n            if (content.type === 'text') {\n              this._emit('text', event.delta.text, content.text || '');\n            }\n            break;\n          }\n          case 'citations_delta': {\n            if (content.type === 'text') {\n              this._emit('citation', event.delta.citation, content.citations ?? []);\n            }\n            break;\n          }\n          case 'input_json_delta': {\n            if (tracksToolInput(content) && content.input) {\n              this._emit('inputJson', event.delta.partial_json, content.input);\n            }\n            break;\n          }\n          case 'thinking_delta': {\n            if (content.type === 'thinking') {\n              this._emit('thinking', event.delta.thinking, content.thinking);\n            }\n            break;\n          }\n          case 'signature_delta': {\n            if (content.type === 'thinking') {\n              this._emit('signature', content.signature);\n            }\n            break;\n          }\n          default:\n            checkNever(event.delta);\n        }\n        break;\n      }\n      case 'message_stop': {\n        this._addMessageParam(messageSnapshot);\n        this._addMessage(messageSnapshot, true);\n        break;\n      }\n      case 'content_block_stop': {\n        this._emit('contentBlock', messageSnapshot.content.at(-1)!);\n        break;\n      }\n      case 'message_start': {\n        this.#currentMessageSnapshot = messageSnapshot;\n        break;\n      }\n      case 'content_block_start':\n      case 'message_delta':\n        break;\n    }\n  }\n  #endRequest(): Message {\n    if (this.ended) {\n      throw new AnthropicError(`stream has ended, this shouldn't happen`);\n    }\n    const snapshot = this.#currentMessageSnapshot;\n    if (!snapshot) {\n      throw new AnthropicError(`request ended without sending any chunks`);\n    }\n    this.#currentMessageSnapshot = undefined;\n    return snapshot;\n  }\n\n  protected async _fromReadableStream(\n    readableStream: ReadableStream,\n    options?: RequestOptions,\n  ): Promise<void> {\n    const signal = options?.signal;\n    let abortHandler: (() => void) | undefined;\n    if (signal) {\n      if (signal.aborted) this.controller.abort();\n      abortHandler = this.controller.abort.bind(this.controller);\n      signal.addEventListener('abort', abortHandler);\n    }\n    try {\n      this.#beginRequest();\n      this._connected(null);\n      const stream = Stream.fromReadableStream<MessageStreamEvent>(readableStream, this.controller);\n      for await (const event of stream) {\n        this.#addStreamEvent(event);\n      }\n      if (stream.controller.signal?.aborted) {\n        throw new APIUserAbortError();\n      }\n      this.#endRequest();\n    } finally {\n      if (signal && abortHandler) {\n        signal.removeEventListener('abort', abortHandler);\n      }\n    }\n  }\n\n  /**\n   * Mutates this.#currentMessage with the current event. Handling the accumulation of multiple messages\n   * will be needed to be handled by the caller, this method will throw if you try to accumulate for multiple\n   * messages.\n   */\n  #accumulateMessage(event: MessageStreamEvent): Message {\n    let snapshot = this.#currentMessageSnapshot;\n\n    if (event.type === 'message_start') {\n      if (snapshot) {\n        throw new AnthropicError(`Unexpected event order, got ${event.type} before receiving \"message_stop\"`);\n      }\n      return event.message;\n    }\n\n    if (!snapshot) {\n      throw new AnthropicError(`Unexpected event order, got ${event.type} before \"message_start\"`);\n    }\n\n    switch (event.type) {\n      case 'message_stop':\n        return snapshot;\n      case 'message_delta':\n        snapshot.stop_reason = event.delta.stop_reason;\n        snapshot.stop_sequence = event.delta.stop_sequence;\n        snapshot.usage.output_tokens = event.usage.output_tokens;\n\n        // Update other usage fields if they exist in the event\n        if (event.usage.input_tokens != null) {\n          snapshot.usage.input_tokens = event.usage.input_tokens;\n        }\n\n        if (event.usage.cache_creation_input_tokens != null) {\n          snapshot.usage.cache_creation_input_tokens = event.usage.cache_creation_input_tokens;\n        }\n\n        if (event.usage.cache_read_input_tokens != null) {\n          snapshot.usage.cache_read_input_tokens = event.usage.cache_read_input_tokens;\n        }\n\n        if (event.usage.server_tool_use != null) {\n          snapshot.usage.server_tool_use = event.usage.server_tool_use;\n        }\n\n        return snapshot;\n      case 'content_block_start':\n        snapshot.content.push({ ...event.content_block });\n        return snapshot;\n      case 'content_block_delta': {\n        const snapshotContent = snapshot.content.at(event.index);\n\n        switch (event.delta.type) {\n          case 'text_delta': {\n            if (snapshotContent?.type === 'text') {\n              snapshot.content[event.index] = {\n                ...snapshotContent,\n                text: (snapshotContent.text || '') + event.delta.text,\n              };\n            }\n            break;\n          }\n          case 'citations_delta': {\n            if (snapshotContent?.type === 'text') {\n              snapshot.content[event.index] = {\n                ...snapshotContent,\n                citations: [...(snapshotContent.citations ?? []), event.delta.citation],\n              };\n            }\n            break;\n          }\n          case 'input_json_delta': {\n            if (snapshotContent && tracksToolInput(snapshotContent)) {\n              // we need to keep track of the raw JSON string as well so that we can\n              // re-parse it for each delta, for now we just store it as an untyped\n              // non-enumerable property on the snapshot\n              let jsonBuf = (snapshotContent as any)[JSON_BUF_PROPERTY] || '';\n              jsonBuf += event.delta.partial_json;\n\n              const newContent = { ...snapshotContent };\n              Object.defineProperty(newContent, JSON_BUF_PROPERTY, {\n                value: jsonBuf,\n                enumerable: false,\n                writable: true,\n              });\n\n              if (jsonBuf) {\n                newContent.input = partialParse(jsonBuf);\n              }\n              snapshot.content[event.index] = newContent;\n            }\n            break;\n          }\n          case 'thinking_delta': {\n            if (snapshotContent?.type === 'thinking') {\n              snapshot.content[event.index] = {\n                ...snapshotContent,\n                thinking: snapshotContent.thinking + event.delta.thinking,\n              };\n            }\n            break;\n          }\n          case 'signature_delta': {\n            if (snapshotContent?.type === 'thinking') {\n              snapshot.content[event.index] = {\n                ...snapshotContent,\n                signature: event.delta.signature,\n              };\n            }\n            break;\n          }\n          default:\n            checkNever(event.delta);\n        }\n\n        return snapshot;\n      }\n      case 'content_block_stop':\n        return snapshot;\n    }\n  }\n\n  [Symbol.asyncIterator](): AsyncIterator<MessageStreamEvent> {\n    const pushQueue: MessageStreamEvent[] = [];\n    const readQueue: {\n      resolve: (chunk: MessageStreamEvent | undefined) => void;\n      reject: (error: unknown) => void;\n    }[] = [];\n    let done = false;\n\n    this.on('streamEvent', (event) => {\n      const reader = readQueue.shift();\n      if (reader) {\n        reader.resolve(event);\n      } else {\n        pushQueue.push(event);\n      }\n    });\n\n    this.on('end', () => {\n      done = true;\n      for (const reader of readQueue) {\n        reader.resolve(undefined);\n      }\n      readQueue.length = 0;\n    });\n\n    this.on('abort', (err) => {\n      done = true;\n      for (const reader of readQueue) {\n        reader.reject(err);\n      }\n      readQueue.length = 0;\n    });\n\n    this.on('error', (err) => {\n      done = true;\n      for (const reader of readQueue) {\n        reader.reject(err);\n      }\n      readQueue.length = 0;\n    });\n\n    return {\n      next: async (): Promise<IteratorResult<MessageStreamEvent>> => {\n        if (!pushQueue.length) {\n          if (done) {\n            return { value: undefined, done: true };\n          }\n          return new Promise<MessageStreamEvent | undefined>((resolve, reject) =>\n            readQueue.push({ resolve, reject }),\n          ).then((chunk) => (chunk ? { value: chunk, done: false } : { value: undefined, done: true }));\n        }\n        const chunk = pushQueue.shift()!;\n        return { value: chunk, done: false };\n      },\n      return: async () => {\n        this.abort();\n        return { value: undefined, done: true };\n      },\n    };\n  }\n\n  toReadableStream(): ReadableStream {\n    const stream = new Stream(this[Symbol.asyncIterator].bind(this), this.controller);\n    return stream.toReadableStream();\n  }\n}\n\n// used to ensure exhaustive case matching without throwing a runtime error\nfunction checkNever(x: never) {}\n","/* global global, window */\nimport { sha3_512 as sha3 } from \"@noble/hashes/sha3.js\";\nimport BigNumber from \"bignumber.js\";\n\nconst defaultLength = 24;\nconst bigLength = 32;\n\n/**\n * A cryptographically secure random number generator that mimics Math.random()\n * Uses the Web Crypto API which is available in both modern browsers and Node.js\n * Returns a random float in the range [0, 1) just like Math.random()\n */\nconst createRandom = () => {\n  // Use globalThis.crypto which works in both Node.js and browsers\n  if (\n    typeof globalThis !== \"undefined\" &&\n    globalThis.crypto &&\n    typeof globalThis.crypto.getRandomValues === \"function\"\n  ) {\n    return () => {\n      // Generate a random 32-bit unsigned integer\n      const buffer = new Uint32Array(1);\n      globalThis.crypto.getRandomValues(buffer);\n      // Convert to a float in [0, 1) by dividing by 2^32\n      return buffer[0] / 0x100000000;\n    };\n  }\n  // Fallback to Math.random if crypto is not available\n  return Math.random;\n};\n\nconst random = createRandom();\n\nconst createEntropy = (length = 4, rand = random) => {\n  let entropy = \"\";\n\n  while (entropy.length < length) {\n    entropy = entropy + Math.floor(rand() * 36).toString(36);\n  }\n  return entropy;\n};\n\n/*\n * Adapted from https://github.com/juanelas/bigint-conversion\n * MIT License Copyright (c) 2018 Juan Hernndez Serrano\n */\nfunction bufToBigInt(buf) {\n  let value = new BigNumber(0);\n\n  for (const i of buf.values()) {\n    // Multiply by 256 (left shift by 8 bits) and add the current byte\n    value = value.multipliedBy(256).plus(i);\n  }\n  return value;\n}\n\nconst hash = (input = \"\") => {\n  // Drop the first character because it will bias the histogram\n  // to the left.\n  const encoder = new TextEncoder();\n  return bufToBigInt(sha3(encoder.encode(input)))\n    .toString(36)\n    .slice(1);\n};\n\nconst alphabet = Array.from({ length: 26 }, (x, i) =>\n  String.fromCharCode(i + 97)\n);\n\nconst randomLetter = (rand) => alphabet[Math.floor(rand() * alphabet.length)];\n\n/*\nThis is a fingerprint of the host environment. It is used to help\nprevent collisions when generating ids in a distributed system.\nIf no global object is available, you can pass in your own, or fall back\non a random string.\n*/\nconst createFingerprint = ({\n  globalObj = typeof global !== \"undefined\"\n    ? global\n    : typeof window !== \"undefined\"\n    ? window\n    : {},\n  random: rand = random,\n} = {}) => {\n  const globals = Object.keys(globalObj).toString();\n  const sourceString = globals.length\n    ? globals + createEntropy(bigLength, rand)\n    : createEntropy(bigLength, rand);\n\n  return hash(sourceString).substring(0, bigLength);\n};\n\nconst createCounter = (count) => () => {\n  return count++;\n};\n\n// ~22k hosts before 50% chance of initial counter collision\n// with a remaining counter range of 9.0e+15 in JavaScript.\nconst initialCountMax = 476782367;\n\nconst init = ({\n  // Fallback if the user does not pass in a CSPRNG. This should be OK\n  // because we don't rely solely on the random number generator for entropy.\n  // We also use the host fingerprint, current time, and a session counter.\n  random: rand = random,\n  counter = createCounter(Math.floor(rand() * initialCountMax)),\n  length = defaultLength,\n  fingerprint = createFingerprint({ random: rand }),\n} = {}) => {\n  if (length > bigLength) {\n    throw new Error(\n      `Length must be between 2 and ${bigLength}. Received: ${length}`\n    );\n  }\n  return function cuid2() {\n    const firstLetter = randomLetter(rand);\n\n    // If we're lucky, the `.toString(36)` calls may reduce hashing rounds\n    // by shortening the input to the hash function a little.\n    const time = Date.now().toString(36);\n    const count = counter().toString(36);\n\n    // The salt should be long enough to be globally unique across the full\n    // length of the hash. For simplicity, we use the same length as the\n    // intended id output.\n    const salt = createEntropy(length, rand);\n    const hashInput = `${time + salt + count + fingerprint}`;\n\n    return `${firstLetter + hash(hashInput).substring(1, length)}`;\n  };\n};\n\nconst createId = init();\n\nconst isCuid = (id, { minLength = 2, maxLength = bigLength } = {}) => {\n  const length = id.length;\n  const regex = /^[a-z][0-9a-z]+$/;\n\n  try {\n    if (\n      typeof id === \"string\" &&\n      length >= minLength &&\n      length <= maxLength &&\n      regex.test(id)\n    )\n      return true;\n  } finally {\n  }\n\n  return false;\n};\n\nexport const getConstants = () => ({ defaultLength, bigLength });\nexport { init };\nexport { createId };\nexport { bufToBigInt };\nexport { createCounter };\nexport { createFingerprint };\nexport { isCuid };\n","// File containing shared constants\n\n/**\n * Model-specific timeout constraints for non-streaming requests\n */\nexport const MODEL_NONSTREAMING_TOKENS: Record<string, number> = {\n  'claude-opus-4-20250514': 8192,\n  'claude-opus-4-0': 8192,\n  'claude-4-opus-20250514': 8192,\n  'anthropic.claude-opus-4-20250514-v1:0': 8192,\n  'claude-opus-4@20250514': 8192,\n  'claude-opus-4-1-20250805': 8192,\n  'anthropic.claude-opus-4-1-20250805-v1:0': 8192,\n  'claude-opus-4-1@20250805': 8192,\n};\n","import { BetaRunnableTool } from './BetaRunnableTool';\nimport { Anthropic } from '../..';\nimport { AnthropicError } from '../../core/error';\nimport { BetaMessage, BetaMessageParam, BetaToolUnion, MessageCreateParams } from '../../resources/beta';\nimport { BetaMessageStream } from '../BetaMessageStream';\nimport { RequestOptions } from '../../internal/request-options';\nimport { buildHeaders } from '../../internal/headers';\nimport { CompactionControl, DEFAULT_SUMMARY_PROMPT, DEFAULT_TOKEN_THRESHOLD } from './CompactionControl';\n\n/**\n * Just Promise.withResolvers(), which is not available in all environments.\n */\nfunction promiseWithResolvers<T>(): {\n  promise: Promise<T>;\n  resolve: (value: T) => void;\n  reject: (reason?: any) => void;\n} {\n  let resolve: (value: T) => void;\n  let reject: (reason?: any) => void;\n  const promise = new Promise<T>((res, rej) => {\n    resolve = res;\n    reject = rej;\n  });\n  return { promise, resolve: resolve!, reject: reject! };\n}\n\n/**\n * A ToolRunner handles the automatic conversation loop between the assistant and tools.\n *\n * A ToolRunner is an async iterable that yields either BetaMessage or BetaMessageStream objects\n * depending on the streaming configuration.\n */\nexport class BetaToolRunner<Stream extends boolean> {\n  /** Whether the async iterator has been consumed */\n  #consumed = false;\n  /** Whether parameters have been mutated since the last API call */\n  #mutated = false;\n  /** Current state containing the request parameters */\n  #state: { params: BetaToolRunnerParams };\n  #options: BetaToolRunnerRequestOptions;\n  /** Promise for the last message received from the assistant */\n  #message?: Promise<BetaMessage> | undefined;\n  /** Cached tool response to avoid redundant executions */\n  #toolResponse?: Promise<BetaMessageParam | null> | undefined;\n  /** Promise resolvers for waiting on completion */\n  #completion: {\n    promise: Promise<BetaMessage>;\n    resolve: (value: BetaMessage) => void;\n    reject: (reason?: any) => void;\n  };\n  /** Number of iterations (API requests) made so far */\n  #iterationCount = 0;\n\n  constructor(\n    private client: Anthropic,\n    params: BetaToolRunnerParams,\n    options?: BetaToolRunnerRequestOptions,\n  ) {\n    this.#state = {\n      params: {\n        // You can't clone the entire params since there are functions as handlers.\n        // You also don't really need to clone params.messages, but it probably will prevent a foot gun\n        // somewhere.\n        ...params,\n        messages: structuredClone(params.messages),\n      },\n    };\n\n    this.#options = {\n      ...options,\n      headers: buildHeaders([{ 'x-stainless-helper': 'BetaToolRunner' }, options?.headers]),\n    };\n    this.#completion = promiseWithResolvers();\n  }\n\n  async #checkAndCompact(): Promise<boolean> {\n    const compactionControl = this.#state.params.compactionControl;\n    if (!compactionControl || !compactionControl.enabled) {\n      return false;\n    }\n\n    let tokensUsed = 0;\n    if (this.#message !== undefined) {\n      try {\n        const message = await this.#message;\n        const totalInputTokens =\n          message.usage.input_tokens +\n          (message.usage.cache_creation_input_tokens ?? 0) +\n          (message.usage.cache_read_input_tokens ?? 0);\n        tokensUsed = totalInputTokens + message.usage.output_tokens;\n      } catch {\n        // If we can't get the message, skip compaction\n        return false;\n      }\n    }\n\n    const threshold = compactionControl.contextTokenThreshold ?? DEFAULT_TOKEN_THRESHOLD;\n\n    if (tokensUsed < threshold) {\n      return false;\n    }\n\n    const model = compactionControl.model ?? this.#state.params.model;\n    const summaryPrompt = compactionControl.summaryPrompt ?? DEFAULT_SUMMARY_PROMPT;\n\n    const messages = this.#state.params.messages;\n\n    if (messages[messages.length - 1]!.role === 'assistant') {\n      // Remove tool_use blocks from the last message to avoid 400 error\n      // (tool_use requires tool_result, which we don't have yet)\n      const lastMessage = messages[messages.length - 1]!;\n      if (Array.isArray(lastMessage.content)) {\n        const nonToolBlocks = lastMessage.content.filter((block) => block.type !== 'tool_use');\n\n        if (nonToolBlocks.length === 0) {\n          // If all blocks were tool_use, just remove the message entirely\n          messages.pop();\n        } else {\n          lastMessage.content = nonToolBlocks;\n        }\n      }\n    }\n\n    const response = await this.client.beta.messages.create(\n      {\n        model,\n        messages: [\n          ...messages,\n          {\n            role: 'user',\n            content: [\n              {\n                type: 'text',\n                text: summaryPrompt,\n              },\n            ],\n          },\n        ],\n        max_tokens: this.#state.params.max_tokens,\n      },\n      {\n        headers: { 'x-stainless-helper': 'compaction' },\n      },\n    );\n\n    if (response.content[0]?.type !== 'text') {\n      throw new AnthropicError('Expected text response for compaction');\n    }\n    this.#state.params.messages = [\n      {\n        role: 'user',\n        content: response.content,\n      },\n    ];\n    return true;\n  }\n\n  async *[Symbol.asyncIterator](): AsyncIterator<\n    Stream extends true ? BetaMessageStream\n    : Stream extends false ? BetaMessage\n    : BetaMessage | BetaMessageStream\n  > {\n    if (this.#consumed) {\n      throw new AnthropicError('Cannot iterate over a consumed stream');\n    }\n\n    this.#consumed = true;\n    this.#mutated = true;\n    this.#toolResponse = undefined;\n\n    try {\n      while (true) {\n        let stream;\n        try {\n          if (\n            this.#state.params.max_iterations &&\n            this.#iterationCount >= this.#state.params.max_iterations\n          ) {\n            break;\n          }\n\n          this.#mutated = false;\n          this.#toolResponse = undefined;\n          this.#iterationCount++;\n          this.#message = undefined;\n\n          const { max_iterations, compactionControl, ...params } = this.#state.params;\n\n          if (params.stream) {\n            stream = this.client.beta.messages.stream({ ...params }, this.#options);\n            this.#message = stream.finalMessage();\n            // Make sure that this promise doesn't throw before we get the option to do something about it.\n            // Error will be caught when we call await this.#message ultimately\n            this.#message.catch(() => {});\n            yield stream as any;\n          } else {\n            this.#message = this.client.beta.messages.create({ ...params, stream: false }, this.#options);\n            yield this.#message as any;\n          }\n\n          const isCompacted = await this.#checkAndCompact();\n          if (!isCompacted) {\n            if (!this.#mutated) {\n              const { role, content } = await this.#message;\n              this.#state.params.messages.push({ role, content });\n            }\n\n            const toolMessage = await this.#generateToolResponse(this.#state.params.messages.at(-1)!);\n            if (toolMessage) {\n              this.#state.params.messages.push(toolMessage);\n            } else if (!this.#mutated) {\n              break;\n            }\n          }\n        } finally {\n          if (stream) {\n            stream.abort();\n          }\n        }\n      }\n\n      if (!this.#message) {\n        throw new AnthropicError('ToolRunner concluded without a message from the server');\n      }\n\n      this.#completion.resolve(await this.#message);\n    } catch (error) {\n      this.#consumed = false;\n      // Silence unhandled promise errors\n      this.#completion.promise.catch(() => {});\n      this.#completion.reject(error);\n      this.#completion = promiseWithResolvers();\n      throw error;\n    }\n  }\n\n  /**\n   * Update the parameters for the next API call. This invalidates any cached tool responses.\n   *\n   * @param paramsOrMutator - Either new parameters or a function to mutate existing parameters\n   *\n   * @example\n   * // Direct parameter update\n   * runner.setMessagesParams({\n   *   model: 'claude-3-5-haiku-latest',\n   *   max_tokens: 500,\n   * });\n   *\n   * @example\n   * // Using a mutator function\n   * runner.setMessagesParams((params) => ({\n   *   ...params,\n   *   max_tokens: 100,\n   * }));\n   */\n  setMessagesParams(params: BetaToolRunnerParams): void;\n  setMessagesParams(mutator: (prevParams: BetaToolRunnerParams) => BetaToolRunnerParams): void;\n  setMessagesParams(\n    paramsOrMutator: BetaToolRunnerParams | ((prevParams: BetaToolRunnerParams) => BetaToolRunnerParams),\n  ) {\n    if (typeof paramsOrMutator === 'function') {\n      this.#state.params = paramsOrMutator(this.#state.params);\n    } else {\n      this.#state.params = paramsOrMutator;\n    }\n    this.#mutated = true;\n    // Invalidate cached tool response since parameters changed\n    this.#toolResponse = undefined;\n  }\n\n  /**\n   * Get the tool response for the last message from the assistant.\n   * Avoids redundant tool executions by caching results.\n   *\n   * @returns A promise that resolves to a BetaMessageParam containing tool results, or null if no tools need to be executed\n   *\n   * @example\n   * const toolResponse = await runner.generateToolResponse();\n   * if (toolResponse) {\n   *   console.log('Tool results:', toolResponse.content);\n   * }\n   */\n  async generateToolResponse() {\n    const message = (await this.#message) ?? this.params.messages.at(-1);\n    if (!message) {\n      return null;\n    }\n    return this.#generateToolResponse(message);\n  }\n\n  async #generateToolResponse(lastMessage: BetaMessageParam) {\n    if (this.#toolResponse !== undefined) {\n      return this.#toolResponse;\n    }\n    this.#toolResponse = generateToolResponse(this.#state.params, lastMessage);\n    return this.#toolResponse;\n  }\n\n  /**\n   * Wait for the async iterator to complete. This works even if the async iterator hasn't yet started, and\n   * will wait for an instance to start and go to completion.\n   *\n   * @returns A promise that resolves to the final BetaMessage when the iterator completes\n   *\n   * @example\n   * // Start consuming the iterator\n   * for await (const message of runner) {\n   *   console.log('Message:', message.content);\n   * }\n   *\n   * // Meanwhile, wait for completion from another part of the code\n   * const finalMessage = await runner.done();\n   * console.log('Final response:', finalMessage.content);\n   */\n  done(): Promise<BetaMessage> {\n    return this.#completion.promise;\n  }\n\n  /**\n   * Returns a promise indicating that the stream is done. Unlike .done(), this will eagerly read the stream:\n   * * If the iterator has not been consumed, consume the entire iterator and return the final message from the\n   * assistant.\n   * * If the iterator has been consumed, waits for it to complete and returns the final message.\n   *\n   * @returns A promise that resolves to the final BetaMessage from the conversation\n   * @throws {AnthropicError} If no messages were processed during the conversation\n   *\n   * @example\n   * const finalMessage = await runner.runUntilDone();\n   * console.log('Final response:', finalMessage.content);\n   */\n  async runUntilDone(): Promise<BetaMessage> {\n    // If not yet consumed, start consuming and wait for completion\n    if (!this.#consumed) {\n      for await (const _ of this) {\n        // Iterator naturally populates this.#message\n      }\n    }\n\n    // If consumed but not completed, wait for completion\n    return this.done();\n  }\n\n  /**\n   * Get the current parameters being used by the ToolRunner.\n   *\n   * @returns A readonly view of the current ToolRunnerParams\n   *\n   * @example\n   * const currentParams = runner.params;\n   * console.log('Current model:', currentParams.model);\n   * console.log('Message count:', currentParams.messages.length);\n   */\n  get params(): Readonly<BetaToolRunnerParams> {\n    return this.#state.params as Readonly<BetaToolRunnerParams>;\n  }\n\n  /**\n   * Add one or more messages to the conversation history.\n   *\n   * @param messages - One or more BetaMessageParam objects to add to the conversation\n   *\n   * @example\n   * runner.pushMessages(\n   *   { role: 'user', content: 'Also, what about the weather in NYC?' }\n   * );\n   *\n   * @example\n   * // Adding multiple messages\n   * runner.pushMessages(\n   *   { role: 'user', content: 'What about NYC?' },\n   *   { role: 'user', content: 'And Boston?' }\n   * );\n   */\n  pushMessages(...messages: BetaMessageParam[]) {\n    this.setMessagesParams((params) => ({\n      ...params,\n      messages: [...params.messages, ...messages],\n    }));\n  }\n\n  /**\n   * Makes the ToolRunner directly awaitable, equivalent to calling .runUntilDone()\n   * This allows using `await runner` instead of `await runner.runUntilDone()`\n   */\n  then<TResult1 = BetaMessage, TResult2 = never>(\n    onfulfilled?: ((value: BetaMessage) => TResult1 | PromiseLike<TResult1>) | undefined | null,\n    onrejected?: ((reason: any) => TResult2 | PromiseLike<TResult2>) | undefined | null,\n  ): Promise<TResult1 | TResult2> {\n    return this.runUntilDone().then(onfulfilled, onrejected);\n  }\n}\n\nasync function generateToolResponse(\n  params: BetaToolRunnerParams,\n  lastMessage = params.messages.at(-1),\n): Promise<BetaMessageParam | null> {\n  // Only process if the last message is from the assistant and has tool use blocks\n  if (\n    !lastMessage ||\n    lastMessage.role !== 'assistant' ||\n    !lastMessage.content ||\n    typeof lastMessage.content === 'string'\n  ) {\n    return null;\n  }\n\n  const toolUseBlocks = lastMessage.content.filter((content) => content.type === 'tool_use');\n  if (toolUseBlocks.length === 0) {\n    return null;\n  }\n\n  const toolResults = await Promise.all(\n    toolUseBlocks.map(async (toolUse) => {\n      const tool = params.tools.find((t) => ('name' in t ? t.name : t.mcp_server_name) === toolUse.name);\n      if (!tool || !('run' in tool)) {\n        return {\n          type: 'tool_result' as const,\n          tool_use_id: toolUse.id,\n          content: `Error: Tool '${toolUse.name}' not found`,\n          is_error: true,\n        };\n      }\n\n      try {\n        let input = toolUse.input;\n        if ('parse' in tool && tool.parse) {\n          input = tool.parse(input);\n        }\n\n        const result = await tool.run(input);\n        return {\n          type: 'tool_result' as const,\n          tool_use_id: toolUse.id,\n          content: result,\n        };\n      } catch (error) {\n        return {\n          type: 'tool_result' as const,\n          tool_use_id: toolUse.id,\n          content: `Error: ${error instanceof Error ? error.message : String(error)}`,\n          is_error: true,\n        };\n      }\n    }),\n  );\n\n  return {\n    role: 'user' as const,\n    content: toolResults,\n  };\n}\n\n// vendored from typefest just to make things look a bit nicer on hover\ntype Simplify<T> = { [KeyType in keyof T]: T[KeyType] } & {};\n\n/**\n * Parameters for creating a ToolRunner, extending MessageCreateParams with runnable tools.\n */\nexport type BetaToolRunnerParams = Simplify<\n  Omit<MessageCreateParams, 'tools'> & {\n    tools: (BetaToolUnion | BetaRunnableTool<any>)[];\n    /**\n     * Maximum number of iterations (API requests) to make in the tool execution loop.\n     * Each iteration consists of: assistant response  tool execution  tool results.\n     * When exceeded, the loop will terminate even if tools are still being requested.\n     */\n    max_iterations?: number;\n    compactionControl?: CompactionControl;\n  }\n>;\n\nexport type BetaToolRunnerRequestOptions = Pick<RequestOptions, 'headers'>;\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nexport { Anthropic as default } from './client';\n\nexport { type Uploadable, toFile } from './core/uploads';\nexport { APIPromise } from './core/api-promise';\nexport { BaseAnthropic, Anthropic, type ClientOptions, HUMAN_PROMPT, AI_PROMPT } from './client';\nexport { PagePromise } from './core/pagination';\nexport {\n  AnthropicError,\n  APIError,\n  APIConnectionError,\n  APIConnectionTimeoutError,\n  APIUserAbortError,\n  NotFoundError,\n  ConflictError,\n  RateLimitError,\n  BadRequestError,\n  AuthenticationError,\n  InternalServerError,\n  PermissionDeniedError,\n  UnprocessableEntityError,\n} from './core/error';\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport type { RequestInit, RequestInfo, BodyInit } from './internal/builtin-types';\nimport type { HTTPMethod, PromiseOrValue, MergedRequestInit, FinalizedRequestInit } from './internal/types';\nimport { uuid4 } from './internal/utils/uuid';\nimport { validatePositiveInteger, isAbsoluteURL, safeJSON } from './internal/utils/values';\nimport { sleep } from './internal/utils/sleep';\nexport type { Logger, LogLevel } from './internal/utils/log';\nimport { castToError, isAbortError } from './internal/errors';\nimport type { APIResponseProps } from './internal/parse';\nimport { getPlatformHeaders } from './internal/detect-platform';\nimport * as Shims from './internal/shims';\nimport * as Opts from './internal/request-options';\nimport { VERSION } from './version';\nimport * as Errors from './core/error';\nimport * as Pagination from './core/pagination';\nimport {\n  type PageParams,\n  PageResponse,\n  type PageCursorParams,\n  PageCursorResponse,\n  type TokenPageParams,\n  TokenPageResponse,\n} from './core/pagination';\nimport * as Uploads from './core/uploads';\nimport * as API from './resources/index';\nimport { APIPromise } from './core/api-promise';\nimport {\n  Completion,\n  CompletionCreateParams,\n  CompletionCreateParamsNonStreaming,\n  CompletionCreateParamsStreaming,\n  Completions,\n} from './resources/completions';\nimport { ModelInfo, ModelInfosPage, ModelListParams, ModelRetrieveParams, Models } from './resources/models';\nimport {\n  AnthropicBeta,\n  Beta,\n  BetaAPIError,\n  BetaAuthenticationError,\n  BetaBillingError,\n  BetaError,\n  BetaErrorResponse,\n  BetaGatewayTimeoutError,\n  BetaInvalidRequestError,\n  BetaNotFoundError,\n  BetaOverloadedError,\n  BetaPermissionError,\n  BetaRateLimitError,\n} from './resources/beta/beta';\nimport {\n  Base64ImageSource,\n  Base64PDFSource,\n  CacheControlEphemeral,\n  CacheCreation,\n  CitationCharLocation,\n  CitationCharLocationParam,\n  CitationContentBlockLocation,\n  CitationContentBlockLocationParam,\n  CitationPageLocation,\n  CitationPageLocationParam,\n  CitationSearchResultLocationParam,\n  CitationWebSearchResultLocationParam,\n  CitationsConfigParam,\n  CitationsDelta,\n  CitationsSearchResultLocation,\n  CitationsWebSearchResultLocation,\n  ContentBlock,\n  ContentBlockDeltaEvent,\n  ContentBlockParam,\n  ContentBlockStartEvent,\n  ContentBlockStopEvent,\n  ContentBlockSource,\n  ContentBlockSourceContent,\n  DocumentBlockParam,\n  ImageBlockParam,\n  InputJSONDelta,\n  Message,\n  MessageStreamParams,\n  MessageCountTokensParams,\n  MessageCountTokensTool,\n  MessageCreateParams,\n  MessageCreateParamsNonStreaming,\n  MessageCreateParamsStreaming,\n  MessageDeltaEvent,\n  MessageDeltaUsage,\n  MessageParam,\n  MessageStartEvent,\n  MessageStopEvent,\n  MessageStreamEvent,\n  MessageTokensCount,\n  Messages,\n  Metadata,\n  Model,\n  PlainTextSource,\n  RawContentBlockDelta,\n  RawContentBlockDeltaEvent,\n  RawContentBlockStartEvent,\n  RawContentBlockStopEvent,\n  RawMessageDeltaEvent,\n  RawMessageStartEvent,\n  RawMessageStopEvent,\n  RawMessageStreamEvent,\n  RedactedThinkingBlock,\n  RedactedThinkingBlockParam,\n  SearchResultBlockParam,\n  ServerToolUsage,\n  ServerToolUseBlock,\n  ServerToolUseBlockParam,\n  SignatureDelta,\n  StopReason,\n  TextBlock,\n  TextBlockParam,\n  TextCitation,\n  TextCitationParam,\n  TextDelta,\n  ThinkingBlock,\n  ThinkingBlockParam,\n  ThinkingConfigDisabled,\n  ThinkingConfigEnabled,\n  ThinkingConfigParam,\n  ThinkingDelta,\n  Tool,\n  ToolBash20250124,\n  ToolChoice,\n  ToolChoiceAny,\n  ToolChoiceAuto,\n  ToolChoiceNone,\n  ToolChoiceTool,\n  ToolResultBlockParam,\n  ToolTextEditor20250124,\n  ToolTextEditor20250429,\n  ToolTextEditor20250728,\n  ToolUnion,\n  ToolUseBlock,\n  ToolUseBlockParam,\n  URLImageSource,\n  URLPDFSource,\n  Usage,\n  WebSearchResultBlock,\n  WebSearchResultBlockParam,\n  WebSearchTool20250305,\n  WebSearchToolRequestError,\n  WebSearchToolResultBlock,\n  WebSearchToolResultBlockContent,\n  WebSearchToolResultBlockParam,\n  WebSearchToolResultBlockParamContent,\n  WebSearchToolResultError,\n} from './resources/messages/messages';\nimport { type Fetch } from './internal/builtin-types';\nimport { isRunningInBrowser } from './internal/detect-platform';\nimport { HeadersLike, NullableHeaders, buildHeaders } from './internal/headers';\nimport { FinalRequestOptions, RequestOptions } from './internal/request-options';\nimport { readEnv } from './internal/utils/env';\nimport {\n  type LogLevel,\n  type Logger,\n  formatRequestDetails,\n  loggerFor,\n  parseLogLevel,\n} from './internal/utils/log';\nimport { isEmptyObj } from './internal/utils/values';\n\nexport type ApiKeySetter = () => Promise<string>;\n\nexport interface ClientOptions {\n  /**\n   * API key used for authentication.\n   *\n   * - Accepts either a static string or an async function that resolves to a string.\n   * - Defaults to process.env['ANTHROPIC_API_KEY'].\n   * - When a function is provided, it is invoked before each request so you can rotate\n   *   or refresh credentials at runtime.\n   * - The function must return a non-empty string; otherwise an AnthropicError is thrown.\n   * - If the function throws, the error is wrapped in an AnthropicError with the original\n   *   error available as `cause`.\n   */\n  apiKey?: string | ApiKeySetter | null | undefined;\n\n  /**\n   * Defaults to process.env['ANTHROPIC_AUTH_TOKEN'].\n   */\n  authToken?: string | null | undefined;\n\n  /**\n   * Override the default base URL for the API, e.g., \"https://api.example.com/v2/\"\n   *\n   * Defaults to process.env['ANTHROPIC_BASE_URL'].\n   */\n  baseURL?: string | null | undefined;\n\n  /**\n   * The maximum amount of time (in milliseconds) that the client should wait for a response\n   * from the server before timing out a single request.\n   *\n   * Note that request timeouts are retried by default, so in a worst-case scenario you may wait\n   * much longer than this timeout before the promise succeeds or fails.\n   *\n   * @unit milliseconds\n   */\n  timeout?: number | undefined;\n  /**\n   * Additional `RequestInit` options to be passed to `fetch` calls.\n   * Properties will be overridden by per-request `fetchOptions`.\n   */\n  fetchOptions?: MergedRequestInit | undefined;\n\n  /**\n   * Specify a custom `fetch` function implementation.\n   *\n   * If not provided, we expect that `fetch` is defined globally.\n   */\n  fetch?: Fetch | undefined;\n\n  /**\n   * The maximum number of times that the client will retry a request in case of a\n   * temporary failure, like a network error or a 5XX error from the server.\n   *\n   * @default 2\n   */\n  maxRetries?: number | undefined;\n\n  /**\n   * Default headers to include with every request to the API.\n   *\n   * These can be removed in individual requests by explicitly setting the\n   * header to `null` in request options.\n   */\n  defaultHeaders?: HeadersLike | undefined;\n\n  /**\n   * Default query parameters to include with every request to the API.\n   *\n   * These can be removed in individual requests by explicitly setting the\n   * param to `undefined` in request options.\n   */\n  defaultQuery?: Record<string, string | undefined> | undefined;\n\n  /**\n   * By default, client-side use of this library is not allowed, as it risks exposing your secret API credentials to attackers.\n   * Only set this option to `true` if you understand the risks and have appropriate mitigations in place.\n   */\n  dangerouslyAllowBrowser?: boolean | undefined;\n\n  /**\n   * Set the log level.\n   *\n   * Defaults to process.env['ANTHROPIC_LOG'] or 'warn' if it isn't set.\n   */\n  logLevel?: LogLevel | undefined;\n\n  /**\n   * Set the logger.\n   *\n   * Defaults to globalThis.console.\n   */\n  logger?: Logger | undefined;\n}\n\nexport const HUMAN_PROMPT = '\\\\n\\\\nHuman:';\nexport const AI_PROMPT = '\\\\n\\\\nAssistant:';\n\n/**\n * Base class for Anthropic API clients.\n */\nexport class BaseAnthropic {\n  apiKey: string | null;\n  authToken: string | null;\n\n  baseURL: string;\n  maxRetries: number;\n  timeout: number;\n  logger: Logger;\n  logLevel: LogLevel | undefined;\n  fetchOptions: MergedRequestInit | undefined;\n\n  private fetch: Fetch;\n  #encoder: Opts.RequestEncoder;\n  protected idempotencyHeader?: string;\n  protected _options: ClientOptions;\n\n  /**\n   * API Client for interfacing with the Anthropic API.\n   *\n   * @param {string | null | undefined} [opts.apiKey=process.env['ANTHROPIC_API_KEY'] ?? null]\n   * @param {string | null | undefined} [opts.authToken=process.env['ANTHROPIC_AUTH_TOKEN'] ?? null]\n   * @param {string} [opts.baseURL=process.env['ANTHROPIC_BASE_URL'] ?? https://api.anthropic.com] - Override the default base URL for the API.\n   * @param {number} [opts.timeout=10 minutes] - The maximum amount of time (in milliseconds) the client will wait for a response before timing out.\n   * @param {MergedRequestInit} [opts.fetchOptions] - Additional `RequestInit` options to be passed to `fetch` calls.\n   * @param {Fetch} [opts.fetch] - Specify a custom `fetch` function implementation.\n   * @param {number} [opts.maxRetries=2] - The maximum number of times the client will retry a request.\n   * @param {HeadersLike} opts.defaultHeaders - Default headers to include with every request to the API.\n   * @param {Record<string, string | undefined>} opts.defaultQuery - Default query parameters to include with every request to the API.\n   * @param {boolean} [opts.dangerouslyAllowBrowser=false] - By default, client-side use of this library is not allowed, as it risks exposing your secret API credentials to attackers.\n   */\n  constructor({\n    baseURL = readEnv('ANTHROPIC_BASE_URL'),\n    apiKey = readEnv('ANTHROPIC_API_KEY') ?? null,\n    authToken = readEnv('ANTHROPIC_AUTH_TOKEN') ?? null,\n    ...opts\n  }: ClientOptions = {}) {\n    const options: ClientOptions = {\n      apiKey,\n      authToken,\n      ...opts,\n      baseURL: baseURL || `https://api.anthropic.com`,\n    };\n\n    if (!options.dangerouslyAllowBrowser && isRunningInBrowser()) {\n      throw new Errors.AnthropicError(\n        \"It looks like you're running in a browser-like environment.\\n\\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\\nIf you understand the risks and have appropriate mitigations in place,\\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\\n\\nnew Anthropic({ apiKey, dangerouslyAllowBrowser: true });\\n\",\n      );\n    }\n\n    this.baseURL = options.baseURL!;\n    this.timeout = options.timeout ?? BaseAnthropic.DEFAULT_TIMEOUT /* 10 minutes */;\n    this.logger = options.logger ?? console;\n    const defaultLogLevel = 'warn';\n    // Set default logLevel early so that we can log a warning in parseLogLevel.\n    this.logLevel = defaultLogLevel;\n    this.logLevel =\n      parseLogLevel(options.logLevel, 'ClientOptions.logLevel', this) ??\n      parseLogLevel(readEnv('ANTHROPIC_LOG'), \"process.env['ANTHROPIC_LOG']\", this) ??\n      defaultLogLevel;\n    this.fetchOptions = options.fetchOptions;\n    this.maxRetries = options.maxRetries ?? 2;\n    this.fetch = options.fetch ?? Shims.getDefaultFetch();\n    this.#encoder = Opts.FallbackEncoder;\n\n    this._options = options;\n\n    this.apiKey = typeof apiKey === 'string' ? apiKey : null;\n    this.authToken = authToken;\n  }\n\n  /**\n   * Create a new client instance re-using the same options given to the current client with optional overriding.\n   */\n  withOptions(options: Partial<ClientOptions>): this {\n    const client = new (this.constructor as any as new (props: ClientOptions) => typeof this)({\n      ...this._options,\n      baseURL: this.baseURL,\n      maxRetries: this.maxRetries,\n      timeout: this.timeout,\n      logger: this.logger,\n      logLevel: this.logLevel,\n      fetch: this.fetch,\n      fetchOptions: this.fetchOptions,\n      apiKey: this.apiKey,\n      authToken: this.authToken,\n      ...options,\n    });\n    return client;\n  }\n\n  /**\n   * Check whether the base URL is set to its default.\n   */\n  #baseURLOverridden(): boolean {\n    return this.baseURL !== 'https://api.anthropic.com';\n  }\n\n  protected defaultQuery(): Record<string, string | undefined> | undefined {\n    return this._options.defaultQuery;\n  }\n\n  protected validateHeaders({ values, nulls }: NullableHeaders) {\n    if (values.get('x-api-key') || values.get('authorization')) {\n      return;\n    }\n\n    if (this.apiKey && values.get('x-api-key')) {\n      return;\n    }\n    if (nulls.has('x-api-key')) {\n      return;\n    }\n\n    if (this.authToken && values.get('authorization')) {\n      return;\n    }\n    if (nulls.has('authorization')) {\n      return;\n    }\n\n    throw new Error(\n      'Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the \"X-Api-Key\" or \"Authorization\" headers to be explicitly omitted',\n    );\n  }\n\n  protected async authHeaders(opts: FinalRequestOptions): Promise<NullableHeaders | undefined> {\n    return buildHeaders([await this.apiKeyAuth(opts), await this.bearerAuth(opts)]);\n  }\n\n  protected async apiKeyAuth(opts: FinalRequestOptions): Promise<NullableHeaders | undefined> {\n    if (this.apiKey == null) {\n      return undefined;\n    }\n    return buildHeaders([{ 'X-Api-Key': this.apiKey }]);\n  }\n\n  protected async bearerAuth(opts: FinalRequestOptions): Promise<NullableHeaders | undefined> {\n    if (this.authToken == null) {\n      return undefined;\n    }\n    return buildHeaders([{ Authorization: `Bearer ${this.authToken}` }]);\n  }\n\n  /**\n   * Basic re-implementation of `qs.stringify` for primitive types.\n   */\n  protected stringifyQuery(query: Record<string, unknown>): string {\n    return Object.entries(query)\n      .filter(([_, value]) => typeof value !== 'undefined')\n      .map(([key, value]) => {\n        if (typeof value === 'string' || typeof value === 'number' || typeof value === 'boolean') {\n          return `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;\n        }\n        if (value === null) {\n          return `${encodeURIComponent(key)}=`;\n        }\n        throw new Errors.AnthropicError(\n          `Cannot stringify type ${typeof value}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`,\n        );\n      })\n      .join('&');\n  }\n\n  private getUserAgent(): string {\n    return `${this.constructor.name}/JS ${VERSION}`;\n  }\n\n  protected defaultIdempotencyKey(): string {\n    return `stainless-node-retry-${uuid4()}`;\n  }\n\n  protected makeStatusError(\n    status: number,\n    error: Object,\n    message: string | undefined,\n    headers: Headers,\n  ): Errors.APIError {\n    return Errors.APIError.generate(status, error, message, headers);\n  }\n\n  buildURL(\n    path: string,\n    query: Record<string, unknown> | null | undefined,\n    defaultBaseURL?: string | undefined,\n  ): string {\n    const baseURL = (!this.#baseURLOverridden() && defaultBaseURL) || this.baseURL;\n    const url =\n      isAbsoluteURL(path) ?\n        new URL(path)\n      : new URL(baseURL + (baseURL.endsWith('/') && path.startsWith('/') ? path.slice(1) : path));\n\n    const defaultQuery = this.defaultQuery();\n    if (!isEmptyObj(defaultQuery)) {\n      query = { ...defaultQuery, ...query };\n    }\n\n    if (typeof query === 'object' && query && !Array.isArray(query)) {\n      url.search = this.stringifyQuery(query as Record<string, unknown>);\n    }\n\n    return url.toString();\n  }\n\n  _calculateNonstreamingTimeout(maxTokens: number): number {\n    const defaultTimeout = 10 * 60;\n    const expectedTimeout = (60 * 60 * maxTokens) / 128_000;\n    if (expectedTimeout > defaultTimeout) {\n      throw new Errors.AnthropicError(\n        'Streaming is required for operations that may take longer than 10 minutes. ' +\n          'See https://github.com/anthropics/anthropic-sdk-typescript#streaming-responses for more details',\n      );\n    }\n    return defaultTimeout * 1000;\n  }\n\n  /**\n   * Used as a callback for mutating the given `FinalRequestOptions` object.\n   */\n  protected async prepareOptions(options: FinalRequestOptions): Promise<void> {}\n\n  /**\n   * Used as a callback for mutating the given `RequestInit` object.\n   *\n   * This is useful for cases where you want to add certain headers based off of\n   * the request properties, e.g. `method` or `url`.\n   */\n  protected async prepareRequest(\n    request: RequestInit,\n    { url, options }: { url: string; options: FinalRequestOptions },\n  ): Promise<void> {}\n\n  get<Rsp>(path: string, opts?: PromiseOrValue<RequestOptions>): APIPromise<Rsp> {\n    return this.methodRequest('get', path, opts);\n  }\n\n  post<Rsp>(path: string, opts?: PromiseOrValue<RequestOptions>): APIPromise<Rsp> {\n    return this.methodRequest('post', path, opts);\n  }\n\n  patch<Rsp>(path: string, opts?: PromiseOrValue<RequestOptions>): APIPromise<Rsp> {\n    return this.methodRequest('patch', path, opts);\n  }\n\n  put<Rsp>(path: string, opts?: PromiseOrValue<RequestOptions>): APIPromise<Rsp> {\n    return this.methodRequest('put', path, opts);\n  }\n\n  delete<Rsp>(path: string, opts?: PromiseOrValue<RequestOptions>): APIPromise<Rsp> {\n    return this.methodRequest('delete', path, opts);\n  }\n\n  private methodRequest<Rsp>(\n    method: HTTPMethod,\n    path: string,\n    opts?: PromiseOrValue<RequestOptions>,\n  ): APIPromise<Rsp> {\n    return this.request(\n      Promise.resolve(opts).then((opts) => {\n        return { method, path, ...opts };\n      }),\n    );\n  }\n\n  request<Rsp>(\n    options: PromiseOrValue<FinalRequestOptions>,\n    remainingRetries: number | null = null,\n  ): APIPromise<Rsp> {\n    return new APIPromise(this, this.makeRequest(options, remainingRetries, undefined));\n  }\n\n  private async makeRequest(\n    optionsInput: PromiseOrValue<FinalRequestOptions>,\n    retriesRemaining: number | null,\n    retryOfRequestLogID: string | undefined,\n  ): Promise<APIResponseProps> {\n    const options = await optionsInput;\n    const maxRetries = options.maxRetries ?? this.maxRetries;\n    if (retriesRemaining == null) {\n      retriesRemaining = maxRetries;\n    }\n\n    await this.prepareOptions(options);\n\n    const { req, url, timeout } = await this.buildRequest(options, {\n      retryCount: maxRetries - retriesRemaining,\n    });\n\n    await this.prepareRequest(req, { url, options });\n\n    /** Not an API request ID, just for correlating local log entries. */\n    const requestLogID = 'log_' + ((Math.random() * (1 << 24)) | 0).toString(16).padStart(6, '0');\n    const retryLogStr = retryOfRequestLogID === undefined ? '' : `, retryOf: ${retryOfRequestLogID}`;\n    const startTime = Date.now();\n\n    loggerFor(this).debug(\n      `[${requestLogID}] sending request`,\n      formatRequestDetails({\n        retryOfRequestLogID,\n        method: options.method,\n        url,\n        options,\n        headers: req.headers,\n      }),\n    );\n\n    if (options.signal?.aborted) {\n      throw new Errors.APIUserAbortError();\n    }\n\n    const controller = new AbortController();\n    const response = await this.fetchWithTimeout(url, req, timeout, controller).catch(castToError);\n    const headersTime = Date.now();\n\n    if (response instanceof globalThis.Error) {\n      const retryMessage = `retrying, ${retriesRemaining} attempts remaining`;\n      if (options.signal?.aborted) {\n        throw new Errors.APIUserAbortError();\n      }\n      // detect native connection timeout errors\n      // deno throws \"TypeError: error sending request for url (https://example/): client error (Connect): tcp connect error: Operation timed out (os error 60): Operation timed out (os error 60)\"\n      // undici throws \"TypeError: fetch failed\" with cause \"ConnectTimeoutError: Connect Timeout Error (attempted address: example:443, timeout: 1ms)\"\n      // others do not provide enough information to distinguish timeouts from other connection errors\n      const isTimeout =\n        isAbortError(response) ||\n        /timed? ?out/i.test(String(response) + ('cause' in response ? String(response.cause) : ''));\n      if (retriesRemaining) {\n        loggerFor(this).info(\n          `[${requestLogID}] connection ${isTimeout ? 'timed out' : 'failed'} - ${retryMessage}`,\n        );\n        loggerFor(this).debug(\n          `[${requestLogID}] connection ${isTimeout ? 'timed out' : 'failed'} (${retryMessage})`,\n          formatRequestDetails({\n            retryOfRequestLogID,\n            url,\n            durationMs: headersTime - startTime,\n            message: response.message,\n          }),\n        );\n        return this.retryRequest(options, retriesRemaining, retryOfRequestLogID ?? requestLogID);\n      }\n      loggerFor(this).info(\n        `[${requestLogID}] connection ${isTimeout ? 'timed out' : 'failed'} - error; no more retries left`,\n      );\n      loggerFor(this).debug(\n        `[${requestLogID}] connection ${isTimeout ? 'timed out' : 'failed'} (error; no more retries left)`,\n        formatRequestDetails({\n          retryOfRequestLogID,\n          url,\n          durationMs: headersTime - startTime,\n          message: response.message,\n        }),\n      );\n      if (isTimeout) {\n        throw new Errors.APIConnectionTimeoutError();\n      }\n      throw new Errors.APIConnectionError({ cause: response });\n    }\n\n    const specialHeaders = [...response.headers.entries()]\n      .filter(([name]) => name === 'request-id')\n      .map(([name, value]) => ', ' + name + ': ' + JSON.stringify(value))\n      .join('');\n    const responseInfo = `[${requestLogID}${retryLogStr}${specialHeaders}] ${req.method} ${url} ${\n      response.ok ? 'succeeded' : 'failed'\n    } with status ${response.status} in ${headersTime - startTime}ms`;\n\n    if (!response.ok) {\n      const shouldRetry = await this.shouldRetry(response);\n      if (retriesRemaining && shouldRetry) {\n        const retryMessage = `retrying, ${retriesRemaining} attempts remaining`;\n\n        // We don't need the body of this response.\n        await Shims.CancelReadableStream(response.body);\n        loggerFor(this).info(`${responseInfo} - ${retryMessage}`);\n        loggerFor(this).debug(\n          `[${requestLogID}] response error (${retryMessage})`,\n          formatRequestDetails({\n            retryOfRequestLogID,\n            url: response.url,\n            status: response.status,\n            headers: response.headers,\n            durationMs: headersTime - startTime,\n          }),\n        );\n        return this.retryRequest(\n          options,\n          retriesRemaining,\n          retryOfRequestLogID ?? requestLogID,\n          response.headers,\n        );\n      }\n\n      const retryMessage = shouldRetry ? `error; no more retries left` : `error; not retryable`;\n\n      loggerFor(this).info(`${responseInfo} - ${retryMessage}`);\n\n      const errText = await response.text().catch((err: any) => castToError(err).message);\n      const errJSON = safeJSON(errText);\n      const errMessage = errJSON ? undefined : errText;\n\n      loggerFor(this).debug(\n        `[${requestLogID}] response error (${retryMessage})`,\n        formatRequestDetails({\n          retryOfRequestLogID,\n          url: response.url,\n          status: response.status,\n          headers: response.headers,\n          message: errMessage,\n          durationMs: Date.now() - startTime,\n        }),\n      );\n\n      const err = this.makeStatusError(response.status, errJSON, errMessage, response.headers);\n      throw err;\n    }\n\n    loggerFor(this).info(responseInfo);\n    loggerFor(this).debug(\n      `[${requestLogID}] response start`,\n      formatRequestDetails({\n        retryOfRequestLogID,\n        url: response.url,\n        status: response.status,\n        headers: response.headers,\n        durationMs: headersTime - startTime,\n      }),\n    );\n\n    return { response, options, controller, requestLogID, retryOfRequestLogID, startTime };\n  }\n\n  getAPIList<Item, PageClass extends Pagination.AbstractPage<Item> = Pagination.AbstractPage<Item>>(\n    path: string,\n    Page: new (...args: any[]) => PageClass,\n    opts?: RequestOptions,\n  ): Pagination.PagePromise<PageClass, Item> {\n    return this.requestAPIList(Page, { method: 'get', path, ...opts });\n  }\n\n  requestAPIList<\n    Item = unknown,\n    PageClass extends Pagination.AbstractPage<Item> = Pagination.AbstractPage<Item>,\n  >(\n    Page: new (...args: ConstructorParameters<typeof Pagination.AbstractPage>) => PageClass,\n    options: FinalRequestOptions,\n  ): Pagination.PagePromise<PageClass, Item> {\n    const request = this.makeRequest(options, null, undefined);\n    return new Pagination.PagePromise<PageClass, Item>(this as any as Anthropic, request, Page);\n  }\n\n  async fetchWithTimeout(\n    url: RequestInfo,\n    init: RequestInit | undefined,\n    ms: number,\n    controller: AbortController,\n  ): Promise<Response> {\n    const { signal, method, ...options } = init || {};\n    if (signal) signal.addEventListener('abort', () => controller.abort());\n\n    const timeout = setTimeout(() => controller.abort(), ms);\n\n    const isReadableBody =\n      ((globalThis as any).ReadableStream && options.body instanceof (globalThis as any).ReadableStream) ||\n      (typeof options.body === 'object' && options.body !== null && Symbol.asyncIterator in options.body);\n\n    const fetchOptions: RequestInit = {\n      signal: controller.signal as any,\n      ...(isReadableBody ? { duplex: 'half' } : {}),\n      method: 'GET',\n      ...options,\n    };\n    if (method) {\n      // Custom methods like 'patch' need to be uppercased\n      // See https://github.com/nodejs/undici/issues/2294\n      fetchOptions.method = method.toUpperCase();\n    }\n\n    try {\n      // use undefined this binding; fetch errors if bound to something else in browser/cloudflare\n      return await this.fetch.call(undefined, url, fetchOptions);\n    } finally {\n      clearTimeout(timeout);\n    }\n  }\n\n  private async shouldRetry(response: Response): Promise<boolean> {\n    // Note this is not a standard header.\n    const shouldRetryHeader = response.headers.get('x-should-retry');\n\n    // If the server explicitly says whether or not to retry, obey.\n    if (shouldRetryHeader === 'true') return true;\n    if (shouldRetryHeader === 'false') return false;\n\n    // Retry on request timeouts.\n    if (response.status === 408) return true;\n\n    // Retry on lock timeouts.\n    if (response.status === 409) return true;\n\n    // Retry on rate limits.\n    if (response.status === 429) return true;\n\n    // Retry internal errors.\n    if (response.status >= 500) return true;\n\n    return false;\n  }\n\n  private async retryRequest(\n    options: FinalRequestOptions,\n    retriesRemaining: number,\n    requestLogID: string,\n    responseHeaders?: Headers | undefined,\n  ): Promise<APIResponseProps> {\n    let timeoutMillis: number | undefined;\n\n    // Note the `retry-after-ms` header may not be standard, but is a good idea and we'd like proactive support for it.\n    const retryAfterMillisHeader = responseHeaders?.get('retry-after-ms');\n    if (retryAfterMillisHeader) {\n      const timeoutMs = parseFloat(retryAfterMillisHeader);\n      if (!Number.isNaN(timeoutMs)) {\n        timeoutMillis = timeoutMs;\n      }\n    }\n\n    // About the Retry-After header: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After\n    const retryAfterHeader = responseHeaders?.get('retry-after');\n    if (retryAfterHeader && !timeoutMillis) {\n      const timeoutSeconds = parseFloat(retryAfterHeader);\n      if (!Number.isNaN(timeoutSeconds)) {\n        timeoutMillis = timeoutSeconds * 1000;\n      } else {\n        timeoutMillis = Date.parse(retryAfterHeader) - Date.now();\n      }\n    }\n\n    // If the API asks us to wait a certain amount of time (and it's a reasonable amount),\n    // just do what it says, but otherwise calculate a default\n    if (!(timeoutMillis && 0 <= timeoutMillis && timeoutMillis < 60 * 1000)) {\n      const maxRetries = options.maxRetries ?? this.maxRetries;\n      timeoutMillis = this.calculateDefaultRetryTimeoutMillis(retriesRemaining, maxRetries);\n    }\n    await sleep(timeoutMillis);\n\n    return this.makeRequest(options, retriesRemaining - 1, requestLogID);\n  }\n\n  private calculateDefaultRetryTimeoutMillis(retriesRemaining: number, maxRetries: number): number {\n    const initialRetryDelay = 0.5;\n    const maxRetryDelay = 8.0;\n\n    const numRetries = maxRetries - retriesRemaining;\n\n    // Apply exponential backoff, but not more than the max.\n    const sleepSeconds = Math.min(initialRetryDelay * Math.pow(2, numRetries), maxRetryDelay);\n\n    // Apply some jitter, take up to at most 25 percent of the retry time.\n    const jitter = 1 - Math.random() * 0.25;\n\n    return sleepSeconds * jitter * 1000;\n  }\n\n  public calculateNonstreamingTimeout(maxTokens: number, maxNonstreamingTokens?: number): number {\n    const maxTime = 60 * 60 * 1000; // 60 minutes\n    const defaultTime = 60 * 10 * 1000; // 10 minutes\n\n    const expectedTime = (maxTime * maxTokens) / 128000;\n    if (expectedTime > defaultTime || (maxNonstreamingTokens != null && maxTokens > maxNonstreamingTokens)) {\n      throw new Errors.AnthropicError(\n        'Streaming is required for operations that may take longer than 10 minutes. See https://github.com/anthropics/anthropic-sdk-typescript#long-requests for more details',\n      );\n    }\n\n    return defaultTime;\n  }\n\n  async buildRequest(\n    inputOptions: FinalRequestOptions,\n    { retryCount = 0 }: { retryCount?: number } = {},\n  ): Promise<{ req: FinalizedRequestInit; url: string; timeout: number }> {\n    const options = { ...inputOptions };\n    const { method, path, query, defaultBaseURL } = options;\n\n    const url = this.buildURL(path!, query as Record<string, unknown>, defaultBaseURL);\n    if ('timeout' in options) validatePositiveInteger('timeout', options.timeout);\n    options.timeout = options.timeout ?? this.timeout;\n    const { bodyHeaders, body } = this.buildBody({ options });\n    const reqHeaders = await this.buildHeaders({ options: inputOptions, method, bodyHeaders, retryCount });\n\n    const req: FinalizedRequestInit = {\n      method,\n      headers: reqHeaders,\n      ...(options.signal && { signal: options.signal }),\n      ...((globalThis as any).ReadableStream &&\n        body instanceof (globalThis as any).ReadableStream && { duplex: 'half' }),\n      ...(body && { body }),\n      ...((this.fetchOptions as any) ?? {}),\n      ...((options.fetchOptions as any) ?? {}),\n    };\n\n    return { req, url, timeout: options.timeout };\n  }\n\n  private async buildHeaders({\n    options,\n    method,\n    bodyHeaders,\n    retryCount,\n  }: {\n    options: FinalRequestOptions;\n    method: HTTPMethod;\n    bodyHeaders: HeadersLike;\n    retryCount: number;\n  }): Promise<Headers> {\n    let idempotencyHeaders: HeadersLike = {};\n    if (this.idempotencyHeader && method !== 'get') {\n      if (!options.idempotencyKey) options.idempotencyKey = this.defaultIdempotencyKey();\n      idempotencyHeaders[this.idempotencyHeader] = options.idempotencyKey;\n    }\n\n    const headers = buildHeaders([\n      idempotencyHeaders,\n      {\n        Accept: 'application/json',\n        'User-Agent': this.getUserAgent(),\n        'X-Stainless-Retry-Count': String(retryCount),\n        ...(options.timeout ? { 'X-Stainless-Timeout': String(Math.trunc(options.timeout / 1000)) } : {}),\n        ...getPlatformHeaders(),\n        ...(this._options.dangerouslyAllowBrowser ?\n          { 'anthropic-dangerous-direct-browser-access': 'true' }\n        : undefined),\n        'anthropic-version': '2023-06-01',\n      },\n      await this.authHeaders(options),\n      this._options.defaultHeaders,\n      bodyHeaders,\n      options.headers,\n    ]);\n\n    this.validateHeaders(headers);\n\n    return headers.values;\n  }\n\n  private buildBody({ options: { body, headers: rawHeaders } }: { options: FinalRequestOptions }): {\n    bodyHeaders: HeadersLike;\n    body: BodyInit | undefined;\n  } {\n    if (!body) {\n      return { bodyHeaders: undefined, body: undefined };\n    }\n    const headers = buildHeaders([rawHeaders]);\n    if (\n      // Pass raw type verbatim\n      ArrayBuffer.isView(body) ||\n      body instanceof ArrayBuffer ||\n      body instanceof DataView ||\n      (typeof body === 'string' &&\n        // Preserve legacy string encoding behavior for now\n        headers.values.has('content-type')) ||\n      // `Blob` is superset of `File`\n      ((globalThis as any).Blob && body instanceof (globalThis as any).Blob) ||\n      // `FormData` -> `multipart/form-data`\n      body instanceof FormData ||\n      // `URLSearchParams` -> `application/x-www-form-urlencoded`\n      body instanceof URLSearchParams ||\n      // Send chunked stream (each chunk has own `length`)\n      ((globalThis as any).ReadableStream && body instanceof (globalThis as any).ReadableStream)\n    ) {\n      return { bodyHeaders: undefined, body: body as BodyInit };\n    } else if (\n      typeof body === 'object' &&\n      (Symbol.asyncIterator in body ||\n        (Symbol.iterator in body && 'next' in body && typeof body.next === 'function'))\n    ) {\n      return { bodyHeaders: undefined, body: Shims.ReadableStreamFrom(body as AsyncIterable<Uint8Array>) };\n    } else {\n      return this.#encoder({ body, headers });\n    }\n  }\n\n  static Anthropic = this;\n  static HUMAN_PROMPT = HUMAN_PROMPT;\n  static AI_PROMPT = AI_PROMPT;\n  static DEFAULT_TIMEOUT = 600000; // 10 minutes\n\n  static AnthropicError = Errors.AnthropicError;\n  static APIError = Errors.APIError;\n  static APIConnectionError = Errors.APIConnectionError;\n  static APIConnectionTimeoutError = Errors.APIConnectionTimeoutError;\n  static APIUserAbortError = Errors.APIUserAbortError;\n  static NotFoundError = Errors.NotFoundError;\n  static ConflictError = Errors.ConflictError;\n  static RateLimitError = Errors.RateLimitError;\n  static BadRequestError = Errors.BadRequestError;\n  static AuthenticationError = Errors.AuthenticationError;\n  static InternalServerError = Errors.InternalServerError;\n  static PermissionDeniedError = Errors.PermissionDeniedError;\n  static UnprocessableEntityError = Errors.UnprocessableEntityError;\n\n  static toFile = Uploads.toFile;\n}\n\n/**\n * API Client for interfacing with the Anthropic API.\n */\nexport class Anthropic extends BaseAnthropic {\n  completions: API.Completions = new API.Completions(this);\n  messages: API.Messages = new API.Messages(this);\n  models: API.Models = new API.Models(this);\n  beta: API.Beta = new API.Beta(this);\n}\n\nAnthropic.Completions = Completions;\nAnthropic.Messages = Messages;\nAnthropic.Models = Models;\nAnthropic.Beta = Beta;\n\nexport declare namespace Anthropic {\n  export type RequestOptions = Opts.RequestOptions;\n\n  export type { ApiKeySetter };\n\n  export import Page = Pagination.Page;\n  export { type PageParams as PageParams, type PageResponse as PageResponse };\n\n  export import TokenPage = Pagination.TokenPage;\n  export { type TokenPageParams as TokenPageParams, type TokenPageResponse as TokenPageResponse };\n\n  export import PageCursor = Pagination.PageCursor;\n  export { type PageCursorParams as PageCursorParams, type PageCursorResponse as PageCursorResponse };\n\n  export {\n    Completions as Completions,\n    type Completion as Completion,\n    type CompletionCreateParams as CompletionCreateParams,\n    type CompletionCreateParamsNonStreaming as CompletionCreateParamsNonStreaming,\n    type CompletionCreateParamsStreaming as CompletionCreateParamsStreaming,\n  };\n\n  export {\n    Messages as Messages,\n    type Base64ImageSource as Base64ImageSource,\n    type Base64PDFSource as Base64PDFSource,\n    type CacheControlEphemeral as CacheControlEphemeral,\n    type CacheCreation as CacheCreation,\n    type CitationCharLocation as CitationCharLocation,\n    type CitationCharLocationParam as CitationCharLocationParam,\n    type CitationContentBlockLocation as CitationContentBlockLocation,\n    type CitationContentBlockLocationParam as CitationContentBlockLocationParam,\n    type CitationPageLocation as CitationPageLocation,\n    type CitationPageLocationParam as CitationPageLocationParam,\n    type CitationSearchResultLocationParam as CitationSearchResultLocationParam,\n    type CitationWebSearchResultLocationParam as CitationWebSearchResultLocationParam,\n    type CitationsConfigParam as CitationsConfigParam,\n    type CitationsDelta as CitationsDelta,\n    type CitationsSearchResultLocation as CitationsSearchResultLocation,\n    type CitationsWebSearchResultLocation as CitationsWebSearchResultLocation,\n    type ContentBlock as ContentBlock,\n    type ContentBlockDeltaEvent as ContentBlockDeltaEvent,\n    type ContentBlockParam as ContentBlockParam,\n    type ContentBlockStartEvent as ContentBlockStartEvent,\n    type ContentBlockStopEvent as ContentBlockStopEvent,\n    type ContentBlockSource as ContentBlockSource,\n    type ContentBlockSourceContent as ContentBlockSourceContent,\n    type DocumentBlockParam as DocumentBlockParam,\n    type ImageBlockParam as ImageBlockParam,\n    type InputJSONDelta as InputJSONDelta,\n    type Message as Message,\n    type MessageCountTokensTool as MessageCountTokensTool,\n    type MessageDeltaEvent as MessageDeltaEvent,\n    type MessageDeltaUsage as MessageDeltaUsage,\n    type MessageParam as MessageParam,\n    type MessageStartEvent as MessageStartEvent,\n    type MessageStopEvent as MessageStopEvent,\n    type MessageStreamEvent as MessageStreamEvent,\n    type MessageTokensCount as MessageTokensCount,\n    type Metadata as Metadata,\n    type Model as Model,\n    type PlainTextSource as PlainTextSource,\n    type RawContentBlockDelta as RawContentBlockDelta,\n    type RawContentBlockDeltaEvent as RawContentBlockDeltaEvent,\n    type RawContentBlockStartEvent as RawContentBlockStartEvent,\n    type RawContentBlockStopEvent as RawContentBlockStopEvent,\n    type RawMessageDeltaEvent as RawMessageDeltaEvent,\n    type RawMessageStartEvent as RawMessageStartEvent,\n    type RawMessageStopEvent as RawMessageStopEvent,\n    type RawMessageStreamEvent as RawMessageStreamEvent,\n    type RedactedThinkingBlock as RedactedThinkingBlock,\n    type RedactedThinkingBlockParam as RedactedThinkingBlockParam,\n    type SearchResultBlockParam as SearchResultBlockParam,\n    type ServerToolUsage as ServerToolUsage,\n    type ServerToolUseBlock as ServerToolUseBlock,\n    type ServerToolUseBlockParam as ServerToolUseBlockParam,\n    type SignatureDelta as SignatureDelta,\n    type StopReason as StopReason,\n    type TextBlock as TextBlock,\n    type TextBlockParam as TextBlockParam,\n    type TextCitation as TextCitation,\n    type TextCitationParam as TextCitationParam,\n    type TextDelta as TextDelta,\n    type ThinkingBlock as ThinkingBlock,\n    type ThinkingBlockParam as ThinkingBlockParam,\n    type ThinkingConfigDisabled as ThinkingConfigDisabled,\n    type ThinkingConfigEnabled as ThinkingConfigEnabled,\n    type ThinkingConfigParam as ThinkingConfigParam,\n    type ThinkingDelta as ThinkingDelta,\n    type Tool as Tool,\n    type ToolBash20250124 as ToolBash20250124,\n    type ToolChoice as ToolChoice,\n    type ToolChoiceAny as ToolChoiceAny,\n    type ToolChoiceAuto as ToolChoiceAuto,\n    type ToolChoiceNone as ToolChoiceNone,\n    type ToolChoiceTool as ToolChoiceTool,\n    type ToolResultBlockParam as ToolResultBlockParam,\n    type ToolTextEditor20250124 as ToolTextEditor20250124,\n    type ToolTextEditor20250429 as ToolTextEditor20250429,\n    type ToolTextEditor20250728 as ToolTextEditor20250728,\n    type ToolUnion as ToolUnion,\n    type ToolUseBlock as ToolUseBlock,\n    type ToolUseBlockParam as ToolUseBlockParam,\n    type URLImageSource as URLImageSource,\n    type URLPDFSource as URLPDFSource,\n    type Usage as Usage,\n    type WebSearchResultBlock as WebSearchResultBlock,\n    type WebSearchResultBlockParam as WebSearchResultBlockParam,\n    type WebSearchTool20250305 as WebSearchTool20250305,\n    type WebSearchToolRequestError as WebSearchToolRequestError,\n    type WebSearchToolResultBlock as WebSearchToolResultBlock,\n    type WebSearchToolResultBlockContent as WebSearchToolResultBlockContent,\n    type WebSearchToolResultBlockParam as WebSearchToolResultBlockParam,\n    type WebSearchToolResultBlockParamContent as WebSearchToolResultBlockParamContent,\n    type WebSearchToolResultError as WebSearchToolResultError,\n    type MessageCreateParams as MessageCreateParams,\n    type MessageCreateParamsNonStreaming as MessageCreateParamsNonStreaming,\n    type MessageCreateParamsStreaming as MessageCreateParamsStreaming,\n    type MessageStreamParams as MessageStreamParams,\n    type MessageCountTokensParams as MessageCountTokensParams,\n  };\n\n  export {\n    Models as Models,\n    type ModelInfo as ModelInfo,\n    type ModelInfosPage as ModelInfosPage,\n    type ModelRetrieveParams as ModelRetrieveParams,\n    type ModelListParams as ModelListParams,\n  };\n\n  export {\n    Beta as Beta,\n    type AnthropicBeta as AnthropicBeta,\n    type BetaAPIError as BetaAPIError,\n    type BetaAuthenticationError as BetaAuthenticationError,\n    type BetaBillingError as BetaBillingError,\n    type BetaError as BetaError,\n    type BetaErrorResponse as BetaErrorResponse,\n    type BetaGatewayTimeoutError as BetaGatewayTimeoutError,\n    type BetaInvalidRequestError as BetaInvalidRequestError,\n    type BetaNotFoundError as BetaNotFoundError,\n    type BetaOverloadedError as BetaOverloadedError,\n    type BetaPermissionError as BetaPermissionError,\n    type BetaRateLimitError as BetaRateLimitError,\n  };\n\n  export type APIErrorObject = API.APIErrorObject;\n  export type AuthenticationError = API.AuthenticationError;\n  export type BillingError = API.BillingError;\n  export type ErrorObject = API.ErrorObject;\n  export type ErrorResponse = API.ErrorResponse;\n  export type GatewayTimeoutError = API.GatewayTimeoutError;\n  export type InvalidRequestError = API.InvalidRequestError;\n  export type NotFoundError = API.NotFoundError;\n  export type OverloadedError = API.OverloadedError;\n  export type PermissionError = API.PermissionError;\n  export type RateLimitError = API.RateLimitError;\n}\n","// ============================================\n// RISIVO AI Marketing Knowledge Base\n// Comprehensive marketing strategy expertise for AI Virtual Assistant\n// ============================================\n\n// Industry-specific marketing playbooks\nexport const INDUSTRY_PLAYBOOKS: Record<string, IndustryPlaybook> = {\n  'real_estate': {\n    name: 'Real Estate',\n    overview: 'Real estate marketing is highly local, relationship-driven, and visual. Success depends on building trust, demonstrating market expertise, and leveraging technology.',\n    targetAudiences: [\n      'First-time homebuyers',\n      'Move-up buyers', \n      'Downsizers',\n      'Investors',\n      'Sellers',\n      'Renters',\n      'Commercial clients'\n    ],\n    channelPriority: [\n      { channel: 'Local SEO & Google Business Profile', priority: 1, description: 'Critical for local discovery' },\n      { channel: 'Real Estate Portals (Zillow, Realtor.com)', priority: 2, description: 'Where buyers search' },\n      { channel: 'Social Media (Facebook, Instagram)', priority: 3, description: 'Visual showcase and engagement' },\n      { channel: 'Email Marketing', priority: 4, description: 'Nurturing long sales cycles' },\n      { channel: 'Video Tours & Virtual Reality', priority: 5, description: 'Property showcase' },\n      { channel: 'Paid Search & Display', priority: 6, description: 'Targeted lead generation' },\n      { channel: 'Direct Mail', priority: 7, description: 'Local farming' }\n    ],\n    keyStrategies: [\n      {\n        name: 'Listing Marketing',\n        tactics: [\n          'Professional photography',\n          'Virtual tours and 3D walkthroughs',\n          'Drone footage',\n          'Property videos',\n          'Detailed descriptions',\n          'Floor plans',\n          'Neighborhood information'\n        ]\n      },\n      {\n        name: 'Agent Personal Branding',\n        tactics: [\n          'Local market expertise content',\n          'Video market updates',\n          'Client testimonials',\n          'Community involvement',\n          'Social media presence'\n        ]\n      },\n      {\n        name: 'Lead Generation',\n        tactics: [\n          'Home valuation tools',\n          'Property search widgets',\n          'Buyer guides',\n          'Seller guides',\n          'Market reports',\n          'Open house promotions'\n        ]\n      },\n      {\n        name: 'Nurturing Long Sales Cycles',\n        tactics: [\n          'Drip email campaigns',\n          'Market update newsletters',\n          'Anniversary and milestone emails',\n          'Referral requests',\n          'Client appreciation events'\n        ]\n      }\n    ],\n    kpis: [\n      'Cost per lead',\n      'Lead to appointment rate',\n      'Listing appointment to listing rate',\n      'Days on market',\n      'Sale price to list price ratio',\n      'Client satisfaction score',\n      'Referral rate'\n    ],\n    commonMistakes: [\n      'Not investing in professional photography',\n      'Ignoring local SEO',\n      'Not following up with leads quickly',\n      'Generic messaging instead of local expertise',\n      'Not leveraging video content'\n    ]\n  },\n  'ecommerce': {\n    name: 'E-Commerce & Retail',\n    overview: 'E-commerce marketing encompasses online retail with key challenges including fierce competition, rising customer acquisition costs, and the need for seamless omnichannel experiences.',\n    targetAudiences: [\n      'Bargain hunters and deal seekers',\n      'Convenience shoppers',\n      'Brand loyalists',\n      'Research-intensive buyers',\n      'Impulse purchasers',\n      'Subscription seekers'\n    ],\n    channelPriority: [\n      { channel: 'Google Shopping & Search Ads', priority: 1, description: 'High-intent traffic' },\n      { channel: 'Social Media Advertising', priority: 2, description: 'Facebook, Instagram, TikTok' },\n      { channel: 'Email Marketing & Automation', priority: 3, description: 'Retention and repeat purchases' },\n      { channel: 'SEO for Product Pages', priority: 4, description: 'Organic discovery' },\n      { channel: 'Influencer Partnerships', priority: 5, description: 'Social proof and reach' },\n      { channel: 'Affiliate Marketing', priority: 6, description: 'Performance-based growth' },\n      { channel: 'Retargeting', priority: 7, description: 'Cart abandonment recovery' }\n    ],\n    keyStrategies: [\n      {\n        name: 'Product Page Optimization',\n        tactics: [\n          'High-quality product photography',\n          '360-degree views and video',\n          'Detailed specifications',\n          'Size guides and fit tools',\n          'Customer reviews and ratings',\n          'Related product recommendations',\n          'Clear pricing and shipping info',\n          'Urgency elements (stock levels, timers)'\n        ]\n      },\n      {\n        name: 'Cart Abandonment Recovery',\n        tactics: [\n          'Exit-intent popups',\n          'Email 1: 1 hour after (reminder)',\n          'Email 2: 24 hours after (add incentive)',\n          'Email 3: 72 hours after (final push)',\n          'SMS reminders',\n          'Retargeting ads'\n        ]\n      },\n      {\n        name: 'Customer Retention',\n        tactics: [\n          'Post-purchase email sequences',\n          'Loyalty and rewards programs',\n          'VIP customer programs',\n          'Personalized recommendations',\n          'Subscription options',\n          'Referral programs'\n        ]\n      }\n    ],\n    kpis: [\n      'Conversion rate',\n      'Average order value (AOV)',\n      'Customer acquisition cost (CAC)',\n      'Customer lifetime value (CLV)',\n      'Cart abandonment rate',\n      'Return rate',\n      'Revenue per visitor',\n      'Email revenue attribution'\n    ],\n    commonMistakes: [\n      'Poor mobile experience',\n      'Slow page load times',\n      'Complicated checkout process',\n      'No abandoned cart recovery',\n      'Ignoring customer reviews'\n    ]\n  },\n  'saas': {\n    name: 'SaaS & Technology',\n    overview: 'SaaS businesses provide cloud-based software on subscription basis. Marketing focuses on demonstrating value, reducing time-to-value, and minimizing churn.',\n    targetAudiences: [\n      'Decision makers (C-suite, VPs)',\n      'End users',\n      'Technical evaluators',\n      'Budget holders',\n      'Influencers within organizations'\n    ],\n    channelPriority: [\n      { channel: 'Content Marketing & SEO', priority: 1, description: 'Education and thought leadership' },\n      { channel: 'LinkedIn Advertising & Organic', priority: 2, description: 'B2B targeting' },\n      { channel: 'Google Ads (Search)', priority: 3, description: 'High-intent capture' },\n      { channel: 'Email Marketing & Nurturing', priority: 4, description: 'Lead nurturing' },\n      { channel: 'Webinars & Virtual Events', priority: 5, description: 'Demonstration and education' },\n      { channel: 'Product-Led Growth', priority: 6, description: 'Free trials and freemium' },\n      { channel: 'Review Sites (G2, Capterra)', priority: 7, description: 'Social proof' }\n    ],\n    keyStrategies: [\n      {\n        name: 'Product-Led Growth (PLG)',\n        tactics: [\n          'Free trial optimization',\n          'Freemium model design',\n          'In-app onboarding',\n          'Feature gating strategy',\n          'Usage-based upselling',\n          'Viral loops and referrals'\n        ]\n      },\n      {\n        name: 'Content Marketing for SaaS',\n        tactics: [\n          'Educational blog content',\n          'Comparison pages (vs. competitors)',\n          'Integration partner content',\n          'Use case documentation',\n          'ROI calculators',\n          'Industry reports and research'\n        ]\n      },\n      {\n        name: 'Lead Nurturing',\n        tactics: [\n          'Segmented email sequences',\n          'Progressive profiling',\n          'Behavioral triggers',\n          'Sales enablement content',\n          'Demo and trial follow-up'\n        ]\n      }\n    ],\n    kpis: [\n      'Monthly Recurring Revenue (MRR)',\n      'Annual Recurring Revenue (ARR)',\n      'Customer Acquisition Cost (CAC)',\n      'Lifetime Value (LTV)',\n      'LTV:CAC Ratio',\n      'Churn Rate',\n      'Net Revenue Retention',\n      'Trial-to-Paid Conversion',\n      'Product Qualified Leads (PQLs)'\n    ],\n    commonMistakes: [\n      'No free trial or freemium option',\n      'Poor onboarding experience',\n      'Not tracking product usage',\n      'Generic messaging for all segments',\n      'Ignoring customer success'\n    ]\n  },\n  'healthcare': {\n    name: 'Healthcare & Medical',\n    overview: 'Healthcare marketing requires careful attention to regulations, patient privacy, and ethical considerations while building trust and credibility.',\n    targetAudiences: [\n      'Patients and caregivers',\n      'Healthcare providers',\n      'Hospital administrators',\n      'Insurance companies',\n      'Medical professionals',\n      'Health-conscious consumers'\n    ],\n    channelPriority: [\n      { channel: 'SEO & Local SEO', priority: 1, description: 'Patient discovery' },\n      { channel: 'Google Ads (compliant)', priority: 2, description: 'Service promotion' },\n      { channel: 'Content Marketing', priority: 3, description: 'Education and trust' },\n      { channel: 'Email Marketing', priority: 4, description: 'Patient communication' },\n      { channel: 'Social Media (educational)', priority: 5, description: 'Community building' },\n      { channel: 'Reputation Management', priority: 6, description: 'Reviews and testimonials' },\n      { channel: 'Referral Programs', priority: 7, description: 'Provider referrals' }\n    ],\n    keyStrategies: [\n      {\n        name: 'HIPAA-Compliant Marketing',\n        tactics: [\n          'No PHI in marketing materials',\n          'Secure forms and data handling',\n          'Consent-based communications',\n          'Compliant testimonials',\n          'Privacy policy transparency'\n        ]\n      },\n      {\n        name: 'Medical SEO',\n        tactics: [\n          'Health-focused content (E-E-A-T critical)',\n          'Local SEO for practices',\n          'Provider profiles',\n          'Condition and treatment pages',\n          'FAQ schema implementation'\n        ]\n      }\n    ],\n    kpis: [\n      'New patient acquisition cost',\n      'Patient lifetime value',\n      'Online booking rate',\n      'Review rating average',\n      'Referral rate',\n      'Patient retention rate'\n    ],\n    commonMistakes: [\n      'HIPAA violations in marketing',\n      'Making unsubstantiated claims',\n      'Ignoring online reputation',\n      'Poor local SEO',\n      'Not having mobile-friendly booking'\n    ]\n  },\n  'professional_services': {\n    name: 'Professional Services (Consulting, Legal, Accounting)',\n    overview: 'Professional services marketing focuses on expertise demonstration, trust building, and relationship development with long sales cycles.',\n    targetAudiences: [\n      'Small business owners',\n      'C-suite executives',\n      'Finance departments',\n      'HR departments',\n      'Board members',\n      'Entrepreneurs'\n    ],\n    channelPriority: [\n      { channel: 'LinkedIn (Organic & Paid)', priority: 1, description: 'Professional networking' },\n      { channel: 'Content Marketing & SEO', priority: 2, description: 'Thought leadership' },\n      { channel: 'Email Marketing', priority: 3, description: 'Relationship nurturing' },\n      { channel: 'Referral Networks', priority: 4, description: 'Word-of-mouth' },\n      { channel: 'Speaking & Events', priority: 5, description: 'Authority building' },\n      { channel: 'Webinars', priority: 6, description: 'Education and leads' },\n      { channel: 'Industry Publications', priority: 7, description: 'Credibility' }\n    ],\n    keyStrategies: [\n      {\n        name: 'Thought Leadership',\n        tactics: [\n          'Industry research and reports',\n          'Trend analysis',\n          'Bylined articles',\n          'Speaking engagements',\n          'Podcast appearances'\n        ]\n      },\n      {\n        name: 'Case Study Marketing',\n        tactics: [\n          'Client success stories',\n          'ROI documentation',\n          'Industry-specific examples',\n          'Video testimonials'\n        ]\n      }\n    ],\n    kpis: [\n      'Cost per qualified lead',\n      'Lead to opportunity rate',\n      'Average deal size',\n      'Sales cycle length',\n      'Client retention rate',\n      'Referral rate'\n    ],\n    commonMistakes: [\n      'Not demonstrating expertise',\n      'Generic positioning',\n      'Ignoring LinkedIn',\n      'No case studies',\n      'Poor follow-up'\n    ]\n  }\n};\n\n// Marketing funnel stages with tactics\nexport const MARKETING_FUNNEL = {\n  tofu: {\n    name: 'Top of Funnel (Awareness)',\n    goal: 'Generate awareness and attract potential customers',\n    contentTypes: [\n      'Blog posts and articles',\n      'Social media content',\n      'Infographics',\n      'Educational videos',\n      'Podcasts',\n      'Webinars (educational)'\n    ],\n    metrics: ['Impressions', 'Reach', 'Website traffic', 'Social engagement', 'Brand mentions'],\n    channels: ['SEO', 'Social Media', 'Content Marketing', 'PR', 'Display Ads']\n  },\n  mofu: {\n    name: 'Middle of Funnel (Consideration)',\n    goal: 'Nurture leads and demonstrate value',\n    contentTypes: [\n      'Ebooks and whitepapers',\n      'Case studies',\n      'Comparison guides',\n      'Email nurture sequences',\n      'Webinars (product-focused)',\n      'Free tools and calculators'\n    ],\n    metrics: ['Email open/click rates', 'Content downloads', 'Webinar attendance', 'Time on site'],\n    channels: ['Email Marketing', 'Retargeting', 'Content Marketing', 'Webinars']\n  },\n  bofu: {\n    name: 'Bottom of Funnel (Decision)',\n    goal: 'Convert leads to customers',\n    contentTypes: [\n      'Product demos',\n      'Free trials',\n      'Consultations',\n      'Pricing pages',\n      'Customer testimonials',\n      'ROI calculators'\n    ],\n    metrics: ['Demo requests', 'Trial signups', 'Conversion rate', 'Cost per acquisition'],\n    channels: ['Sales', 'Email', 'Retargeting', 'Direct']\n  },\n  retention: {\n    name: 'Retention & Advocacy',\n    goal: 'Keep customers and turn them into advocates',\n    contentTypes: [\n      'Onboarding sequences',\n      'Customer success content',\n      'Feature updates',\n      'Loyalty programs',\n      'Referral programs'\n    ],\n    metrics: ['Retention rate', 'NPS', 'Referral rate', 'Lifetime value', 'Expansion revenue'],\n    channels: ['Email', 'In-app', 'Customer Success', 'Community']\n  }\n};\n\n// Digital marketing channels expertise\nexport const DIGITAL_CHANNELS = {\n  seo: {\n    name: 'Search Engine Optimization',\n    description: 'Improving visibility in organic search results',\n    components: {\n      technical: [\n        'Site architecture and URL structure',\n        'Page speed optimization (Core Web Vitals)',\n        'Mobile optimization',\n        'Schema markup',\n        'XML sitemaps',\n        'HTTPS security'\n      ],\n      onPage: [\n        'Keyword research and mapping',\n        'Title tag optimization (50-60 chars)',\n        'Meta descriptions (150-160 chars)',\n        'Header hierarchy (H1, H2, H3)',\n        'Content quality (E-E-A-T)',\n        'Internal linking'\n      ],\n      offPage: [\n        'Link building strategies',\n        'Digital PR',\n        'Guest posting',\n        'Local citations',\n        'Brand mentions'\n      ],\n      local: [\n        'Google Business Profile optimization',\n        'NAP consistency',\n        'Local content',\n        'Review management',\n        'Local link building'\n      ]\n    }\n  },\n  ppc: {\n    name: 'Pay-Per-Click Advertising',\n    description: 'Paid advertising on search engines and platforms',\n    platforms: {\n      googleAds: {\n        campaignTypes: ['Search', 'Display', 'Shopping', 'Video', 'Performance Max'],\n        bestPractices: [\n          'Logical account structure',\n          'Quality Score optimization',\n          'Negative keyword management',\n          'Ad extension usage',\n          'Conversion tracking'\n        ]\n      },\n      socialAds: {\n        platforms: ['Facebook/Meta', 'LinkedIn', 'Twitter/X', 'TikTok', 'Pinterest'],\n        targetingOptions: ['Demographics', 'Interests', 'Behaviors', 'Custom audiences', 'Lookalikes']\n      }\n    }\n  },\n  email: {\n    name: 'Email Marketing',\n    description: 'Direct communication with subscribers and customers',\n    types: [\n      'Welcome series',\n      'Nurture campaigns',\n      'Promotional emails',\n      'Newsletters',\n      'Transactional emails',\n      'Re-engagement campaigns'\n    ],\n    bestPractices: [\n      'Subject lines under 50 characters',\n      'Personalization',\n      'Mobile-responsive design',\n      'Clear CTAs',\n      'A/B testing',\n      'List hygiene'\n    ],\n    metrics: ['Open rate', 'Click rate', 'Conversion rate', 'Unsubscribe rate']\n  },\n  social: {\n    name: 'Social Media Marketing',\n    description: 'Building presence and engagement on social platforms',\n    platforms: {\n      facebook: { bestFor: 'Community building, local businesses, older demographics', postFrequency: '1-2 per day' },\n      instagram: { bestFor: 'Visual brands, lifestyle, younger demographics', postFrequency: '1-3 per day plus Stories' },\n      linkedin: { bestFor: 'B2B, professional services, thought leadership', postFrequency: '1-2 per day weekdays' },\n      tiktok: { bestFor: 'Gen Z, entertainment, trends, brand personality', postFrequency: '1-4 per day' },\n      twitter: { bestFor: 'News, real-time engagement, customer service', postFrequency: '3-5 per day' },\n      youtube: { bestFor: 'Long-form content, tutorials, brand building', postFrequency: '1-3 per week' }\n    }\n  },\n  content: {\n    name: 'Content Marketing',\n    description: 'Creating valuable content to attract and engage audiences',\n    types: {\n      written: ['Blog posts', 'Ebooks', 'Whitepapers', 'Case studies', 'Newsletters'],\n      visual: ['Infographics', 'Photography', 'Presentations', 'Data visualizations'],\n      video: ['Explainers', 'Tutorials', 'Testimonials', 'Webinars', 'Live streams'],\n      audio: ['Podcasts', 'Audio articles', 'Interviews'],\n      interactive: ['Quizzes', 'Calculators', 'Tools', 'Assessments']\n    }\n  }\n};\n\n// Audience segmentation frameworks\nexport const AUDIENCE_SEGMENTS = {\n  generational: {\n    genZ: {\n      name: 'Generation Z (1997-2012)',\n      characteristics: ['Digital natives', 'Mobile-first', 'Short attention spans', 'Value authenticity', 'Socially conscious'],\n      platforms: ['TikTok', 'Instagram', 'Snapchat', 'YouTube'],\n      approach: 'Short-form video, memes, influencers, user-generated content'\n    },\n    millennials: {\n      name: 'Millennials (1981-1996)',\n      characteristics: ['Tech-comfortable', 'Experience-oriented', 'Research before purchase', 'Value convenience'],\n      platforms: ['Instagram', 'YouTube', 'Facebook', 'LinkedIn'],\n      approach: 'Social proof, convenience, experiences, purpose-driven'\n    },\n    genX: {\n      name: 'Generation X (1965-1980)',\n      characteristics: ['Independent', 'Skeptical of marketing', 'Brand loyal when earned', 'Value quality'],\n      platforms: ['Facebook', 'YouTube', 'LinkedIn', 'Email'],\n      approach: 'Straightforward messaging, quality focus, email marketing'\n    },\n    boomers: {\n      name: 'Baby Boomers (1946-1964)',\n      characteristics: ['Wealth concentrated', 'Brand loyal', 'Research-oriented', 'Value service'],\n      platforms: ['Facebook', 'Email', 'YouTube'],\n      approach: 'Trust building, detailed information, customer service focus'\n    }\n  },\n  b2b: {\n    enterprise: { size: '1000+ employees', approach: 'Account-based marketing, long sales cycles, custom solutions' },\n    midMarket: { size: '100-999 employees', approach: 'Scalability needs, balanced approach, value demonstration' },\n    smallBusiness: { size: '10-99 employees', approach: 'Quick decisions, relationship-important, support needs' },\n    microBusiness: { size: '<10 employees', approach: 'Owner decisions, price-sensitive, self-service preference' }\n  }\n};\n\n// Marketing metrics and KPIs\nexport const MARKETING_METRICS = {\n  acquisition: [\n    { name: 'Cost Per Lead (CPL)', description: 'Total marketing spend / Number of leads' },\n    { name: 'Cost Per Acquisition (CPA)', description: 'Total marketing spend / Number of customers' },\n    { name: 'Customer Acquisition Cost (CAC)', description: 'Total sales & marketing cost / New customers' },\n    { name: 'Conversion Rate', description: 'Conversions / Total visitors  100' }\n  ],\n  engagement: [\n    { name: 'Click-Through Rate (CTR)', description: 'Clicks / Impressions  100' },\n    { name: 'Bounce Rate', description: 'Single-page sessions / Total sessions  100' },\n    { name: 'Time on Page', description: 'Average time users spend on a page' },\n    { name: 'Pages per Session', description: 'Total pageviews / Total sessions' }\n  ],\n  retention: [\n    { name: 'Customer Lifetime Value (CLV)', description: 'Average purchase value  Purchase frequency  Customer lifespan' },\n    { name: 'Churn Rate', description: 'Customers lost / Total customers  100' },\n    { name: 'Net Promoter Score (NPS)', description: 'Promoters % - Detractors %' },\n    { name: 'Customer Retention Rate', description: 'Customers at end - New customers / Customers at start  100' }\n  ],\n  revenue: [\n    { name: 'Return on Ad Spend (ROAS)', description: 'Revenue from ads / Ad spend' },\n    { name: 'Marketing ROI', description: '(Revenue - Marketing cost) / Marketing cost  100' },\n    { name: 'Revenue per Visitor', description: 'Total revenue / Total visitors' }\n  ]\n};\n\n// Campaign templates\nexport const CAMPAIGN_TEMPLATES = {\n  leadGeneration: {\n    name: 'Lead Generation Campaign',\n    steps: [\n      'Define target audience and offer',\n      'Create high-value content asset (ebook, webinar, tool)',\n      'Build landing page with compelling copy and form',\n      'Set up thank you page and email delivery',\n      'Create nurture email sequence (5-7 emails)',\n      'Set up paid promotion (Google, Facebook, LinkedIn)',\n      'Configure tracking and attribution',\n      'Launch and monitor performance',\n      'Optimize based on data'\n    ]\n  },\n  productLaunch: {\n    name: 'Product Launch Campaign',\n    phases: {\n      prelaunch: ['Teaser content', 'Waitlist building', 'Influencer seeding', 'Press outreach'],\n      launch: ['Announcement email', 'Social media blitz', 'Paid advertising', 'PR push', 'Webinar/demo'],\n      postlaunch: ['Customer testimonials', 'Case studies', 'Ongoing promotion', 'Feedback collection']\n    }\n  },\n  emailNurture: {\n    name: 'Email Nurture Sequence',\n    emails: [\n      { day: 0, subject: 'Welcome + Deliver promised content' },\n      { day: 2, subject: 'Educational content related to their interest' },\n      { day: 5, subject: 'Case study or social proof' },\n      { day: 8, subject: 'Address common objections' },\n      { day: 12, subject: 'Soft promotion or offer' },\n      { day: 15, subject: 'Final push with urgency' }\n    ]\n  },\n  retargeting: {\n    name: 'Retargeting Campaign',\n    audiences: [\n      { audience: 'Website visitors (no conversion)', message: 'Remember us? Come back and explore' },\n      { audience: 'Cart abandoners', message: 'You left something behind + incentive' },\n      { audience: 'Past customers', message: 'New products you might like' },\n      { audience: 'Email non-openers', message: 'Alternative messaging approach' }\n    ]\n  }\n};\n\n// Type definitions\ninterface IndustryPlaybook {\n  name: string;\n  overview: string;\n  targetAudiences: string[];\n  channelPriority: Array<{ channel: string; priority: number; description: string }>;\n  keyStrategies: Array<{ name: string; tactics: string[] }>;\n  kpis: string[];\n  commonMistakes: string[];\n}\n\n// Helper function to get industry playbook\nexport function getIndustryPlaybook(industry: string): IndustryPlaybook | null {\n  const normalizedIndustry = industry.toLowerCase().replace(/[^a-z]/g, '_');\n  \n  // Map common variations to our keys\n  const industryMap: Record<string, string> = {\n    'real_estate': 'real_estate',\n    'realestate': 'real_estate',\n    'property': 'real_estate',\n    'realtor': 'real_estate',\n    'ecommerce': 'ecommerce',\n    'e_commerce': 'ecommerce',\n    'retail': 'ecommerce',\n    'online_store': 'ecommerce',\n    'saas': 'saas',\n    'software': 'saas',\n    'technology': 'saas',\n    'tech': 'saas',\n    'healthcare': 'healthcare',\n    'medical': 'healthcare',\n    'health': 'healthcare',\n    'doctor': 'healthcare',\n    'professional_services': 'professional_services',\n    'consulting': 'professional_services',\n    'legal': 'professional_services',\n    'accounting': 'professional_services',\n    'law': 'professional_services'\n  };\n  \n  const key = industryMap[normalizedIndustry] || normalizedIndustry;\n  return INDUSTRY_PLAYBOOKS[key] || null;\n}\n\n// Helper function to get marketing recommendations\nexport function getMarketingRecommendations(params: {\n  industry?: string;\n  businessSize?: string;\n  goals?: string[];\n  budget?: 'low' | 'medium' | 'high';\n}): MarketingRecommendation {\n  const recommendations: MarketingRecommendation = {\n    channels: [],\n    tactics: [],\n    contentTypes: [],\n    kpis: [],\n    quickWins: [],\n    longTermStrategies: []\n  };\n  \n  // Get industry-specific recommendations\n  if (params.industry) {\n    const playbook = getIndustryPlaybook(params.industry);\n    if (playbook) {\n      recommendations.channels = playbook.channelPriority.slice(0, 5).map(c => c.channel);\n      recommendations.kpis = playbook.kpis;\n      playbook.keyStrategies.forEach(s => {\n        recommendations.tactics.push(...s.tactics.slice(0, 3));\n      });\n    }\n  }\n  \n  // Add budget-based recommendations\n  if (params.budget === 'low') {\n    recommendations.quickWins = [\n      'Optimize Google Business Profile',\n      'Start email marketing with free tools',\n      'Create social media presence',\n      'Write SEO-focused blog content',\n      'Ask customers for reviews'\n    ];\n    recommendations.channels = recommendations.channels.filter(c => \n      !c.toLowerCase().includes('paid') && !c.toLowerCase().includes('advertising')\n    );\n  } else if (params.budget === 'high') {\n    recommendations.longTermStrategies = [\n      'Build comprehensive content hub',\n      'Implement marketing automation',\n      'Launch multi-channel paid campaigns',\n      'Invest in video production',\n      'Develop influencer partnerships'\n    ];\n  }\n  \n  // Add size-based recommendations\n  if (params.businessSize === 'small' || params.businessSize === 'micro') {\n    recommendations.quickWins.push(\n      'Focus on local SEO',\n      'Leverage personal network',\n      'Create referral program'\n    );\n  }\n  \n  return recommendations;\n}\n\ninterface MarketingRecommendation {\n  channels: string[];\n  tactics: string[];\n  contentTypes: string[];\n  kpis: string[];\n  quickWins: string[];\n  longTermStrategies: string[];\n}\n\n// Export all knowledge for AI context\nexport const MARKETING_KNOWLEDGE = {\n  industryPlaybooks: INDUSTRY_PLAYBOOKS,\n  funnel: MARKETING_FUNNEL,\n  channels: DIGITAL_CHANNELS,\n  segments: AUDIENCE_SEGMENTS,\n  metrics: MARKETING_METRICS,\n  templates: CAMPAIGN_TEMPLATES,\n  getIndustryPlaybook,\n  getMarketingRecommendations\n};\n","import { BlobPart, getName, makeFile, isAsyncIterable } from './uploads';\nimport type { FilePropertyBag } from './builtin-types';\nimport { checkFileSupport } from './uploads';\n\ntype BlobLikePart = string | ArrayBuffer | ArrayBufferView | BlobLike | DataView;\n\n/**\n * Intended to match DOM Blob, node-fetch Blob, node:buffer Blob, etc.\n * Don't add arrayBuffer here, node-fetch doesn't have it\n */\ninterface BlobLike {\n  /** [MDN Reference](https://developer.mozilla.org/docs/Web/API/Blob/size) */\n  readonly size: number;\n  /** [MDN Reference](https://developer.mozilla.org/docs/Web/API/Blob/type) */\n  readonly type: string;\n  /** [MDN Reference](https://developer.mozilla.org/docs/Web/API/Blob/text) */\n  text(): Promise<string>;\n  /** [MDN Reference](https://developer.mozilla.org/docs/Web/API/Blob/slice) */\n  slice(start?: number, end?: number): BlobLike;\n}\n\n/**\n * This check adds the arrayBuffer() method type because it is available and used at runtime\n */\nconst isBlobLike = (value: any): value is BlobLike & { arrayBuffer(): Promise<ArrayBuffer> } =>\n  value != null &&\n  typeof value === 'object' &&\n  typeof value.size === 'number' &&\n  typeof value.type === 'string' &&\n  typeof value.text === 'function' &&\n  typeof value.slice === 'function' &&\n  typeof value.arrayBuffer === 'function';\n\n/**\n * Intended to match DOM File, node:buffer File, undici File, etc.\n */\ninterface FileLike extends BlobLike {\n  /** [MDN Reference](https://developer.mozilla.org/docs/Web/API/File/lastModified) */\n  readonly lastModified: number;\n  /** [MDN Reference](https://developer.mozilla.org/docs/Web/API/File/name) */\n  readonly name?: string | undefined;\n}\n\n/**\n * This check adds the arrayBuffer() method type because it is available and used at runtime\n */\nconst isFileLike = (value: any): value is FileLike & { arrayBuffer(): Promise<ArrayBuffer> } =>\n  value != null &&\n  typeof value === 'object' &&\n  typeof value.name === 'string' &&\n  typeof value.lastModified === 'number' &&\n  isBlobLike(value);\n\n/**\n * Intended to match DOM Response, node-fetch Response, undici Response, etc.\n */\nexport interface ResponseLike {\n  url: string;\n  blob(): Promise<BlobLike>;\n}\n\nconst isResponseLike = (value: any): value is ResponseLike =>\n  value != null &&\n  typeof value === 'object' &&\n  typeof value.url === 'string' &&\n  typeof value.blob === 'function';\n\nexport type ToFileInput =\n  | FileLike\n  | ResponseLike\n  | Exclude<BlobLikePart, string>\n  | AsyncIterable<BlobLikePart>;\n\n/**\n * Helper for creating a {@link File} to pass to an SDK upload method from a variety of different data formats\n * @param value the raw content of the file. Can be an {@link Uploadable}, BlobLikePart, or AsyncIterable of BlobLikeParts\n * @param {string=} name the name of the file. If omitted, toFile will try to determine a file name from bits if possible\n * @param {Object=} options additional properties\n * @param {string=} options.type the MIME type of the content\n * @param {number=} options.lastModified the last modified timestamp\n * @returns a {@link File} with the given properties\n */\nexport async function toFile(\n  value: ToFileInput | PromiseLike<ToFileInput>,\n  name?: string | null | undefined,\n  options?: FilePropertyBag | undefined,\n): Promise<File> {\n  checkFileSupport();\n\n  // If it's a promise, resolve it.\n  value = await value;\n\n  name ||= getName(value);\n\n  // If we've been given a `File` we don't need to do anything if the name / options\n  // have not been customised.\n  if (isFileLike(value)) {\n    if (value instanceof File && name == null && options == null) {\n      return value;\n    }\n    return makeFile([await value.arrayBuffer()], name ?? value.name, {\n      type: value.type,\n      lastModified: value.lastModified,\n      ...options,\n    });\n  }\n\n  if (isResponseLike(value)) {\n    const blob = await value.blob();\n    name ||= new URL(value.url).pathname.split(/[\\\\/]/).pop();\n\n    return makeFile(await getBytes(blob), name, options);\n  }\n\n  const parts = await getBytes(value);\n\n  if (!options?.type) {\n    const type = parts.find((part) => typeof part === 'object' && 'type' in part && part.type);\n    if (typeof type === 'string') {\n      options = { ...options, type };\n    }\n  }\n\n  return makeFile(parts, name, options);\n}\n\nasync function getBytes(value: BlobLikePart | AsyncIterable<BlobLikePart>): Promise<Array<BlobPart>> {\n  let parts: Array<BlobPart> = [];\n  if (\n    typeof value === 'string' ||\n    ArrayBuffer.isView(value) || // includes Uint8Array, Buffer, etc.\n    value instanceof ArrayBuffer\n  ) {\n    parts.push(value);\n  } else if (isBlobLike(value)) {\n    parts.push(value instanceof Blob ? value : await value.arrayBuffer());\n  } else if (\n    isAsyncIterable(value) // includes Readable, ReadableStream, etc.\n  ) {\n    for await (const chunk of value) {\n      parts.push(...(await getBytes(chunk as BlobLikePart))); // TODO, consider validating?\n    }\n  } else {\n    const constructor = value?.constructor?.name;\n    throw new Error(\n      `Unexpected data type: ${typeof value}${\n        constructor ? `; constructor: ${constructor}` : ''\n      }${propsForError(value)}`,\n    );\n  }\n\n  return parts;\n}\n\nfunction propsForError(value: unknown): string {\n  if (typeof value !== 'object' || value === null) return '';\n  const props = Object.getOwnPropertyNames(value);\n  return `; props: [${props.map((p) => `\"${p}\"`).join(', ')}]`;\n}\n","/**\n * Utilities for hex, bytes, CSPRNG.\n * @module\n */\n/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n/** Checks if something is Uint8Array. Be careful: nodejs Buffer will return true. */\nexport function isBytes(a: unknown): a is Uint8Array {\n  return a instanceof Uint8Array || (ArrayBuffer.isView(a) && a.constructor.name === 'Uint8Array');\n}\n\n/** Asserts something is positive integer. */\nexport function anumber(n: number, title: string = ''): void {\n  if (!Number.isSafeInteger(n) || n < 0) {\n    const prefix = title && `\"${title}\" `;\n    throw new Error(`${prefix}expected integer >= 0, got ${n}`);\n  }\n}\n\n/** Asserts something is Uint8Array. */\nexport function abytes(value: Uint8Array, length?: number, title: string = ''): Uint8Array {\n  const bytes = isBytes(value);\n  const len = value?.length;\n  const needsLen = length !== undefined;\n  if (!bytes || (needsLen && len !== length)) {\n    const prefix = title && `\"${title}\" `;\n    const ofLen = needsLen ? ` of length ${length}` : '';\n    const got = bytes ? `length=${len}` : `type=${typeof value}`;\n    throw new Error(prefix + 'expected Uint8Array' + ofLen + ', got ' + got);\n  }\n  return value;\n}\n\n/** Asserts something is hash */\nexport function ahash(h: CHash): void {\n  if (typeof h !== 'function' || typeof h.create !== 'function')\n    throw new Error('Hash must wrapped by utils.createHasher');\n  anumber(h.outputLen);\n  anumber(h.blockLen);\n}\n\n/** Asserts a hash instance has not been destroyed / finished */\nexport function aexists(instance: any, checkFinished = true): void {\n  if (instance.destroyed) throw new Error('Hash instance has been destroyed');\n  if (checkFinished && instance.finished) throw new Error('Hash#digest() has already been called');\n}\n\n/** Asserts output is properly-sized byte array */\nexport function aoutput(out: any, instance: any): void {\n  abytes(out, undefined, 'digestInto() output');\n  const min = instance.outputLen;\n  if (out.length < min) {\n    throw new Error('\"digestInto() output\" expected to be of length >=' + min);\n  }\n}\n\n/** Generic type encompassing 8/16/32-byte arrays - but not 64-byte. */\n// prettier-ignore\nexport type TypedArray = Int8Array | Uint8ClampedArray | Uint8Array |\n  Uint16Array | Int16Array | Uint32Array | Int32Array;\n\n/** Cast u8 / u16 / u32 to u8. */\nexport function u8(arr: TypedArray): Uint8Array {\n  return new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\n}\n\n/** Cast u8 / u16 / u32 to u32. */\nexport function u32(arr: TypedArray): Uint32Array {\n  return new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\n}\n\n/** Zeroize a byte array. Warning: JS provides no guarantees. */\nexport function clean(...arrays: TypedArray[]): void {\n  for (let i = 0; i < arrays.length; i++) {\n    arrays[i].fill(0);\n  }\n}\n\n/** Create DataView of an array for easy byte-level manipulation. */\nexport function createView(arr: TypedArray): DataView {\n  return new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\n}\n\n/** The rotate right (circular right shift) operation for uint32 */\nexport function rotr(word: number, shift: number): number {\n  return (word << (32 - shift)) | (word >>> shift);\n}\n\n/** The rotate left (circular left shift) operation for uint32 */\nexport function rotl(word: number, shift: number): number {\n  return (word << shift) | ((word >>> (32 - shift)) >>> 0);\n}\n\n/** Is current platform little-endian? Most are. Big-Endian platform: IBM */\nexport const isLE: boolean = /* @__PURE__ */ (() =>\n  new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44)();\n\n/** The byte swap operation for uint32 */\nexport function byteSwap(word: number): number {\n  return (\n    ((word << 24) & 0xff000000) |\n    ((word << 8) & 0xff0000) |\n    ((word >>> 8) & 0xff00) |\n    ((word >>> 24) & 0xff)\n  );\n}\n/** Conditionally byte swap if on a big-endian platform */\nexport const swap8IfBE: (n: number) => number = isLE\n  ? (n: number) => n\n  : (n: number) => byteSwap(n);\n\n/** In place byte swap for Uint32Array */\nexport function byteSwap32(arr: Uint32Array): Uint32Array {\n  for (let i = 0; i < arr.length; i++) {\n    arr[i] = byteSwap(arr[i]);\n  }\n  return arr;\n}\n\nexport const swap32IfBE: (u: Uint32Array) => Uint32Array = isLE\n  ? (u: Uint32Array) => u\n  : byteSwap32;\n\n// Built-in hex conversion https://caniuse.com/mdn-javascript_builtins_uint8array_fromhex\nconst hasHexBuiltin: boolean = /* @__PURE__ */ (() =>\n  // @ts-ignore\n  typeof Uint8Array.from([]).toHex === 'function' && typeof Uint8Array.fromHex === 'function')();\n\n// Array where index 0xf0 (240) is mapped to string 'f0'\nconst hexes = /* @__PURE__ */ Array.from({ length: 256 }, (_, i) =>\n  i.toString(16).padStart(2, '0')\n);\n\n/**\n * Convert byte array to hex string. Uses built-in function, when available.\n * @example bytesToHex(Uint8Array.from([0xca, 0xfe, 0x01, 0x23])) // 'cafe0123'\n */\nexport function bytesToHex(bytes: Uint8Array): string {\n  abytes(bytes);\n  // @ts-ignore\n  if (hasHexBuiltin) return bytes.toHex();\n  // pre-caching improves the speed 6x\n  let hex = '';\n  for (let i = 0; i < bytes.length; i++) {\n    hex += hexes[bytes[i]];\n  }\n  return hex;\n}\n\n// We use optimized technique to convert hex string to byte array\nconst asciis = { _0: 48, _9: 57, A: 65, F: 70, a: 97, f: 102 } as const;\nfunction asciiToBase16(ch: number): number | undefined {\n  if (ch >= asciis._0 && ch <= asciis._9) return ch - asciis._0; // '2' => 50-48\n  if (ch >= asciis.A && ch <= asciis.F) return ch - (asciis.A - 10); // 'B' => 66-(65-10)\n  if (ch >= asciis.a && ch <= asciis.f) return ch - (asciis.a - 10); // 'b' => 98-(97-10)\n  return;\n}\n\n/**\n * Convert hex string to byte array. Uses built-in function, when available.\n * @example hexToBytes('cafe0123') // Uint8Array.from([0xca, 0xfe, 0x01, 0x23])\n */\nexport function hexToBytes(hex: string): Uint8Array {\n  if (typeof hex !== 'string') throw new Error('hex string expected, got ' + typeof hex);\n  // @ts-ignore\n  if (hasHexBuiltin) return Uint8Array.fromHex(hex);\n  const hl = hex.length;\n  const al = hl / 2;\n  if (hl % 2) throw new Error('hex string expected, got unpadded hex of length ' + hl);\n  const array = new Uint8Array(al);\n  for (let ai = 0, hi = 0; ai < al; ai++, hi += 2) {\n    const n1 = asciiToBase16(hex.charCodeAt(hi));\n    const n2 = asciiToBase16(hex.charCodeAt(hi + 1));\n    if (n1 === undefined || n2 === undefined) {\n      const char = hex[hi] + hex[hi + 1];\n      throw new Error('hex string expected, got non-hex character \"' + char + '\" at index ' + hi);\n    }\n    array[ai] = n1 * 16 + n2; // multiply first octet, e.g. 'a3' => 10*16+3 => 160 + 3 => 163\n  }\n  return array;\n}\n\n/**\n * There is no setImmediate in browser and setTimeout is slow.\n * Call of async fn will return Promise, which will be fullfiled only on\n * next scheduler queue processing step and this is exactly what we need.\n */\nexport const nextTick = async (): Promise<void> => {};\n\n/** Returns control to thread each 'tick' ms to avoid blocking. */\nexport async function asyncLoop(\n  iters: number,\n  tick: number,\n  cb: (i: number) => void\n): Promise<void> {\n  let ts = Date.now();\n  for (let i = 0; i < iters; i++) {\n    cb(i);\n    // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n    const diff = Date.now() - ts;\n    if (diff >= 0 && diff < tick) continue;\n    await nextTick();\n    ts += diff;\n  }\n}\n\n// Global symbols, but ts doesn't see them: https://github.com/microsoft/TypeScript/issues/31535\ndeclare const TextEncoder: any;\n\n/**\n * Converts string to bytes using UTF8 encoding.\n * Built-in doesn't validate input to be string: we do the check.\n * @example utf8ToBytes('abc') // Uint8Array.from([97, 98, 99])\n */\nexport function utf8ToBytes(str: string): Uint8Array {\n  if (typeof str !== 'string') throw new Error('string expected');\n  return new Uint8Array(new TextEncoder().encode(str)); // https://bugzil.la/1681809\n}\n\n/** KDFs can accept string or Uint8Array for user convenience. */\nexport type KDFInput = string | Uint8Array;\n\n/**\n * Helper for KDFs: consumes uint8array or string.\n * When string is passed, does utf8 decoding, using TextDecoder.\n */\nexport function kdfInputToBytes(data: KDFInput, errorTitle = ''): Uint8Array {\n  if (typeof data === 'string') return utf8ToBytes(data);\n  return abytes(data, undefined, errorTitle);\n}\n\n/** Copies several Uint8Arrays into one. */\nexport function concatBytes(...arrays: Uint8Array[]): Uint8Array {\n  let sum = 0;\n  for (let i = 0; i < arrays.length; i++) {\n    const a = arrays[i];\n    abytes(a);\n    sum += a.length;\n  }\n  const res = new Uint8Array(sum);\n  for (let i = 0, pad = 0; i < arrays.length; i++) {\n    const a = arrays[i];\n    res.set(a, pad);\n    pad += a.length;\n  }\n  return res;\n}\n\ntype EmptyObj = {};\n/** Merges default options and passed options. */\nexport function checkOpts<T1 extends EmptyObj, T2 extends EmptyObj>(\n  defaults: T1,\n  opts?: T2\n): T1 & T2 {\n  if (opts !== undefined && {}.toString.call(opts) !== '[object Object]')\n    throw new Error('options must be object or undefined');\n  const merged = Object.assign(defaults, opts);\n  return merged as T1 & T2;\n}\n\n/** Common interface for all hashes. */\nexport interface Hash<T> {\n  blockLen: number; // Bytes per block\n  outputLen: number; // Bytes in output\n  update(buf: Uint8Array): this;\n  digestInto(buf: Uint8Array): void;\n  digest(): Uint8Array;\n  destroy(): void;\n  _cloneInto(to?: T): T;\n  clone(): T;\n}\n\n/** PseudoRandom (number) Generator */\nexport interface PRG {\n  addEntropy(seed: Uint8Array): void;\n  randomBytes(length: number): Uint8Array;\n  clean(): void;\n}\n\n/**\n * XOF: streaming API to read digest in chunks.\n * Same as 'squeeze' in keccak/k12 and 'seek' in blake3, but more generic name.\n * When hash used in XOF mode it is up to user to call '.destroy' afterwards, since we cannot\n * destroy state, next call can require more bytes.\n */\nexport type HashXOF<T extends Hash<T>> = Hash<T> & {\n  xof(bytes: number): Uint8Array; // Read 'bytes' bytes from digest stream\n  xofInto(buf: Uint8Array): Uint8Array; // read buf.length bytes from digest stream into buf\n};\n\n/** Hash constructor */\nexport type HasherCons<T, Opts = undefined> = Opts extends undefined ? () => T : (opts?: Opts) => T;\n/** Optional hash params. */\nexport type HashInfo = {\n  oid?: Uint8Array; // DER encoded OID in bytes\n};\n/** Hash function */\nexport type CHash<T extends Hash<T> = Hash<any>, Opts = undefined> = {\n  outputLen: number;\n  blockLen: number;\n} & HashInfo &\n  (Opts extends undefined\n    ? {\n        (msg: Uint8Array): Uint8Array;\n        create(): T;\n      }\n    : {\n        (msg: Uint8Array, opts?: Opts): Uint8Array;\n        create(opts?: Opts): T;\n      });\n/** XOF with output */\nexport type CHashXOF<T extends HashXOF<T> = HashXOF<any>, Opts = undefined> = CHash<T, Opts>;\n\n/** Creates function with outputLen, blockLen, create properties from a class constructor. */\nexport function createHasher<T extends Hash<T>, Opts = undefined>(\n  hashCons: HasherCons<T, Opts>,\n  info: HashInfo = {}\n): CHash<T, Opts> {\n  const hashC: any = (msg: Uint8Array, opts?: Opts) => hashCons(opts).update(msg).digest();\n  const tmp = hashCons(undefined);\n  hashC.outputLen = tmp.outputLen;\n  hashC.blockLen = tmp.blockLen;\n  hashC.create = (opts?: Opts) => hashCons(opts);\n  Object.assign(hashC, info);\n  return Object.freeze(hashC);\n}\n\n/** Cryptographically secure PRNG. Uses internal OS-level `crypto.getRandomValues`. */\nexport function randomBytes(bytesLength = 32): Uint8Array {\n  const cr = typeof globalThis === 'object' ? (globalThis as any).crypto : null;\n  if (typeof cr?.getRandomValues !== 'function')\n    throw new Error('crypto.getRandomValues must be defined');\n  return cr.getRandomValues(new Uint8Array(bytesLength));\n}\n\n/** Creates OID opts for NIST hashes, with prefix 06 09 60 86 48 01 65 03 04 02. */\nexport const oidNist = (suffix: number): Required<HashInfo> => ({\n  oid: Uint8Array.from([0x06, 0x09, 0x60, 0x86, 0x48, 0x01, 0x65, 0x03, 0x04, 0x02, suffix]),\n});\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\n/**\n * https://stackoverflow.com/a/2117523\n */\nexport let uuid4 = function () {\n  const { crypto } = globalThis as any;\n  if (crypto?.randomUUID) {\n    uuid4 = crypto.randomUUID.bind(crypto);\n    return crypto.randomUUID();\n  }\n  const u8 = new Uint8Array(1);\n  const randomByte = crypto ? () => crypto.getRandomValues(u8)[0]! : () => (Math.random() * 0xff) & 0xff;\n  return '10000000-1000-4000-8000-100000000000'.replace(/[018]/g, (c) =>\n    (+c ^ (randomByte() & (15 >> (+c / 4)))).toString(16),\n  );\n};\n","// ============================================\n// Claude AI Assistant Service - RISIVO CRM\n// Powered by Claude Sonnet 4 with Function Calling\n// Comprehensive AI Virtual Assistant for all CRM modules\n// ============================================\n\nimport Anthropic from '@anthropic-ai/sdk'\nimport { supabaseAdmin } from '@/lib/supabase/server'\nimport { createId } from '@paralleldrive/cuid2'\nimport { MARKETING_KNOWLEDGE, getIndustryPlaybook, getMarketingRecommendations } from './knowledge/marketing-knowledge'\nimport { RISIVO_KNOWLEDGE, MODULE_COMMANDS, AI_AUTONOMY_LEVELS, RISIVO_PHILOSOPHY } from './knowledge/risivo-knowledge'\n\n// Generate cuid (compatible with Prisma's @default(cuid()))\nfunction generateCuid(): string {\n  return createId()\n}\n\n// Initialize Anthropic client\nconst anthropic = new Anthropic({\n  apiKey: process.env.ANTHROPIC_API_KEY || '',\n})\n\n// ============================================\n// Type Definitions\n// ============================================\n\ninterface ConversationMessage {\n  role: 'user' | 'assistant'\n  content: string\n}\n\ninterface ToolResult {\n  success: boolean\n  data?: any\n  error?: string\n}\n\ninterface AssistantResponse {\n  success: boolean\n  message: string\n  data?: any\n  toolsUsed?: string[]\n}\n\n// ============================================\n// CRM Tools Definition for Claude\n// Organized by Module for clarity\n// ============================================\n\nconst CRM_TOOLS: Anthropic.Tool[] = [\n  // ==========================================\n  // CONTACT MANAGEMENT TOOLS\n  // ==========================================\n  {\n    name: 'search_contacts',\n    description: 'Search for contacts by name, email, phone, company, or any criteria. Use for finding specific contacts or filtering contact lists.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        query: { type: 'string', description: 'Search query - name, email, phone, or company' },\n        status: { type: 'string', enum: ['new', 'contacted', 'qualified', 'customer', 'lost'], description: 'Filter by status' },\n        tags: { type: 'array', items: { type: 'string' }, description: 'Filter by tags' },\n        limit: { type: 'number', description: 'Max results (default: 10)' }\n      },\n      required: ['query']\n    }\n  },\n  {\n    name: 'get_contact',\n    description: 'Get full details of a specific contact by ID or email.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        contact_id: { type: 'string', description: 'Contact UUID' },\n        email: { type: 'string', description: 'Contact email address' }\n      },\n      required: []\n    }\n  },\n  {\n    name: 'create_contact',\n    description: 'Create a new contact with provided information.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        firstName: { type: 'string', description: 'First name (required)' },\n        lastName: { type: 'string', description: 'Last name' },\n        email: { type: 'string', description: 'Email address' },\n        phone: { type: 'string', description: 'Phone number' },\n        company: { type: 'string', description: 'Company name' },\n        status: { type: 'string', enum: ['new', 'contacted', 'qualified', 'customer', 'lost'] },\n        tags: { type: 'array', items: { type: 'string' }, description: 'Tags to add' },\n        source: { type: 'string', description: 'Lead source' },\n        notes: { type: 'string', description: 'Contact notes' }\n      },\n      required: ['firstName']\n    }\n  },\n  {\n    name: 'update_contact',\n    description: 'Update any field on an existing contact. Use the active contact if no contact_id specified.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        contact_id: { type: 'string', description: 'Contact ID (uses active contact if not provided)' },\n        email: { type: 'string', description: 'New email' },\n        phone: { type: 'string', description: 'New phone' },\n        firstName: { type: 'string', description: 'New first name' },\n        lastName: { type: 'string', description: 'New last name' },\n        company: { type: 'string', description: 'New company' },\n        status: { type: 'string', enum: ['new', 'contacted', 'qualified', 'customer', 'lost'] },\n        tags: { type: 'array', items: { type: 'string' }, description: 'Tags to add' },\n        removeTags: { type: 'array', items: { type: 'string' }, description: 'Tags to remove' },\n        notes: { type: 'string', description: 'Notes to add' }\n      },\n      required: []\n    }\n  },\n  {\n    name: 'delete_contact',\n    description: 'Delete a contact permanently. Always confirm with user first.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        contact_id: { type: 'string', description: 'Contact ID to delete' }\n      },\n      required: ['contact_id']\n    }\n  },\n  {\n    name: 'list_contacts',\n    description: 'List contacts with optional filtering and statistics.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        status: { type: 'string', enum: ['new', 'contacted', 'qualified', 'customer', 'lost'] },\n        limit: { type: 'number', description: 'Max contacts to return' },\n        include_stats: { type: 'boolean', description: 'Include count statistics' },\n        sort_by: { type: 'string', enum: ['createdAt', 'lastActivityAt', 'firstName', 'company'] },\n        sort_order: { type: 'string', enum: ['asc', 'desc'] }\n      },\n      required: []\n    }\n  },\n  {\n    name: 'bulk_update_contacts',\n    description: 'Update multiple contacts at once with the same changes.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        contact_ids: { type: 'array', items: { type: 'string' }, description: 'List of contact IDs' },\n        status: { type: 'string', enum: ['new', 'contacted', 'qualified', 'customer', 'lost'] },\n        tags: { type: 'array', items: { type: 'string' }, description: 'Tags to add' },\n        owner: { type: 'string', description: 'New owner user ID' }\n      },\n      required: ['contact_ids']\n    }\n  },\n\n  // ==========================================\n  // DEAL/PIPELINE MANAGEMENT TOOLS\n  // ==========================================\n  {\n    name: 'create_deal',\n    description: 'Create a new deal/opportunity in a pipeline.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        name: { type: 'string', description: 'Deal name' },\n        value: { type: 'number', description: 'Deal value in dollars' },\n        contact_id: { type: 'string', description: 'Associated contact ID' },\n        pipeline_id: { type: 'string', description: 'Pipeline ID' },\n        stage: { type: 'string', description: 'Pipeline stage name' },\n        expected_close_date: { type: 'string', description: 'Expected close date (ISO format)' },\n        probability: { type: 'number', description: 'Win probability (0-100)' }\n      },\n      required: ['name']\n    }\n  },\n  {\n    name: 'update_deal',\n    description: 'Update deal information, move stages, or mark won/lost.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        deal_id: { type: 'string', description: 'Deal ID' },\n        name: { type: 'string', description: 'New deal name' },\n        value: { type: 'number', description: 'New value' },\n        stage: { type: 'string', description: 'New stage' },\n        status: { type: 'string', enum: ['open', 'won', 'lost'], description: 'Deal status' },\n        lost_reason: { type: 'string', description: 'Reason for loss' },\n        expected_close_date: { type: 'string', description: 'New close date' }\n      },\n      required: ['deal_id']\n    }\n  },\n  {\n    name: 'get_pipeline_stats',\n    description: 'Get pipeline analytics - total value, conversion rates, deal counts by stage.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        pipeline_id: { type: 'string', description: 'Specific pipeline (or all)' },\n        date_range: { type: 'string', enum: ['today', 'week', 'month', 'quarter', 'year'] }\n      },\n      required: []\n    }\n  },\n  {\n    name: 'create_pipeline',\n    description: 'Create a new sales pipeline with custom stages. If stages not provided, use industry-appropriate defaults. For real estate: Lead  Qualified  Property Shown  Offer Made  Under Contract  Closed Won. For general sales: Lead  Qualified  Demo  Proposal  Negotiation  Closed Won.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        name: { type: 'string', description: 'Pipeline name (e.g., \"Real Estate Leads\", \"Enterprise Sales\")' },\n        pipeline_type: {\n          type: 'string',\n          enum: ['real_estate', 'sales', 'consulting', 'saas', 'recruiting', 'custom'],\n          description: 'Type of pipeline - determines default stages if stages not provided'\n        },\n        stages: { \n          type: 'array', \n          items: { type: 'string' }, \n          description: 'Custom stage names. If not provided, uses defaults based on pipeline_type or name.' \n        },\n        description: { type: 'string', description: 'Pipeline description' }\n      },\n      required: ['name']\n    }\n  },\n  {\n    name: 'list_pipelines',\n    description: 'List all available pipelines.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        include_stats: { type: 'boolean', description: 'Include deal counts and values per pipeline' }\n      },\n      required: []\n    }\n  },\n  {\n    name: 'update_pipeline',\n    description: 'Update pipeline name, stages, or settings.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        pipeline_id: { type: 'string', description: 'Pipeline ID to update' },\n        name: { type: 'string', description: 'New pipeline name' },\n        stages: { type: 'array', items: { type: 'string' }, description: 'New stage list' },\n        add_stage: { type: 'string', description: 'Add a single stage' },\n        remove_stage: { type: 'string', description: 'Remove a stage' }\n      },\n      required: ['pipeline_id']\n    }\n  },\n  {\n    name: 'delete_pipeline',\n    description: 'Delete a pipeline. Requires confirmation - deals in pipeline will need to be moved first.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        pipeline_id: { type: 'string', description: 'Pipeline ID to delete' },\n        move_deals_to: { type: 'string', description: 'Pipeline ID to move existing deals to' }\n      },\n      required: ['pipeline_id']\n    }\n  },\n  {\n    name: 'get_pipeline',\n    description: 'Get details of a specific pipeline including all stages and settings.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        pipeline_id: { type: 'string', description: 'Pipeline ID' },\n        name: { type: 'string', description: 'Pipeline name to search for' }\n      },\n      required: []\n    }\n  },\n  {\n    name: 'list_deals',\n    description: 'List deals in a pipeline, optionally filtered by stage or status.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        pipeline_id: { type: 'string', description: 'Filter by pipeline' },\n        stage: { type: 'string', description: 'Filter by stage name' },\n        status: { type: 'string', enum: ['open', 'won', 'lost', 'all'] },\n        contact_id: { type: 'string', description: 'Deals for specific contact' },\n        limit: { type: 'number', description: 'Max results' }\n      },\n      required: []\n    }\n  },\n\n  // ==========================================\n  // TASK MANAGEMENT TOOLS\n  // ==========================================\n  {\n    name: 'create_task',\n    description: 'Create a task or reminder.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        title: { type: 'string', description: 'Task title' },\n        description: { type: 'string', description: 'Task description' },\n        due_date: { type: 'string', description: 'Due date (ISO format)' },\n        priority: { type: 'string', enum: ['low', 'medium', 'high', 'urgent'] },\n        contact_id: { type: 'string', description: 'Related contact' },\n        deal_id: { type: 'string', description: 'Related deal' },\n        assigned_to: { type: 'string', description: 'Assignee user ID' }\n      },\n      required: ['title']\n    }\n  },\n  {\n    name: 'list_tasks',\n    description: 'List tasks with filters.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        status: { type: 'string', enum: ['pending', 'in_progress', 'completed', 'overdue'] },\n        due_date: { type: 'string', enum: ['today', 'tomorrow', 'this_week', 'overdue'] },\n        contact_id: { type: 'string', description: 'Tasks for specific contact' },\n        assigned_to: { type: 'string', description: 'Tasks for specific user' }\n      },\n      required: []\n    }\n  },\n  {\n    name: 'complete_task',\n    description: 'Mark a task as completed.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        task_id: { type: 'string', description: 'Task ID to complete' }\n      },\n      required: ['task_id']\n    }\n  },\n\n  // ==========================================\n  // COMMUNICATION TOOLS\n  // ==========================================\n  {\n    name: 'send_email',\n    description: 'Send or draft an email to a contact.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        contact_id: { type: 'string', description: 'Recipient contact ID' },\n        subject: { type: 'string', description: 'Email subject' },\n        body: { type: 'string', description: 'Email body (supports HTML)' },\n        template_id: { type: 'string', description: 'Use email template' },\n        send_now: { type: 'boolean', description: 'Send immediately or save as draft' }\n      },\n      required: ['contact_id']\n    }\n  },\n  {\n    name: 'send_sms',\n    description: 'Send SMS to a contact.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        contact_id: { type: 'string', description: 'Recipient contact ID' },\n        message: { type: 'string', description: 'SMS message (max 160 chars)' }\n      },\n      required: ['contact_id', 'message']\n    }\n  },\n  {\n    name: 'log_activity',\n    description: 'Log a call, meeting, or note for a contact.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        contact_id: { type: 'string', description: 'Contact ID' },\n        type: { type: 'string', enum: ['call', 'meeting', 'email', 'note', 'sms'] },\n        subject: { type: 'string', description: 'Activity subject' },\n        notes: { type: 'string', description: 'Activity notes/details' },\n        outcome: { type: 'string', description: 'Call/meeting outcome' },\n        duration_minutes: { type: 'number', description: 'Duration in minutes' }\n      },\n      required: ['contact_id', 'type']\n    }\n  },\n\n  // ==========================================\n  // CALENDAR & SCHEDULING TOOLS\n  // ==========================================\n  {\n    name: 'schedule_appointment',\n    description: 'Schedule an appointment or meeting.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        title: { type: 'string', description: 'Appointment title' },\n        contact_id: { type: 'string', description: 'Contact to meet with' },\n        start_time: { type: 'string', description: 'Start datetime (ISO)' },\n        end_time: { type: 'string', description: 'End datetime (ISO)' },\n        location: { type: 'string', description: 'Meeting location or video link' },\n        description: { type: 'string', description: 'Meeting description' },\n        send_invite: { type: 'boolean', description: 'Send calendar invite to contact' }\n      },\n      required: ['title', 'start_time']\n    }\n  },\n  {\n    name: 'get_availability',\n    description: 'Check calendar availability for scheduling.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        date: { type: 'string', description: 'Date to check (YYYY-MM-DD)' },\n        duration_minutes: { type: 'number', description: 'Meeting duration needed' }\n      },\n      required: ['date']\n    }\n  },\n\n  // ==========================================\n  // MARKETING & CAMPAIGNS TOOLS\n  // ==========================================\n  {\n    name: 'create_email_campaign',\n    description: 'Create an email marketing campaign.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        name: { type: 'string', description: 'Campaign name' },\n        subject: { type: 'string', description: 'Email subject line' },\n        content: { type: 'string', description: 'Email content/body' },\n        segment_id: { type: 'string', description: 'Target segment' },\n        schedule_time: { type: 'string', description: 'Schedule send time (ISO)' }\n      },\n      required: ['name', 'subject']\n    }\n  },\n  {\n    name: 'get_campaign_stats',\n    description: 'Get email campaign performance statistics.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        campaign_id: { type: 'string', description: 'Campaign ID' }\n      },\n      required: ['campaign_id']\n    }\n  },\n\n  // ==========================================\n  // ANALYTICS & REPORTING TOOLS\n  // ==========================================\n  {\n    name: 'get_dashboard_stats',\n    description: 'Get overview dashboard statistics.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        date_range: { type: 'string', enum: ['today', 'week', 'month', 'quarter', 'year'] },\n        metrics: { \n          type: 'array', \n          items: { type: 'string' }, \n          description: 'Specific metrics: contacts, deals, revenue, tasks, emails, calls' \n        }\n      },\n      required: []\n    }\n  },\n  {\n    name: 'generate_report',\n    description: 'Generate a specific report.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        report_type: { \n          type: 'string', \n          enum: ['contacts', 'deals', 'pipeline', 'activities', 'campaigns', 'revenue'],\n          description: 'Type of report'\n        },\n        date_range: { type: 'string', enum: ['today', 'week', 'month', 'quarter', 'year'] },\n        format: { type: 'string', enum: ['summary', 'detailed', 'export'] }\n      },\n      required: ['report_type']\n    }\n  },\n\n  // ==========================================\n  // WORKFLOW & AUTOMATION TOOLS\n  // ==========================================\n  {\n    name: 'trigger_workflow',\n    description: 'Manually trigger an automation workflow for a contact.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        workflow_id: { type: 'string', description: 'Workflow ID to trigger' },\n        contact_id: { type: 'string', description: 'Contact to enroll' }\n      },\n      required: ['workflow_id', 'contact_id']\n    }\n  },\n  {\n    name: 'list_workflows',\n    description: 'List available automation workflows.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        status: { type: 'string', enum: ['active', 'paused', 'all'] }\n      },\n      required: []\n    }\n  },\n\n  // ==========================================\n  // MARKETING STRATEGY TOOLS\n  // ==========================================\n  {\n    name: 'get_marketing_playbook',\n    description: 'Get industry-specific marketing playbook with strategies, channels, KPIs, and tactics. Use when user asks about marketing strategies for their industry or niche.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        industry: { \n          type: 'string', \n          description: 'Industry name (e.g., real_estate, ecommerce, saas, healthcare, professional_services, restaurant, fitness, beauty, automotive)' \n        }\n      },\n      required: ['industry']\n    }\n  },\n  {\n    name: 'get_marketing_recommendations',\n    description: 'Get personalized marketing recommendations based on business type, size, goals, and budget. Use when user needs marketing advice.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        industry: { type: 'string', description: 'Business industry' },\n        business_size: { type: 'string', enum: ['micro', 'small', 'medium', 'enterprise'], description: 'Business size' },\n        goals: { \n          type: 'array', \n          items: { type: 'string' }, \n          description: 'Marketing goals (e.g., lead_generation, brand_awareness, sales, retention)' \n        },\n        budget: { type: 'string', enum: ['low', 'medium', 'high'], description: 'Marketing budget level' }\n      },\n      required: []\n    }\n  },\n  {\n    name: 'get_funnel_strategy',\n    description: 'Get marketing funnel strategy with content types, metrics, and channels for each stage (TOFU, MOFU, BOFU, Retention).',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        stage: { \n          type: 'string', \n          enum: ['tofu', 'mofu', 'bofu', 'retention', 'all'],\n          description: 'Funnel stage to focus on, or \"all\" for complete funnel' \n        }\n      },\n      required: []\n    }\n  },\n  {\n    name: 'get_channel_guide',\n    description: 'Get detailed guide for a specific marketing channel (SEO, PPC, Email, Social Media, Content Marketing).',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        channel: { \n          type: 'string', \n          enum: ['seo', 'ppc', 'email', 'social', 'content'],\n          description: 'Marketing channel' \n        }\n      },\n      required: ['channel']\n    }\n  },\n  {\n    name: 'get_audience_insights',\n    description: 'Get audience segmentation insights including generational marketing, B2B segments, and targeting strategies.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        segment_type: { \n          type: 'string', \n          enum: ['generational', 'b2b', 'psychographic', 'behavioral'],\n          description: 'Type of audience segmentation' \n        },\n        specific_segment: { \n          type: 'string', \n          description: 'Specific segment within type (e.g., \"genZ\", \"millennials\", \"enterprise\", \"small_business\")' \n        }\n      },\n      required: []\n    }\n  },\n  {\n    name: 'get_campaign_template',\n    description: 'Get campaign templates and frameworks for different campaign types.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        campaign_type: { \n          type: 'string', \n          enum: ['lead_generation', 'product_launch', 'email_nurture', 'retargeting', 'awareness'],\n          description: 'Type of campaign' \n        }\n      },\n      required: ['campaign_type']\n    }\n  },\n  {\n    name: 'get_marketing_metrics',\n    description: 'Get marketing metrics and KPIs with formulas and benchmarks.',\n    input_schema: {\n      type: 'object' as const,\n      properties: {\n        category: { \n          type: 'string', \n          enum: ['acquisition', 'engagement', 'retention', 'revenue', 'all'],\n          description: 'Metric category' \n        }\n      },\n      required: []\n    }\n  }\n]\n\n// User info interface\ninterface UserInfo {\n  id: string\n  name: string\n  email?: string\n  firstName: string\n}\n\n// ============================================\n// Claude Assistant Service Class\n// ============================================\n\nexport class ClaudeAssistantService {\n  private subAccountId: string\n  private conversationHistory: ConversationMessage[] = []\n  private activeContact: any = null\n  private userInfo: UserInfo | null = null\n\n  constructor(subAccountId: string, userInfo?: UserInfo) {\n    this.subAccountId = subAccountId\n    this.userInfo = userInfo || null\n  }\n  \n  // Set user info after construction\n  setUserInfo(userInfo: UserInfo) {\n    this.userInfo = userInfo\n  }\n\n  // ============================================\n  // Main Chat Method\n  // ============================================\n\n  async chat(\n    message: string,\n    conversationHistory: ConversationMessage[] = [],\n    activeContact: any = null\n  ): Promise<AssistantResponse> {\n    this.conversationHistory = conversationHistory\n    this.activeContact = activeContact\n\n    const systemPrompt = this.buildSystemPrompt()\n\n    const messages: Anthropic.MessageParam[] = [\n      ...this.conversationHistory.map(msg => ({\n        role: msg.role as 'user' | 'assistant',\n        content: msg.content\n      })),\n      { role: 'user' as const, content: message }\n    ]\n\n    try {\n      const response = await anthropic.messages.create({\n        model: 'claude-sonnet-4-20250514',\n        max_tokens: 1024,\n        system: systemPrompt,\n        tools: CRM_TOOLS,\n        messages: messages\n      })\n\n      return await this.processResponse(response)\n    } catch (error: any) {\n      console.error('Claude API Error:', error)\n      return {\n        success: false,\n        message: `I encountered an error: ${error.message}. Please try again.`,\n      }\n    }\n  }\n\n  // ============================================\n  // Process Response & Tool Calls\n  // ============================================\n\n  private async processResponse(response: Anthropic.Message): Promise<AssistantResponse> {\n    const toolsUsed: string[] = []\n    let preliminaryText = '' // Text before tool calls\n    let finalMessage = ''\n    let resultData: any = null\n\n    for (const block of response.content) {\n      if (block.type === 'text') {\n        preliminaryText += block.text\n      } else if (block.type === 'tool_use') {\n        toolsUsed.push(block.name)\n        const toolResult = await this.executeTool(block.name, block.input as Record<string, any>)\n        \n        if (toolResult.success && toolResult.data) {\n          resultData = toolResult.data\n          \n          // Track active contact\n          if (toolResult.data.contact) {\n            this.activeContact = toolResult.data.contact\n          } else if (toolResult.data.contacts && toolResult.data.contacts.length > 0) {\n            this.activeContact = toolResult.data.contacts[0]\n          }\n        }\n\n        const toolResultMessage = await this.continueWithToolResult(\n          response,\n          block.id,\n          toolResult\n        )\n        \n        if (toolResultMessage) {\n          // AI provided a natural response after seeing tool results\n          finalMessage = toolResultMessage\n        } else if (toolResult.success) {\n          // If continuation failed but tool succeeded, format result directly\n          // Preserve any preliminary text from the AI\n          const formattedResult = this.formatToolResultMessage(block.name, toolResult)\n          finalMessage = preliminaryText \n            ? `${preliminaryText}\\n\\n${formattedResult}` \n            : formattedResult\n        } else {\n          // Tool failed - include error message\n          finalMessage = preliminaryText \n            ? `${preliminaryText}\\n\\n ${toolResult.error || 'Action failed'}` \n            : ` ${toolResult.error || 'Action failed'}`\n        }\n      }\n    }\n\n    // If no tool was used, just return the text response\n    if (toolsUsed.length === 0) {\n      finalMessage = preliminaryText\n    }\n\n    return {\n      success: true,\n      message: finalMessage || 'I processed your request but have no specific response.',\n      data: resultData,\n      toolsUsed\n    }\n  }\n\n  // ============================================\n  // Continue After Tool Use\n  // ============================================\n\n  private async continueWithToolResult(\n    originalResponse: Anthropic.Message,\n    toolUseId: string,\n    toolResult: ToolResult\n  ): Promise<string> {\n    try {\n      const lastUserMessage = this.conversationHistory.length > 0 \n        ? this.conversationHistory[this.conversationHistory.length - 1]?.content \n        : ''\n\n      const messages: Anthropic.MessageParam[] = [\n        ...this.conversationHistory.map(msg => ({\n          role: msg.role as 'user' | 'assistant',\n          content: msg.content\n        })),\n        { role: 'user' as const, content: lastUserMessage },\n        { role: 'assistant' as const, content: originalResponse.content },\n        {\n          role: 'user' as const,\n          content: [{\n            type: 'tool_result' as const,\n            tool_use_id: toolUseId,\n            content: JSON.stringify(toolResult)\n          }]\n        }\n      ]\n\n      const response = await anthropic.messages.create({\n        model: 'claude-sonnet-4-20250514',\n        max_tokens: 1024,\n        system: this.buildSystemPrompt(),\n        tools: CRM_TOOLS,\n        messages: messages\n      })\n\n      for (const block of response.content) {\n        if (block.type === 'text') {\n          return block.text\n        }\n      }\n      \n      // Return empty string to trigger fallback formatting\n      return ''\n    } catch (error) {\n      console.error('Error continuing with tool result:', error)\n      // Return empty string to trigger fallback formatting instead of 'Done!'\n      return ''\n    }\n  }\n\n  // ============================================\n  // Format Tool Results Directly (Fallback)\n  // ============================================\n\n  private formatToolResultMessage(toolName: string, result: ToolResult): string {\n    if (!result.success) {\n      return ` Error: ${result.error || 'Action failed'}`\n    }\n\n    const data = result.data\n\n    switch (toolName) {\n      case 'create_pipeline':\n        if (data?.pipeline) {\n          const pipeline = data.pipeline\n          const stages = pipeline.stages || []\n          let response = ` Created **${pipeline.name}** pipeline with ${stages.length} stages:\\n\\n`\n          \n          stages.forEach((stage: any, idx: number) => {\n            response += `${idx + 1}. **${stage.name}** (${stage.probability}% probability)\\n`\n          })\n          \n          if (data.stage_flow) {\n            response += `\\n Stage Flow: ${data.stage_flow}\\n`\n          }\n          \n          response += `\\nYou can now add deals to this pipeline!`\n          return response\n        }\n        return ' Pipeline created successfully'\n\n      case 'create_contact':\n        if (data?.contact) {\n          const c = data.contact\n          return ` Created contact **${c.firstName} ${c.lastName || ''}**\\n` +\n                 ` Email: ${c.email || 'Not set'}\\n` +\n                 ` Phone: ${c.phone || 'Not set'}\\n` +\n                 ` Company: ${c.company || 'Not set'}\\n` +\n                 ` Status: ${c.status || 'New'}`\n        }\n        return ' Contact created successfully'\n\n      case 'update_contact':\n        if (data?.changes && data.changes.length > 0) {\n          return ` Updated contact:\\n` + data.changes.map((c: string) => ` ${c}`).join('\\n')\n        }\n        return ' Contact updated successfully'\n\n      case 'search_contacts':\n        if (data?.contacts && data.contacts.length > 0) {\n          let response = `Found ${data.count} contact${data.count > 1 ? 's' : ''}:\\n\\n`\n          data.contacts.slice(0, 5).forEach((c: any) => {\n            response += ` **${c.firstName} ${c.lastName || ''}** - ${c.email || 'No email'} (${c.status || 'new'})\\n`\n          })\n          if (data.count > 5) response += `...and ${data.count - 5} more`\n          return response\n        }\n        return `No contacts found matching your search.`\n\n      case 'list_contacts':\n        if (data?.contacts && data.contacts.length > 0) {\n          let response = ` ${data.count} contact${data.count > 1 ? 's' : ''}:\\n\\n`\n          data.contacts.slice(0, 10).forEach((c: any) => {\n            response += ` **${c.firstName} ${c.lastName || ''}** - ${c.email || 'No email'} (${c.status || 'new'})\\n`\n          })\n          return response\n        }\n        return 'No contacts found.'\n\n      case 'list_pipelines':\n        if (data?.pipelines && data.pipelines.length > 0) {\n          let response = ` ${data.count} pipeline${data.count > 1 ? 's' : ''}:\\n\\n`\n          data.pipelines.forEach((p: any) => {\n            response += ` **${p.name}** - ${p.stage_count} stages, ${p.deal_count} deals ($${p.total_value?.toLocaleString() || 0})\\n`\n            if (p.stages && p.stages.length > 0) {\n              response += `  Stages: ${p.stages.join('  ')}\\n`\n            }\n          })\n          return response\n        }\n        return 'No pipelines found. Would you like me to create one?'\n\n      case 'delete_contact':\n        return ' Contact deleted successfully'\n\n      case 'delete_pipeline':\n        return ` Pipeline deleted${data?.deals_moved ? ` (${data.deals_moved} deals moved)` : ''}`\n\n      case 'create_deal':\n        if (data?.deal) {\n          return ` Created deal **${data.deal.name}**\\n` +\n                 ` Value: $${data.deal.value?.toLocaleString() || 0}\\n` +\n                 ` Stage: ${data.deal.stage || 'New'}`\n        }\n        return ' Deal created successfully'\n\n      case 'create_task':\n        if (data?.task) {\n          return ` Created task **${data.task.title}**\\n` +\n                 ` Due: ${data.task.due_date || 'No due date'}\\n` +\n                 ` Priority: ${data.task.priority || 'medium'}`\n        }\n        return ' Task created successfully'\n\n      case 'send_email':\n        return ` ${data?.action === 'email_sent' ? 'Email sent' : 'Email draft created'} for ${data?.contact?.firstName || 'contact'}`\n\n      case 'send_sms':\n        return ` SMS queued for ${data?.contact?.phone || 'contact'}`\n\n      case 'schedule_appointment':\n        return ` Appointment \"${data?.appointment?.title || 'Meeting'}\" scheduled`\n\n      case 'get_dashboard_stats':\n        if (data) {\n          return ` Dashboard Stats:\\n` +\n                 ` Total Contacts: ${data.total_contacts || 0}\\n` +\n                 ` Deals in Pipeline: ${data.deals_in_pipeline || 0}\\n` +\n                 ` Pipeline Value: $${(data.pipeline_value || 0).toLocaleString()}\\n` +\n                 ` Tasks Due Today: ${data.tasks_due_today || 0}`\n        }\n        return ' Dashboard stats retrieved'\n\n      case 'get_pipeline_stats':\n        if (data) {\n          return ` Pipeline Stats:\\n` +\n                 ` Total Pipelines: ${data.total_pipelines || 0}\\n` +\n                 ` Total Deals: ${data.total_deals || 0}\\n` +\n                 ` Total Value: $${(data.total_value || 0).toLocaleString()}\\n` +\n                 ` Won/Lost: ${data.won_deals || 0}/${data.lost_deals || 0}`\n        }\n        return ' Pipeline stats retrieved'\n\n      // Marketing Strategy Tools\n      case 'get_marketing_playbook':\n        if (data) {\n          let response = ` **${data.industry} Marketing Playbook**\\n\\n`\n          response += `**Overview:** ${data.overview}\\n\\n`\n          \n          if (data.target_audiences?.length) {\n            response += `**Target Audiences:**\\n${data.target_audiences.map((a: string) => ` ${a}`).join('\\n')}\\n\\n`\n          }\n          \n          if (data.channel_priorities?.length) {\n            response += `**Top Channels:**\\n`\n            data.channel_priorities.forEach((c: any) => {\n              response += `${c.priority}. **${c.channel}** - ${c.description}\\n`\n            })\n            response += '\\n'\n          }\n          \n          if (data.kpis?.length) {\n            response += `**Key KPIs:** ${data.kpis.slice(0, 5).join(', ')}\\n\\n`\n          }\n          \n          if (data.common_mistakes?.length) {\n            response += `** Common Mistakes to Avoid:**\\n${data.common_mistakes.map((m: string) => ` ${m}`).join('\\n')}`\n          }\n          \n          return response\n        }\n        return ' Marketing playbook retrieved'\n\n      case 'get_marketing_recommendations':\n        if (data) {\n          let response = ` **Marketing Recommendations**\\n\\n`\n          \n          if (data.recommended_channels?.length) {\n            response += `**Recommended Channels:**\\n${data.recommended_channels.map((c: string) => ` ${c}`).join('\\n')}\\n\\n`\n          }\n          \n          if (data.quick_wins?.length) {\n            response += `** Quick Wins:**\\n${data.quick_wins.map((w: string) => ` ${w}`).join('\\n')}\\n\\n`\n          }\n          \n          if (data.tactics?.length) {\n            response += `**Tactics to Consider:**\\n${data.tactics.slice(0, 5).map((t: string) => ` ${t}`).join('\\n')}\\n\\n`\n          }\n          \n          if (data.kpis_to_track?.length) {\n            response += `** KPIs to Track:** ${data.kpis_to_track.slice(0, 5).join(', ')}`\n          }\n          \n          return response\n        }\n        return ' Marketing recommendations generated'\n\n      case 'get_funnel_strategy':\n        if (data) {\n          if (data.funnel_stages) {\n            let response = ` **Marketing Funnel Strategy**\\n\\n`\n            data.funnel_stages.forEach((stage: any) => {\n              response += `**${stage.name}**\\n`\n              response += `Goal: ${stage.goal}\\n`\n              response += `Content: ${stage.contentTypes?.slice(0, 3).join(', ')}\\n`\n              response += `Metrics: ${stage.metrics?.slice(0, 3).join(', ')}\\n\\n`\n            })\n            return response\n          } else if (data.stage) {\n            return ` **${data.name}**\\n\\n` +\n                   `**Goal:** ${data.goal}\\n\\n` +\n                   `**Content Types:**\\n${data.contentTypes?.map((c: string) => ` ${c}`).join('\\n')}\\n\\n` +\n                   `**Metrics:** ${data.metrics?.join(', ')}\\n\\n` +\n                   `**Channels:** ${data.channels?.join(', ')}`\n          }\n        }\n        return ' Funnel strategy retrieved'\n\n      case 'get_channel_guide':\n        if (data) {\n          return ` **${data.name}**\\n\\n` +\n                 `${data.description}\\n\\n` +\n                 `Use the full tool result for detailed components and best practices.`\n        }\n        return ' Channel guide retrieved'\n\n      case 'get_audience_insights':\n        if (data?.segment_type) {\n          if (data.segments) {\n            let response = ` **${data.segment_type.charAt(0).toUpperCase() + data.segment_type.slice(1)} Segments**\\n\\n`\n            Object.entries(data.segments).forEach(([key, seg]: [string, any]) => {\n              response += `**${seg.name || key}:** ${seg.approach || seg.characteristics?.join(', ')}\\n`\n            })\n            return response\n          }\n        }\n        return ' Audience insights retrieved'\n\n      case 'get_campaign_template':\n        if (data) {\n          let response = ` **${data.name}**\\n\\n`\n          if (data.steps) {\n            response += `**Steps:**\\n${data.steps.map((s: string, i: number) => `${i + 1}. ${s}`).join('\\n')}`\n          } else if (data.phases) {\n            Object.entries(data.phases).forEach(([phase, items]: [string, any]) => {\n              response += `**${phase.charAt(0).toUpperCase() + phase.slice(1)}:**\\n${items.map((i: string) => ` ${i}`).join('\\n')}\\n\\n`\n            })\n          } else if (data.emails) {\n            response += `**Email Sequence:**\\n`\n            data.emails.forEach((e: any) => {\n              response += `Day ${e.day}: ${e.subject}\\n`\n            })\n          }\n          return response\n        }\n        return ' Campaign template retrieved'\n\n      case 'get_marketing_metrics':\n        if (data) {\n          let response = ` **Marketing Metrics**\\n\\n`\n          if (data.category && data.metrics) {\n            response += `**${data.category.charAt(0).toUpperCase() + data.category.slice(1)} Metrics:**\\n`\n            data.metrics.forEach((m: any) => {\n              response += ` **${m.name}**: ${m.description}\\n`\n            })\n          } else if (data.categories) {\n            Object.entries(data.categories).forEach(([cat, metrics]: [string, any]) => {\n              response += `**${cat.charAt(0).toUpperCase() + cat.slice(1)}:**\\n`\n              metrics.slice(0, 2).forEach((m: any) => {\n                response += ` ${m.name}\\n`\n              })\n              response += '\\n'\n            })\n          }\n          return response\n        }\n        return ' Marketing metrics retrieved'\n\n      default:\n        // Generic success message with any message from data\n        return data?.message || ` ${toolName.replace(/_/g, ' ')} completed successfully`\n    }\n  }\n\n  // ============================================\n  // Tool Execution Router\n  // ============================================\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  private async executeTool(toolName: string, input: any): Promise<ToolResult> {\n    try {\n      switch (toolName) {\n        // Contact Management\n        case 'search_contacts':\n          return await this.toolSearchContacts(input)\n        case 'get_contact':\n          return await this.toolGetContact(input)\n        case 'create_contact':\n          return await this.toolCreateContact(input)\n        case 'update_contact':\n          return await this.toolUpdateContact(input)\n        case 'delete_contact':\n          return await this.toolDeleteContact(input)\n        case 'list_contacts':\n          return await this.toolListContacts(input)\n        case 'bulk_update_contacts':\n          return await this.toolBulkUpdateContacts(input)\n        \n        // Deal Management\n        case 'create_deal':\n          return await this.toolCreateDeal(input)\n        case 'update_deal':\n          return await this.toolUpdateDeal(input)\n        case 'get_pipeline_stats':\n          return await this.toolGetPipelineStats(input)\n        case 'create_pipeline':\n          return await this.toolCreatePipeline(input)\n        case 'list_pipelines':\n          return await this.toolListPipelines(input)\n        case 'update_pipeline':\n          return await this.toolUpdatePipeline(input)\n        case 'delete_pipeline':\n          return await this.toolDeletePipeline(input)\n        case 'get_pipeline':\n          return await this.toolGetPipeline(input)\n        case 'list_deals':\n          return await this.toolListDeals(input)\n        \n        // Task Management\n        case 'create_task':\n          return await this.toolCreateTask(input)\n        case 'list_tasks':\n          return await this.toolListTasks(input)\n        case 'complete_task':\n          return await this.toolCompleteTask(input)\n        \n        // Communication\n        case 'send_email':\n          return await this.toolSendEmail(input)\n        case 'send_sms':\n          return await this.toolSendSMS(input)\n        case 'log_activity':\n          return await this.toolLogActivity(input)\n        \n        // Calendar\n        case 'schedule_appointment':\n          return await this.toolScheduleAppointment(input)\n        case 'get_availability':\n          return await this.toolGetAvailability(input)\n        \n        // Marketing\n        case 'create_email_campaign':\n          return await this.toolCreateEmailCampaign(input)\n        case 'get_campaign_stats':\n          return await this.toolGetCampaignStats(input)\n        \n        // Analytics\n        case 'get_dashboard_stats':\n          return await this.toolGetDashboardStats(input)\n        case 'generate_report':\n          return await this.toolGenerateReport(input)\n        \n        // Workflows\n        case 'trigger_workflow':\n          return await this.toolTriggerWorkflow(input)\n        case 'list_workflows':\n          return await this.toolListWorkflows(input)\n        \n        // Marketing Strategy Tools\n        case 'get_marketing_playbook':\n          return await this.toolGetMarketingPlaybook(input)\n        case 'get_marketing_recommendations':\n          return await this.toolGetMarketingRecommendations(input)\n        case 'get_funnel_strategy':\n          return await this.toolGetFunnelStrategy(input)\n        case 'get_channel_guide':\n          return await this.toolGetChannelGuide(input)\n        case 'get_audience_insights':\n          return await this.toolGetAudienceInsights(input)\n        case 'get_campaign_template':\n          return await this.toolGetCampaignTemplate(input)\n        case 'get_marketing_metrics':\n          return await this.toolGetMarketingMetrics(input)\n        \n        default:\n          return { success: false, error: `Unknown tool: ${toolName}` }\n      }\n    } catch (error: any) {\n      console.error(`Tool ${toolName} error:`, error)\n      return { success: false, error: error.message }\n    }\n  }\n\n  // ============================================\n  // CONTACT MANAGEMENT IMPLEMENTATIONS\n  // ============================================\n\n  private async toolSearchContacts(input: { query: string; status?: string; tags?: string[]; limit?: number }): Promise<ToolResult> {\n    const { query, status, limit = 10 } = input\n    \n    let dbQuery = supabaseAdmin\n      .from('Contact')\n      .select('*')\n      .eq('subAccountId', this.subAccountId)\n      .limit(limit)\n\n    // Smart name parsing for search\n    const parts = query.trim().split(/\\s+/)\n    if (parts.length >= 2) {\n      dbQuery = dbQuery.or(\n        `and(firstName.ilike.%${parts[0]}%,lastName.ilike.%${parts.slice(1).join(' ')}%),email.ilike.%${query}%,company.ilike.%${query}%`\n      )\n    } else {\n      dbQuery = dbQuery.or(\n        `firstName.ilike.%${query}%,lastName.ilike.%${query}%,email.ilike.%${query}%,phone.ilike.%${query}%,company.ilike.%${query}%`\n      )\n    }\n\n    if (status) {\n      dbQuery = dbQuery.eq('status', status)\n    }\n\n    const { data: contacts, error } = await dbQuery.order('createdAt', { ascending: false })\n\n    if (error) throw error\n\n    return {\n      success: true,\n      data: { contacts: contacts || [], count: contacts?.length || 0 }\n    }\n  }\n\n  private async toolGetContact(input: { contact_id?: string; email?: string }): Promise<ToolResult> {\n    let query = supabaseAdmin\n      .from('Contact')\n      .select('*')\n      .eq('subAccountId', this.subAccountId)\n\n    if (input.contact_id) {\n      query = query.eq('id', input.contact_id)\n    } else if (input.email) {\n      query = query.ilike('email', input.email)\n    } else if (this.activeContact) {\n      query = query.eq('id', this.activeContact.id)\n    } else {\n      return { success: false, error: 'No contact specified' }\n    }\n\n    const { data: contact, error } = await query.single()\n    if (error) throw error\n\n    return { success: true, data: { contact } }\n  }\n\n  private async toolCreateContact(input: {\n    firstName: string; lastName?: string; email?: string; phone?: string;\n    company?: string; status?: string; tags?: string[]; source?: string; notes?: string;\n  }): Promise<ToolResult> {\n    const contactData = {\n      subAccountId: this.subAccountId,\n      firstName: input.firstName,\n      lastName: input.lastName || '',\n      email: input.email || null,\n      phone: input.phone || null,\n      company: input.company || null,\n      status: input.status || 'new',\n      tags: input.tags || [],\n      source: input.source || 'manual',\n      score: 50\n    }\n\n    const { data: contact, error } = await supabaseAdmin\n      .from('Contact')\n      .insert(contactData)\n      .select()\n      .single()\n\n    if (error) throw error\n\n    return { success: true, data: { contact } }\n  }\n\n  private async toolUpdateContact(input: {\n    contact_id?: string; email?: string; phone?: string; firstName?: string;\n    lastName?: string; company?: string; status?: string; tags?: string[];\n    removeTags?: string[]; notes?: string;\n  }): Promise<ToolResult> {\n    const contactId = input.contact_id || this.activeContact?.id\n    \n    if (!contactId) {\n      return { success: false, error: 'No contact specified for update' }\n    }\n\n    const updateData: any = { lastActivityAt: new Date().toISOString() }\n    const changes: string[] = []\n\n    if (input.email) { updateData.email = input.email; changes.push(`email  ${input.email}`) }\n    if (input.phone) { updateData.phone = input.phone; changes.push(`phone  ${input.phone}`) }\n    if (input.firstName) { updateData.firstName = input.firstName; changes.push(`first name  ${input.firstName}`) }\n    if (input.lastName) { updateData.lastName = input.lastName; changes.push(`last name  ${input.lastName}`) }\n    if (input.company) { updateData.company = input.company; changes.push(`company  ${input.company}`) }\n    if (input.status) { updateData.status = input.status; changes.push(`status  ${input.status}`) }\n    \n    // Handle tags\n    if (input.tags && input.tags.length > 0) {\n      const { data: existing } = await supabaseAdmin\n        .from('Contact')\n        .select('tags')\n        .eq('id', contactId)\n        .single()\n      \n      const existingTags = existing?.tags || []\n      updateData.tags = [...new Set([...existingTags, ...input.tags])]\n      changes.push(`added tags: ${input.tags.join(', ')}`)\n    }\n\n    if (changes.length === 0) {\n      return { success: false, error: 'No changes specified' }\n    }\n\n    const { data: contact, error } = await supabaseAdmin\n      .from('Contact')\n      .update(updateData)\n      .eq('id', contactId)\n      .eq('subAccountId', this.subAccountId)\n      .select()\n      .single()\n\n    if (error) throw error\n\n    return { success: true, data: { contact, changes } }\n  }\n\n  private async toolDeleteContact(input: { contact_id: string }): Promise<ToolResult> {\n    const { error } = await supabaseAdmin\n      .from('Contact')\n      .delete()\n      .eq('id', input.contact_id)\n      .eq('subAccountId', this.subAccountId)\n\n    if (error) throw error\n\n    return { success: true, data: { deleted: true, contact_id: input.contact_id } }\n  }\n\n  private async toolListContacts(input: { status?: string; limit?: number; include_stats?: boolean; sort_by?: string; sort_order?: string }): Promise<ToolResult> {\n    const { status, limit = 20, include_stats = false, sort_by = 'createdAt', sort_order = 'desc' } = input\n\n    let query = supabaseAdmin\n      .from('Contact')\n      .select('*')\n      .eq('subAccountId', this.subAccountId)\n      .limit(limit)\n\n    if (status) query = query.eq('status', status)\n    query = query.order(sort_by, { ascending: sort_order === 'asc' })\n\n    const { data: contacts, error } = await query\n    if (error) throw error\n\n    let stats = null\n    if (include_stats) {\n      const { data: allContacts } = await supabaseAdmin\n        .from('Contact')\n        .select('status')\n        .eq('subAccountId', this.subAccountId)\n\n      if (allContacts) {\n        stats = {\n          total: allContacts.length,\n          byStatus: allContacts.reduce((acc: any, c) => {\n            acc[c.status] = (acc[c.status] || 0) + 1\n            return acc\n          }, {})\n        }\n      }\n    }\n\n    return { success: true, data: { contacts: contacts || [], count: contacts?.length || 0, stats } }\n  }\n\n  private async toolBulkUpdateContacts(input: { contact_ids: string[]; status?: string; tags?: string[]; owner?: string }): Promise<ToolResult> {\n    const updateData: any = { lastActivityAt: new Date().toISOString() }\n    if (input.status) updateData.status = input.status\n    if (input.tags) updateData.tags = input.tags\n\n    const { data, error } = await supabaseAdmin\n      .from('Contact')\n      .update(updateData)\n      .in('id', input.contact_ids)\n      .eq('subAccountId', this.subAccountId)\n      .select()\n\n    if (error) throw error\n\n    return { success: true, data: { updated: data?.length || 0, contacts: data } }\n  }\n\n  // ============================================\n  // DEAL MANAGEMENT IMPLEMENTATIONS\n  // ============================================\n\n  private async toolCreateDeal(input: { name: string; value?: number; contact_id?: string; pipeline_id?: string; stage?: string; expected_close_date?: string; probability?: number }): Promise<ToolResult> {\n    // For now, return a placeholder - this would integrate with actual deal system\n    return {\n      success: true,\n      data: {\n        deal: {\n          name: input.name,\n          value: input.value || 0,\n          stage: input.stage || 'New',\n          contact_id: input.contact_id\n        },\n        message: `Deal \"${input.name}\" created successfully`\n      }\n    }\n  }\n\n  private async toolUpdateDeal(input: { deal_id: string; name?: string; value?: number; stage?: string; status?: string; lost_reason?: string; expected_close_date?: string }): Promise<ToolResult> {\n    return {\n      success: true,\n      data: { deal_id: input.deal_id, changes: input, message: 'Deal updated successfully' }\n    }\n  }\n\n  private async toolGetPipelineStats(input: { pipeline_id?: string; date_range?: string }): Promise<ToolResult> {\n    // Get actual pipeline stats from database\n    try {\n      const { data: pipelines } = await supabaseAdmin\n        .from('Pipeline')\n        .select('*, stages:PipelineStage(*), deals:Deal(*)')\n        .eq('subAccountId', this.subAccountId)\n\n      if (!pipelines || pipelines.length === 0) {\n        return {\n          success: true,\n          data: {\n            total_pipelines: 0,\n            total_deals: 0,\n            total_value: 0,\n            message: 'No pipelines found. Create one to get started!'\n          }\n        }\n      }\n\n      let totalDeals = 0\n      let totalValue = 0\n      let wonDeals = 0\n      let lostDeals = 0\n\n      pipelines.forEach((p: any) => {\n        if (p.deals) {\n          totalDeals += p.deals.length\n          p.deals.forEach((d: any) => {\n            totalValue += parseFloat(d.value) || 0\n            if (d.status === 'won') wonDeals++\n            if (d.status === 'lost') lostDeals++\n          })\n        }\n      })\n\n      return {\n        success: true,\n        data: {\n          total_pipelines: pipelines.length,\n          total_deals: totalDeals,\n          total_value: totalValue,\n          won_deals: wonDeals,\n          lost_deals: lostDeals,\n          open_deals: totalDeals - wonDeals - lostDeals,\n          conversion_rate: totalDeals > 0 ? (wonDeals / totalDeals).toFixed(2) : 0\n        }\n      }\n    } catch (error) {\n      // Fallback if Pipeline table doesn't exist yet\n      return {\n        success: true,\n        data: {\n          total_deals: 0,\n          total_value: 0,\n          message: 'Pipeline system ready - create your first pipeline!'\n        }\n      }\n    }\n  }\n\n  private async toolCreatePipeline(input: { name: string; pipeline_type?: string; stages?: string[]; description?: string }): Promise<ToolResult> {\n    const pipelineId = generateCuid()\n\n    // Determine stages based on input or defaults\n    let stages = input.stages\n    const nameLower = input.name.toLowerCase()\n    const pipelineType = input.pipeline_type || \n      (nameLower.includes('real estate') || nameLower.includes('property') ? 'real_estate' :\n       nameLower.includes('recruit') || nameLower.includes('hiring') ? 'recruiting' :\n       nameLower.includes('consult') ? 'consulting' :\n       nameLower.includes('saas') || nameLower.includes('software') ? 'saas' : 'sales')\n\n    // Default stages by pipeline type\n    const defaultStages: Record<string, { name: string; probability: number }[]> = {\n      real_estate: [\n        { name: 'Lead', probability: 10 },\n        { name: 'Qualified', probability: 25 },\n        { name: 'Property Shown', probability: 40 },\n        { name: 'Offer Made', probability: 60 },\n        { name: 'Under Contract', probability: 80 },\n        { name: 'Closed Won', probability: 100 }\n      ],\n      sales: [\n        { name: 'Lead', probability: 10 },\n        { name: 'Qualified', probability: 25 },\n        { name: 'Demo', probability: 40 },\n        { name: 'Proposal', probability: 60 },\n        { name: 'Negotiation', probability: 80 },\n        { name: 'Closed Won', probability: 100 }\n      ],\n      consulting: [\n        { name: 'Inquiry', probability: 10 },\n        { name: 'Discovery Call', probability: 25 },\n        { name: 'Proposal Sent', probability: 50 },\n        { name: 'Contract Review', probability: 75 },\n        { name: 'Engaged', probability: 100 }\n      ],\n      saas: [\n        { name: 'Lead', probability: 10 },\n        { name: 'Qualified', probability: 20 },\n        { name: 'Demo Scheduled', probability: 35 },\n        { name: 'Demo Completed', probability: 50 },\n        { name: 'Trial', probability: 65 },\n        { name: 'Negotiation', probability: 80 },\n        { name: 'Closed Won', probability: 100 }\n      ],\n      recruiting: [\n        { name: 'Applied', probability: 10 },\n        { name: 'Screening', probability: 25 },\n        { name: 'Interview 1', probability: 40 },\n        { name: 'Interview 2', probability: 60 },\n        { name: 'Offer', probability: 80 },\n        { name: 'Hired', probability: 100 }\n      ]\n    }\n\n    // Use provided stages or defaults\n    const stageConfig = stages && stages.length > 0\n      ? stages.map((name, index) => ({\n          name,\n          probability: Math.round((index + 1) / stages.length * 100)\n        }))\n      : defaultStages[pipelineType] || defaultStages.sales\n\n    // Create the pipeline\n    const { data: pipeline, error: pipelineError } = await supabaseAdmin\n      .from('Pipeline')\n      .insert({\n        id: pipelineId,\n        subAccountId: this.subAccountId,\n        name: input.name,\n        description: input.description || `${input.name} pipeline`,\n      })\n      .select()\n      .single()\n\n    // Create stage objects with proper schema fields\n    const stageObjects = stageConfig.map((stage, index) => ({\n      id: generateCuid(),\n      pipelineId: pipelineId,\n      name: stage.name,\n      displayOrder: index,\n      winProbability: stage.probability,\n      stageType: stage.probability === 100 ? 'won' : 'open'\n    }))\n\n    if (pipelineError) {\n      // Log the error for debugging\n      console.error('Pipeline creation error:', pipelineError)\n      \n      // Return error with details\n      return {\n        success: false,\n        error: `Failed to create pipeline: ${pipelineError.message || 'Database error'}`\n      }\n    }\n\n    // Create stages in database\n    const { error: stagesError } = await supabaseAdmin.from('PipelineStage').insert(stageObjects)\n    \n    if (stagesError) {\n      console.error('Stages creation error:', stagesError)\n      // Pipeline was created but stages failed - try to clean up\n      await supabaseAdmin.from('Pipeline').delete().eq('id', pipelineId)\n      return {\n        success: false,\n        error: `Failed to create pipeline stages: ${stagesError.message || 'Database error'}`\n      }\n    }\n\n    return {\n      success: true,\n      data: {\n        pipeline: {\n          ...pipeline,\n          stages: stageObjects.map(s => ({\n            id: s.id,\n            name: s.name,\n            order: s.displayOrder,\n            probability: s.winProbability\n          }))\n        },\n        stages_created: stageObjects.length,\n        stage_flow: stageObjects.map(s => s.name).join('  ')\n      }\n    }\n  }\n\n  private async toolListPipelines(input: { include_stats?: boolean }): Promise<ToolResult> {\n    try {\n      const { data: pipelines, error } = await supabaseAdmin\n        .from('Pipeline')\n        .select('*, stages:PipelineStage(id, name, displayOrder, winProbability), deals:Deal(id, value, status)')\n        .eq('subAccountId', this.subAccountId)\n        .order('createdAt', { ascending: false })\n\n      if (error) throw error\n\n      const pipelinesWithStats = (pipelines || []).map((p: any) => ({\n        id: p.id,\n        name: p.name,\n        description: p.description,\n        stages: (p.stages || []).sort((a: any, b: any) => a.displayOrder - b.displayOrder).map((s: any) => s.name),\n        stage_count: p.stages?.length || 0,\n        deal_count: p.deals?.length || 0,\n        total_value: p.deals?.reduce((sum: number, d: any) => sum + (parseFloat(d.value) || 0), 0) || 0\n      }))\n\n      return {\n        success: true,\n        data: {\n          pipelines: pipelinesWithStats,\n          count: pipelinesWithStats.length\n        }\n      }\n    } catch (error) {\n      // Fallback response\n      return {\n        success: true,\n        data: {\n          pipelines: [],\n          count: 0,\n          message: 'No pipelines found. Would you like me to create one?'\n        }\n      }\n    }\n  }\n\n  private async toolUpdatePipeline(input: { pipeline_id: string; name?: string; stages?: string[]; add_stage?: string; remove_stage?: string }): Promise<ToolResult> {\n    const changes: string[] = []\n\n    if (input.name) {\n      await supabaseAdmin\n        .from('Pipeline')\n        .update({ name: input.name })\n        .eq('id', input.pipeline_id)\n        .eq('subAccountId', this.subAccountId)\n      changes.push(`name  ${input.name}`)\n    }\n\n    if (input.stages) {\n      // Replace all stages\n      await supabaseAdmin\n        .from('PipelineStage')\n        .delete()\n        .eq('pipelineId', input.pipeline_id)\n\n      const stages = input.stages!\n      const newStages = stages.map((name, index) => ({\n        id: generateCuid(),\n        pipelineId: input.pipeline_id,\n        name,\n        displayOrder: index,\n        winProbability: Math.round((index + 1) / stages.length * 100)\n      }))\n\n      await supabaseAdmin.from('PipelineStage').insert(newStages)\n      changes.push(`stages updated to: ${input.stages.join('  ')}`)\n    }\n\n    if (input.add_stage) {\n      const { data: maxOrder } = await supabaseAdmin\n        .from('PipelineStage')\n        .select('displayOrder')\n        .eq('pipelineId', input.pipeline_id)\n        .order('displayOrder', { ascending: false })\n        .limit(1)\n        .single()\n\n      await supabaseAdmin.from('PipelineStage').insert({\n        id: generateCuid(),\n        pipelineId: input.pipeline_id,\n        name: input.add_stage,\n        displayOrder: (maxOrder?.displayOrder || 0) + 1\n      })\n      changes.push(`added stage: ${input.add_stage}`)\n    }\n\n    if (input.remove_stage) {\n      await supabaseAdmin\n        .from('PipelineStage')\n        .delete()\n        .eq('pipelineId', input.pipeline_id)\n        .eq('name', input.remove_stage)\n      changes.push(`removed stage: ${input.remove_stage}`)\n    }\n\n    return {\n      success: true,\n      data: {\n        pipeline_id: input.pipeline_id,\n        changes,\n        message: changes.length > 0 ? `Pipeline updated: ${changes.join(', ')}` : 'No changes made'\n      }\n    }\n  }\n\n  private async toolDeletePipeline(input: { pipeline_id: string; move_deals_to?: string }): Promise<ToolResult> {\n    // First check for deals\n    const { data: deals } = await supabaseAdmin\n      .from('Deal')\n      .select('id')\n      .eq('pipelineId', input.pipeline_id)\n\n    if (deals && deals.length > 0 && !input.move_deals_to) {\n      return {\n        success: false,\n        error: `Pipeline has ${deals.length} deals. Please specify where to move them using move_deals_to parameter, or delete deals first.`\n      }\n    }\n\n    // Move deals if specified\n    if (input.move_deals_to && deals && deals.length > 0) {\n      await supabaseAdmin\n        .from('Deal')\n        .update({ pipelineId: input.move_deals_to })\n        .eq('pipelineId', input.pipeline_id)\n    }\n\n    // Delete stages first\n    await supabaseAdmin\n      .from('PipelineStage')\n      .delete()\n      .eq('pipelineId', input.pipeline_id)\n\n    // Delete pipeline\n    const { error } = await supabaseAdmin\n      .from('Pipeline')\n      .delete()\n      .eq('id', input.pipeline_id)\n      .eq('subAccountId', this.subAccountId)\n\n    if (error) throw error\n\n    return {\n      success: true,\n      data: {\n        deleted: true,\n        pipeline_id: input.pipeline_id,\n        deals_moved: input.move_deals_to ? deals?.length : 0,\n        message: 'Pipeline deleted successfully'\n      }\n    }\n  }\n\n  private async toolGetPipeline(input: { pipeline_id?: string; name?: string }): Promise<ToolResult> {\n    let query = supabaseAdmin\n      .from('Pipeline')\n      .select('*, stages:PipelineStage(id, name, displayOrder, winProbability, color)')\n      .eq('subAccountId', this.subAccountId)\n\n    if (input.pipeline_id) {\n      query = query.eq('id', input.pipeline_id)\n    } else if (input.name) {\n      query = query.ilike('name', `%${input.name}%`)\n    }\n\n    const { data: pipeline, error } = await query.single()\n\n    if (error || !pipeline) {\n      return {\n        success: false,\n        error: 'Pipeline not found'\n      }\n    }\n\n    return {\n      success: true,\n      data: {\n        pipeline: {\n          ...pipeline,\n          stages: ((pipeline as any).stages || []).sort((a: any, b: any) => a.displayOrder - b.displayOrder).map((s: any) => ({\n            id: s.id,\n            name: s.name,\n            order: s.displayOrder,\n            probability: s.winProbability,\n            color: s.color\n          }))\n        }\n      }\n    }\n  }\n\n  private async toolListDeals(input: { pipeline_id?: string; stage?: string; status?: string; contact_id?: string; limit?: number }): Promise<ToolResult> {\n    const { limit = 20 } = input\n\n    let query = supabaseAdmin\n      .from('Deal')\n      .select('*, Contact(firstName, lastName, email), Pipeline(name), PipelineStage(name)')\n      .eq('subAccountId', this.subAccountId)\n      .limit(limit)\n\n    if (input.pipeline_id) query = query.eq('pipelineId', input.pipeline_id)\n    if (input.stage) query = query.eq('stageId', input.stage)\n    if (input.status && input.status !== 'all') query = query.eq('status', input.status)\n    if (input.contact_id) query = query.eq('contactId', input.contact_id)\n\n    const { data: deals, error } = await query.order('createdAt', { ascending: false })\n\n    if (error) {\n      return {\n        success: true,\n        data: { deals: [], count: 0, message: 'No deals found or Deal table not set up yet.' }\n      }\n    }\n\n    return {\n      success: true,\n      data: {\n        deals: deals || [],\n        count: deals?.length || 0\n      }\n    }\n  }\n\n  // ============================================\n  // TASK MANAGEMENT IMPLEMENTATIONS\n  // ============================================\n\n  private async toolCreateTask(input: { title: string; description?: string; due_date?: string; priority?: string; contact_id?: string; deal_id?: string; assigned_to?: string }): Promise<ToolResult> {\n    return {\n      success: true,\n      data: {\n        task: {\n          title: input.title,\n          description: input.description,\n          due_date: input.due_date,\n          priority: input.priority || 'medium',\n          contact_id: input.contact_id || this.activeContact?.id\n        },\n        message: `Task \"${input.title}\" created`\n      }\n    }\n  }\n\n  private async toolListTasks(input: { status?: string; due_date?: string; contact_id?: string; assigned_to?: string }): Promise<ToolResult> {\n    return {\n      success: true,\n      data: { tasks: [], message: 'Task listing coming soon' }\n    }\n  }\n\n  private async toolCompleteTask(input: { task_id: string }): Promise<ToolResult> {\n    return {\n      success: true,\n      data: { task_id: input.task_id, status: 'completed', message: 'Task marked as complete' }\n    }\n  }\n\n  // ============================================\n  // COMMUNICATION IMPLEMENTATIONS\n  // ============================================\n\n  private async toolSendEmail(input: { contact_id: string; subject?: string; body?: string; template_id?: string; send_now?: boolean }): Promise<ToolResult> {\n    const { data: contact } = await supabaseAdmin\n      .from('Contact')\n      .select('*')\n      .eq('id', input.contact_id)\n      .single()\n\n    if (!contact || !contact.email) {\n      return { success: false, error: 'Contact not found or has no email' }\n    }\n\n    return {\n      success: true,\n      data: {\n        action: input.send_now ? 'email_sent' : 'draft_created',\n        contact,\n        subject: input.subject || '',\n        message: input.send_now \n          ? `Email sent to ${contact.email}` \n          : `Email draft created for ${contact.firstName}`\n      }\n    }\n  }\n\n  private async toolSendSMS(input: { contact_id: string; message: string }): Promise<ToolResult> {\n    const { data: contact } = await supabaseAdmin\n      .from('Contact')\n      .select('*')\n      .eq('id', input.contact_id)\n      .single()\n\n    if (!contact || !contact.phone) {\n      return { success: false, error: 'Contact not found or has no phone number' }\n    }\n\n    return {\n      success: true,\n      data: {\n        action: 'sms_queued',\n        contact,\n        message: `SMS queued for ${contact.phone}`\n      }\n    }\n  }\n\n  private async toolLogActivity(input: { contact_id: string; type: string; subject?: string; notes?: string; outcome?: string; duration_minutes?: number }): Promise<ToolResult> {\n    return {\n      success: true,\n      data: {\n        activity: {\n          type: input.type,\n          subject: input.subject,\n          notes: input.notes,\n          contact_id: input.contact_id\n        },\n        message: `${input.type} logged for contact`\n      }\n    }\n  }\n\n  // ============================================\n  // CALENDAR IMPLEMENTATIONS\n  // ============================================\n\n  private async toolScheduleAppointment(input: { title: string; contact_id?: string; start_time: string; end_time?: string; location?: string; description?: string; send_invite?: boolean }): Promise<ToolResult> {\n    return {\n      success: true,\n      data: {\n        appointment: {\n          title: input.title,\n          start_time: input.start_time,\n          contact_id: input.contact_id\n        },\n        message: `Appointment \"${input.title}\" scheduled`\n      }\n    }\n  }\n\n  private async toolGetAvailability(input: { date: string; duration_minutes?: number }): Promise<ToolResult> {\n    return {\n      success: true,\n      data: {\n        date: input.date,\n        available_slots: ['09:00', '10:00', '14:00', '15:00', '16:00'],\n        message: `Available times for ${input.date}`\n      }\n    }\n  }\n\n  // ============================================\n  // MARKETING IMPLEMENTATIONS\n  // ============================================\n\n  private async toolCreateEmailCampaign(input: { name: string; subject: string; content?: string; segment_id?: string; schedule_time?: string }): Promise<ToolResult> {\n    return {\n      success: true,\n      data: {\n        campaign: {\n          name: input.name,\n          subject: input.subject,\n          status: 'draft'\n        },\n        message: `Campaign \"${input.name}\" created`\n      }\n    }\n  }\n\n  private async toolGetCampaignStats(input: { campaign_id: string }): Promise<ToolResult> {\n    return {\n      success: true,\n      data: {\n        campaign_id: input.campaign_id,\n        sent: 1000,\n        delivered: 980,\n        opened: 350,\n        clicked: 125,\n        open_rate: 0.357,\n        click_rate: 0.127\n      }\n    }\n  }\n\n  // ============================================\n  // ANALYTICS IMPLEMENTATIONS\n  // ============================================\n\n  private async toolGetDashboardStats(input: { date_range?: string; metrics?: string[] }): Promise<ToolResult> {\n    const { data: contactCount } = await supabaseAdmin\n      .from('Contact')\n      .select('id', { count: 'exact' })\n      .eq('subAccountId', this.subAccountId)\n\n    return {\n      success: true,\n      data: {\n        total_contacts: contactCount?.length || 0,\n        new_contacts_this_week: 12,\n        deals_in_pipeline: 8,\n        pipeline_value: 85000,\n        tasks_due_today: 5\n      }\n    }\n  }\n\n  private async toolGenerateReport(input: { report_type: string; date_range?: string; format?: string }): Promise<ToolResult> {\n    return {\n      success: true,\n      data: {\n        report_type: input.report_type,\n        date_range: input.date_range || 'month',\n        message: `${input.report_type} report generated`\n      }\n    }\n  }\n\n  // ============================================\n  // WORKFLOW IMPLEMENTATIONS\n  // ============================================\n\n  private async toolTriggerWorkflow(input: { workflow_id: string; contact_id: string }): Promise<ToolResult> {\n    return {\n      success: true,\n      data: {\n        workflow_id: input.workflow_id,\n        contact_id: input.contact_id,\n        message: 'Contact enrolled in workflow'\n      }\n    }\n  }\n\n  private async toolListWorkflows(input: { status?: string }): Promise<ToolResult> {\n    return {\n      success: true,\n      data: {\n        workflows: [],\n        message: 'Workflow listing coming soon'\n      }\n    }\n  }\n\n  // ============================================\n  // MARKETING STRATEGY TOOL IMPLEMENTATIONS\n  // ============================================\n\n  private async toolGetMarketingPlaybook(input: { industry: string }): Promise<ToolResult> {\n    const playbook = getIndustryPlaybook(input.industry)\n    \n    if (!playbook) {\n      // Return available industries if not found\n      const availableIndustries = Object.keys(MARKETING_KNOWLEDGE.industryPlaybooks)\n      return {\n        success: false,\n        error: `Industry \"${input.industry}\" not found. Available industries: ${availableIndustries.join(', ')}`\n      }\n    }\n\n    return {\n      success: true,\n      data: {\n        industry: playbook.name,\n        overview: playbook.overview,\n        target_audiences: playbook.targetAudiences,\n        channel_priorities: playbook.channelPriority.slice(0, 5),\n        key_strategies: playbook.keyStrategies,\n        kpis: playbook.kpis,\n        common_mistakes: playbook.commonMistakes\n      }\n    }\n  }\n\n  private async toolGetMarketingRecommendations(input: { industry?: string; business_size?: string; goals?: string[]; budget?: 'low' | 'medium' | 'high' }): Promise<ToolResult> {\n    const recommendations = getMarketingRecommendations({\n      industry: input.industry,\n      businessSize: input.business_size,\n      goals: input.goals,\n      budget: input.budget\n    })\n\n    return {\n      success: true,\n      data: {\n        recommended_channels: recommendations.channels,\n        tactics: recommendations.tactics,\n        kpis_to_track: recommendations.kpis,\n        quick_wins: recommendations.quickWins,\n        long_term_strategies: recommendations.longTermStrategies,\n        budget_level: input.budget || 'medium'\n      }\n    }\n  }\n\n  private async toolGetFunnelStrategy(input: { stage?: string }): Promise<ToolResult> {\n    const funnel = MARKETING_KNOWLEDGE.funnel\n    \n    if (input.stage && input.stage !== 'all') {\n      const stage = funnel[input.stage as keyof typeof funnel]\n      if (!stage) {\n        return { success: false, error: `Invalid funnel stage. Use: tofu, mofu, bofu, retention, or all` }\n      }\n      return {\n        success: true,\n        data: { stage: input.stage, ...stage }\n      }\n    }\n\n    return {\n      success: true,\n      data: {\n        funnel_stages: [\n          { id: 'tofu', ...funnel.tofu },\n          { id: 'mofu', ...funnel.mofu },\n          { id: 'bofu', ...funnel.bofu },\n          { id: 'retention', ...funnel.retention }\n        ]\n      }\n    }\n  }\n\n  private async toolGetChannelGuide(input: { channel: string }): Promise<ToolResult> {\n    const channels = MARKETING_KNOWLEDGE.channels\n    const channelData = channels[input.channel as keyof typeof channels]\n\n    if (!channelData) {\n      return { success: false, error: `Channel not found. Available: seo, ppc, email, social, content` }\n    }\n\n    return {\n      success: true,\n      data: {\n        channel: input.channel,\n        ...channelData\n      }\n    }\n  }\n\n  private async toolGetAudienceInsights(input: { segment_type?: string; specific_segment?: string }): Promise<ToolResult> {\n    const segments = MARKETING_KNOWLEDGE.segments\n    \n    if (input.segment_type === 'generational') {\n      if (input.specific_segment) {\n        const segment = segments.generational[input.specific_segment as keyof typeof segments.generational]\n        if (segment) {\n          return { success: true, data: { segment_type: 'generational', segment: input.specific_segment, ...segment } }\n        }\n      }\n      return { success: true, data: { segment_type: 'generational', segments: segments.generational } }\n    }\n\n    if (input.segment_type === 'b2b') {\n      if (input.specific_segment) {\n        const segment = segments.b2b[input.specific_segment as keyof typeof segments.b2b]\n        if (segment) {\n          return { success: true, data: { segment_type: 'b2b', segment: input.specific_segment, ...segment } }\n        }\n      }\n      return { success: true, data: { segment_type: 'b2b', segments: segments.b2b } }\n    }\n\n    // Return overview if no specific type requested\n    return {\n      success: true,\n      data: {\n        available_segments: {\n          generational: ['genZ', 'millennials', 'genX', 'boomers'],\n          b2b: ['enterprise', 'midMarket', 'smallBusiness', 'microBusiness']\n        },\n        tip: 'Use segment_type to get detailed insights for a specific type'\n      }\n    }\n  }\n\n  private async toolGetCampaignTemplate(input: { campaign_type: string }): Promise<ToolResult> {\n    const templates = MARKETING_KNOWLEDGE.templates\n    const template = templates[input.campaign_type as keyof typeof templates]\n\n    if (!template) {\n      return { \n        success: false, \n        error: `Template not found. Available: lead_generation, product_launch, email_nurture, retargeting` \n      }\n    }\n\n    return {\n      success: true,\n      data: {\n        campaign_type: input.campaign_type,\n        ...template\n      }\n    }\n  }\n\n  private async toolGetMarketingMetrics(input: { category?: string }): Promise<ToolResult> {\n    const metrics = MARKETING_KNOWLEDGE.metrics\n\n    if (input.category && input.category !== 'all') {\n      const categoryMetrics = metrics[input.category as keyof typeof metrics]\n      if (!categoryMetrics) {\n        return { success: false, error: `Category not found. Use: acquisition, engagement, retention, revenue, or all` }\n      }\n      return {\n        success: true,\n        data: { category: input.category, metrics: categoryMetrics }\n      }\n    }\n\n    return {\n      success: true,\n      data: {\n        categories: {\n          acquisition: metrics.acquisition,\n          engagement: metrics.engagement,\n          retention: metrics.retention,\n          revenue: metrics.revenue\n        }\n      }\n    }\n  }\n\n  // ============================================\n  // System Prompt Builder\n  // ============================================\n\n  private buildSystemPrompt(): string {\n    let prompt = `You are Sarah, the AI Virtual Assistant for RISIVO CRM - an intelligent, comprehensive CRM platform.\n\n## CORE PHILOSOPHY: THE 10/90 MODEL\n${RISIVO_PHILOSOPHY.description}\n- Users provide 10% strategic direction, you execute 90% of the work\n- Time savings: 95%+ on routine tasks (e.g., report generation in 45 seconds vs 6-8 hours manually)\n\n## CORE BEHAVIOR RULES:\n1. **EXECUTE IMMEDIATELY** - No unnecessary \"are you sure?\" confirmations for routine actions\n2. **SHOW RESULTS CLEARLY** - After any action, display what was created/updated with full details\n3. **USE REAL DATA ONLY** - Never make up information; use only data from tools\n4. **REMEMBER CONTEXT** - When user says \"him/her/they\", refer to the active contact\n5. **SMART DEFAULTS** - Use industry-appropriate defaults when specifics aren't provided\n\n## AI AUTONOMY LEVELS:\nLevel 1 - Fully Autonomous (execute immediately): ${AI_AUTONOMY_LEVELS.level1_autonomous.actions.slice(0, 5).join(', ')}, etc.\nLevel 2 - Autonomous with Notification: ${AI_AUTONOMY_LEVELS.level2_notify.actions.slice(0, 4).join(', ')}, etc.\nLevel 3 - Requires Approval: ${AI_AUTONOMY_LEVELS.level3_approval.actions.slice(0, 4).join(', ')}, etc.\n\n## CRM CAPABILITIES (25 Modules, 149+ Integrations):\n\n### 1. Contact Management\n- Create, search, update, delete, list, bulk operations\n- AI-powered contact enrichment (company info, social profiles, job title, etc.)\n- Lead scoring (0-100): Hot Lead (80-100), Warm Lead (60-79), Cold Lead (40-59), Low Priority (0-39)\n- Common commands: \"Add contact [name]\", \"Find contacts from [company]\", \"Enrich all contacts\"\n\n### 2. Pipeline Management\n- Default stages by industry:\n  * Real Estate: Lead  Qualified  Property Shown  Offer Made  Under Contract  Closed Won\n  * Sales: Lead  Qualified  Demo  Proposal  Negotiation  Closed Won\n  * SaaS: Lead  Qualified  Demo Scheduled  Demo Completed  Trial  Negotiation  Closed Won\n  * Consulting: Inquiry  Discovery Call  Proposal Sent  Contract Review  Engaged\n  * Recruiting: Applied  Screening  Interview 1  Interview 2  Offer  Hired\n- AI Deal Intelligence: monitors deal health, stage duration, champion engagement, competitive signals\n\n### 3. Marketing Hub\n- Email campaigns, SMS, social media scheduling\n- Multi-platform ads (Google, Facebook, Instagram, LinkedIn, TikTok)\n- Common commands: \"Create email campaign\", \"Schedule post on [platform]\", \"Show ad performance\"\n\n### 4. Project Management\n- Kanban boards, Gantt charts, resource allocation, time tracking\n- Commands: \"Create project [name]\", \"Show overdue tasks\", \"Who has capacity?\"\n\n### 5. Workflows & Automations\n- Triggers: Contact Created, Form Submitted, Email Opened, Deal Stage Changed, etc.\n- Actions: Send Email, Send SMS, Create Task, Update Contact, Add Tag, etc.\n- Commands: \"Create workflow for [trigger]\", \"Show workflow statistics\"\n\n### 6. Communications\n- Unified inbox: Email, SMS, Phone, WhatsApp, Facebook, Instagram, Live Chat\n- Calendar & scheduling with booking pages\n\n### 7. Media Vault\n- Digital asset management with AI tagging\n- Image generation and editing\n- Commands: \"Generate image of [description]\", \"Remove background from [image]\"\n\n### 8. Funnels & Websites\n- AI-powered funnel creation: Lead Gen, Sales, Webinar, Product Launch\n- Website builder with templates\n\n### 9. Revenue Engine\n- Invoicing, payments, subscriptions\n- Integrations: Stripe, PayPal, Square\n\n### 10. Analytics & Reporting\n- Custom dashboards, automated reports\n- KPIs: CPL, CPA, CAC, Conversion Rate, CLV, ROAS\n\n### 11. SEO Module\n- Site audits, keyword research, content optimization\n- Commands: \"Audit website SEO\", \"Find keyword opportunities for [topic]\"\n\n### 12. Reputation Management\n- Review monitoring across Google, Facebook, Yelp, etc.\n- AI response generation\n\n## MARKETING STRATEGY EXPERTISE:\n\nUse these marketing tools for data-driven advice:\n\n1. **get_marketing_playbook**: Industry-specific strategies for Real Estate, E-Commerce, SaaS, Healthcare, Professional Services\n2. **get_marketing_recommendations**: Personalized advice based on industry, business size, goals, budget\n3. **get_funnel_strategy**: TOFU/MOFU/BOFU/Retention strategies\n4. **get_channel_guide**: Deep guides for SEO, PPC, Email, Social, Content\n5. **get_audience_insights**: Generational and B2B segmentation\n6. **get_campaign_template**: Templates for lead gen, product launch, email nurture, retargeting\n7. **get_marketing_metrics**: KPI formulas and benchmarks\n\n## RESPONSE FORMAT:\n- Use bullet points and numbered lists for clarity\n- **Bold** important values, names, and metrics\n- Show success confirmation WITH actual data\n- Include next steps or suggestions when helpful\n\nExample pipeline creation response:\n\" Created **Real Estate Leads** pipeline with 6 stages:\n1. Lead (10% probability)\n2. Qualified (25% probability)\n3. Property Shown (40% probability)\n4. Offer Made (60% probability)\n5. Under Contract (80% probability)\n6. Closed Won (100% probability)\n\nYou can now add deals to this pipeline!\"\n\n## PERSONALIZATION:\n- Address user by first name naturally (don't overuse)\n- Be conversational and helpful like a smart colleague\n- Remember context from conversation history\n- Don't repeat greetings or introductions\n`\n\n    // Add user context for personalization\n    if (this.userInfo) {\n      prompt += `\nCURRENT USER:\n- Name: ${this.userInfo.name}\n- First Name: ${this.userInfo.firstName}\n- Email: ${this.userInfo.email || 'Not set'}\n- ID: ${this.userInfo.id}\n\nAddress this user naturally using their first name (${this.userInfo.firstName}) when it makes sense.\nDon't overuse their name - be natural like a helpful colleague would be.\n`\n    }\n\n    if (this.activeContact) {\n      prompt += `\nACTIVE CONTACT (CRM Contact being discussed):\n- Name: ${this.activeContact.firstName} ${this.activeContact.lastName || ''}\n- Email: ${this.activeContact.email || 'Not set'}\n- Phone: ${this.activeContact.phone || 'Not set'}\n- Status: ${this.activeContact.status || 'New'}\n- Company: ${this.activeContact.company || 'Not set'}\n- ID: ${this.activeContact.id}\n\nPronouns (his/her/their) and \"the contact\" refer to this CRM contact, not the current user.\n`\n    }\n\n    return prompt\n  }\n}\n\n// ============================================\n// Factory Function\n// ============================================\n\nexport function createClaudeAssistant(subAccountId: string, userInfo?: UserInfo): ClaudeAssistantService {\n  return new ClaudeAssistantService(subAccountId, userInfo)\n}\n","// ============================================\n// RISIVO CRM Knowledge Base - COMPLETE SYSTEM KNOWLEDGE\n// Master Knowledge Base for AI Virtual Assistant\n// 25 Modules | 2,500+ Actions | 149+ Integrations\n// ============================================\n\n// Core Philosophy: The 10/90 Model\nexport const RISIVO_PHILOSOPHY = {\n  model: '10/90',\n  description: 'User provides 10% strategic direction, AI executes 90% of work',\n  benefits: [\n    'Fast, accurate, intelligent automation',\n    '95%+ time savings on routine tasks',\n    'Consistent, error-free execution',\n    'Scalable operations',\n    'AI handles complexities while humans focus on relationships'\n  ],\n  examples: [\n    {\n      task: 'Product Launch Campaign',\n      traditional: '5+ days',\n      withAI: '30 seconds',\n      savings: '99%'\n    },\n    {\n      task: 'New Contact Processing',\n      traditional: '5+ minutes',\n      withAI: '3 seconds',\n      savings: '99%'\n    },\n    {\n      task: 'Monthly Report Generation',\n      traditional: '6-8 hours',\n      withAI: '45 seconds',\n      savings: '99%'\n    }\n  ]\n};\n\n// AI Autonomy Levels - Action Control Framework\nexport const AI_AUTONOMY_LEVELS = {\n  level1_autonomous: {\n    name: 'Level 1 - Fully Autonomous (No Approval Required)',\n    description: 'Routine operations AI can execute immediately',\n    actions: [\n      'Routine data entry and updates',\n      'Contact enrichment and validation',\n      'Lead scoring and qualification',\n      'Task creation and reminders',\n      'Email scheduling (pre-approved content)',\n      'Report generation',\n      'Analytics tracking',\n      'Workflow execution',\n      'Performance monitoring',\n      'Budget optimization within set limits',\n      'Calendar management',\n      'File organization',\n      'Contact deduplication',\n      'Data backup',\n      'Auto-tagging and categorization'\n    ]\n  },\n  level2_notify: {\n    name: 'Level 2 - Autonomous with Notification',\n    description: 'Actions AI executes but notifies user about',\n    actions: [\n      'Campaign launches (pre-approved budget)',\n      'Content publication',\n      'Email campaign sends',\n      'Ad campaign creation',\n      'Workflow modifications',\n      'Integration activations',\n      'Team notifications',\n      'Client portal updates',\n      'Social media posts (scheduled)',\n      'Invoice generation',\n      'Payment reminders',\n      'Lead reassignment',\n      'Appointment confirmations'\n    ]\n  },\n  level3_approval: {\n    name: 'Level 3 - Requires User Approval',\n    description: 'Sensitive actions requiring explicit user confirmation',\n    actions: [\n      'Large budget allocations (>$1,000)',\n      'Brand asset changes',\n      'Domain configurations',\n      'White-label settings',\n      'User role changes',\n      'Data deletion (bulk)',\n      'Integration disconnections',\n      'System-wide settings changes',\n      'Legal/compliance content',\n      'Financial transactions',\n      'Contract modifications',\n      'User permission changes',\n      'Public API key generation',\n      'Security settings changes'\n    ]\n  }\n};\n\n// Complete Module Commands Library - 25 Modules\nexport const MODULE_COMMANDS = {\n  // ==========================================\n  // CRM MODULE\n  // ==========================================\n  crm: {\n    name: 'CRM Module',\n    description: 'Central hub for managing customer relationships, contacts, leads, deals, and accounts with AI-powered enrichment and scoring',\n    features: {\n      contactEnrichment: [\n        'Full name parsing (first, middle, last, suffix)',\n        'Email validation and verification',\n        'Phone number formatting (international)',\n        'Company information (name, size, industry, revenue)',\n        'Job title normalization',\n        'LinkedIn profile discovery',\n        'Twitter/X handle identification',\n        'Company website lookup',\n        'Location geocoding (city, state, country, coordinates)',\n        'Timezone detection',\n        'Employment history',\n        'Education background',\n        'Skills and expertise'\n      ],\n      leadScoring: {\n        total: 100,\n        categories: [\n          { name: 'Profile Completeness', maxPoints: 20, factors: ['Email', 'Phone', 'Company', 'Job Title'] },\n          { name: 'Engagement Score', maxPoints: 30, factors: ['Email Opens', 'Link Clicks', 'Website Visits'] },\n          { name: 'Fit Score', maxPoints: 30, factors: ['Company Size Match', 'Industry Match', 'Budget Alignment'] },\n          { name: 'Behavioral Score', maxPoints: 20, factors: ['Content Downloads', 'Demo Requests', 'Pricing Page Visits'] }\n        ],\n        classifications: [\n          { range: '80-100', label: 'Hot Lead', color: 'red', action: 'Immediate follow-up, assign to top closer' },\n          { range: '60-79', label: 'Warm Lead', color: 'orange', action: 'Enter nurture sequence, schedule follow-up' },\n          { range: '40-59', label: 'Cold Lead', color: 'blue', action: 'Long-term nurture, educational content' },\n          { range: '0-39', label: 'Low Priority', color: 'gray', action: 'Passive marketing, monitor engagement' }\n        ]\n      }\n    },\n    commands: {\n      contacts: {\n        basic: [\n          'Add contact [name]',\n          'Add [email] as contact',\n          'Create contact for [name] at [company]',\n          'Import contacts from [CSV/Google/Outlook]',\n          'Update [contact name] phone number to [number]',\n          'Delete contact [name]',\n          'Show me contact [name]',\n          'Find contacts from [company name]',\n          'List contacts added this week',\n          'Export contacts to CSV'\n        ],\n        advanced: [\n          'Merge duplicate contacts',\n          'Show me all contacts in [city/state/country]',\n          'Find all contacts who haven\\'t been contacted in 30 days',\n          'Show contacts with missing emails',\n          'Enrich all contacts with missing data',\n          'Find social media profiles for [contact]',\n          'Deduplicate contacts using AI matching',\n          'Tag contacts who opened last email campaign',\n          'Show contacts by lead score',\n          'Identify contacts with bounced emails'\n        ]\n      },\n      leads: {\n        basic: [\n          'Create lead from website form submission',\n          'Mark [contact] as hot lead',\n          'Convert lead [name] to opportunity',\n          'Show all hot leads assigned to me',\n          'Reassign leads from [user] to [user]'\n        ],\n        advanced: [\n          'Archive lost leads older than 6 months',\n          'Generate lead source report',\n          'Show lead conversion rate by source',\n          'Identify leads stuck in pipeline',\n          'Score all new leads automatically',\n          'Show leads likely to close this month',\n          'Prioritize leads by engagement score'\n        ]\n      },\n      deals: {\n        basic: [\n          'Create deal for [contact] worth $[amount]',\n          'Move [deal name] to [stage] stage',\n          'Show deals closing this month',\n          'Update deal value to $[amount]',\n          'Mark deal as won/lost'\n        ],\n        advanced: [\n          'Forecast revenue for [quarter]',\n          'Identify deals at risk of losing',\n          'Calculate win rate by sales rep',\n          'Show average deal cycle time',\n          'Predict probability to close for [deal]',\n          'Suggest next best action for [deal]',\n          'Generate pipeline report for leadership',\n          'Show deals with no activity in 2 weeks'\n        ]\n      }\n    }\n  },\n\n  // ==========================================\n  // PIPELINE MANAGEMENT MODULE\n  // ==========================================\n  pipelines: {\n    name: 'Pipeline Management',\n    description: 'Customizable sales pipelines with AI-powered deal intelligence',\n    defaultStages: {\n      real_estate: {\n        name: 'Real Estate Pipeline',\n        stages: [\n          { name: 'Lead', probability: 10 },\n          { name: 'Qualified', probability: 25 },\n          { name: 'Property Shown', probability: 40 },\n          { name: 'Offer Made', probability: 60 },\n          { name: 'Under Contract', probability: 80 },\n          { name: 'Closed Won', probability: 100 }\n        ]\n      },\n      sales: {\n        name: 'Sales Pipeline',\n        stages: [\n          { name: 'Lead', probability: 10 },\n          { name: 'Qualified', probability: 25 },\n          { name: 'Demo', probability: 40 },\n          { name: 'Proposal', probability: 60 },\n          { name: 'Negotiation', probability: 80 },\n          { name: 'Closed Won', probability: 100 }\n        ]\n      },\n      consulting: {\n        name: 'Consulting Pipeline',\n        stages: [\n          { name: 'Inquiry', probability: 10 },\n          { name: 'Discovery Call', probability: 25 },\n          { name: 'Proposal Sent', probability: 50 },\n          { name: 'Contract Review', probability: 75 },\n          { name: 'Engaged', probability: 100 }\n        ]\n      },\n      saas: {\n        name: 'SaaS Pipeline',\n        stages: [\n          { name: 'Lead', probability: 10 },\n          { name: 'Qualified', probability: 20 },\n          { name: 'Demo Scheduled', probability: 35 },\n          { name: 'Demo Completed', probability: 50 },\n          { name: 'Trial', probability: 65 },\n          { name: 'Negotiation', probability: 80 },\n          { name: 'Closed Won', probability: 100 }\n        ]\n      },\n      recruiting: {\n        name: 'Recruiting Pipeline',\n        stages: [\n          { name: 'Applied', probability: 10 },\n          { name: 'Screening', probability: 25 },\n          { name: 'Interview 1', probability: 40 },\n          { name: 'Interview 2', probability: 60 },\n          { name: 'Offer', probability: 80 },\n          { name: 'Hired', probability: 100 }\n        ]\n      },\n      agency: {\n        name: 'Agency Pipeline',\n        stages: [\n          { name: 'Inquiry', probability: 10 },\n          { name: 'Discovery', probability: 20 },\n          { name: 'Proposal', probability: 40 },\n          { name: 'Negotiation', probability: 60 },\n          { name: 'Contract', probability: 80 },\n          { name: 'Onboarding', probability: 100 }\n        ]\n      }\n    },\n    dealIntelligence: {\n      healthFactors: [\n        'Activity frequency',\n        'Stage duration',\n        'Champion engagement',\n        'Competitive landscape',\n        'Decision maker access',\n        'Budget confirmation',\n        'Timeline clarity'\n      ],\n      riskAlerts: [\n        { condition: 'No activity in 14+ days', severity: 'high' },\n        { condition: 'In same stage 2x average time', severity: 'medium' },\n        { condition: 'Champion went silent', severity: 'high' },\n        { condition: 'Competitor mentioned', severity: 'medium' },\n        { condition: 'Budget not confirmed', severity: 'low' }\n      ]\n    },\n    commands: [\n      'Create pipeline for [industry/purpose]',\n      'Add stage [name] to pipeline',\n      'Remove stage [name] from pipeline',\n      'Reorder pipeline stages',\n      'Show pipeline analytics',\n      'Calculate conversion rates by stage',\n      'Show average time in each stage',\n      'Identify bottleneck stages',\n      'Create pipeline with custom stages',\n      'Duplicate existing pipeline',\n      'Set stage win probabilities',\n      'Archive inactive pipeline'\n    ]\n  },\n\n  // ==========================================\n  // MARKETING HUB MODULE\n  // ==========================================\n  marketing: {\n    name: 'Marketing Hub',\n    description: 'Comprehensive marketing automation including Email, SMS, Social Media, and PPC across 8+ platforms',\n    channels: ['Email', 'SMS', 'Facebook', 'Instagram', 'LinkedIn', 'Twitter/X', 'TikTok', 'Google Ads', 'YouTube'],\n    commands: {\n      email: [\n        'Create email campaign for [audience]',\n        'Schedule email for [date/time]',\n        'Show email performance metrics',\n        'A/B test subject line',\n        'Create email sequence for [purpose]',\n        'Segment contacts by [criteria]',\n        'Generate email content for [topic]',\n        'Show unsubscribe rate',\n        'Clean email list (remove bounces)',\n        'Preview email in different clients',\n        'Set up email authentication (DKIM/SPF)',\n        'Create email template from scratch'\n      ],\n      sms: [\n        'Send SMS to [contact/segment]',\n        'Create SMS campaign',\n        'Schedule SMS for [time]',\n        'Show SMS delivery rates',\n        'Create SMS automation',\n        'Set up two-way SMS',\n        'Create SMS opt-in keyword',\n        'Show SMS conversation history'\n      ],\n      social: [\n        'Schedule post on [platform]',\n        'Create social media content calendar',\n        'Analyze social performance',\n        'Find best posting times',\n        'Monitor brand mentions',\n        'Respond to comments/DMs',\n        'Generate hashtag suggestions',\n        'Create carousel post',\n        'Schedule Instagram stories',\n        'Analyze competitor social presence'\n      ],\n      ads: [\n        'Create ad campaign on [platform]',\n        'Set budget for [campaign]',\n        'Show ad performance',\n        'Pause campaign [name]',\n        'Generate ad copy for [product]',\n        'Create lookalike audience',\n        'Show ROAS by campaign',\n        'Set up conversion tracking',\n        'Create retargeting audience',\n        'Optimize ad placements',\n        'Generate ad creative variations'\n      ]\n    }\n  },\n\n  // ==========================================\n  // PROJECT MANAGEMENT MODULE\n  // ==========================================\n  projects: {\n    name: 'Project Management',\n    description: 'Complete project management with Kanban, Gantt charts, resource allocation, and AI-powered planning',\n    features: ['Kanban Boards', 'Gantt Charts', 'Resource Allocation', 'Time Tracking', 'Milestone Management', 'Dependencies', 'Budget Tracking'],\n    projectPhases: [\n      { name: 'Initiation', activities: ['Define scope', 'Identify stakeholders', 'Create charter'] },\n      { name: 'Planning', activities: ['Create timeline', 'Assign resources', 'Set milestones', 'Define budget'] },\n      { name: 'Execution', activities: ['Task management', 'Team coordination', 'Status tracking'] },\n      { name: 'Monitoring', activities: ['Progress tracking', 'Risk management', 'Quality assurance'] },\n      { name: 'Closure', activities: ['Deliverable handoff', 'Lessons learned', 'Final reporting'] }\n    ],\n    commands: [\n      'Create project [name]',\n      'Add task to project [name]',\n      'Assign task to [user]',\n      'Set task due date',\n      'Show project timeline',\n      'Update task status',\n      'Show overdue tasks',\n      'Generate project report',\n      'Show team workload for this week',\n      'Who has capacity for new project?',\n      'Balance workload across team',\n      'Create project from template',\n      'Set task dependencies',\n      'Create milestone',\n      'Show critical path',\n      'Generate Gantt chart'\n    ],\n    timeTracking: [\n      'Start timer for [task]',\n      'Stop timer',\n      'Log [hours] to [task]',\n      'Show my time this week',\n      'Generate timesheet report',\n      'Show billable vs non-billable time',\n      'Set time estimates for tasks'\n    ]\n  },\n\n  // ==========================================\n  // MEDIA VAULT MODULE\n  // ==========================================\n  media: {\n    name: 'Media Vault',\n    description: 'AI-powered digital asset management with intelligent organization, generation, and editing',\n    assetTypes: ['Images', 'Videos', 'Audio', 'Documents', 'PDFs', '3D Models', 'Fonts', 'Design Files'],\n    aiCapabilities: {\n      organization: [\n        'Auto-tagging images with AI vision',\n        'Smart folder suggestions',\n        'Duplicate detection',\n        'Similar image grouping',\n        'Face recognition and grouping',\n        'Text extraction from images (OCR)',\n        'Color palette extraction'\n      ],\n      generation: [\n        'Generate image from description',\n        'Create logo variations',\n        'Generate social media graphics',\n        'Create product mockups',\n        'Generate background images',\n        'AI image upscaling',\n        'Generate marketing banners'\n      ],\n      editing: [\n        'Remove background',\n        'Resize for social media',\n        'Apply brand colors',\n        'Crop and rotate',\n        'Add watermark',\n        'Compress images',\n        'Convert formats'\n      ]\n    },\n    commands: [\n      'Upload [file] to Media Vault',\n      'Create folder for [project/client]',\n      'Move [asset] to [folder]',\n      'Auto-tag uploaded images with AI',\n      'Generate image of [description]',\n      'Create logo variations for [brand]',\n      'Design social media graphics for [campaign]',\n      'Remove background from [image]',\n      'Resize [image] for social media',\n      'Find images with [keyword]',\n      'Show all brand assets',\n      'Create image from prompt',\n      'Upscale low-res image',\n      'Generate product photos'\n    ]\n  },\n\n  // ==========================================\n  // DIGITAL HUB - FUNNELS MODULE\n  // ==========================================\n  funnels: {\n    name: 'Funnels Builder',\n    description: 'AI-powered funnel creation with templates, A/B testing, and conversion optimization',\n    funnelTypes: [\n      { name: 'Lead Generation', use: 'Capture leads with valuable content offers' },\n      { name: 'Sales Funnel', use: 'Convert leads through awareness-consideration-decision' },\n      { name: 'Webinar Funnel', use: 'Register and nurture webinar attendees' },\n      { name: 'Product Launch', use: 'Build anticipation and drive launch sales' },\n      { name: 'Application Funnel', use: 'Qualify and filter high-intent prospects' },\n      { name: 'Event Registration', use: 'Manage event sign-ups and attendance' },\n      { name: 'Membership Funnel', use: 'Convert visitors to paid members' },\n      { name: 'Tripwire Funnel', use: 'Low-cost offer to acquire customers' },\n      { name: 'Consultation Booking', use: 'Schedule high-value sales calls' }\n    ],\n    aiFeatures: [\n      'AI headline generation',\n      'Smart copy suggestions',\n      'Conversion rate prediction',\n      'A/B test recommendations',\n      'Personalized content blocks',\n      'Dynamic pricing suggestions'\n    ],\n    commands: [\n      'Create lead generation funnel',\n      'Build webinar registration funnel',\n      'Design product launch funnel for [product]',\n      'Create application funnel for [program]',\n      'Build tripwire funnel with $[amount] offer',\n      'A/B test headline on [funnel] landing page',\n      'Show funnel conversion rate',\n      'Identify drop-off points in funnel',\n      'Optimize [funnel] for mobile',\n      'Add upsell page to funnel',\n      'Create thank you page',\n      'Set up funnel analytics',\n      'Clone funnel',\n      'Generate funnel copy with AI'\n    ]\n  },\n\n  // ==========================================\n  // DIGITAL HUB - WEBSITES MODULE\n  // ==========================================\n  websites: {\n    name: 'Website Builder',\n    description: 'AI-powered website creation with SEO optimization and analytics',\n    templates: ['Business', 'Portfolio', 'E-commerce', 'Blog', 'Agency', 'SaaS', 'Restaurant', 'Real Estate'],\n    commands: [\n      'Create website for [business type]',\n      'Add page to website',\n      'Edit [page] content',\n      'Update website header/footer',\n      'Add blog section',\n      'Set up contact form',\n      'Optimize website for SEO',\n      'Add Google Analytics',\n      'Create sitemap',\n      'Set up SSL certificate',\n      'Add custom domain',\n      'Generate website copy with AI',\n      'Create responsive menu',\n      'Add chat widget'\n    ]\n  },\n\n  // ==========================================\n  // COMMUNICATIONS MODULE\n  // ==========================================\n  communications: {\n    name: 'Unified Communications',\n    description: 'Omnichannel messaging hub for email, SMS, calls, and social DMs',\n    channels: ['Email', 'SMS', 'Phone', 'WhatsApp', 'Facebook Messenger', 'Instagram DM', 'Live Chat'],\n    commands: {\n      inbox: [\n        'Show unread messages',\n        'Reply to [contact]',\n        'Mark conversation as resolved',\n        'Assign conversation to [user]',\n        'Show messages from [channel]',\n        'Create canned response',\n        'Search messages for [keyword]',\n        'Set up auto-responder',\n        'Show response time analytics',\n        'Tag conversation as [tag]'\n      ],\n      calendar: [\n        'Schedule meeting with [contact]',\n        'Show my availability',\n        'Create appointment type',\n        'Block time for [reason]',\n        'Reschedule [meeting]',\n        'Cancel appointment',\n        'Send reminder for upcoming meeting',\n        'Sync calendar with Google/Outlook',\n        'Set working hours',\n        'Create booking page',\n        'Show calendar conflicts'\n      ],\n      phone: [\n        'Make call to [contact]',\n        'Log call with [contact]',\n        'Record call (with consent)',\n        'Show call history',\n        'Set up voicemail',\n        'Create call script',\n        'Schedule callback',\n        'Transfer call to [user]'\n      ]\n    }\n  },\n\n  // ==========================================\n  // WORKFLOWS & AUTOMATION MODULE\n  // ==========================================\n  workflows: {\n    name: 'Workflows & Automations',\n    description: 'Visual automation builder with triggers, conditions, and multi-step actions',\n    triggerTypes: [\n      'Contact Created',\n      'Form Submitted',\n      'Email Opened',\n      'Link Clicked',\n      'Deal Stage Changed',\n      'Tag Added/Removed',\n      'Date-based (Birthday, Anniversary)',\n      'Webhook Received',\n      'Appointment Scheduled',\n      'Invoice Paid',\n      'Custom Event',\n      'Score Changed',\n      'Contact Updated'\n    ],\n    actionTypes: [\n      'Send Email',\n      'Send SMS',\n      'Create Task',\n      'Update Contact',\n      'Add/Remove Tag',\n      'Move Deal Stage',\n      'Notify Team Member',\n      'Wait/Delay',\n      'If/Then Branch',\n      'Webhook',\n      'Add to Sequence',\n      'Create Deal',\n      'Assign Owner',\n      'Send Internal Notification',\n      'Update Custom Field',\n      'Add to Segment'\n    ],\n    commonWorkflows: [\n      { name: 'Welcome Series', description: 'Onboard new contacts with email sequence' },\n      { name: 'Lead Nurturing', description: 'Educate and warm up cold leads' },\n      { name: 'Abandoned Cart', description: 'Recover lost e-commerce sales' },\n      { name: 'Appointment Reminders', description: 'Reduce no-shows with reminders' },\n      { name: 'Re-engagement', description: 'Win back inactive contacts' },\n      { name: 'Review Request', description: 'Collect reviews after purchase' },\n      { name: 'Birthday/Anniversary', description: 'Send personalized greetings' }\n    ],\n    commands: [\n      'Create workflow for [trigger]',\n      'Add action [type] to workflow',\n      'Enable workflow [name]',\n      'Pause workflow [name]',\n      'Show workflow statistics',\n      'Duplicate workflow',\n      'Test workflow with [contact]',\n      'Add condition to workflow',\n      'Set workflow timing',\n      'Show contacts in workflow',\n      'Remove contact from workflow',\n      'Create A/B test in workflow'\n    ]\n  },\n\n  // ==========================================\n  // ANALYTICS & REPORTING MODULE\n  // ==========================================\n  analytics: {\n    name: 'Analytics & Intelligence',\n    description: 'Cross-platform attribution, custom dashboards, and AI-powered insights',\n    reportTypes: [\n      'Contact Reports',\n      'Deal Reports',\n      'Pipeline Reports',\n      'Activity Reports',\n      'Campaign Reports',\n      'Revenue Reports',\n      'Attribution Reports',\n      'Conversion Reports',\n      'Team Performance',\n      'ROI Analysis'\n    ],\n    kpiCategories: {\n      acquisition: ['CPL', 'CPA', 'CAC', 'Conversion Rate', 'Lead Velocity'],\n      engagement: ['Open Rate', 'Click Rate', 'Response Rate', 'Time on Site'],\n      retention: ['Churn Rate', 'Retention Rate', 'Customer Lifetime Value'],\n      revenue: ['MRR', 'ARR', 'ARPU', 'ROAS', 'Marketing ROI']\n    },\n    commands: [\n      'Generate monthly performance report',\n      'Show conversion rate by source',\n      'Calculate ROI for [campaign]',\n      'Show top performing content',\n      'Identify trends in [metric]',\n      'Compare performance to last period',\n      'Export data to [format]',\n      'Create custom dashboard',\n      'Set up automated report delivery',\n      'Show attribution report',\n      'Calculate customer acquisition cost',\n      'Generate revenue forecast',\n      'Show team leaderboard'\n    ]\n  },\n\n  // ==========================================\n  // SEO MODULE\n  // ==========================================\n  seo: {\n    name: 'AI SEO Module',\n    description: 'Automated search optimization with audits, keyword research, and content suggestions',\n    features: {\n      technical: ['Site speed analysis', 'Mobile optimization', 'Schema markup', 'XML sitemap', 'Robots.txt', 'Canonical URLs', 'SSL/HTTPS'],\n      onPage: ['Title tags', 'Meta descriptions', 'Header hierarchy', 'Internal linking', 'Image alt text', 'Content optimization'],\n      offPage: ['Backlink analysis', 'Domain authority', 'Link building suggestions', 'Brand mentions'],\n      local: ['Google My Business', 'Local citations', 'NAP consistency', 'Local keywords']\n    },\n    commands: [\n      'Audit website SEO',\n      'Find keyword opportunities for [topic]',\n      'Optimize page [URL] for [keyword]',\n      'Generate meta tags for all pages',\n      'Create XML sitemap',\n      'Fix broken links',\n      'Improve page speed score',\n      'Generate schema markup',\n      'Analyze competitor SEO',\n      'Create content brief for [keyword]',\n      'Show ranking positions',\n      'Identify technical issues',\n      'Suggest internal links',\n      'Generate alt text for images'\n    ]\n  },\n\n  // ==========================================\n  // REPUTATION MANAGEMENT MODULE\n  // ==========================================\n  reputation: {\n    name: 'Reputation Management',\n    description: 'Monitor, respond to, and improve online reviews across all platforms',\n    platforms: ['Google My Business', 'Facebook', 'Yelp', 'Trustpilot', 'TripAdvisor', 'G2', 'Capterra', 'Amazon', 'App Store', 'Google Play'],\n    features: [\n      'Review monitoring',\n      'Sentiment analysis',\n      'AI response generation',\n      'Review request automation',\n      'Competitor review tracking',\n      'Rating trend analysis',\n      'Review widget for website'\n    ],\n    commands: [\n      'Show recent reviews',\n      'Respond to review from [platform]',\n      'Generate response to negative review',\n      'Request review from recent customers',\n      'Show average rating across platforms',\n      'Alert me to new negative reviews',\n      'Create review request campaign',\n      'Show review trends',\n      'Analyze competitor reviews',\n      'Generate review response for [review]',\n      'Show reviews by sentiment'\n    ]\n  },\n\n  // ==========================================\n  // ADMINISTRATION MODULE\n  // ==========================================\n  admin: {\n    name: 'System Administration',\n    description: 'User management, security, compliance, and system settings',\n    userRoles: ['Platform Admin', 'Agency Owner', 'Agency Admin', 'Sub-Account Owner', 'Sub-Account Admin', 'Team Member', 'View Only'],\n    securityFeatures: ['Two-Factor Authentication (2FA)', 'SSO/SAML', 'IP Restrictions', 'Session Management', 'Audit Logs', 'Role-Based Access Control (RBAC)'],\n    commands: [\n      'Add user [name] as [role]',\n      'Deactivate user [name]',\n      'Reset password for [user]',\n      'Show user activity log',\n      'Grant admin access to [user]',\n      'Create custom role [role name]',\n      'Show all active users',\n      'Enable 2FA for all users',\n      'Show login attempts',\n      'Export audit log for compliance',\n      'Set up SSO',\n      'Configure IP restrictions',\n      'Manage API keys',\n      'Set data retention policy'\n    ]\n  },\n\n  // ==========================================\n  // CONVERSATIONS MODULE\n  // ==========================================\n  conversations: {\n    name: 'Conversations',\n    description: 'Unified inbox for all communication channels',\n    features: ['Multi-channel inbox', 'Conversation threading', 'Auto-assignment', 'Canned responses', 'Conversation tagging', 'Priority queues'],\n    commands: [\n      'Show all open conversations',\n      'Assign conversation to [user]',\n      'Close conversation',\n      'Add internal note',\n      'Search conversations',\n      'Set conversation priority',\n      'Create canned response',\n      'Show conversation history with [contact]',\n      'Merge conversations'\n    ]\n  },\n\n  // ==========================================\n  // CALENDARS MODULE\n  // ==========================================\n  calendars: {\n    name: 'Calendars & Scheduling',\n    description: 'Advanced scheduling with booking pages, team calendars, and availability management',\n    features: ['Individual booking pages', 'Team scheduling', 'Resource booking', 'Round-robin assignment', 'Payment integration', 'Calendar sync'],\n    commands: [\n      'Create booking page for [service]',\n      'Set availability hours',\n      'Create team calendar',\n      'Add buffer time between appointments',\n      'Set up payment for bookings',\n      'Create appointment type',\n      'Enable waitlist',\n      'Set booking confirmation email'\n    ]\n  },\n\n  // ==========================================\n  // REVENUE ENGINE MODULE\n  // ==========================================\n  revenue: {\n    name: 'Revenue Engine',\n    description: 'Invoicing, payments, subscriptions, and financial management',\n    features: ['Invoicing', 'Payment processing', 'Subscription management', 'Tax handling', 'Multi-currency', 'Financial reporting'],\n    integrations: ['Stripe', 'PayPal', 'Square', 'Authorize.net', 'GoCardless'],\n    commands: [\n      'Create invoice for [contact]',\n      'Send payment reminder',\n      'Process refund',\n      'Set up recurring invoice',\n      'Show outstanding invoices',\n      'Create payment link',\n      'Show revenue report',\n      'Set up subscription plan',\n      'Generate financial statement',\n      'Track expenses'\n    ]\n  },\n\n  // ==========================================\n  // MEMBERSHIPS MODULE\n  // ==========================================\n  memberships: {\n    name: 'Memberships & Courses',\n    description: 'Create and manage membership sites, online courses, and learning content',\n    features: ['Course creation', 'Drip content', 'Progress tracking', 'Certificates', 'Community features', 'Gamification'],\n    commands: [\n      'Create course [name]',\n      'Add lesson to [course]',\n      'Set up drip schedule',\n      'Create membership level',\n      'Show course completion rates',\n      'Generate certificate',\n      'Create community group',\n      'Add quiz to lesson'\n    ]\n  },\n\n  // ==========================================\n  // ACCELERATORS MODULE\n  // ==========================================\n  accelerators: {\n    name: 'Accelerators',\n    description: 'AI-powered templates and quick-start automation packages',\n    types: ['Marketing Accelerators', 'Sales Accelerators', 'Onboarding Accelerators', 'Industry Accelerators'],\n    commands: [\n      'Show available accelerators',\n      'Install accelerator [name]',\n      'Customize accelerator',\n      'Preview accelerator',\n      'Create accelerator from current setup'\n    ]\n  },\n\n  // ==========================================\n  // ADDON STORE MODULE\n  // ==========================================\n  addons: {\n    name: 'Addon Store',\n    description: 'Extend functionality with premium add-ons',\n    categories: ['AI Tools', 'Integrations', 'Communications', 'Marketing', 'Analytics', 'Productivity'],\n    commands: [\n      'Show available addons',\n      'Install addon [name]',\n      'Show my active addons',\n      'Cancel addon subscription',\n      'Show addon usage'\n    ]\n  },\n\n  // ==========================================\n  // WHITE-LABEL MODULE\n  // ==========================================\n  whitelabel: {\n    name: 'White-Label Configuration',\n    description: 'Rebrand platform for agency and reseller models',\n    features: ['Custom branding', 'Custom domain', 'Email customization', 'Mobile app branding', 'Custom login page', 'Help documentation'],\n    commands: [\n      'Set up white-label for [agency name]',\n      'Configure custom domain',\n      'Upload brand assets',\n      'Set brand colors',\n      'Create custom email templates',\n      'Configure mobile app branding'\n    ]\n  }\n};\n\n// Integration Platforms (149+)\nexport const INTEGRATIONS = {\n  count: '149+',\n  categories: {\n    email: ['Gmail', 'Outlook', 'SendGrid', 'Mailgun', 'Amazon SES', 'Mailchimp', 'Constant Contact'],\n    calendar: ['Google Calendar', 'Outlook Calendar', 'Calendly', 'Cal.com', 'Acuity'],\n    social: ['Facebook', 'Instagram', 'LinkedIn', 'Twitter/X', 'TikTok', 'Pinterest', 'YouTube'],\n    ads: ['Google Ads', 'Meta Ads', 'LinkedIn Ads', 'Twitter Ads', 'TikTok Ads', 'Microsoft Ads'],\n    payments: ['Stripe', 'PayPal', 'Square', 'Authorize.net', 'GoCardless', 'Braintree'],\n    communication: ['Twilio', 'Vonage', 'Plivo', 'MessageBird', 'RingCentral', 'Zoom', 'Teams'],\n    crm: ['Salesforce', 'HubSpot', 'Zoho', 'Pipedrive', 'Monday.com'],\n    ecommerce: ['Shopify', 'WooCommerce', 'BigCommerce', 'Magento', 'Squarespace'],\n    webinar: ['Zoom', 'GoToWebinar', 'WebinarJam', 'Demio', 'Webex'],\n    automation: ['Zapier', 'Make', 'n8n', 'Pabbly', 'Integrately'],\n    accounting: ['QuickBooks', 'Xero', 'FreshBooks', 'Wave'],\n    storage: ['Google Drive', 'Dropbox', 'OneDrive', 'Box'],\n    forms: ['Typeform', 'JotForm', 'Google Forms', 'Gravity Forms'],\n    analytics: ['Google Analytics', 'Mixpanel', 'Amplitude', 'Segment']\n  }\n};\n\n// Data Models Reference\nexport const DATA_MODELS = {\n  contact: {\n    fields: [\n      'id', 'firstName', 'lastName', 'email', 'phone',\n      'company', 'jobTitle', 'address', 'city', 'state',\n      'country', 'postalCode', 'timezone', 'leadScore',\n      'status', 'source', 'tags', 'customFields',\n      'assignedTo', 'createdAt', 'updatedAt', 'lastActivityAt'\n    ],\n    statuses: ['new', 'contacted', 'qualified', 'customer', 'lost']\n  },\n  deal: {\n    fields: [\n      'id', 'name', 'value', 'contactId', 'pipelineId',\n      'stageId', 'status', 'probability', 'expectedCloseDate',\n      'assignedTo', 'createdAt', 'updatedAt', 'wonAt', 'lostAt', 'lostReason'\n    ],\n    statuses: ['open', 'won', 'lost']\n  },\n  pipeline: {\n    fields: ['id', 'name', 'description', 'subAccountId', 'createdAt', 'updatedAt'],\n    stageFields: ['id', 'name', 'displayOrder', 'winProbability', 'pipelineId', 'color']\n  }\n};\n\n// AI Response Guidelines\nexport const AI_RESPONSE_GUIDELINES = {\n  core: [\n    'Execute actions immediately without unnecessary confirmations',\n    'Show results clearly with all relevant details',\n    'Use real data only - never make up information',\n    'Remember context from conversation',\n    'Use smart defaults when not specified',\n    'Be helpful, efficient, and conversational'\n  ],\n  formatting: [\n    'Use bullet points for lists',\n    'Bold important values with **text**',\n    'Show success confirmation with actual data',\n    'Include next steps or suggestions when appropriate'\n  ],\n  personalization: [\n    'Address user by first name naturally',\n    'Remember previous interactions in session',\n    'Adapt tone to user style',\n    'Provide relevant suggestions based on context'\n  ]\n};\n\n// Helper Functions\nexport function getModuleCommands(moduleName: string): string[] {\n  const module = MODULE_COMMANDS[moduleName as keyof typeof MODULE_COMMANDS];\n  if (!module) return [];\n  \n  if ('commands' in module) {\n    if (Array.isArray(module.commands)) {\n      return module.commands;\n    }\n    return Object.values(module.commands).flat() as string[];\n  }\n  \n  return [];\n}\n\nexport function getAutonomyLevel(action: string): { level: number; name: string; requiresApproval: boolean } {\n  const actionLower = action.toLowerCase();\n  \n  // Check Level 3 (requires approval)\n  if (AI_AUTONOMY_LEVELS.level3_approval.actions.some(a => actionLower.includes(a.toLowerCase()))) {\n    return { level: 3, name: AI_AUTONOMY_LEVELS.level3_approval.name, requiresApproval: true };\n  }\n  \n  // Check Level 2 (notify)\n  if (AI_AUTONOMY_LEVELS.level2_notify.actions.some(a => actionLower.includes(a.toLowerCase()))) {\n    return { level: 2, name: AI_AUTONOMY_LEVELS.level2_notify.name, requiresApproval: false };\n  }\n  \n  // Default to Level 1 (fully autonomous)\n  return { level: 1, name: AI_AUTONOMY_LEVELS.level1_autonomous.name, requiresApproval: false };\n}\n\nexport function getPipelineStages(pipelineType: string): { name: string; probability: number }[] {\n  const pipeline = MODULE_COMMANDS.pipelines.defaultStages[pipelineType as keyof typeof MODULE_COMMANDS.pipelines.defaultStages];\n  return pipeline?.stages || MODULE_COMMANDS.pipelines.defaultStages.sales.stages;\n}\n\n// Export complete knowledge\nexport const RISIVO_KNOWLEDGE = {\n  philosophy: RISIVO_PHILOSOPHY,\n  autonomyLevels: AI_AUTONOMY_LEVELS,\n  modules: MODULE_COMMANDS,\n  integrations: INTEGRATIONS,\n  dataModels: DATA_MODELS,\n  responseGuidelines: AI_RESPONSE_GUIDELINES,\n  getModuleCommands,\n  getAutonomyLevel,\n  getPipelineStages\n};\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { hasOwn } from './values';\nimport { type BaseAnthropic } from '../../client';\nimport { RequestOptions } from '../request-options';\n\ntype LogFn = (message: string, ...rest: unknown[]) => void;\nexport type Logger = {\n  error: LogFn;\n  warn: LogFn;\n  info: LogFn;\n  debug: LogFn;\n};\nexport type LogLevel = 'off' | 'error' | 'warn' | 'info' | 'debug';\n\nconst levelNumbers = {\n  off: 0,\n  error: 200,\n  warn: 300,\n  info: 400,\n  debug: 500,\n};\n\nexport const parseLogLevel = (\n  maybeLevel: string | undefined,\n  sourceName: string,\n  client: BaseAnthropic,\n): LogLevel | undefined => {\n  if (!maybeLevel) {\n    return undefined;\n  }\n  if (hasOwn(levelNumbers, maybeLevel)) {\n    return maybeLevel;\n  }\n  loggerFor(client).warn(\n    `${sourceName} was set to ${JSON.stringify(maybeLevel)}, expected one of ${JSON.stringify(\n      Object.keys(levelNumbers),\n    )}`,\n  );\n  return undefined;\n};\n\nfunction noop() {}\n\nfunction makeLogFn(fnLevel: keyof Logger, logger: Logger | undefined, logLevel: LogLevel) {\n  if (!logger || levelNumbers[fnLevel] > levelNumbers[logLevel]) {\n    return noop;\n  } else {\n    // Don't wrap logger functions, we want the stacktrace intact!\n    return logger[fnLevel].bind(logger);\n  }\n}\n\nconst noopLogger = {\n  error: noop,\n  warn: noop,\n  info: noop,\n  debug: noop,\n};\n\nlet cachedLoggers = /* @__PURE__ */ new WeakMap<Logger, [LogLevel, Logger]>();\n\nexport function loggerFor(client: BaseAnthropic): Logger {\n  const logger = client.logger;\n  const logLevel = client.logLevel ?? 'off';\n  if (!logger) {\n    return noopLogger;\n  }\n\n  const cachedLogger = cachedLoggers.get(logger);\n  if (cachedLogger && cachedLogger[0] === logLevel) {\n    return cachedLogger[1];\n  }\n\n  const levelLogger = {\n    error: makeLogFn('error', logger, logLevel),\n    warn: makeLogFn('warn', logger, logLevel),\n    info: makeLogFn('info', logger, logLevel),\n    debug: makeLogFn('debug', logger, logLevel),\n  };\n\n  cachedLoggers.set(logger, [logLevel, levelLogger]);\n\n  return levelLogger;\n}\n\nexport const formatRequestDetails = (details: {\n  options?: RequestOptions | undefined;\n  headers?: Headers | Record<string, string> | undefined;\n  retryOfRequestLogID?: string | undefined;\n  retryOf?: string | undefined;\n  url?: string | undefined;\n  status?: number | undefined;\n  method?: string | undefined;\n  durationMs?: number | undefined;\n  message?: unknown;\n  body?: unknown;\n}) => {\n  if (details.options) {\n    details.options = { ...details.options };\n    delete details.options['headers']; // redundant + leaks internals\n  }\n  if (details.headers) {\n    details.headers = Object.fromEntries(\n      (details.headers instanceof Headers ? [...details.headers] : Object.entries(details.headers)).map(\n        ([name, value]) => [\n          name,\n          (\n            name.toLowerCase() === 'x-api-key' ||\n            name.toLowerCase() === 'authorization' ||\n            name.toLowerCase() === 'cookie' ||\n            name.toLowerCase() === 'set-cookie'\n          ) ?\n            '***'\n          : value,\n        ],\n      ),\n    );\n  }\n  if ('retryOfRequestLogID' in details) {\n    if (details.retryOfRequestLogID) {\n      details.retryOf = details.retryOfRequestLogID;\n    }\n    delete details.retryOfRequestLogID;\n  }\n  return details;\n};\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { AnthropicError } from './error';\nimport { FinalRequestOptions } from '../internal/request-options';\nimport { defaultParseResponse, WithRequestID } from '../internal/parse';\nimport { type BaseAnthropic } from '../client';\nimport { APIPromise } from './api-promise';\nimport { type APIResponseProps } from '../internal/parse';\nimport { maybeObj } from '../internal/utils/values';\n\nexport type PageRequestOptions = Pick<FinalRequestOptions, 'query' | 'headers' | 'body' | 'path' | 'method'>;\n\nexport abstract class AbstractPage<Item> implements AsyncIterable<Item> {\n  #client: BaseAnthropic;\n  protected options: FinalRequestOptions;\n\n  protected response: Response;\n  protected body: unknown;\n\n  constructor(client: BaseAnthropic, response: Response, body: unknown, options: FinalRequestOptions) {\n    this.#client = client;\n    this.options = options;\n    this.response = response;\n    this.body = body;\n  }\n\n  abstract nextPageRequestOptions(): PageRequestOptions | null;\n\n  abstract getPaginatedItems(): Item[];\n\n  hasNextPage(): boolean {\n    const items = this.getPaginatedItems();\n    if (!items.length) return false;\n    return this.nextPageRequestOptions() != null;\n  }\n\n  async getNextPage(): Promise<this> {\n    const nextOptions = this.nextPageRequestOptions();\n    if (!nextOptions) {\n      throw new AnthropicError(\n        'No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.',\n      );\n    }\n\n    return await this.#client.requestAPIList(this.constructor as any, nextOptions);\n  }\n\n  async *iterPages(): AsyncGenerator<this> {\n    let page: this = this;\n    yield page;\n    while (page.hasNextPage()) {\n      page = await page.getNextPage();\n      yield page;\n    }\n  }\n\n  async *[Symbol.asyncIterator](): AsyncGenerator<Item> {\n    for await (const page of this.iterPages()) {\n      for (const item of page.getPaginatedItems()) {\n        yield item;\n      }\n    }\n  }\n}\n\n/**\n * This subclass of Promise will resolve to an instantiated Page once the request completes.\n *\n * It also implements AsyncIterable to allow auto-paginating iteration on an unawaited list call, eg:\n *\n *    for await (const item of client.items.list()) {\n *      console.log(item)\n *    }\n */\nexport class PagePromise<\n    PageClass extends AbstractPage<Item>,\n    Item = ReturnType<PageClass['getPaginatedItems']>[number],\n  >\n  extends APIPromise<PageClass>\n  implements AsyncIterable<Item>\n{\n  constructor(\n    client: BaseAnthropic,\n    request: Promise<APIResponseProps>,\n    Page: new (...args: ConstructorParameters<typeof AbstractPage>) => PageClass,\n  ) {\n    super(\n      client,\n      request,\n      async (client, props) =>\n        new Page(\n          client,\n          props.response,\n          await defaultParseResponse(client, props),\n          props.options,\n        ) as WithRequestID<PageClass>,\n    );\n  }\n\n  /**\n   * Allow auto-paginating iteration on an unawaited list call, eg:\n   *\n   *    for await (const item of client.items.list()) {\n   *      console.log(item)\n   *    }\n   */\n  async *[Symbol.asyncIterator](): AsyncGenerator<Item> {\n    const page = await this;\n    for await (const item of page) {\n      yield item;\n    }\n  }\n}\n\nexport interface PageResponse<Item> {\n  data: Array<Item>;\n\n  has_more: boolean;\n\n  first_id: string | null;\n\n  last_id: string | null;\n}\n\nexport interface PageParams {\n  /**\n   * Number of items per page.\n   */\n  limit?: number;\n\n  before_id?: string;\n\n  after_id?: string;\n}\n\nexport class Page<Item> extends AbstractPage<Item> implements PageResponse<Item> {\n  data: Array<Item>;\n\n  has_more: boolean;\n\n  first_id: string | null;\n\n  last_id: string | null;\n\n  constructor(\n    client: BaseAnthropic,\n    response: Response,\n    body: PageResponse<Item>,\n    options: FinalRequestOptions,\n  ) {\n    super(client, response, body, options);\n\n    this.data = body.data || [];\n    this.has_more = body.has_more || false;\n    this.first_id = body.first_id || null;\n    this.last_id = body.last_id || null;\n  }\n\n  getPaginatedItems(): Item[] {\n    return this.data ?? [];\n  }\n\n  override hasNextPage(): boolean {\n    if (this.has_more === false) {\n      return false;\n    }\n\n    return super.hasNextPage();\n  }\n\n  nextPageRequestOptions(): PageRequestOptions | null {\n    if ((this.options.query as Record<string, unknown>)?.['before_id']) {\n      // in reverse\n      const first_id = this.first_id;\n      if (!first_id) {\n        return null;\n      }\n\n      return {\n        ...this.options,\n        query: {\n          ...maybeObj(this.options.query),\n          before_id: first_id,\n        },\n      };\n    }\n\n    const cursor = this.last_id;\n    if (!cursor) {\n      return null;\n    }\n\n    return {\n      ...this.options,\n      query: {\n        ...maybeObj(this.options.query),\n        after_id: cursor,\n      },\n    };\n  }\n}\n\nexport interface TokenPageResponse<Item> {\n  data: Array<Item>;\n\n  has_more: boolean;\n\n  next_page: string | null;\n}\n\nexport interface TokenPageParams {\n  /**\n   * Number of items per page.\n   */\n  limit?: number;\n\n  page_token?: string;\n}\n\nexport class TokenPage<Item> extends AbstractPage<Item> implements TokenPageResponse<Item> {\n  data: Array<Item>;\n\n  has_more: boolean;\n\n  next_page: string | null;\n\n  constructor(\n    client: BaseAnthropic,\n    response: Response,\n    body: TokenPageResponse<Item>,\n    options: FinalRequestOptions,\n  ) {\n    super(client, response, body, options);\n\n    this.data = body.data || [];\n    this.has_more = body.has_more || false;\n    this.next_page = body.next_page || null;\n  }\n\n  getPaginatedItems(): Item[] {\n    return this.data ?? [];\n  }\n\n  override hasNextPage(): boolean {\n    if (this.has_more === false) {\n      return false;\n    }\n\n    return super.hasNextPage();\n  }\n\n  nextPageRequestOptions(): PageRequestOptions | null {\n    const cursor = this.next_page;\n    if (!cursor) {\n      return null;\n    }\n\n    return {\n      ...this.options,\n      query: {\n        ...maybeObj(this.options.query),\n        page_token: cursor,\n      },\n    };\n  }\n}\n\nexport interface PageCursorResponse<Item> {\n  data: Array<Item>;\n\n  has_more: boolean;\n\n  next_page: string | null;\n}\n\nexport interface PageCursorParams {\n  /**\n   * Number of items per page.\n   */\n  limit?: number;\n\n  page?: string | null;\n}\n\nexport class PageCursor<Item> extends AbstractPage<Item> implements PageCursorResponse<Item> {\n  data: Array<Item>;\n\n  has_more: boolean;\n\n  next_page: string | null;\n\n  constructor(\n    client: BaseAnthropic,\n    response: Response,\n    body: PageCursorResponse<Item>,\n    options: FinalRequestOptions,\n  ) {\n    super(client, response, body, options);\n\n    this.data = body.data || [];\n    this.has_more = body.has_more || false;\n    this.next_page = body.next_page || null;\n  }\n\n  getPaginatedItems(): Item[] {\n    return this.data ?? [];\n  }\n\n  override hasNextPage(): boolean {\n    if (this.has_more === false) {\n      return false;\n    }\n\n    return super.hasNextPage();\n  }\n\n  nextPageRequestOptions(): PageRequestOptions | null {\n    const cursor = this.next_page;\n    if (!cursor) {\n      return null;\n    }\n\n    return {\n      ...this.options,\n      query: {\n        ...maybeObj(this.options.query),\n        page: cursor,\n      },\n    };\n  }\n}\n","import { AnthropicError } from '../../core/error';\nimport { ReadableStreamToAsyncIterable } from '../shims';\nimport { LineDecoder, type Bytes } from './line';\n\nexport class JSONLDecoder<T> {\n  controller: AbortController;\n\n  constructor(\n    private iterator: AsyncIterableIterator<Bytes>,\n    controller: AbortController,\n  ) {\n    this.controller = controller;\n  }\n\n  private async *decoder(): AsyncIterator<T, any, undefined> {\n    const lineDecoder = new LineDecoder();\n    for await (const chunk of this.iterator) {\n      for (const line of lineDecoder.decode(chunk)) {\n        yield JSON.parse(line);\n      }\n    }\n\n    for (const line of lineDecoder.flush()) {\n      yield JSON.parse(line);\n    }\n  }\n\n  [Symbol.asyncIterator](): AsyncIterator<T> {\n    return this.decoder();\n  }\n\n  static fromResponse<T>(response: Response, controller: AbortController): JSONLDecoder<T> {\n    if (!response.body) {\n      controller.abort();\n      if (\n        typeof (globalThis as any).navigator !== 'undefined' &&\n        (globalThis as any).navigator.product === 'ReactNative'\n      ) {\n        throw new AnthropicError(\n          `The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api`,\n        );\n      }\n      throw new AnthropicError(`Attempted to iterate over a response with no body`);\n    }\n\n    return new JSONLDecoder(ReadableStreamToAsyncIterable<Bytes>(response.body), controller);\n  }\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\n/**\n * Read an environment variable.\n *\n * Trims beginning and trailing whitespace.\n *\n * Will return undefined if the environment variable doesn't exist or cannot be accessed.\n */\nexport const readEnv = (env: string): string | undefined => {\n  if (typeof (globalThis as any).process !== 'undefined') {\n    return (globalThis as any).process.env?.[env]?.trim() ?? undefined;\n  }\n  if (typeof (globalThis as any).Deno !== 'undefined') {\n    return (globalThis as any).Deno.env?.get?.(env)?.trim();\n  }\n  return undefined;\n};\n","/**\n * Internal helpers for u64. BigUint64Array is too slow as per 2025, so we implement it using Uint32Array.\n * @todo re-check https://issues.chromium.org/issues/42212588\n * @module\n */\nconst U32_MASK64 = /* @__PURE__ */ BigInt(2 ** 32 - 1);\nconst _32n = /* @__PURE__ */ BigInt(32);\n\nfunction fromBig(\n  n: bigint,\n  le = false\n): {\n  h: number;\n  l: number;\n} {\n  if (le) return { h: Number(n & U32_MASK64), l: Number((n >> _32n) & U32_MASK64) };\n  return { h: Number((n >> _32n) & U32_MASK64) | 0, l: Number(n & U32_MASK64) | 0 };\n}\n\nfunction split(lst: bigint[], le = false): Uint32Array[] {\n  const len = lst.length;\n  let Ah = new Uint32Array(len);\n  let Al = new Uint32Array(len);\n  for (let i = 0; i < len; i++) {\n    const { h, l } = fromBig(lst[i], le);\n    [Ah[i], Al[i]] = [h, l];\n  }\n  return [Ah, Al];\n}\n\nconst toBig = (h: number, l: number): bigint => (BigInt(h >>> 0) << _32n) | BigInt(l >>> 0);\n// for Shift in [0, 32)\nconst shrSH = (h: number, _l: number, s: number): number => h >>> s;\nconst shrSL = (h: number, l: number, s: number): number => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in [1, 32)\nconst rotrSH = (h: number, l: number, s: number): number => (h >>> s) | (l << (32 - s));\nconst rotrSL = (h: number, l: number, s: number): number => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotrBH = (h: number, l: number, s: number): number => (h << (64 - s)) | (l >>> (s - 32));\nconst rotrBL = (h: number, l: number, s: number): number => (h >>> (s - 32)) | (l << (64 - s));\n// Right rotate for shift===32 (just swaps l&h)\nconst rotr32H = (_h: number, l: number): number => l;\nconst rotr32L = (h: number, _l: number): number => h;\n// Left rotate for Shift in [1, 32)\nconst rotlSH = (h: number, l: number, s: number): number => (h << s) | (l >>> (32 - s));\nconst rotlSL = (h: number, l: number, s: number): number => (l << s) | (h >>> (32 - s));\n// Left rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotlBH = (h: number, l: number, s: number): number => (l << (s - 32)) | (h >>> (64 - s));\nconst rotlBL = (h: number, l: number, s: number): number => (h << (s - 32)) | (l >>> (64 - s));\n\n// JS uses 32-bit signed integers for bitwise operations which means we cannot\n// simple take carry out of low bit sum by shift, we need to use division.\nfunction add(\n  Ah: number,\n  Al: number,\n  Bh: number,\n  Bl: number\n): {\n  h: number;\n  l: number;\n} {\n  const l = (Al >>> 0) + (Bl >>> 0);\n  return { h: (Ah + Bh + ((l / 2 ** 32) | 0)) | 0, l: l | 0 };\n}\n// Addition with more than 2 elements\nconst add3L = (Al: number, Bl: number, Cl: number): number => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0);\nconst add3H = (low: number, Ah: number, Bh: number, Ch: number): number =>\n  (Ah + Bh + Ch + ((low / 2 ** 32) | 0)) | 0;\nconst add4L = (Al: number, Bl: number, Cl: number, Dl: number): number =>\n  (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0);\nconst add4H = (low: number, Ah: number, Bh: number, Ch: number, Dh: number): number =>\n  (Ah + Bh + Ch + Dh + ((low / 2 ** 32) | 0)) | 0;\nconst add5L = (Al: number, Bl: number, Cl: number, Dl: number, El: number): number =>\n  (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0) + (El >>> 0);\nconst add5H = (low: number, Ah: number, Bh: number, Ch: number, Dh: number, Eh: number): number =>\n  (Ah + Bh + Ch + Dh + Eh + ((low / 2 ** 32) | 0)) | 0;\n\n// prettier-ignore\nexport {\n  add, add3H, add3L, add4H, add4L, add5H, add5L, fromBig, rotlBH, rotlBL, rotlSH, rotlSL, rotr32H, rotr32L, rotrBH, rotrBL, rotrSH, rotrSL, shrSH, shrSL, split, toBig\n};\n// prettier-ignore\nconst u64: { fromBig: typeof fromBig; split: typeof split; toBig: (h: number, l: number) => bigint; shrSH: (h: number, _l: number, s: number) => number; shrSL: (h: number, l: number, s: number) => number; rotrSH: (h: number, l: number, s: number) => number; rotrSL: (h: number, l: number, s: number) => number; rotrBH: (h: number, l: number, s: number) => number; rotrBL: (h: number, l: number, s: number) => number; rotr32H: (_h: number, l: number) => number; rotr32L: (h: number, _l: number) => number; rotlSH: (h: number, l: number, s: number) => number; rotlSL: (h: number, l: number, s: number) => number; rotlBH: (h: number, l: number, s: number) => number; rotlBL: (h: number, l: number, s: number) => number; add: typeof add; add3L: (Al: number, Bl: number, Cl: number) => number; add3H: (low: number, Ah: number, Bh: number, Ch: number) => number; add4L: (Al: number, Bl: number, Cl: number, Dl: number) => number; add4H: (low: number, Ah: number, Bh: number, Ch: number, Dh: number) => number; add5H: (low: number, Ah: number, Bh: number, Ch: number, Dh: number, Eh: number) => number; add5L: (Al: number, Bl: number, Cl: number, Dl: number, El: number) => number; } = {\n  fromBig, split, toBig,\n  shrSH, shrSL,\n  rotrSH, rotrSL, rotrBH, rotrBL,\n  rotr32H, rotr32L,\n  rotlSH, rotlSL, rotlBH, rotlBL,\n  add, add3L, add3H, add4L, add4H, add5H, add5L,\n};\nexport default u64;\n","import { AnthropicError } from '../../core/error';\n\n/**\n * Percent-encode everything that isn't safe to have in a path without encoding safe chars.\n *\n * Taken from https://datatracker.ietf.org/doc/html/rfc3986#section-3.3:\n * > unreserved  = ALPHA / DIGIT / \"-\" / \".\" / \"_\" / \"~\"\n * > sub-delims  = \"!\" / \"$\" / \"&\" / \"'\" / \"(\" / \")\" / \"*\" / \"+\" / \",\" / \";\" / \"=\"\n * > pchar       = unreserved / pct-encoded / sub-delims / \":\" / \"@\"\n */\nexport function encodeURIPath(str: string) {\n  return str.replace(/[^A-Za-z0-9\\-._~!$&'()*+,;=:@]+/g, encodeURIComponent);\n}\n\nconst EMPTY = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.create(null));\n\nexport const createPathTagFunction = (pathEncoder = encodeURIPath) =>\n  function path(statics: readonly string[], ...params: readonly unknown[]): string {\n    // If there are no params, no processing is needed.\n    if (statics.length === 1) return statics[0]!;\n\n    let postPath = false;\n    const invalidSegments = [];\n    const path = statics.reduce((previousValue, currentValue, index) => {\n      if (/[?#]/.test(currentValue)) {\n        postPath = true;\n      }\n      const value = params[index];\n      let encoded = (postPath ? encodeURIComponent : pathEncoder)('' + value);\n      if (\n        index !== params.length &&\n        (value == null ||\n          (typeof value === 'object' &&\n            // handle values from other realms\n            value.toString ===\n              Object.getPrototypeOf(Object.getPrototypeOf((value as any).hasOwnProperty ?? EMPTY) ?? EMPTY)\n                ?.toString))\n      ) {\n        encoded = value + '';\n        invalidSegments.push({\n          start: previousValue.length + currentValue.length,\n          length: encoded.length,\n          error: `Value of type ${Object.prototype.toString\n            .call(value)\n            .slice(8, -1)} is not a valid path parameter`,\n        });\n      }\n      return previousValue + currentValue + (index === params.length ? '' : encoded);\n    }, '');\n\n    const pathOnly = path.split(/[?#]/, 1)[0]!;\n    const invalidSegmentPattern = /(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)/gi;\n    let match;\n\n    // Find all invalid segments\n    while ((match = invalidSegmentPattern.exec(pathOnly)) !== null) {\n      invalidSegments.push({\n        start: match.index,\n        length: match[0].length,\n        error: `Value \"${match[0]}\" can\\'t be safely passed as a path parameter`,\n      });\n    }\n\n    invalidSegments.sort((a, b) => a.start - b.start);\n\n    if (invalidSegments.length > 0) {\n      let lastEnd = 0;\n      const underline = invalidSegments.reduce((acc, segment) => {\n        const spaces = ' '.repeat(segment.start - lastEnd);\n        const arrows = '^'.repeat(segment.length);\n        lastEnd = segment.start + segment.length;\n        return acc + spaces + arrows;\n      }, '');\n\n      throw new AnthropicError(\n        `Path parameters result in path with invalid segments:\\n${invalidSegments\n          .map((e) => e.error)\n          .join('\\n')}\\n${path}\\n${underline}`,\n      );\n    }\n\n    return path;\n  };\n\n/**\n * URI-encodes path params and ensures no unsafe /./ or /../ path segments are introduced.\n */\nexport const path = /* @__PURE__ */ createPathTagFunction(encodeURIPath);\n","/**\n * SHA3 (keccak) hash function, based on a new \"Sponge function\" design.\n * Different from older hashes, the internal state is bigger than output size.\n *\n * Check out [FIPS-202](https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.202.pdf),\n * [Website](https://keccak.team/keccak.html),\n * [the differences between SHA-3 and Keccak](https://crypto.stackexchange.com/questions/15727/what-are-the-key-differences-between-the-draft-sha-3-standard-and-the-keccak-sub).\n *\n * Check out `sha3-addons` module for cSHAKE, k12, and others.\n * @module\n */\nimport { rotlBH, rotlBL, rotlSH, rotlSL, split } from './_u64.ts';\n// prettier-ignore\nimport {\n  abytes, aexists, anumber, aoutput,\n  clean, createHasher,\n  oidNist,\n  swap32IfBE,\n  u32,\n  type CHash, type CHashXOF,\n  type Hash,\n  type HashInfo,\n  type HashXOF\n} from './utils.ts';\n\n// No __PURE__ annotations in sha3 header:\n// EVERYTHING is in fact used on every export.\n// Various per round constants calculations\nconst _0n = BigInt(0);\nconst _1n = BigInt(1);\nconst _2n = BigInt(2);\nconst _7n = BigInt(7);\nconst _256n = BigInt(256);\nconst _0x71n = BigInt(0x71);\nconst SHA3_PI: number[] = [];\nconst SHA3_ROTL: number[] = [];\nconst _SHA3_IOTA: bigint[] = []; // no pure annotation: var is always used\nfor (let round = 0, R = _1n, x = 1, y = 0; round < 24; round++) {\n  // Pi\n  [x, y] = [y, (2 * x + 3 * y) % 5];\n  SHA3_PI.push(2 * (5 * y + x));\n  // Rotational\n  SHA3_ROTL.push((((round + 1) * (round + 2)) / 2) % 64);\n  // Iota\n  let t = _0n;\n  for (let j = 0; j < 7; j++) {\n    R = ((R << _1n) ^ ((R >> _7n) * _0x71n)) % _256n;\n    if (R & _2n) t ^= _1n << ((_1n << BigInt(j)) - _1n);\n  }\n  _SHA3_IOTA.push(t);\n}\nconst IOTAS = split(_SHA3_IOTA, true);\nconst SHA3_IOTA_H = IOTAS[0];\nconst SHA3_IOTA_L = IOTAS[1];\n\n// Left rotation (without 0, 32, 64)\nconst rotlH = (h: number, l: number, s: number) => (s > 32 ? rotlBH(h, l, s) : rotlSH(h, l, s));\nconst rotlL = (h: number, l: number, s: number) => (s > 32 ? rotlBL(h, l, s) : rotlSL(h, l, s));\n\n/** `keccakf1600` internal function, additionally allows to adjust round count. */\nexport function keccakP(s: Uint32Array, rounds: number = 24): void {\n  const B = new Uint32Array(5 * 2);\n  // NOTE: all indices are x2 since we store state as u32 instead of u64 (bigints to slow in js)\n  for (let round = 24 - rounds; round < 24; round++) {\n    // Theta \n    for (let x = 0; x < 10; x++) B[x] = s[x] ^ s[x + 10] ^ s[x + 20] ^ s[x + 30] ^ s[x + 40];\n    for (let x = 0; x < 10; x += 2) {\n      const idx1 = (x + 8) % 10;\n      const idx0 = (x + 2) % 10;\n      const B0 = B[idx0];\n      const B1 = B[idx0 + 1];\n      const Th = rotlH(B0, B1, 1) ^ B[idx1];\n      const Tl = rotlL(B0, B1, 1) ^ B[idx1 + 1];\n      for (let y = 0; y < 50; y += 10) {\n        s[x + y] ^= Th;\n        s[x + y + 1] ^= Tl;\n      }\n    }\n    // Rho () and Pi ()\n    let curH = s[2];\n    let curL = s[3];\n    for (let t = 0; t < 24; t++) {\n      const shift = SHA3_ROTL[t];\n      const Th = rotlH(curH, curL, shift);\n      const Tl = rotlL(curH, curL, shift);\n      const PI = SHA3_PI[t];\n      curH = s[PI];\n      curL = s[PI + 1];\n      s[PI] = Th;\n      s[PI + 1] = Tl;\n    }\n    // Chi ()\n    for (let y = 0; y < 50; y += 10) {\n      for (let x = 0; x < 10; x++) B[x] = s[y + x];\n      for (let x = 0; x < 10; x++) s[y + x] ^= ~B[(x + 2) % 10] & B[(x + 4) % 10];\n    }\n    // Iota ()\n    s[0] ^= SHA3_IOTA_H[round];\n    s[1] ^= SHA3_IOTA_L[round];\n  }\n  clean(B);\n}\n\n/** Keccak sponge function. */\nexport class Keccak implements Hash<Keccak>, HashXOF<Keccak> {\n  protected state: Uint8Array;\n  protected pos = 0;\n  protected posOut = 0;\n  protected finished = false;\n  protected state32: Uint32Array;\n  protected destroyed = false;\n\n  public blockLen: number;\n  public suffix: number;\n  public outputLen: number;\n  protected enableXOF = false;\n  protected rounds: number;\n\n  // NOTE: we accept arguments in bytes instead of bits here.\n  constructor(\n    blockLen: number,\n    suffix: number,\n    outputLen: number,\n    enableXOF = false,\n    rounds: number = 24\n  ) {\n    this.blockLen = blockLen;\n    this.suffix = suffix;\n    this.outputLen = outputLen;\n    this.enableXOF = enableXOF;\n    this.rounds = rounds;\n    // Can be passed from user as dkLen\n    anumber(outputLen, 'outputLen');\n    // 1600 = 5x5 matrix of 64bit.  1600 bits === 200 bytes\n    // 0 < blockLen < 200\n    if (!(0 < blockLen && blockLen < 200))\n      throw new Error('only keccak-f1600 function is supported');\n    this.state = new Uint8Array(200);\n    this.state32 = u32(this.state);\n  }\n  clone(): Keccak {\n    return this._cloneInto();\n  }\n  protected keccak(): void {\n    swap32IfBE(this.state32);\n    keccakP(this.state32, this.rounds);\n    swap32IfBE(this.state32);\n    this.posOut = 0;\n    this.pos = 0;\n  }\n  update(data: Uint8Array): this {\n    aexists(this);\n    abytes(data);\n    const { blockLen, state } = this;\n    const len = data.length;\n    for (let pos = 0; pos < len; ) {\n      const take = Math.min(blockLen - this.pos, len - pos);\n      for (let i = 0; i < take; i++) state[this.pos++] ^= data[pos++];\n      if (this.pos === blockLen) this.keccak();\n    }\n    return this;\n  }\n  protected finish(): void {\n    if (this.finished) return;\n    this.finished = true;\n    const { state, suffix, pos, blockLen } = this;\n    // Do the padding\n    state[pos] ^= suffix;\n    if ((suffix & 0x80) !== 0 && pos === blockLen - 1) this.keccak();\n    state[blockLen - 1] ^= 0x80;\n    this.keccak();\n  }\n  protected writeInto(out: Uint8Array): Uint8Array {\n    aexists(this, false);\n    abytes(out);\n    this.finish();\n    const bufferOut = this.state;\n    const { blockLen } = this;\n    for (let pos = 0, len = out.length; pos < len; ) {\n      if (this.posOut >= blockLen) this.keccak();\n      const take = Math.min(blockLen - this.posOut, len - pos);\n      out.set(bufferOut.subarray(this.posOut, this.posOut + take), pos);\n      this.posOut += take;\n      pos += take;\n    }\n    return out;\n  }\n  xofInto(out: Uint8Array): Uint8Array {\n    // Sha3/Keccak usage with XOF is probably mistake, only SHAKE instances can do XOF\n    if (!this.enableXOF) throw new Error('XOF is not possible for this instance');\n    return this.writeInto(out);\n  }\n  xof(bytes: number): Uint8Array {\n    anumber(bytes);\n    return this.xofInto(new Uint8Array(bytes));\n  }\n  digestInto(out: Uint8Array): Uint8Array {\n    aoutput(out, this);\n    if (this.finished) throw new Error('digest() was already called');\n    this.writeInto(out);\n    this.destroy();\n    return out;\n  }\n  digest(): Uint8Array {\n    return this.digestInto(new Uint8Array(this.outputLen));\n  }\n  destroy(): void {\n    this.destroyed = true;\n    clean(this.state);\n  }\n  _cloneInto(to?: Keccak): Keccak {\n    const { blockLen, suffix, outputLen, rounds, enableXOF } = this;\n    to ||= new Keccak(blockLen, suffix, outputLen, enableXOF, rounds);\n    to.state32.set(this.state32);\n    to.pos = this.pos;\n    to.posOut = this.posOut;\n    to.finished = this.finished;\n    to.rounds = rounds;\n    // Suffix can change in cSHAKE\n    to.suffix = suffix;\n    to.outputLen = outputLen;\n    to.enableXOF = enableXOF;\n    to.destroyed = this.destroyed;\n    return to;\n  }\n}\n\nconst genKeccak = (suffix: number, blockLen: number, outputLen: number, info: HashInfo = {}) =>\n  createHasher(() => new Keccak(blockLen, suffix, outputLen), info);\n\n/** SHA3-224 hash function. */\nexport const sha3_224: CHash = /* @__PURE__ */ genKeccak(\n  0x06,\n  144,\n  28,\n  /* @__PURE__ */ oidNist(0x07)\n);\n/** SHA3-256 hash function. Different from keccak-256. */\nexport const sha3_256: CHash = /* @__PURE__ */ genKeccak(\n  0x06,\n  136,\n  32,\n  /* @__PURE__ */ oidNist(0x08)\n);\n/** SHA3-384 hash function. */\nexport const sha3_384: CHash = /* @__PURE__ */ genKeccak(\n  0x06,\n  104,\n  48,\n  /* @__PURE__ */ oidNist(0x09)\n);\n/** SHA3-512 hash function. */\nexport const sha3_512: CHash = /* @__PURE__ */ genKeccak(\n  0x06,\n  72,\n  64,\n  /* @__PURE__ */ oidNist(0x0a)\n);\n\n/** keccak-224 hash function. */\nexport const keccak_224: CHash = /* @__PURE__ */ genKeccak(0x01, 144, 28);\n/** keccak-256 hash function. Different from SHA3-256. */\nexport const keccak_256: CHash = /* @__PURE__ */ genKeccak(0x01, 136, 32);\n/** keccak-384 hash function. */\nexport const keccak_384: CHash = /* @__PURE__ */ genKeccak(0x01, 104, 48);\n/** keccak-512 hash function. */\nexport const keccak_512: CHash = /* @__PURE__ */ genKeccak(0x01, 72, 64);\n\n/** Options for SHAKE XOF. */\nexport type ShakeOpts = { dkLen?: number };\n\nconst genShake = (suffix: number, blockLen: number, outputLen: number, info: HashInfo = {}) =>\n  createHasher<Keccak, ShakeOpts>(\n    (opts: ShakeOpts = {}) =>\n      new Keccak(blockLen, suffix, opts.dkLen === undefined ? outputLen : opts.dkLen, true),\n    info\n  );\n\n/** SHAKE128 XOF with 128-bit security. */\nexport const shake128: CHashXOF<Keccak, ShakeOpts> =\n  /* @__PURE__ */\n  genShake(0x1f, 168, 16, /* @__PURE__ */ oidNist(0x0b));\n/** SHAKE256 XOF with 256-bit security. */\nexport const shake256: CHashXOF<Keccak, ShakeOpts> =\n  /* @__PURE__ */\n  genShake(0x1f, 136, 32, /* @__PURE__ */ oidNist(0x0c));\n\n/** SHAKE128 XOF with 256-bit output (NIST version). */\nexport const shake128_32: CHashXOF<Keccak, ShakeOpts> =\n  /* @__PURE__ */\n  genShake(0x1f, 168, 32, /* @__PURE__ */ oidNist(0x0b));\n/** SHAKE256 XOF with 512-bit output (NIST version). */\nexport const shake256_64: CHashXOF<Keccak, ShakeOpts> =\n  /* @__PURE__ */\n  genShake(0x1f, 136, 64, /* @__PURE__ */ oidNist(0x0c));\n"],"names":["patchFetch"],"mappings":"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E,KAAM,kBACN,QAAS,CACP,uBACA,0BACA,eACA,gBACA,iBACA,wBACD,AACH,EACA,CACE,KAAM,8BACN,QAAS,CACP,uBACA,4BACA,mCACA,oBACA,6BACD,AACH,EACD,CACD,KAAM,CACJ,gBACA,2BACA,sCACA,iBACA,iCACA,4BACA,gBACD,CACD,eAAgB,CACd,4CACA,qBACA,sCACA,+CACA,+BACD,AACH,EACA,UAAa,CACX,KAAM,sBACN,SAAU,yLACV,gBAAiB,CACf,mCACA,uBACA,kBACA,4BACA,qBACA,uBACD,CACD,gBAAiB,CACf,CAAE,QAAS,+BAAgC,SAAU,EAAG,YAAa,qBAAsB,EAC3F,CAAE,QAAS,2BAA4B,SAAU,EAAG,YAAa,6BAA8B,EAC/F,CAAE,QAAS,+BAAgC,SAAU,EAAG,YAAa,gCAAiC,EACtG,CAAE,QAAS,wBAAyB,SAAU,EAAG,YAAa,mBAAoB,EAClF,CAAE,QAAS,0BAA2B,SAAU,EAAG,YAAa,wBAAyB,EACzF,CAAE,QAAS,sBAAuB,SAAU,EAAG,YAAa,0BAA2B,EACvF,CAAE,QAAS,cAAe,SAAU,EAAG,YAAa,2BAA4B,EACjF,CACD,cAAe,CACb,CACE,KAAM,4BACN,QAAS,CACP,mCACA,6BACA,0BACA,4BACA,+BACA,kCACA,kCACA,0CAEJ,AADG,EAEH,CACE,KAAM,4BACN,QAAS,CACP,qBACA,mCACA,0CACA,uCACA,gBACA,kBACD,AACH,EACA,CACE,KAAM,qBACN,QAAS,CACP,gCACA,+BACA,wBACA,+BACA,uBACA,oBACD,AACH,EACD,CACD,KAAM,CACJ,kBACA,4BACA,kCACA,gCACA,wBACA,cACA,sBACA,4BACD,CACD,eAAgB,CACd,yBACA,uBACA,+BACA,6BACA,4BACD,AACH,EACA,KAAQ,CACN,KAAM,oBACN,SAAU,8JACV,gBAAiB,CACf,iCACA,YACA,uBACA,iBACA,mCACD,CACD,gBAAiB,CACf,CAAE,QAAS,0BAA2B,SAAU,EAAG,YAAa,kCAAmC,EACnG,CAAE,QAAS,iCAAkC,SAAU,EAAG,YAAa,eAAgB,EACvF,CAA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","ignoreList":[0,1,2,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,43,44,45,48,49,50,51,52,53,54]}