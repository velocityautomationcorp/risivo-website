{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/user/webapp/hooks/useAiChat.ts"],"sourcesContent":["'use client';\n\nimport { useState, useCallback, useRef, useEffect } from 'react';\nimport { Message } from '@/components/ai/MessageBubble';\n\ninterface UseAiChatOptions {\n  subAccountId: string;\n  userId: string;\n  conversationId?: string;\n  onError?: (error: Error) => void;\n}\n\ninterface UseAiChatReturn {\n  messages: Message[];\n  isLoading: boolean;\n  error: string | null;\n  sendMessage: (content: string) => Promise<void>;\n  clearMessages: () => void;\n  loadConversation: (conversationId: string) => Promise<void>;\n}\n\nexport function useAiChat({ \n  subAccountId,\n  userId,\n  conversationId: initialConversationId,\n  onError \n}: UseAiChatOptions): UseAiChatReturn {\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [conversationId, setConversationId] = useState<string | undefined>(initialConversationId);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  // Auto-scroll to bottom when new messages arrive\n  const scrollToBottom = useCallback(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, []);\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages, scrollToBottom]);\n\n  // Load conversation history\n  const loadConversation = useCallback(async (convId: string) => {\n    try {\n      setIsLoading(true);\n      setError(null);\n\n      const response = await fetch(`/api/v1/ai/chat?conversationId=${convId}`);\n      \n      if (!response.ok) {\n        throw new Error('Failed to load conversation');\n      }\n\n      const data = await response.json();\n      \n      if (data.success && data.conversation) {\n        // Parse messages from conversation\n        const loadedMessages: Message[] = data.conversation.messages || [];\n        setMessages(loadedMessages);\n        setConversationId(convId);\n      }\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Failed to load conversation';\n      setError(errorMessage);\n      onError?.(err instanceof Error ? err : new Error(errorMessage));\n    } finally {\n      setIsLoading(false);\n    }\n  }, [onError]);\n\n  // Send a new message\n  const sendMessage = useCallback(async (content: string) => {\n    if (!content.trim() || isLoading) return;\n\n    const userMessage: Message = {\n      id: `msg_${Date.now()}_user`,\n      role: 'user',\n      content: content.trim(),\n      timestamp: new Date(),\n    };\n\n    // Add user message immediately\n    setMessages((prev) => [...prev, userMessage]);\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const response = await fetch('/api/v1/ai/chat', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          message: content.trim(),\n          subAccountId,\n          userId,\n          conversationId,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Failed to send message');\n      }\n\n      const data = await response.json();\n\n      if (data.success) {\n        // Add AI response\n        const aiMessage: Message = {\n          id: data.data?.message?.id || `msg_${Date.now()}_ai`,\n          role: 'assistant',\n          content: data.data?.message?.content || data.response || 'I processed your request.',\n          timestamp: new Date(data.data?.message?.createdAt || Date.now()),\n          functionCalls: data.functionCalls?.map((fc: any) => ({\n            name: fc.name,\n            arguments: fc.args,\n            result: fc.response,\n            status: 'success' as const,\n          })),\n        };\n\n        setMessages((prev) => [...prev, aiMessage]);\n\n        // Update conversation ID if this was the first message\n        if (data.data?.conversationId && !conversationId) {\n          setConversationId(data.data.conversationId);\n        }\n      } else {\n        throw new Error(data.error || 'Failed to get AI response');\n      }\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Failed to send message';\n      setError(errorMessage);\n      onError?.(err instanceof Error ? err : new Error(errorMessage));\n\n      // Add error message to chat\n      const errorMsg: Message = {\n        id: `msg_${Date.now()}_error`,\n        role: 'assistant',\n        content: `Sorry, I encountered an error: ${errorMessage}`,\n        timestamp: new Date(),\n      };\n      setMessages((prev) => [...prev, errorMsg]);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [subAccountId, userId, conversationId, isLoading, onError]);\n\n  // Clear all messages\n  const clearMessages = useCallback(() => {\n    setMessages([]);\n    setConversationId(undefined);\n    setError(null);\n  }, []);\n\n  return {\n    messages,\n    isLoading,\n    error,\n    sendMessage,\n    clearMessages,\n    loadConversation,\n  };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 182, "column": 0}, "map": {"version":3,"sources":["file:///home/user/webapp/components/ai/MessageBubble.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\n\nexport interface Message {\n  id: string;\n  role: 'user' | 'assistant';\n  content: string;\n  timestamp: Date | string;\n  functionCalls?: FunctionCall[];\n}\n\nexport interface FunctionCall {\n  name: string;\n  arguments: any;\n  result?: any;\n  status: 'pending' | 'success' | 'error';\n}\n\ninterface MessageBubbleProps {\n  message: Message;\n}\n\nexport function MessageBubble({ message }: MessageBubbleProps) {\n  const isUser = message.role === 'user';\n  const timestamp = typeof message.timestamp === 'string' \n    ? new Date(message.timestamp) \n    : message.timestamp;\n\n  return (\n    <div className={`flex ${isUser ? 'justify-end' : 'justify-start'} mb-4`}>\n      <div className={`flex ${isUser ? 'flex-row-reverse' : 'flex-row'} items-start gap-3 max-w-[80%]`}>\n        {/* Avatar */}\n        <div className={`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-white font-semibold ${\n          isUser ? 'bg-blue-600' : 'bg-gradient-to-br from-purple-600 to-pink-600'\n        }`}>\n          {isUser ? 'üë§' : 'ü§ñ'}\n        </div>\n\n        {/* Message Content */}\n        <div className=\"flex flex-col gap-2\">\n          {/* Message Bubble */}\n          <div className={`rounded-2xl px-4 py-3 ${\n            isUser \n              ? 'bg-blue-600 text-white' \n              : 'bg-gray-100 text-gray-900 border border-gray-200'\n          }`}>\n            <p className=\"text-sm leading-relaxed whitespace-pre-wrap\">{message.content}</p>\n          </div>\n\n          {/* Function Calls */}\n          {message.functionCalls && message.functionCalls.length > 0 && (\n            <div className=\"space-y-2\">\n              {message.functionCalls.map((func, index) => (\n                <FunctionCallDisplay key={index} functionCall={func} />\n              ))}\n            </div>\n          )}\n\n          {/* Timestamp */}\n          <span className={`text-xs text-gray-500 ${isUser ? 'text-right' : 'text-left'}`}>\n            {timestamp.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true })}\n          </span>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction FunctionCallDisplay({ functionCall }: { functionCall: FunctionCall }) {\n  const statusIcons = {\n    pending: '‚è≥',\n    success: '‚úÖ',\n    error: '‚ùå',\n  };\n\n  const statusColors = {\n    pending: 'bg-yellow-50 border-yellow-200 text-yellow-800',\n    success: 'bg-green-50 border-green-200 text-green-800',\n    error: 'bg-red-50 border-red-200 text-red-800',\n  };\n\n  return (\n    <div className={`rounded-lg border p-3 text-xs ${statusColors[functionCall.status]}`}>\n      <div className=\"flex items-center gap-2 mb-1\">\n        <span>{statusIcons[functionCall.status]}</span>\n        <span className=\"font-semibold\">Function: {functionCall.name}()</span>\n      </div>\n      \n      {functionCall.result && (\n        <div className=\"mt-2 font-mono text-xs opacity-80\">\n          <pre className=\"whitespace-pre-wrap\">\n            {typeof functionCall.result === 'string' \n              ? functionCall.result \n              : JSON.stringify(functionCall.result, null, 2)\n            }\n          </pre>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;AAuBO,SAAS,cAAc,EAAE,OAAO,EAAsB;IAC3D,MAAM,SAAS,QAAQ,IAAI,KAAK;IAChC,MAAM,YAAY,OAAO,QAAQ,SAAS,KAAK,WAC3C,IAAI,KAAK,QAAQ,SAAS,IAC1B,QAAQ,SAAS;IAErB,qBACE,6LAAC;QAAI,WAAW,CAAC,KAAK,EAAE,SAAS,gBAAgB,gBAAgB,KAAK,CAAC;kBACrE,cAAA,6LAAC;YAAI,WAAW,CAAC,KAAK,EAAE,SAAS,qBAAqB,WAAW,8BAA8B,CAAC;;8BAE9F,6LAAC;oBAAI,WAAW,CAAC,6FAA6F,EAC5G,SAAS,gBAAgB,iDACzB;8BACC,SAAS,OAAO;;;;;;8BAInB,6LAAC;oBAAI,WAAU;;sCAEb,6LAAC;4BAAI,WAAW,CAAC,sBAAsB,EACrC,SACI,2BACA,oDACJ;sCACA,cAAA,6LAAC;gCAAE,WAAU;0CAA+C,QAAQ,OAAO;;;;;;;;;;;wBAI5E,QAAQ,aAAa,IAAI,QAAQ,aAAa,CAAC,MAAM,GAAG,mBACvD,6LAAC;4BAAI,WAAU;sCACZ,QAAQ,aAAa,CAAC,GAAG,CAAC,CAAC,MAAM,sBAChC,6LAAC;oCAAgC,cAAc;mCAArB;;;;;;;;;;sCAMhC,6LAAC;4BAAK,WAAW,CAAC,sBAAsB,EAAE,SAAS,eAAe,aAAa;sCAC5E,UAAU,kBAAkB,CAAC,SAAS;gCAAE,MAAM;gCAAW,QAAQ;gCAAW,QAAQ;4BAAK;;;;;;;;;;;;;;;;;;;;;;;AAMtG;KA5CgB;AA8ChB,SAAS,oBAAoB,EAAE,YAAY,EAAkC;IAC3E,MAAM,cAAc;QAClB,SAAS;QACT,SAAS;QACT,OAAO;IACT;IAEA,MAAM,eAAe;QACnB,SAAS;QACT,SAAS;QACT,OAAO;IACT;IAEA,qBACE,6LAAC;QAAI,WAAW,CAAC,8BAA8B,EAAE,YAAY,CAAC,aAAa,MAAM,CAAC,EAAE;;0BAClF,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;kCAAM,WAAW,CAAC,aAAa,MAAM,CAAC;;;;;;kCACvC,6LAAC;wBAAK,WAAU;;4BAAgB;4BAAW,aAAa,IAAI;4BAAC;;;;;;;;;;;;;YAG9D,aAAa,MAAM,kBAClB,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;8BACZ,OAAO,aAAa,MAAM,KAAK,WAC5B,aAAa,MAAM,GACnB,KAAK,SAAS,CAAC,aAAa,MAAM,EAAE,MAAM;;;;;;;;;;;;;;;;;AAO1D;MAhCS"}},
    {"offset": {"line": 343, "column": 0}, "map": {"version":3,"sources":["file:///home/user/webapp/components/ai/TypingIndicator.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\n\nexport function TypingIndicator() {\n  return (\n    <div className=\"flex justify-start mb-4\">\n      <div className=\"flex items-start gap-3 max-w-[80%]\">\n        {/* AI Avatar */}\n        <div className=\"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-white font-semibold bg-gradient-to-br from-purple-600 to-pink-600\">\n          ü§ñ\n        </div>\n\n        {/* Typing Animation */}\n        <div className=\"bg-gray-100 border border-gray-200 rounded-2xl px-4 py-3\">\n          <div className=\"flex items-center gap-1\">\n            <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '0ms' }} />\n            <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '150ms' }} />\n            <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\" style={{ animationDelay: '300ms' }} />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;AAIO,SAAS;IACd,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BAEb,6LAAC;oBAAI,WAAU;8BAA6I;;;;;;8BAK5J,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;gCAAkD,OAAO;oCAAE,gBAAgB;gCAAM;;;;;;0CAChG,6LAAC;gCAAI,WAAU;gCAAkD,OAAO;oCAAE,gBAAgB;gCAAQ;;;;;;0CAClG,6LAAC;gCAAI,WAAU;gCAAkD,OAAO;oCAAE,gBAAgB;gCAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM9G;KApBgB"}},
    {"offset": {"line": 432, "column": 0}, "map": {"version":3,"sources":["file:///home/user/webapp/lib/theme/types.ts"],"sourcesContent":["// ==========================================\n// RISIVO CRM - Theme System Type Definitions\n// ==========================================\n\n/**\n * Complete theme configuration for a sub-account\n * All colors follow CSS color format (hex, rgb, hsl)\n */\nexport interface SubAccountTheme {\n  id?: string\n  subAccountId: string\n  \n  // Logo\n  logoUrl?: string | null\n  logoWidth?: number\n  logoHeight?: number\n  \n  // Favicon (browser tab icon)\n  faviconUrl?: string | null\n  \n  // Primary Colors (Sidebar, Main Actions)\n  primaryColor: string          // Main brand color\n  primaryHover: string          // Primary color hover state\n  primaryForeground: string     // Text on primary background\n  primaryAccent?: string        // Lighter variant of primary\n  \n  // Secondary Colors (Accents, Highlights)\n  secondaryColor: string        // Secondary brand color (buttons)\n  secondaryHover: string        // Secondary hover state\n  secondaryForeground: string   // Text on secondary background\n  \n  // Background Colors\n  backgroundColor: string       // Main page background\n  surfaceColor: string          // Cards, modals background\n  surfaceHover: string          // Surface hover state\n  \n  // Text Colors\n  textPrimary: string           // Main text color\n  textSecondary: string         // Muted text color\n  textMuted: string             // Disabled/placeholder text\n  \n  // Border Colors\n  borderColor: string           // Default border color\n  borderHover: string           // Border hover state\n  \n  // Status Colors\n  successColor: string\n  warningColor: string\n  errorColor: string\n  infoColor: string\n  \n  // Sidebar-specific\n  sidebarBg?: string\n  sidebarText?: string\n  sidebarTextMuted?: string\n  sidebarHover?: string\n  sidebarActive: string\n  sidebarActiveForeground: string\n  \n  // Button-specific\n  buttonPrimaryBg?: string\n  buttonPrimaryText: string\n  buttonSecondaryBg: string\n  buttonSecondaryText?: string\n  \n  // Header/Navigation\n  headerBg: string\n  headerText: string\n  headerBorder: string\n  \n  // Input fields\n  inputBg: string\n  inputBorder: string\n  inputFocus?: string\n  inputText: string\n  inputPlaceholder: string\n  \n  // Modal/Overlay\n  modalBg: string\n  overlayBg: string\n  \n  // Shadow\n  shadowColor: string\n  \n  // Border radius\n  borderRadiusSmall: string\n  borderRadiusMedium: string\n  borderRadiusLarge: string\n  borderRadiusFull: string\n  \n  // Typography\n  fontFamily: string\n  fontSizeBase: string\n  fontWeightNormal: string\n  fontWeightMedium: string\n  fontWeightBold: string\n  \n  // Meta\n  colorSource: 'manual' | 'logo_extracted' | 'preset'\n  presetName?: string | null\n  \n  // Brand Voice (for AI content generation)\n  brandVoiceToneName?: string | null\n  brandVoiceTargetAudience?: string | null\n  brandVoicePersonality?: string | null\n  brandVoiceWritingStyle?: string | null\n  brandVoiceKeyPhrases?: string | null\n  brandVoiceAvoidPhrases?: string | null\n  brandVoiceSampleCopy?: string | null\n  \n  createdAt?: string\n  updatedAt?: string\n}\n\n/**\n * Theme preset for quick selection\n */\nexport interface ThemePreset {\n  id: string\n  name: string\n  displayName: string\n  description?: string\n  category: 'general' | 'industry' | 'seasonal'\n  thumbnail?: string\n  \n  // Core colors\n  primaryColor: string\n  primaryHover?: string\n  secondaryColor: string\n  secondaryHover?: string\n  backgroundColor?: string\n  surfaceColor?: string\n  textPrimary?: string\n  textSecondary?: string\n  \n  // Status colors\n  successColor?: string\n  warningColor?: string\n  errorColor?: string\n  infoColor?: string\n  \n  isDefault: boolean\n  isActive: boolean\n  displayOrder: number\n}\n\n/**\n * CSS variables mapping for theme injection\n */\nexport interface ThemeCSSVariables {\n  // Primary\n  '--theme-primary': string\n  '--theme-primary-hover': string\n  '--theme-primary-foreground': string\n  '--theme-primary-accent': string\n  \n  // Secondary\n  '--theme-secondary': string\n  '--theme-secondary-hover': string\n  '--theme-secondary-foreground': string\n  \n  // Background\n  '--theme-background': string\n  '--theme-surface': string\n  '--theme-surface-hover': string\n  \n  // Text\n  '--theme-text-primary': string\n  '--theme-text-secondary': string\n  '--theme-text-muted': string\n  \n  // Border\n  '--theme-border': string\n  '--theme-border-hover': string\n  \n  // Status\n  '--theme-success': string\n  '--theme-warning': string\n  '--theme-error': string\n  '--theme-info': string\n  \n  // Sidebar\n  '--theme-sidebar-bg': string\n  '--theme-sidebar-text': string\n  '--theme-sidebar-hover': string\n  '--theme-sidebar-active': string\n  '--theme-sidebar-active-foreground': string\n  \n  // Button\n  '--theme-button-primary-bg': string\n  '--theme-button-primary-text': string\n  '--theme-button-secondary-bg': string\n  '--theme-button-secondary-text': string\n  \n  // Header\n  '--theme-header-bg': string\n  '--theme-header-text': string\n  '--theme-header-border': string\n  \n  // Input\n  '--theme-input-bg': string\n  '--theme-input-border': string\n  '--theme-input-focus': string\n  '--theme-input-text': string\n  '--theme-input-placeholder': string\n  \n  // Modal\n  '--theme-modal-bg': string\n  '--theme-overlay-bg': string\n  \n  // Shadow\n  '--theme-shadow': string\n  \n  // Radius\n  '--theme-radius-sm': string\n  '--theme-radius-md': string\n  '--theme-radius-lg': string\n  '--theme-radius-full': string\n  \n  // Typography\n  '--theme-font-family': string\n  '--theme-font-size-base': string\n  '--theme-font-normal': string\n  '--theme-font-medium': string\n  '--theme-font-bold': string\n}\n\n/**\n * Extracted colors from logo\n */\nexport interface ExtractedLogoColors {\n  dominant: string\n  palette: string[]\n  vibrant?: string\n  muted?: string\n  darkVibrant?: string\n  darkMuted?: string\n  lightVibrant?: string\n  lightMuted?: string\n}\n\n/**\n * Theme update request\n */\nexport interface ThemeUpdateRequest {\n  subAccountId: string\n  theme: Partial<SubAccountTheme>\n  applyPreset?: string  // Preset name to apply\n  extractFromLogo?: string  // Logo URL to extract colors from\n}\n\n/**\n * API Response types\n */\nexport interface ThemeApiResponse<T = SubAccountTheme> {\n  success: boolean\n  data?: T\n  error?: string\n  message?: string\n}\n\nexport interface ThemePresetsResponse {\n  success: boolean\n  data: ThemePreset[]\n  error?: string\n}\n"],"names":[],"mappings":"AAAA,6CAA6C;AAC7C,6CAA6C;AAC7C,6CAA6C;AAE7C;;;CAGC"}},
    {"offset": {"line": 447, "column": 0}, "map": {"version":3,"sources":["file:///home/user/webapp/lib/theme/defaults.ts"],"sourcesContent":["// ==========================================\n// RISIVO CRM - Default Theme Configuration\n// ==========================================\n\nimport { SubAccountTheme, ThemeCSSVariables } from './types'\n\n/**\n * RISIVO Default Theme - The official brand colors\n * This is the baseline theme all sub-accounts inherit from\n */\nexport const RISIVO_DEFAULT_THEME: SubAccountTheme = {\n  subAccountId: 'default',\n  \n  // Logo (default RISIVO logo)\n  logoUrl: '/risivo-logo.png',\n  logoWidth: 150,\n  logoHeight: 34,\n  \n  // Favicon (browser tab icon)\n  faviconUrl: '/risivo-favicon.png',\n  \n  // Primary Colors - RISIVO Blue\n  primaryColor: '#3B82F6',\n  primaryHover: '#2563EB',\n  primaryForeground: '#FFFFFF',\n  primaryAccent: '#60A5FA',\n  \n  // Secondary Colors - RISIVO Green\n  secondaryColor: '#10B981',\n  secondaryHover: '#059669',\n  secondaryForeground: '#FFFFFF',\n  \n  // Background Colors\n  backgroundColor: '#F9FAFB',\n  surfaceColor: '#FFFFFF',\n  surfaceHover: '#F3F4F6',\n  \n  // Text Colors\n  textPrimary: '#111827',\n  textSecondary: '#6B7280',\n  textMuted: '#9CA3AF',\n  \n  // Border Colors\n  borderColor: '#E5E7EB',\n  borderHover: '#D1D5DB',\n  \n  // Status Colors\n  successColor: '#10B981',\n  warningColor: '#F59E0B',\n  errorColor: '#EF4444',\n  infoColor: '#3B82F6',\n  \n  // Sidebar (inherits from primary by default)\n  sidebarBg: '#3B82F6',\n  sidebarText: '#FFFFFF',\n  sidebarHover: 'rgba(255, 255, 255, 0.2)',\n  sidebarActive: '#FFFFFF',\n  sidebarActiveForeground: '#111827',\n  \n  // Button\n  buttonPrimaryBg: '#10B981',\n  buttonPrimaryText: '#FFFFFF',\n  buttonSecondaryBg: '#FFFFFF',\n  buttonSecondaryText: '#3B82F6',\n  \n  // Header\n  headerBg: '#FFFFFF',\n  headerText: '#374151',\n  headerBorder: '#E5E7EB',\n  \n  // Input\n  inputBg: '#FFFFFF',\n  inputBorder: '#D1D5DB',\n  inputFocus: '#3B82F6',\n  inputText: '#111827',\n  inputPlaceholder: '#9CA3AF',\n  \n  // Modal\n  modalBg: '#FFFFFF',\n  overlayBg: 'rgba(0, 0, 0, 0.5)',\n  \n  // Shadow\n  shadowColor: 'rgba(0, 0, 0, 0.1)',\n  \n  // Border Radius\n  borderRadiusSmall: '0.375rem',\n  borderRadiusMedium: '0.5rem',\n  borderRadiusLarge: '0.75rem',\n  borderRadiusFull: '9999px',\n  \n  // Typography\n  fontFamily: 'var(--font-poppins), system-ui, sans-serif',\n  fontSizeBase: '14px',\n  fontWeightNormal: '400',\n  fontWeightMedium: '500',\n  fontWeightBold: '700',\n  \n  // Meta\n  colorSource: 'preset',\n  presetName: 'risivo',\n  \n  // Brand Voice (empty by default)\n  brandVoiceToneName: null,\n  brandVoiceTargetAudience: null,\n  brandVoicePersonality: null,\n  brandVoiceWritingStyle: null,\n  brandVoiceKeyPhrases: null,\n  brandVoiceAvoidPhrases: null,\n  brandVoiceSampleCopy: null,\n}\n\n/**\n * Convert SubAccountTheme to CSS Variables\n */\nexport function themeToCSSVariables(theme: Partial<SubAccountTheme>): ThemeCSSVariables {\n  const merged = { ...RISIVO_DEFAULT_THEME, ...theme }\n  \n  return {\n    // Primary\n    '--theme-primary': merged.primaryColor,\n    '--theme-primary-hover': merged.primaryHover,\n    '--theme-primary-foreground': merged.primaryForeground,\n    '--theme-primary-accent': merged.primaryAccent || merged.primaryColor,\n    \n    // Secondary\n    '--theme-secondary': merged.secondaryColor,\n    '--theme-secondary-hover': merged.secondaryHover,\n    '--theme-secondary-foreground': merged.secondaryForeground,\n    \n    // Background\n    '--theme-background': merged.backgroundColor,\n    '--theme-surface': merged.surfaceColor,\n    '--theme-surface-hover': merged.surfaceHover,\n    \n    // Text\n    '--theme-text-primary': merged.textPrimary,\n    '--theme-text-secondary': merged.textSecondary,\n    '--theme-text-muted': merged.textMuted,\n    \n    // Border\n    '--theme-border': merged.borderColor,\n    '--theme-border-hover': merged.borderHover,\n    \n    // Status\n    '--theme-success': merged.successColor,\n    '--theme-warning': merged.warningColor,\n    '--theme-error': merged.errorColor,\n    '--theme-info': merged.infoColor,\n    \n    // Sidebar\n    '--theme-sidebar-bg': merged.sidebarBg || merged.primaryColor,\n    '--theme-sidebar-text': merged.sidebarText || merged.primaryForeground,\n    '--theme-sidebar-hover': merged.sidebarHover || 'rgba(255, 255, 255, 0.2)',\n    '--theme-sidebar-active': merged.sidebarActive,\n    '--theme-sidebar-active-foreground': merged.sidebarActiveForeground,\n    \n    // Button\n    '--theme-button-primary-bg': merged.buttonPrimaryBg || merged.secondaryColor,\n    '--theme-button-primary-text': merged.buttonPrimaryText,\n    '--theme-button-secondary-bg': merged.buttonSecondaryBg,\n    '--theme-button-secondary-text': merged.buttonSecondaryText || merged.primaryColor,\n    \n    // Header\n    '--theme-header-bg': merged.headerBg,\n    '--theme-header-text': merged.headerText,\n    '--theme-header-border': merged.headerBorder,\n    \n    // Input\n    '--theme-input-bg': merged.inputBg,\n    '--theme-input-border': merged.inputBorder,\n    '--theme-input-focus': merged.inputFocus || merged.primaryColor,\n    '--theme-input-text': merged.inputText,\n    '--theme-input-placeholder': merged.inputPlaceholder,\n    \n    // Modal\n    '--theme-modal-bg': merged.modalBg,\n    '--theme-overlay-bg': merged.overlayBg,\n    \n    // Shadow\n    '--theme-shadow': merged.shadowColor,\n    \n    // Radius\n    '--theme-radius-sm': merged.borderRadiusSmall,\n    '--theme-radius-md': merged.borderRadiusMedium,\n    '--theme-radius-lg': merged.borderRadiusLarge,\n    '--theme-radius-full': merged.borderRadiusFull,\n    \n    // Typography\n    '--theme-font-family': merged.fontFamily,\n    '--theme-font-size-base': merged.fontSizeBase,\n    '--theme-font-normal': merged.fontWeightNormal,\n    '--theme-font-medium': merged.fontWeightMedium,\n    '--theme-font-bold': merged.fontWeightBold,\n  }\n}\n\n/**\n * Generate CSS string from theme\n */\nexport function generateThemeCSS(theme: Partial<SubAccountTheme>): string {\n  const variables = themeToCSSVariables(theme)\n  \n  const cssVars = Object.entries(variables)\n    .map(([key, value]) => `  ${key}: ${value};`)\n    .join('\\n')\n  \n  return `:root {\\n${cssVars}\\n}`\n}\n\n/**\n * Generate inline style object from theme (for React components)\n */\nexport function themeToInlineStyle(theme: Partial<SubAccountTheme>): Record<string, string> {\n  const variables = themeToCSSVariables(theme)\n  const style: Record<string, string> = {}\n  \n  Object.entries(variables).forEach(([key, value]) => {\n    // Convert CSS variable name to camelCase for inline styles\n    style[key] = value\n  })\n  \n  return style\n}\n\n/**\n * Apply theme to document root\n */\nexport function applyThemeToDocument(theme: Partial<SubAccountTheme>): void {\n  if (typeof window === 'undefined') return\n  \n  const variables = themeToCSSVariables(theme)\n  const root = document.documentElement\n  \n  Object.entries(variables).forEach(([key, value]) => {\n    root.style.setProperty(key, value)\n  })\n}\n\n/**\n * Get computed theme value from CSS variable\n */\nexport function getThemeValue(variableName: string): string {\n  if (typeof window === 'undefined') return ''\n  \n  return getComputedStyle(document.documentElement)\n    .getPropertyValue(variableName)\n    .trim()\n}\n\n/**\n * Lighten a hex color\n */\nexport function lightenColor(hex: string, percent: number): string {\n  const num = parseInt(hex.replace('#', ''), 16)\n  const amt = Math.round(2.55 * percent)\n  const R = (num >> 16) + amt\n  const G = (num >> 8 & 0x00FF) + amt\n  const B = (num & 0x0000FF) + amt\n  return '#' + (\n    0x1000000 +\n    (R < 255 ? (R < 1 ? 0 : R) : 255) * 0x10000 +\n    (G < 255 ? (G < 1 ? 0 : G) : 255) * 0x100 +\n    (B < 255 ? (B < 1 ? 0 : B) : 255)\n  ).toString(16).slice(1).toUpperCase()\n}\n\n/**\n * Darken a hex color\n */\nexport function darkenColor(hex: string, percent: number): string {\n  return lightenColor(hex, -percent)\n}\n\n/**\n * Generate color variants from a base color\n */\nexport function generateColorVariants(baseColor: string): {\n  base: string\n  hover: string\n  light: string\n  dark: string\n} {\n  return {\n    base: baseColor,\n    hover: darkenColor(baseColor, 10),\n    light: lightenColor(baseColor, 20),\n    dark: darkenColor(baseColor, 20),\n  }\n}\n\n/**\n * Check if a color is light or dark (for text contrast)\n */\nexport function isLightColor(hex: string): boolean {\n  const color = hex.replace('#', '')\n  const r = parseInt(color.substring(0, 2), 16)\n  const g = parseInt(color.substring(2, 4), 16)\n  const b = parseInt(color.substring(4, 6), 16)\n  \n  // Calculate luminance\n  const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255\n  return luminance > 0.5\n}\n\n/**\n * Get contrasting text color (white or black)\n */\nexport function getContrastingTextColor(bgColor: string): string {\n  return isLightColor(bgColor) ? '#111827' : '#FFFFFF'\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 692, "column": 0}, "map": {"version":3,"sources":["file:///home/user/webapp/lib/theme/color-extractor.ts"],"sourcesContent":["// ==========================================\n// RISIVO CRM - Logo Color Extraction Utility\n// ==========================================\n\nimport { ExtractedLogoColors, SubAccountTheme } from './types'\nimport { \n  generateColorVariants, \n  getContrastingTextColor, \n  darkenColor, \n  lightenColor \n} from './defaults'\n\n/**\n * Extract dominant colors from an image\n * Uses Canvas API to analyze pixel data\n */\nexport async function extractColorsFromImage(imageUrl: string): Promise<ExtractedLogoColors> {\n  return new Promise((resolve, reject) => {\n    if (typeof window === 'undefined') {\n      reject(new Error('Color extraction requires browser environment'))\n      return\n    }\n\n    const img = new Image()\n    img.crossOrigin = 'Anonymous'\n    \n    img.onload = () => {\n      try {\n        const canvas = document.createElement('canvas')\n        const ctx = canvas.getContext('2d')\n        \n        if (!ctx) {\n          reject(new Error('Could not create canvas context'))\n          return\n        }\n        \n        // Scale down for performance (max 100x100)\n        const scale = Math.min(100 / img.width, 100 / img.height, 1)\n        canvas.width = Math.floor(img.width * scale)\n        canvas.height = Math.floor(img.height * scale)\n        \n        ctx.drawImage(img, 0, 0, canvas.width, canvas.height)\n        \n        const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height)\n        const colors = analyzePixelData(imageData.data)\n        \n        resolve(colors)\n      } catch (error) {\n        reject(error)\n      }\n    }\n    \n    img.onerror = () => {\n      reject(new Error('Failed to load image'))\n    }\n    \n    img.src = imageUrl\n  })\n}\n\n/**\n * Analyze pixel data to extract dominant colors\n */\nfunction analyzePixelData(data: Uint8ClampedArray): ExtractedLogoColors {\n  const colorCounts: Map<string, { count: number; r: number; g: number; b: number }> = new Map()\n  \n  // Sample every 4th pixel for performance\n  for (let i = 0; i < data.length; i += 16) {\n    const r = data[i]\n    const g = data[i + 1]\n    const b = data[i + 2]\n    const a = data[i + 3]\n    \n    // Skip transparent or near-white/black pixels\n    if (a < 128) continue\n    if (r > 240 && g > 240 && b > 240) continue\n    if (r < 15 && g < 15 && b < 15) continue\n    \n    // Quantize colors to reduce unique values\n    const qr = Math.round(r / 32) * 32\n    const qg = Math.round(g / 32) * 32\n    const qb = Math.round(b / 32) * 32\n    \n    const key = `${qr},${qg},${qb}`\n    const existing = colorCounts.get(key)\n    \n    if (existing) {\n      existing.count++\n    } else {\n      colorCounts.set(key, { count: 1, r: qr, g: qg, b: qb })\n    }\n  }\n  \n  // Sort by frequency\n  const sortedColors = Array.from(colorCounts.entries())\n    .sort((a, b) => b[1].count - a[1].count)\n    .slice(0, 10)\n  \n  // Convert to hex\n  const palette = sortedColors.map(([_, { r, g, b }]) => rgbToHex(r, g, b))\n  \n  // Categorize colors by vibrancy\n  const { vibrant, muted, dark, light } = categorizeColors(sortedColors)\n  \n  return {\n    dominant: palette[0] || '#3B82F6',\n    palette,\n    vibrant: vibrant || palette[0],\n    muted: muted || darkenColor(palette[0] || '#3B82F6', 20),\n    darkVibrant: dark?.vibrant,\n    darkMuted: dark?.muted,\n    lightVibrant: light?.vibrant,\n    lightMuted: light?.muted,\n  }\n}\n\n/**\n * Convert RGB to hex\n */\nfunction rgbToHex(r: number, g: number, b: number): string {\n  return '#' + [r, g, b]\n    .map(x => Math.min(255, Math.max(0, x)).toString(16).padStart(2, '0'))\n    .join('')\n    .toUpperCase()\n}\n\n/**\n * Calculate color saturation\n */\nfunction getSaturation(r: number, g: number, b: number): number {\n  const max = Math.max(r, g, b)\n  const min = Math.min(r, g, b)\n  return max === 0 ? 0 : (max - min) / max\n}\n\n/**\n * Calculate color lightness\n */\nfunction getLightness(r: number, g: number, b: number): number {\n  return (Math.max(r, g, b) + Math.min(r, g, b)) / 510\n}\n\n/**\n * Categorize colors into vibrant, muted, dark, light\n */\nfunction categorizeColors(colors: [string, { count: number; r: number; g: number; b: number }][]) {\n  let vibrant: string | undefined\n  let muted: string | undefined\n  const dark: { vibrant?: string; muted?: string } = {}\n  const light: { vibrant?: string; muted?: string } = {}\n  \n  for (const [_, { r, g, b }] of colors) {\n    const saturation = getSaturation(r, g, b)\n    const lightness = getLightness(r, g, b)\n    const hex = rgbToHex(r, g, b)\n    \n    // Vibrant: High saturation\n    if (saturation > 0.5 && !vibrant) {\n      vibrant = hex\n    }\n    \n    // Muted: Low saturation\n    if (saturation < 0.3 && saturation > 0.1 && !muted) {\n      muted = hex\n    }\n    \n    // Dark variants\n    if (lightness < 0.35) {\n      if (saturation > 0.5 && !dark.vibrant) {\n        dark.vibrant = hex\n      }\n      if (saturation < 0.3 && !dark.muted) {\n        dark.muted = hex\n      }\n    }\n    \n    // Light variants\n    if (lightness > 0.65) {\n      if (saturation > 0.5 && !light.vibrant) {\n        light.vibrant = hex\n      }\n      if (saturation < 0.3 && !light.muted) {\n        light.muted = hex\n      }\n    }\n  }\n  \n  return { vibrant, muted, dark, light }\n}\n\n/**\n * Generate a complete theme from extracted logo colors\n */\nexport function generateThemeFromColors(\n  colors: ExtractedLogoColors,\n  options: {\n    preferDarkSidebar?: boolean\n    preserveStatusColors?: boolean\n  } = {}\n): Partial<SubAccountTheme> {\n  const { preferDarkSidebar = true, preserveStatusColors = true } = options\n  \n  // Primary color: Use dominant or vibrant\n  const primaryColor = colors.vibrant || colors.dominant\n  const primaryVariants = generateColorVariants(primaryColor)\n  \n  // Secondary color: Use second most common or complementary\n  const secondaryColor = colors.palette[1] || \n    colors.muted || \n    generateComplementaryColor(primaryColor)\n  const secondaryVariants = generateColorVariants(secondaryColor)\n  \n  // Sidebar color: Use dark vibrant if available, or darken primary\n  let sidebarBg = primaryColor\n  if (preferDarkSidebar && colors.darkVibrant) {\n    sidebarBg = colors.darkVibrant\n  } else if (preferDarkSidebar) {\n    sidebarBg = darkenColor(primaryColor, 15)\n  }\n  \n  const theme: Partial<SubAccountTheme> = {\n    // Primary\n    primaryColor,\n    primaryHover: primaryVariants.hover,\n    primaryForeground: getContrastingTextColor(primaryColor),\n    primaryAccent: primaryVariants.light,\n    \n    // Secondary\n    secondaryColor,\n    secondaryHover: secondaryVariants.hover,\n    secondaryForeground: getContrastingTextColor(secondaryColor),\n    \n    // Sidebar\n    sidebarBg,\n    sidebarText: getContrastingTextColor(sidebarBg),\n    sidebarHover: `rgba(255, 255, 255, 0.2)`,\n    \n    // Button uses secondary as primary action\n    buttonPrimaryBg: secondaryColor,\n    buttonPrimaryText: getContrastingTextColor(secondaryColor),\n    buttonSecondaryText: primaryColor,\n    \n    // Input focus uses primary\n    inputFocus: primaryColor,\n    \n    // Meta\n    colorSource: 'logo_extracted',\n  }\n  \n  // Optionally preserve standard status colors\n  if (!preserveStatusColors) {\n    theme.successColor = secondaryColor\n    theme.infoColor = primaryColor\n  }\n  \n  return theme\n}\n\n/**\n * Generate a complementary color\n */\nfunction generateComplementaryColor(hex: string): string {\n  const color = hex.replace('#', '')\n  let r = parseInt(color.substring(0, 2), 16)\n  let g = parseInt(color.substring(2, 4), 16)\n  let b = parseInt(color.substring(4, 6), 16)\n  \n  // Convert to HSL\n  const max = Math.max(r, g, b) / 255\n  const min = Math.min(r, g, b) / 255\n  const l = (max + min) / 2\n  \n  let h = 0\n  let s = 0\n  \n  if (max !== min) {\n    const d = max - min\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min)\n    \n    switch (Math.max(r, g, b) / 255) {\n      case max:\n        h = ((g - b) / 255 / d + (g < b ? 6 : 0)) / 6\n        break\n      case g / 255:\n        h = ((b - r) / 255 / d + 2) / 6\n        break\n      case b / 255:\n        h = ((r - g) / 255 / d + 4) / 6\n        break\n    }\n  }\n  \n  // Rotate hue by 180 degrees for complementary\n  h = (h + 0.5) % 1\n  \n  // Convert back to RGB\n  if (s === 0) {\n    r = g = b = Math.round(l * 255)\n  } else {\n    const hue2rgb = (p: number, q: number, t: number) => {\n      if (t < 0) t += 1\n      if (t > 1) t -= 1\n      if (t < 1/6) return p + (q - p) * 6 * t\n      if (t < 1/2) return q\n      if (t < 2/3) return p + (q - p) * (2/3 - t) * 6\n      return p\n    }\n    \n    const q = l < 0.5 ? l * (1 + s) : l + s - l * s\n    const p = 2 * l - q\n    \n    r = Math.round(hue2rgb(p, q, h + 1/3) * 255)\n    g = Math.round(hue2rgb(p, q, h) * 255)\n    b = Math.round(hue2rgb(p, q, h - 1/3) * 255)\n  }\n  \n  return rgbToHex(r, g, b)\n}\n\n/**\n * Server-safe version that returns placeholder if in Node environment\n */\nexport async function extractColorsFromImageSafe(imageUrl: string): Promise<ExtractedLogoColors> {\n  if (typeof window === 'undefined') {\n    // Return default colors for server-side\n    return {\n      dominant: '#3B82F6',\n      palette: ['#3B82F6', '#10B981', '#6B7280'],\n      vibrant: '#3B82F6',\n      muted: '#6B7280',\n    }\n  }\n  \n  return extractColorsFromImage(imageUrl)\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 958, "column": 0}, "map": {"version":3,"sources":["file:///home/user/webapp/lib/theme/index.ts"],"sourcesContent":["// ==========================================\n// RISIVO CRM - Theme System Exports\n// ==========================================\n\n// Types\nexport * from './types'\n\n// Default theme and utilities\nexport {\n  RISIVO_DEFAULT_THEME,\n  themeToCSSVariables,\n  generateThemeCSS,\n  themeToInlineStyle,\n  applyThemeToDocument,\n  getThemeValue,\n  lightenColor,\n  darkenColor,\n  generateColorVariants,\n  isLightColor,\n  getContrastingTextColor,\n} from './defaults'\n\n// Color extraction\nexport {\n  extractColorsFromImage,\n  extractColorsFromImageSafe,\n  generateThemeFromColors,\n} from './color-extractor'\n"],"names":[],"mappings":"AAAA,6CAA6C;AAC7C,oCAAoC;AACpC,6CAA6C;AAE7C,QAAQ;;AACR;AAEA,8BAA8B;AAC9B;AAcA,mBAAmB;AACnB"}},
    {"offset": {"line": 978, "column": 0}, "map": {"version":3,"sources":["file:///home/user/webapp/hooks/useTheme.ts"],"sourcesContent":["'use client'\n\n// ==========================================\n// RISIVO CRM - Theme Management Hook\n// ==========================================\n\nimport { useState, useEffect, useCallback, useMemo } from 'react'\nimport { \n  SubAccountTheme, \n  ThemePreset,\n  ThemeCSSVariables,\n  RISIVO_DEFAULT_THEME,\n  themeToCSSVariables,\n  applyThemeToDocument,\n} from '@/lib/theme'\n\ninterface UseThemeOptions {\n  subAccountId?: string\n  autoApply?: boolean  // Automatically apply theme to document\n  onThemeChange?: (theme: SubAccountTheme) => void\n  onError?: (error: Error) => void\n}\n\ninterface UseThemeReturn {\n  // Current theme state\n  theme: SubAccountTheme\n  cssVariables: ThemeCSSVariables\n  isLoading: boolean\n  error: string | null\n  \n  // Theme presets\n  presets: ThemePreset[]\n  presetsLoading: boolean\n  \n  // Actions\n  loadTheme: (subAccountId: string) => Promise<void>\n  saveTheme: (updates: Partial<SubAccountTheme>) => Promise<void>\n  applyPreset: (presetName: string) => Promise<void>\n  extractColorsFromLogo: (logoUrl: string) => Promise<Partial<SubAccountTheme>>\n  resetTheme: () => Promise<void>\n  \n  // Utilities\n  updateColor: (key: keyof SubAccountTheme, value: string) => void\n  applyToDocument: () => void\n}\n\nexport function useTheme(options: UseThemeOptions = {}): UseThemeReturn {\n  const { \n    subAccountId: initialSubAccountId, \n    autoApply = true,\n    onThemeChange,\n    onError,\n  } = options\n  \n  // State\n  const [theme, setTheme] = useState<SubAccountTheme>(RISIVO_DEFAULT_THEME)\n  const [presets, setPresets] = useState<ThemePreset[]>([])\n  const [isLoading, setIsLoading] = useState(false)\n  const [presetsLoading, setPresetsLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n  const [currentSubAccountId, setCurrentSubAccountId] = useState<string | undefined>(initialSubAccountId)\n  \n  // Compute CSS variables\n  const cssVariables = useMemo(() => themeToCSSVariables(theme), [theme])\n  \n  // Apply theme to document\n  const applyToDocument = useCallback(() => {\n    applyThemeToDocument(theme)\n  }, [theme])\n  \n  // Auto-apply when theme changes\n  useEffect(() => {\n    if (autoApply && typeof window !== 'undefined') {\n      applyToDocument()\n      // Signal that theme has been applied (for loader hiding)\n      ;(window as any).__RISIVO_THEME_APPLIED__ = true\n    }\n    onThemeChange?.(theme)\n  }, [theme, autoApply, applyToDocument, onThemeChange])\n  \n  // Load theme from API\n  const loadTheme = useCallback(async (subAccountId: string) => {\n    setIsLoading(true)\n    setError(null)\n    setCurrentSubAccountId(subAccountId)\n    \n    try {\n      const response = await fetch(`/api/v1/themes?subAccountId=${subAccountId}`)\n      const data = await response.json()\n      \n      if (!data.success) {\n        throw new Error(data.error || 'Failed to load theme')\n      }\n      \n      setTheme(data.data)\n    } catch (err) {\n      const message = err instanceof Error ? err.message : 'Failed to load theme'\n      setError(message)\n      onError?.(err instanceof Error ? err : new Error(message))\n    } finally {\n      setIsLoading(false)\n    }\n  }, [onError])\n  \n  // Load presets\n  const loadPresets = useCallback(async () => {\n    setPresetsLoading(true)\n    \n    try {\n      const response = await fetch('/api/v1/themes?presets=true')\n      const data = await response.json()\n      \n      if (data.success) {\n        setPresets(data.data)\n      }\n    } catch (err) {\n      console.error('Failed to load presets:', err)\n    } finally {\n      setPresetsLoading(false)\n    }\n  }, [])\n  \n  // Save theme to API\n  const saveTheme = useCallback(async (updates: Partial<SubAccountTheme>) => {\n    if (!currentSubAccountId) {\n      throw new Error('No sub-account selected')\n    }\n    \n    setIsLoading(true)\n    setError(null)\n    \n    try {\n      const response = await fetch('/api/v1/themes', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          subAccountId: currentSubAccountId,\n          theme: updates,\n        }),\n      })\n      \n      const data = await response.json()\n      \n      if (!data.success) {\n        throw new Error(data.error || 'Failed to save theme')\n      }\n      \n      setTheme(data.data)\n    } catch (err) {\n      const message = err instanceof Error ? err.message : 'Failed to save theme'\n      setError(message)\n      onError?.(err instanceof Error ? err : new Error(message))\n      throw err\n    } finally {\n      setIsLoading(false)\n    }\n  }, [currentSubAccountId, onError])\n  \n  // Apply preset\n  const applyPreset = useCallback(async (presetName: string) => {\n    if (!currentSubAccountId) {\n      throw new Error('No sub-account selected')\n    }\n    \n    setIsLoading(true)\n    setError(null)\n    \n    try {\n      const response = await fetch('/api/v1/themes', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          subAccountId: currentSubAccountId,\n          applyPreset: presetName,\n        }),\n      })\n      \n      const data = await response.json()\n      \n      if (!data.success) {\n        throw new Error(data.error || 'Failed to apply preset')\n      }\n      \n      setTheme(data.data)\n    } catch (err) {\n      const message = err instanceof Error ? err.message : 'Failed to apply preset'\n      setError(message)\n      onError?.(err instanceof Error ? err : new Error(message))\n      throw err\n    } finally {\n      setIsLoading(false)\n    }\n  }, [currentSubAccountId, onError])\n  \n  // Extract colors from logo\n  const extractColorsFromLogo = useCallback(async (logoUrl: string): Promise<Partial<SubAccountTheme>> => {\n    setIsLoading(true)\n    setError(null)\n    \n    try {\n      const response = await fetch('/api/v1/themes/extract-colors', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ logoUrl }),\n      })\n      \n      const data = await response.json()\n      \n      if (!data.success) {\n        throw new Error(data.error || 'Failed to extract colors')\n      }\n      \n      return data.data.suggestedTheme\n    } catch (err) {\n      const message = err instanceof Error ? err.message : 'Failed to extract colors'\n      setError(message)\n      onError?.(err instanceof Error ? err : new Error(message))\n      throw err\n    } finally {\n      setIsLoading(false)\n    }\n  }, [onError])\n  \n  // Reset theme to default\n  const resetTheme = useCallback(async () => {\n    if (!currentSubAccountId) {\n      setTheme(RISIVO_DEFAULT_THEME)\n      return\n    }\n    \n    setIsLoading(true)\n    setError(null)\n    \n    try {\n      const response = await fetch(`/api/v1/themes?subAccountId=${currentSubAccountId}`, {\n        method: 'DELETE',\n      })\n      \n      const data = await response.json()\n      \n      if (!data.success) {\n        throw new Error(data.error || 'Failed to reset theme')\n      }\n      \n      setTheme(data.data)\n    } catch (err) {\n      const message = err instanceof Error ? err.message : 'Failed to reset theme'\n      setError(message)\n      onError?.(err instanceof Error ? err : new Error(message))\n      throw err\n    } finally {\n      setIsLoading(false)\n    }\n  }, [currentSubAccountId, onError])\n  \n  // Update single color (local state only, call saveTheme to persist)\n  const updateColor = useCallback((key: keyof SubAccountTheme, value: string) => {\n    setTheme(prev => ({\n      ...prev,\n      [key]: value,\n    }))\n  }, [])\n  \n  // Initial load\n  useEffect(() => {\n    loadPresets()\n    \n    if (initialSubAccountId) {\n      loadTheme(initialSubAccountId)\n    }\n  }, [initialSubAccountId, loadPresets, loadTheme])\n  \n  return {\n    // State\n    theme,\n    cssVariables,\n    isLoading,\n    error,\n    presets,\n    presetsLoading,\n    \n    // Actions\n    loadTheme,\n    saveTheme,\n    applyPreset,\n    extractColorsFromLogo,\n    resetTheme,\n    \n    // Utilities\n    updateColor,\n    applyToDocument,\n  }\n}\n\nexport default useTheme\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1263, "column": 0}, "map": {"version":3,"sources":["file:///home/user/webapp/components/theme/DynamicFavicon.tsx"],"sourcesContent":["'use client'\n\n// ==========================================\n// RISIVO CRM - Dynamic Favicon Component\n// ==========================================\n// Updates the browser tab favicon based on sub-account theme\n// Supports PNG, SVG, and ICO formats\n// Uses safe DOM manipulation to avoid React reconciliation errors\n\nimport { useEffect, useRef } from 'react'\n\n// Unique ID for our managed favicon link\nconst FAVICON_ID = 'risivo-dynamic-favicon'\n\ninterface DynamicFaviconProps {\n  faviconUrl?: string | null\n  fallbackUrl?: string\n}\n\n/**\n * Safely update or create favicon link in head\n * This function is safe to call during navigation\n */\nfunction updateFaviconLink(iconUrl: string) {\n  if (typeof window === 'undefined') return\n  \n  // Determine the mime type based on the URL\n  const getMimeType = (url: string): string => {\n    if (url.startsWith('data:')) {\n      const match = url.match(/^data:([^;]+);/)\n      return match ? match[1] : 'image/png'\n    }\n    if (url.endsWith('.svg')) return 'image/svg+xml'\n    if (url.endsWith('.ico')) return 'image/x-icon'\n    return 'image/png'\n  }\n  \n  const mimeType = getMimeType(iconUrl)\n  \n  // For data URLs, use directly; for regular URLs, add cache buster\n  const finalUrl = iconUrl.startsWith('data:') \n    ? iconUrl \n    : `${iconUrl}?v=${Date.now()}`\n  \n  // Try to find our existing managed link\n  let existingLink = document.getElementById(FAVICON_ID) as HTMLLinkElement | null\n  \n  if (existingLink) {\n    // Update existing link - this is safe during navigation\n    existingLink.href = finalUrl\n    existingLink.type = mimeType\n  } else {\n    // Create new favicon link with ID for future updates\n    const link = document.createElement('link')\n    link.id = FAVICON_ID\n    link.rel = 'icon'\n    link.type = mimeType\n    link.href = finalUrl\n    document.head.appendChild(link)\n  }\n}\n\n/**\n * DynamicFavicon Component\n * \n * Dynamically updates the browser's favicon based on the sub-account theme.\n * This enables true white-label branding where each sub-account can have\n * their own browser tab icon.\n * \n * IMPORTANT: Uses safe DOM manipulation to avoid React reconciliation errors\n * during client-side navigation. Instead of removing and recreating links,\n * we update existing links in place using a unique ID.\n * \n * Usage:\n * <DynamicFavicon faviconUrl={theme.faviconUrl} />\n */\nexport function DynamicFavicon({ \n  faviconUrl, \n  fallbackUrl = '/risivo-favicon.png' \n}: DynamicFaviconProps) {\n  \n  const previousUrl = useRef<string | null>(null)\n  \n  useEffect(() => {\n    const iconUrl = faviconUrl || fallbackUrl\n    \n    // Skip if URL hasn't changed\n    if (previousUrl.current === iconUrl) return\n    previousUrl.current = iconUrl\n    \n    // Safely update favicon\n    updateFaviconLink(iconUrl)\n    \n  }, [faviconUrl, fallbackUrl])\n  \n  // This component doesn't render anything visible\n  return null\n}\n\n/**\n * Hook for programmatically updating favicon with cache busting\n * Useful when you need to update favicon outside of component lifecycle\n */\nexport function useDynamicFavicon() {\n  const setFavicon = (url: string) => {\n    updateFaviconLink(url)\n  }\n  \n  const resetFavicon = (defaultUrl = '/risivo-favicon.png') => {\n    updateFaviconLink(defaultUrl)\n  }\n  \n  return { setFavicon, resetFavicon }\n}\n\nexport default DynamicFavicon\n"],"names":[],"mappings":";;;;;;;;AAEA,6CAA6C;AAC7C,yCAAyC;AACzC,6CAA6C;AAC7C,6DAA6D;AAC7D,qCAAqC;AACrC,kEAAkE;AAElE;;AATA;;AAWA,yCAAyC;AACzC,MAAM,aAAa;AAOnB;;;CAGC,GACD,SAAS,kBAAkB,OAAe;IACxC;;IAEA,2CAA2C;IAC3C,MAAM,cAAc,CAAC;QACnB,IAAI,IAAI,UAAU,CAAC,UAAU;YAC3B,MAAM,QAAQ,IAAI,KAAK,CAAC;YACxB,OAAO,QAAQ,KAAK,CAAC,EAAE,GAAG;QAC5B;QACA,IAAI,IAAI,QAAQ,CAAC,SAAS,OAAO;QACjC,IAAI,IAAI,QAAQ,CAAC,SAAS,OAAO;QACjC,OAAO;IACT;IAEA,MAAM,WAAW,YAAY;IAE7B,kEAAkE;IAClE,MAAM,WAAW,QAAQ,UAAU,CAAC,WAChC,UACA,GAAG,QAAQ,GAAG,EAAE,KAAK,GAAG,IAAI;IAEhC,wCAAwC;IACxC,IAAI,eAAe,SAAS,cAAc,CAAC;IAE3C,IAAI,cAAc;QAChB,wDAAwD;QACxD,aAAa,IAAI,GAAG;QACpB,aAAa,IAAI,GAAG;IACtB,OAAO;QACL,qDAAqD;QACrD,MAAM,OAAO,SAAS,aAAa,CAAC;QACpC,KAAK,EAAE,GAAG;QACV,KAAK,GAAG,GAAG;QACX,KAAK,IAAI,GAAG;QACZ,KAAK,IAAI,GAAG;QACZ,SAAS,IAAI,CAAC,WAAW,CAAC;IAC5B;AACF;AAgBO,SAAS,eAAe,EAC7B,UAAU,EACV,cAAc,qBAAqB,EACf;;IAEpB,MAAM,cAAc,IAAA,uKAAM,EAAgB;IAE1C,IAAA,0KAAS;oCAAC;YACR,MAAM,UAAU,cAAc;YAE9B,6BAA6B;YAC7B,IAAI,YAAY,OAAO,KAAK,SAAS;YACrC,YAAY,OAAO,GAAG;YAEtB,wBAAwB;YACxB,kBAAkB;QAEpB;mCAAG;QAAC;QAAY;KAAY;IAE5B,iDAAiD;IACjD,OAAO;AACT;GArBgB;KAAA;AA2BT,SAAS;IACd,MAAM,aAAa,CAAC;QAClB,kBAAkB;IACpB;IAEA,MAAM,eAAe,CAAC,aAAa,qBAAqB;QACtD,kBAAkB;IACpB;IAEA,OAAO;QAAE;QAAY;IAAa;AACpC;uCAEe"}},
    {"offset": {"line": 1361, "column": 0}, "map": {"version":3,"sources":["file:///home/user/webapp/components/theme/ThemeInitializer.tsx"],"sourcesContent":["'use client'\n\n// ==========================================\n// RISIVO CRM - Theme Initializer Component\n// Prevents Flash of Unstyled Content (FOUC)\n// by applying cached theme before paint\n// ==========================================\n\nimport { useLayoutEffect, useEffect } from 'react'\n\n/**\n * Apply cached theme from localStorage BEFORE the browser paints.\n * This runs synchronously in useLayoutEffect to prevent FOUC.\n */\nexport function ThemeScript({ subAccountId }: { subAccountId: string }) {\n  // useLayoutEffect runs synchronously BEFORE the browser paints\n  // This prevents the flash of default theme\n  useLayoutEffect(() => {\n    try {\n      const CACHE_TTL = 3600000 // 1 hour\n      const cacheKey = `risivo_theme_${subAccountId}`\n      const timestampKey = `${cacheKey}_timestamp`\n      const cached = localStorage.getItem(cacheKey)\n      const timestamp = localStorage.getItem(timestampKey)\n      \n      // Check if cache is valid\n      if (cached && timestamp && (Date.now() - parseInt(timestamp)) < CACHE_TTL) {\n        const theme = JSON.parse(cached)\n        const root = document.documentElement\n        \n        // Apply ALL CSS variables immediately\n        // Sidebar colors (most visible)\n        if (theme.sidebarBg) root.style.setProperty('--theme-sidebar-bg', theme.sidebarBg)\n        if (theme.sidebarText) root.style.setProperty('--theme-sidebar-text', theme.sidebarText)\n        if (theme.sidebarHover) root.style.setProperty('--theme-sidebar-hover', theme.sidebarHover)\n        if (theme.sidebarActive) root.style.setProperty('--theme-sidebar-active', theme.sidebarActive)\n        if (theme.sidebarActiveForeground) root.style.setProperty('--theme-sidebar-active-foreground', theme.sidebarActiveForeground)\n        if (theme.sidebarTextMuted) root.style.setProperty('--theme-sidebar-text-muted', theme.sidebarTextMuted)\n        \n        // Primary colors\n        if (theme.primaryColor) root.style.setProperty('--theme-primary', theme.primaryColor)\n        if (theme.primaryHover) root.style.setProperty('--theme-primary-hover', theme.primaryHover)\n        if (theme.primaryForeground) root.style.setProperty('--theme-primary-foreground', theme.primaryForeground)\n        if (theme.primaryAccent) root.style.setProperty('--theme-primary-accent', theme.primaryAccent)\n        \n        // Secondary colors\n        if (theme.secondaryColor) root.style.setProperty('--theme-secondary', theme.secondaryColor)\n        if (theme.secondaryHover) root.style.setProperty('--theme-secondary-hover', theme.secondaryHover)\n        if (theme.secondaryForeground) root.style.setProperty('--theme-secondary-foreground', theme.secondaryForeground)\n        \n        // Button colors\n        if (theme.buttonPrimaryBg) root.style.setProperty('--theme-button-primary-bg', theme.buttonPrimaryBg)\n        if (theme.buttonPrimaryText) root.style.setProperty('--theme-button-primary-text', theme.buttonPrimaryText)\n        if (theme.buttonSecondaryBg) root.style.setProperty('--theme-button-secondary-bg', theme.buttonSecondaryBg)\n        if (theme.buttonSecondaryText) root.style.setProperty('--theme-button-secondary-text', theme.buttonSecondaryText)\n        \n        // Background colors\n        if (theme.backgroundColor) root.style.setProperty('--theme-background', theme.backgroundColor)\n        if (theme.surfaceColor) root.style.setProperty('--theme-surface', theme.surfaceColor)\n        if (theme.surfaceHover) root.style.setProperty('--theme-surface-hover', theme.surfaceHover)\n        \n        // Text colors\n        if (theme.textPrimary) root.style.setProperty('--theme-text-primary', theme.textPrimary)\n        if (theme.textSecondary) root.style.setProperty('--theme-text-secondary', theme.textSecondary)\n        if (theme.textMuted) root.style.setProperty('--theme-text-muted', theme.textMuted)\n        \n        // Border colors\n        if (theme.borderColor) root.style.setProperty('--theme-border', theme.borderColor)\n        if (theme.borderHover) root.style.setProperty('--theme-border-hover', theme.borderHover)\n        \n        // Header\n        if (theme.headerBg) root.style.setProperty('--theme-header-bg', theme.headerBg)\n        if (theme.headerText) root.style.setProperty('--theme-header-text', theme.headerText)\n        if (theme.headerBorder) root.style.setProperty('--theme-header-border', theme.headerBorder)\n        \n        // Input\n        if (theme.inputBg) root.style.setProperty('--theme-input-bg', theme.inputBg)\n        if (theme.inputBorder) root.style.setProperty('--theme-input-border', theme.inputBorder)\n        if (theme.inputFocus) root.style.setProperty('--theme-input-focus', theme.inputFocus)\n        if (theme.inputText) root.style.setProperty('--theme-input-text', theme.inputText)\n        if (theme.inputPlaceholder) root.style.setProperty('--theme-input-placeholder', theme.inputPlaceholder)\n        \n        // Modal\n        if (theme.modalBg) root.style.setProperty('--theme-modal-bg', theme.modalBg)\n        if (theme.overlayBg) root.style.setProperty('--theme-overlay-bg', theme.overlayBg)\n        \n        // Shadow\n        if (theme.shadowColor) root.style.setProperty('--theme-shadow', theme.shadowColor)\n        \n        // Status colors\n        if (theme.successColor) root.style.setProperty('--theme-success', theme.successColor)\n        if (theme.warningColor) root.style.setProperty('--theme-warning', theme.warningColor)\n        if (theme.errorColor) root.style.setProperty('--theme-error', theme.errorColor)\n        if (theme.infoColor) root.style.setProperty('--theme-info', theme.infoColor)\n        \n        console.log('[Theme] Applied cached theme for', subAccountId)\n      }\n    } catch (e) {\n      console.warn('[Theme] Failed to apply cached theme:', e)\n    }\n  }, [subAccountId])\n\n  return null\n}\n\n/**\n * Cache the theme to localStorage after it loads from the API.\n * This enables instant theme loading on subsequent visits.\n */\nexport function useThemeCache(subAccountId: string, theme: any, isLoading: boolean) {\n  useEffect(() => {\n    if (!isLoading && theme && theme.subAccountId !== 'default') {\n      try {\n        localStorage.setItem(`risivo_theme_${subAccountId}`, JSON.stringify(theme))\n        localStorage.setItem(`risivo_theme_${subAccountId}_timestamp`, Date.now().toString())\n        console.log('[Theme] Cached theme for', subAccountId)\n      } catch (e) {\n        console.warn('[Theme] Failed to cache theme:', e)\n      }\n    }\n  }, [theme, isLoading, subAccountId])\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1489, "column": 0}, "map": {"version":3,"sources":["file:///home/user/webapp/app/sub-account/layout.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useRef, useEffect } from 'react'\nimport Link from 'next/link'\nimport Image from 'next/image'\nimport { usePathname } from 'next/navigation'\nimport { useAiChat } from '@/hooks/useAiChat'\nimport { MessageBubble } from '@/components/ai/MessageBubble'\nimport { TypingIndicator } from '@/components/ai/TypingIndicator'\nimport { useTheme } from '@/hooks/useTheme'\nimport { DynamicFavicon } from '@/components/theme/DynamicFavicon'\nimport { useThemeCache } from '@/components/theme/ThemeInitializer'\n\n\n// Sub-Account-specific types\ntype SubAccountUser = {\n  id: string\n  name: string\n  email: string\n  role: 'Sub-Account Owner' | 'Admin' | 'Manager' | 'User'\n  status: 'Active' | 'Inactive'\n  lastLogin: string\n}\n\n// Addon subscription type\ntype AddonSubscription = {\n  id: string\n  name: string\n  isActive: boolean\n  expiresAt?: string\n}\n\n// Mock addon subscriptions for this sub-account\nconst subAccountAddons: AddonSubscription[] = [\n  { id: 'addon-power-dialer', name: 'Power Dialer', isActive: true }, // Set to false to test subscribe button\n  { id: 'addon-ai-tools', name: 'AI Tools Pro', isActive: true },\n  { id: 'addon-social-planner', name: 'Social Planner', isActive: false },\n]\n\n// Check if addon is active\nconst hasAddon = (addonId: string) => {\n  const addon = subAccountAddons.find(a => a.id === addonId)\n  return addon?.isActive ?? false\n}\n\n// Risivo Hub Sub-Account ID - This is the core/master sub-account that has Platform Admin access\nconst RISIVO_HUB_SUB_ACCOUNT_ID = 'sub-001'\n\n// Mock Sub-Account Data (Risivo Hub - Master Sub-Account)\n// NOTE: Colors are now managed via CSS variables from the theme system\nconst currentSubAccount = {\n  id: 'sub-001',\n  name: 'Risivo Hub',\n  type: 'Master',\n  companyId: 'comp-001',\n  companyName: 'Risivo',\n  logo: '/risivo-logo.png', // Can be customized per sub-account\n  isRisivoHub: true, // Flag to indicate this is the core Risivo Hub\n}\n\n// Mock user data - to determine if user is company admin\nconst currentUser = {\n  id: 'user-001',\n  name: 'John Smith',\n  email: 'john.smith@risivo.com',\n  role: 'Sub-Account Owner', // or 'Admin' (company admin), 'Manager', 'User'\n  isCompanyAdmin: true, // Company owner has admin access\n}\n\n// Mock Users for this sub-account only\nconst subAccountUsers: SubAccountUser[] = [\n  { id: 'user-001', name: 'John Smith', email: 'john.smith@risivo.com', role: 'Sub-Account Owner', status: 'Active', lastLogin: '2024-12-18 12:15' },\n  { id: 'user-002', name: 'Sarah Johnson', email: 'sarah@risivo.com', role: 'Admin', status: 'Active', lastLogin: '2024-12-18 10:00' },\n  { id: 'user-003', name: 'Mike Williams', email: 'mike@risivo.com', role: 'Manager', status: 'Active', lastLogin: '2024-12-18 09:30' },\n  { id: 'user-004', name: 'Emily Brown', email: 'emily@risivo.com', role: 'User', status: 'Active', lastLogin: '2024-12-18 11:20' },\n  { id: 'user-005', name: 'David Lee', email: 'david@risivo.com', role: 'User', status: 'Active', lastLogin: '2024-12-17 16:45' },\n]\n\n// Logo component - uses theme.logoUrl directly (no localStorage during SSR)\nfunction LogoDisplay({ \n  logoUrl, \n  fallbackUrl, \n  altText,\n}: { \n  logoUrl?: string | null\n  fallbackUrl: string\n  altText: string\n}) {\n  // Always use the same initial value for SSR and client to avoid hydration mismatch\n  const displayUrl = logoUrl || fallbackUrl\n  \n  // Use img for data URLs, Image for regular URLs\n  if (displayUrl?.startsWith('data:')) {\n    return (\n      <img\n        src={displayUrl}\n        alt={altText}\n        className=\"h-8 w-auto max-w-[150px] object-contain\"\n      />\n    )\n  }\n  \n  return (\n    <Image\n      src={displayUrl}\n      alt={altText}\n      width={150}\n      height={34}\n      className=\"h-8 w-auto\"\n      priority // Load logo with high priority\n    />\n  )\n}\n\nexport default function SubAccountLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  const [sidebarOpen, setSidebarOpen] = useState(false)\n  const [showAccountSwitcher, setShowAccountSwitcher] = useState(false)\n  const [showUserMenu, setShowUserMenu] = useState(false)\n  const [showHelpPanel, setShowHelpPanel] = useState(false)\n  const [showLoginAsModal, setShowLoginAsModal] = useState(false)\n  const [subAccountSearch, setSubAccountSearch] = useState('')\n  const [loginAsSearch, setLoginAsSearch] = useState('')\n  const [showChecklistModal, setShowChecklistModal] = useState(false)\n  const [showChatbot, setShowChatbot] = useState(false)\n  const [showPowerDialerDropdown, setShowPowerDialerDropdown] = useState(false)\n  const [hasAssignedCampaigns, setHasAssignedCampaigns] = useState(true) // Mock: set to true to show blinking\n  const [powerDialerClicked, setPowerDialerClicked] = useState(false) // Stops blinking after click\n  const hasPowerDialerAddon = hasAddon('addon-power-dialer')\n  const [showRobotPopup, setShowRobotPopup] = useState(false) // No popup anymore, chatbot is in header\n  const [chatMessage, setChatMessage] = useState('')\n  const pathname = usePathname()\n  const messagesContainerRef = useRef<HTMLDivElement>(null)\n  const messagesEndRef = useRef<HTMLDivElement>(null)\n\n  // Theme Integration - Auto-applies CSS variables to document\n  const { theme, isLoading: themeLoading } = useTheme({\n    subAccountId: currentSubAccount.id,\n    autoApply: true,\n  })\n  \n  // Cache theme to localStorage for instant loading on next visit\n  useThemeCache(currentSubAccount.id, theme, themeLoading)\n\n  // AI Chat Integration\n  const { messages, isLoading, error, sendMessage, clearMessages } = useAiChat({\n    subAccountId: currentSubAccount.id,\n    userId: currentUser.id,\n    onError: (err) => console.error('AI Chat error:', err),\n  })\n\n  // Auto-scroll to bottom when new messages arrive\n  useEffect(() => {\n    if (showChatbot && messagesContainerRef.current) {\n      messagesContainerRef.current.scrollTop = messagesContainerRef.current.scrollHeight\n    }\n  }, [messages, isLoading, showChatbot])\n\n  // Onboarding checklist tasks (sub-account specific)\n  const [checklistTasks, setChecklistTasks] = useState([\n    { id: 1, title: 'Complete sub-account profile', description: 'Add logo, name, and details', completed: false, required: true },\n    { id: 2, title: 'Add team members', description: 'Invite at least one team member', completed: true, required: true },\n    { id: 3, title: 'Set up lead engine', description: 'Configure your lead capture settings', completed: false, required: true },\n    { id: 4, title: 'Configure AI chatbot', description: 'Customize your AI assistant settings', completed: false, required: true },\n    { id: 5, title: 'Connect calendar', description: 'Sync your calendar for appointments', completed: false, required: true },\n    { id: 6, title: 'Explore conversations', description: 'Visit conversations to see communication tools', completed: true, required: false },\n    { id: 7, title: 'Set up payment methods', description: 'Add payment options for clients', completed: false, required: false },\n  ])\n\n  const totalRequired = checklistTasks.filter(t => t.required).length\n  const completedRequired = checklistTasks.filter(t => t.required && t.completed).length\n  const allRequiredCompleted = completedRequired === totalRequired\n  const checklistProgress = Math.round((completedRequired / totalRequired) * 100)\n\n  const handleToggleTask = (taskId: number) => {\n    setChecklistTasks(prev => \n      prev.map(task => \n        task.id === taskId ? { ...task, completed: !task.completed } : task\n      )\n    )\n  }\n\n  const handleOpenChatbot = () => {\n    setShowChatbot(true)\n  }\n\n  // Determine if current sub-account is Risivo Hub (has Platform Admin access)\n  const isRisivoHub = currentSubAccount.id === RISIVO_HUB_SUB_ACCOUNT_ID || currentSubAccount.isRisivoHub\n\n  // Complete Sub-Account Navigation Structure\n  // Based on CLIENT_SUBACCOUNT_MENU_STRUCTURE.md documentation\n  // Note: Social Command and PPC Ads are INSIDE Marketing as tabs, not separate menu items\n  const navigation = [\n    { name: 'Dashboard', href: '/sub-account/dashboard', icon: 'üìä' },\n    { name: 'Conversations', href: '/sub-account/conversations', icon: 'üí¨' },\n    { name: 'Calendars', href: '/sub-account/calendars', icon: 'üìÖ' },\n    { name: 'Contacts', href: '/sub-account/contacts', icon: 'üë•' },\n    { name: 'Lead Engine', href: '/sub-account/lead-engine', icon: 'üéØ' },\n    { name: 'Revenue Engine', href: '/sub-account/revenue-engine', icon: 'üí∞' },\n    { name: 'AI Tools', href: '/sub-account/ai-tools', icon: 'ü§ñ' },\n    { name: 'Project Management', href: '/sub-account/project-management', icon: 'üìã' },\n    { name: 'Marketing', href: '/sub-account/marketing', icon: 'üì£' },\n    { name: 'Accelerators', href: '/sub-account/accelerators', icon: '‚ö°' },\n    { name: 'Digital Hub', href: '/sub-account/digital-hub', icon: 'üåê' },\n    { name: 'Memberships', href: '/sub-account/memberships', icon: 'üéì' },\n    { name: 'Media Vault', href: '/sub-account/media-vault', icon: 'üóÑÔ∏è' },\n    { name: 'Reputation', href: '/sub-account/reputation', icon: '‚≠ê' },\n    { name: 'Reporting', href: '/sub-account/reporting', icon: 'üìà' },\n    { name: 'Addon Store', href: '/sub-account/addon-store', icon: 'üõí' },\n    { name: 'Settings', href: '/sub-account/settings', icon: '‚öôÔ∏è' },\n  ]\n\n  // Platform Admin Navigation - Only visible for Risivo Hub\n  // These replace the separate /admin/* and /super-admin/* routes\n  const platformAdminNavigation = [\n    { name: 'Platform Overview', href: '/sub-account/platform-admin', icon: 'üëë' },\n    { name: 'Agencies', href: '/sub-account/platform-admin/agencies', icon: 'üè¢' },\n    { name: 'Clients', href: '/sub-account/platform-admin/clients', icon: 'üè™' },\n    { name: 'Users', href: '/sub-account/platform-admin/users', icon: 'üë§' },\n    { name: 'Staff', href: '/sub-account/platform-admin/staff', icon: 'üíº' },\n    { name: 'Support Tickets', href: '/sub-account/platform-admin/support', icon: 'üé´' },\n    { name: 'Newsletters', href: '/sub-account/platform-admin/newsletters', icon: 'üìß' },\n    { name: 'Platform Settings', href: '/sub-account/platform-admin/settings', icon: '‚öôÔ∏è' },\n  ]\n\n  // Filter users based on search (only within this sub-account)\n  const filteredSubAccountUsers = subAccountUsers.filter(user =>\n    user.name.toLowerCase().includes(loginAsSearch.toLowerCase()) ||\n    user.email.toLowerCase().includes(loginAsSearch.toLowerCase())\n  )\n\n  // Handle Login As\n  const handleLoginAs = (user: SubAccountUser) => {\n    console.log('Admin logging in as:', user)\n    setShowLoginAsModal(false)\n    setLoginAsSearch('')\n    // TODO: Implement actual login as functionality\n  }\n\n  // Handle jump to sub-account\n  const handleJumpToSubAccount = (subAccountId: string) => {\n    console.log('Jumping to sub-account:', subAccountId)\n    setShowAccountSwitcher(false)\n    // TODO: Navigate to sub-account dashboard\n  }\n\n  // Close modals\n  const handleCloseAccountSwitcher = () => {\n    setShowAccountSwitcher(false)\n    setTimeout(() => {\n      setSubAccountSearch('')\n    }, 300)\n  }\n\n  const handleCloseLoginAsModal = () => {\n    setShowLoginAsModal(false)\n    setTimeout(() => {\n      setLoginAsSearch('')\n    }, 300)\n  }\n\n  return (\n    <div className=\"min-h-screen\" style={{ backgroundColor: 'var(--theme-background)' }}>\n      {/* Dynamic Favicon - Updates browser tab icon based on sub-account theme */}\n      <DynamicFavicon \n        faviconUrl={theme.faviconUrl} \n        fallbackUrl=\"/risivo-favicon.png\"\n      />\n      \n      {/* Mobile sidebar backdrop */}\n      {sidebarOpen && (\n        <div\n          className=\"fixed inset-0 z-40 lg:hidden\"\n          style={{ backgroundColor: 'var(--theme-overlay-bg)' }}\n          onClick={() => setSidebarOpen(false)}\n        />\n      )}\n\n      {/* Sidebar - Using theme CSS variables */}\n      <aside\n        className={`\n          fixed inset-y-0 left-0 z-50 w-64 transform transition-transform duration-300 ease-in-out\n          ${sidebarOpen ? 'translate-x-0' : '-translate-x-full'}\n          lg:translate-x-0\n        `}\n        style={{ backgroundColor: 'var(--theme-sidebar-bg)' }}\n      >\n        <div className=\"flex flex-col h-full\">\n          {/* Logo & Company Name */}\n          <div className=\"flex flex-col items-center justify-center px-4 py-4\" style={{ borderBottom: '1px solid var(--theme-sidebar-hover)' }}>\n            {/* Logo - uses theme.logoUrl from useTheme hook */}\n            <LogoDisplay \n              logoUrl={theme.logoUrl}\n              fallbackUrl={currentSubAccount.logo}\n              altText={currentSubAccount.name}\n            />\n            <p className=\"text-xs font-medium mt-2 text-center\" style={{ color: 'var(--theme-sidebar-text)', opacity: 0.8 }}>\n              {currentSubAccount.name}\n            </p>\n          </div>\n\n          {/* Account Switcher Button - Only for Company Admins */}\n          {currentUser.isCompanyAdmin && (\n            <div className=\"px-4 py-3 border-b border-white/20\">\n              <button\n                onClick={() => setShowAccountSwitcher(true)}\n                className=\"w-full flex items-center justify-between px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors\"\n              >\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-white/80 text-sm\">üè™</span>\n                  <div className=\"text-left\">\n                    <p className=\"text-white text-sm font-medium\">{currentSubAccount.name}</p>\n                    <p className=\"text-white/70 text-xs\">Switch to Company</p>\n                  </div>\n                </div>\n                <svg className=\"w-4 h-4 text-white/70\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7h12M8 12h12m-7 5h7\" />\n                </svg>\n              </button>\n            </div>\n          )}\n          \n          {/* Sub-Account Info (for non-company admins) */}\n          {!currentUser.isCompanyAdmin && (\n            <div className=\"px-4 py-3 border-b border-white/20\">\n              <div className=\"flex items-center gap-2 px-4 py-2 bg-white/5 rounded-lg\">\n                <span className=\"text-white/80 text-sm\">üè™</span>\n                <div className=\"text-left\">\n                  <p className=\"text-white text-sm font-medium\">{currentSubAccount.name}</p>\n                  <p className=\"text-white/70 text-xs\">{currentSubAccount.type} ‚Ä¢ {subAccountUsers.length} users</p>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Navigation */}\n          <nav className=\"flex-1 px-4 py-6 space-y-1.5 overflow-y-auto\">\n            {navigation.map((item) => {\n              const isActive = pathname === item.href\n              return (\n                <Link\n                  key={item.name}\n                  href={item.href}\n                  className=\"flex items-center gap-3 px-3.5 py-2.5 rounded-lg text-[13px] font-medium transition-all font-poppins\"\n                  style={{\n                    backgroundColor: isActive ? 'var(--theme-sidebar-active)' : 'transparent',\n                    color: isActive ? 'var(--theme-sidebar-active-foreground)' : 'var(--theme-sidebar-text)',\n                    boxShadow: isActive ? '0 4px 6px -1px rgba(0, 0, 0, 0.1)' : 'none',\n                  }}\n                  onMouseEnter={(e) => {\n                    if (!isActive) {\n                      e.currentTarget.style.backgroundColor = 'var(--theme-sidebar-hover)'\n                    }\n                  }}\n                  onMouseLeave={(e) => {\n                    if (!isActive) {\n                      e.currentTarget.style.backgroundColor = 'transparent'\n                    }\n                  }}\n                  onClick={() => setSidebarOpen(false)}\n                >\n                  <span className=\"text-lg flex-shrink-0 w-5 inline-flex items-center justify-center\">{item.icon}</span>\n                  <span className=\"leading-tight flex-1\">{item.name}</span>\n                </Link>\n              )\n            })}\n\n            {/* Platform Admin Section - Only visible for Risivo Hub */}\n            {isRisivoHub && (\n              <>\n                {/* Separator */}\n                <div className=\"my-4 pt-4\" style={{ borderTop: '1px solid var(--theme-sidebar-hover)' }}>\n                  <span \n                    className=\"text-[10px] font-bold uppercase tracking-wider px-3\"\n                    style={{ color: 'var(--theme-sidebar-text)', opacity: 0.6 }}\n                  >\n                    üëë Platform Admin\n                  </span>\n                </div>\n\n                {/* Platform Admin Navigation Items */}\n                {platformAdminNavigation.map((item) => {\n                  const isActive = pathname === item.href || pathname.startsWith(item.href + '/')\n                  return (\n                    <Link\n                      key={item.name}\n                      href={item.href}\n                      className=\"flex items-center gap-3 px-3.5 py-2.5 rounded-lg text-[13px] font-medium transition-all font-poppins\"\n                      style={{\n                        backgroundColor: isActive ? 'var(--theme-sidebar-active)' : 'transparent',\n                        color: isActive ? 'var(--theme-sidebar-active-foreground)' : 'var(--theme-sidebar-text)',\n                        boxShadow: isActive ? '0 4px 6px -1px rgba(0, 0, 0, 0.1)' : 'none',\n                      }}\n                      onMouseEnter={(e) => {\n                        if (!isActive) {\n                          e.currentTarget.style.backgroundColor = 'var(--theme-sidebar-hover)'\n                        }\n                      }}\n                      onMouseLeave={(e) => {\n                        if (!isActive) {\n                          e.currentTarget.style.backgroundColor = 'transparent'\n                        }\n                      }}\n                      onClick={() => setSidebarOpen(false)}\n                    >\n                      <span className=\"text-lg flex-shrink-0 w-5 inline-flex items-center justify-center\">{item.icon}</span>\n                      <span className=\"leading-tight flex-1\">{item.name}</span>\n                    </Link>\n                  )\n                })}\n              </>\n            )}\n          </nav>\n\n          {/* User Profile Footer */}\n          <div className=\"p-4\" style={{ borderTop: '1px solid var(--theme-sidebar-hover)' }}>\n            <div className=\"flex items-center gap-3 px-4 py-3 rounded-lg\" style={{ backgroundColor: 'var(--theme-sidebar-hover)' }}>\n              <div \n                className=\"w-10 h-10 rounded-full flex items-center justify-center font-bold\"\n                style={{ backgroundColor: 'var(--theme-sidebar-active)', color: 'var(--theme-sidebar-active-foreground)' }}\n              >\n                JS\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-sm font-medium truncate\" style={{ color: 'var(--theme-sidebar-text)' }}>John Smith</p>\n                <p className=\"text-xs truncate\" style={{ color: 'var(--theme-sidebar-text)', opacity: 0.7 }}>Company Owner</p>\n              </div>\n              <button \n                onClick={() => {/* Sign out logic */}}\n                className=\"transition-colors\"\n                style={{ color: 'var(--theme-sidebar-text)', opacity: 0.7 }}\n                title=\"Sign Out\"\n              >\n                <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\" />\n                </svg>\n              </button>\n            </div>\n          </div>\n        </div>\n      </aside>\n\n      {/* Main Content Area */}\n      <div className=\"lg:pl-64 flex flex-col min-h-screen\">\n        {/* Top Header */}\n        <header \n          className=\"sticky top-0 z-30 shadow-sm\"\n          style={{ \n            backgroundColor: 'var(--theme-header-bg)', \n            borderBottom: '1px solid var(--theme-header-border)' \n          }}\n        >\n          <div className=\"flex items-center justify-between h-16 px-4 sm:px-6 lg:px-8\">\n            {/* Mobile menu button */}\n            <button\n              type=\"button\"\n              className=\"lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-600 hover:bg-gray-100\"\n              onClick={() => setSidebarOpen(true)}\n            >\n              <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 6h16M4 12h16M4 18h16\" />\n              </svg>\n            </button>\n\n            {/* Search Bar */}\n            <div className=\"flex-1 max-w-2xl mx-4\">\n              <div className=\"relative\">\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                  <svg className=\"h-5 w-5 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n                  </svg>\n                </div>\n                <input\n                  type=\"search\"\n                  placeholder=\"Search...\"\n                  className=\"block w-full pl-10 pr-3 py-2 rounded-lg leading-5 focus:outline-none focus:ring-2 focus:border-transparent sm:text-sm\"\n                  style={{\n                    backgroundColor: 'var(--theme-input-bg)',\n                    border: '1px solid var(--theme-input-border)',\n                    color: 'var(--theme-input-text)',\n                  }}\n                />\n              </div>\n            </div>\n\n            {/* Right side - Checklist, Notifications, Help & Profile */}\n            <div className=\"flex items-center gap-3\">\n              {/* Onboarding Checklist (only show if not all required tasks completed) */}\n              {!allRequiredCompleted && (\n                <button \n                  onClick={() => setShowChecklistModal(true)}\n                  className=\"relative p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg\"\n                  title=\"Onboarding Checklist\"\n                >\n                  <svg className={`w-6 h-6 ${!allRequiredCompleted ? 'animate-pulse text-green-600' : ''}`} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4\" />\n                  </svg>\n                  <span className=\"absolute -top-1 -right-1 w-5 h-5 bg-green-600 text-white text-xs rounded-full flex items-center justify-center font-bold\">\n                    {completedRequired}/{totalRequired}\n                  </span>\n                </button>\n              )}\n\n              {/* Power Dialer Quick Access */}\n              <div className=\"relative\">\n                <button \n                  onClick={() => {\n                    if (hasPowerDialerAddon) {\n                      setPowerDialerClicked(true)\n                      setShowPowerDialerDropdown(!showPowerDialerDropdown)\n                    } else {\n                      setShowPowerDialerDropdown(!showPowerDialerDropdown)\n                    }\n                  }}\n                  className={`relative p-2 rounded-lg transition-all ${\n                    hasPowerDialerAddon \n                      ? 'text-gray-400 hover:text-blue-600 hover:bg-blue-50' \n                      : 'text-gray-300 hover:text-gray-400 hover:bg-gray-100'\n                  }`}\n                  title={hasPowerDialerAddon ? 'Power Dialer' : 'Power Dialer (Addon Required)'}\n                >\n                  {/* Phone Icon with Headset */}\n                  <svg className={`w-6 h-6 ${\n                    hasPowerDialerAddon && hasAssignedCampaigns && !powerDialerClicked \n                      ? 'text-blue-600 animate-pulse' \n                      : ''\n                  }`} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z\" />\n                  </svg>\n                  {/* Blinking indicator dot when campaigns assigned */}\n                  {hasPowerDialerAddon && hasAssignedCampaigns && !powerDialerClicked && (\n                    <span className=\"absolute top-1 right-1 w-2.5 h-2.5 bg-blue-500 rounded-full animate-ping\"></span>\n                  )}\n                  {hasPowerDialerAddon && hasAssignedCampaigns && !powerDialerClicked && (\n                    <span className=\"absolute top-1 right-1 w-2.5 h-2.5 bg-blue-600 rounded-full\"></span>\n                  )}\n                </button>\n\n                {/* Power Dialer Dropdown */}\n                {showPowerDialerDropdown && (\n                  <div className=\"absolute right-0 mt-2 w-72 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50\">\n                    {hasPowerDialerAddon ? (\n                      <>\n                        <div className=\"px-4 py-2 border-b border-gray-100\">\n                          <h3 className=\"font-semibold text-gray-900 flex items-center gap-2\">\n                            üìû Power Dialer\n                            <span className=\"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full\">Active</span>\n                          </h3>\n                          <p className=\"text-xs text-gray-500 mt-1\">Quick access to your dialing campaigns</p>\n                        </div>\n                        {hasAssignedCampaigns ? (\n                          <>\n                            <div className=\"px-4 py-2\">\n                              <p className=\"text-xs text-blue-600 font-medium mb-2\">üì¢ You have campaigns waiting</p>\n                              <div className=\"space-y-2\">\n                                <div className=\"p-2 bg-blue-50 rounded-lg text-sm\">\n                                  <p className=\"font-medium text-gray-900\">Q4 Sales Outreach</p>\n                                  <p className=\"text-xs text-gray-500\">23 contacts remaining</p>\n                                </div>\n                                <div className=\"p-2 bg-gray-50 rounded-lg text-sm\">\n                                  <p className=\"font-medium text-gray-900\">Follow-up Campaign</p>\n                                  <p className=\"text-xs text-gray-500\">8 contacts remaining</p>\n                                </div>\n                              </div>\n                            </div>\n                            <div className=\"px-4 py-2 border-t border-gray-100\">\n                              <Link\n                                href=\"/sub-account/conversations/power-dialer\"\n                                onClick={() => setShowPowerDialerDropdown(false)}\n                                className=\"w-full flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium\"\n                              >\n                                üéß Open Power Dialer\n                              </Link>\n                            </div>\n                          </>\n                        ) : (\n                          <div className=\"px-4 py-4 text-center\">\n                            <p className=\"text-gray-500 text-sm mb-3\">No active campaigns</p>\n                            <Link\n                              href=\"/sub-account/conversations/power-dialer\"\n                              onClick={() => setShowPowerDialerDropdown(false)}\n                              className=\"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm font-medium\"\n                            >\n                              ‚ûï Create Campaign\n                            </Link>\n                          </div>\n                        )}\n                      </>\n                    ) : (\n                      <div className=\"px-4 py-4 text-center\">\n                        <div className=\"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3\">\n                          <svg className=\"w-6 h-6 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n                          </svg>\n                        </div>\n                        <h4 className=\"font-semibold text-gray-900 mb-1\">Power Dialer</h4>\n                        <p className=\"text-sm text-gray-500 mb-4\">\n                          Unlock automated outbound calling with the Power Dialer addon.\n                        </p>\n                        <Link\n                          href=\"/sub-account/addon-store?addon=power-dialer\"\n                          onClick={() => setShowPowerDialerDropdown(false)}\n                          className=\"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 text-sm font-medium\"\n                        >\n                          üîì Subscribe Now\n                        </Link>\n                        <p className=\"text-xs text-gray-400 mt-2\">Starting at $49/month</p>\n                      </div>\n                    )}\n                  </div>\n                )}\n              </div>\n\n              {/* Notifications */}\n              <button className=\"relative p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg\">\n                <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9\" />\n                </svg>\n                <span className=\"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full\"></span>\n              </button>\n\n              {/* Help Button */}\n              <button \n                onClick={() => setShowHelpPanel(true)}\n                className=\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg\"\n                title=\"Help & Knowledge Base\"\n              >\n                <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                </svg>\n              </button>\n\n              {/* AI Virtual Assistant Button (in header when closed) */}\n              {!showChatbot && (\n                <button\n                  onClick={handleOpenChatbot}\n                  className=\"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors relative\"\n                  title=\"AI Assistant\"\n                >\n                  <span className=\"text-xl\">ü§ñ</span>\n                  {showRobotPopup && (\n                    <span className=\"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full animate-ping\"></span>\n                  )}\n                  {showRobotPopup && (\n                    <span className=\"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full\"></span>\n                  )}\n                </button>\n              )}\n\n              {/* User Avatar Dropdown */}\n              <div className=\"relative\">\n                <button \n                  onClick={() => setShowUserMenu(!showUserMenu)}\n                  className=\"hidden sm:flex items-center gap-2 p-1 hover:bg-gray-100 rounded-lg\"\n                >\n                  <div className=\"w-8 h-8 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center text-white text-sm font-bold\">\n                    JS\n                  </div>\n                  <svg className=\"w-4 h-4 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                  </svg>\n                </button>\n\n                {/* User Dropdown Menu */}\n                {showUserMenu && (\n                  <div className=\"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50\">\n                    <button\n                      className=\"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center gap-2\"\n                      onClick={() => {\n                        setShowLoginAsModal(true)\n                        setShowUserMenu(false)\n                      }}\n                    >\n                      <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n                      </svg>\n                      Login As...\n                    </button>\n                    <hr className=\"my-1\" />\n                    <button\n                      className=\"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center gap-2\"\n                      onClick={() => {/* Log out logic */}}\n                    >\n                      <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\" />\n                      </svg>\n                      Log Out\n                    </button>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </header>\n\n        {/* Page Content */}\n        <main className=\"flex-1 p-4 sm:p-6 lg:p-8\">\n          {children}\n        </main>\n      </div>\n\n      {/* Account Switcher Modal - Company Admins Only */}\n      {showAccountSwitcher && currentUser.isCompanyAdmin && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4\">\n          <div className=\"bg-white rounded-xl shadow-2xl w-full max-w-md\">\n            {/* Modal Header */}\n            <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n              <h2 className=\"text-xl font-bold text-gray-900\">Switch Account</h2>\n              <button\n                onClick={handleCloseAccountSwitcher}\n                className=\"text-gray-400 hover:text-gray-600\"\n              >\n                <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n\n            {/* Switch Options */}\n            <div className=\"p-6 space-y-3\">\n              {/* Current Sub-Account */}\n              <div className=\"border-2 border-blue-500 rounded-lg p-4 bg-blue-50\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white text-lg\">\n                    üè™\n                  </div>\n                  <div className=\"flex-1\">\n                    <p className=\"font-semibold text-gray-900\">{currentSubAccount.name}</p>\n                    <p className=\"text-xs text-gray-600\">{currentSubAccount.type} ‚Ä¢ Current</p>\n                  </div>\n                  <span className=\"px-2 py-1 text-xs font-medium bg-blue-600 text-white rounded-full\">\n                    Active\n                  </span>\n                </div>\n              </div>\n\n              {/* Company Dashboard Option */}\n              <Link\n                href=\"/company/dashboard\"\n                className=\"block border-2 border-gray-200 rounded-lg p-4 hover:border-green-500 hover:bg-green-50 transition-all\"\n                onClick={() => setShowAccountSwitcher(false)}\n              >\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"w-10 h-10 bg-green-600 rounded-full flex items-center justify-center text-white text-lg\">\n                    üè¢\n                  </div>\n                  <div className=\"flex-1\">\n                    <p className=\"font-semibold text-gray-900\">{currentSubAccount.companyName}</p>\n                    <p className=\"text-xs text-gray-600\">Company Dashboard</p>\n                  </div>\n                  <svg className=\"w-5 h-5 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n                  </svg>\n                </div>\n              </Link>\n            </div>\n\n            {/* Footer */}\n            <div className=\"p-4 bg-gray-50 border-t border-gray-200 rounded-b-xl\">\n              <p className=\"text-xs text-gray-600 text-center\">\n                You're a company admin, so you can switch between accounts\n              </p>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Login As Modal - Company Users Only */}\n      {showLoginAsModal && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4\">\n          <div className=\"bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[85vh] flex flex-col\">\n            {/* Modal Header */}\n            <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n              <h2 className=\"text-xl font-bold text-gray-900\">Login As User</h2>\n              <button\n                onClick={handleCloseLoginAsModal}\n                className=\"text-gray-400 hover:text-gray-600\"\n              >\n                <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n\n            {/* Search Input */}\n            <div className=\"p-6 border-b border-gray-200\">\n              <div className=\"relative\">\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                  <svg className=\"h-5 w-5 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n                  </svg>\n                </div>\n                <input\n                  type=\"search\"\n                  placeholder=\"Search users by name or email...\"\n                  value={loginAsSearch}\n                  onChange={(e) => setLoginAsSearch(e.target.value)}\n                  className=\"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent\"\n                  autoFocus\n                />\n              </div>\n              <p className=\"text-xs text-gray-500 mt-2\">\n                {filteredSubAccountUsers.length} user{filteredSubAccountUsers.length === 1 ? '' : 's'} found in {currentSubAccount.name}\n              </p>\n            </div>\n\n            {/* User List */}\n            <div className=\"flex-1 overflow-y-auto p-6\">\n              {filteredSubAccountUsers.length === 0 ? (\n                <div className=\"text-center py-12\">\n                  <svg className=\"mx-auto h-12 w-12 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n                  </svg>\n                  <p className=\"mt-4 text-sm text-gray-500\">No users found matching \"{loginAsSearch}\"</p>\n                </div>\n              ) : (\n                <div className=\"space-y-3\">\n                  {filteredSubAccountUsers.map((user) => (\n                    <div\n                      key={user.id}\n                      className=\"border border-gray-200 rounded-lg p-4 hover:border-green-500 hover:bg-green-50 transition-all\"\n                    >\n                      <div className=\"flex items-start justify-between gap-4\">\n                        <div className=\"flex-1 min-w-0\">\n                          <div className=\"flex items-center gap-2\">\n                            <div className=\"w-10 h-10 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center text-white font-semibold text-sm flex-shrink-0\">\n                              {user.name.split(' ').map(n => n[0]).join('')}\n                            </div>\n                            <div className=\"flex-1 min-w-0\">\n                              <h3 className=\"font-semibold text-gray-900\">{user.name}</h3>\n                              <p className=\"text-sm text-gray-600\">{user.email}</p>\n                            </div>\n                            <span className={`px-2 py-0.5 text-xs font-medium rounded-full whitespace-nowrap ${\n                              user.role === 'Admin' ? 'bg-purple-100 text-purple-700' :\n                              user.role === 'Manager' ? 'bg-blue-100 text-blue-700' :\n                              'bg-gray-100 text-gray-700'\n                            }`}>\n                              {user.role}\n                            </span>\n                          </div>\n                          <div className=\"mt-3 space-y-1\">\n                            <div className=\"flex items-center gap-4 text-xs text-gray-400 mt-2\">\n                              <span>ID: {user.id}</span>\n                              <span>‚Ä¢</span>\n                              <span>Last login: {user.lastLogin}</span>\n                              <span>‚Ä¢</span>\n                              <span className={user.status === 'Active' ? 'text-green-600 font-medium' : 'text-gray-400'}>\n                                {user.status}\n                              </span>\n                            </div>\n                          </div>\n                        </div>\n                        <button\n                          onClick={() => handleLoginAs(user)}\n                          className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm font-medium transition-colors whitespace-nowrap\"\n                        >\n                          Login As\n                        </button>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n\n            {/* Modal Footer */}\n            <div className=\"p-6 border-t border-gray-200 bg-gray-50 rounded-b-xl\">\n              <div className=\"flex items-center justify-between text-sm\">\n                <div>\n                  <p className=\"text-gray-600\">\n                    Select a user within {currentSubAccount.name} to login as\n                  </p>\n                  <p className=\"text-xs text-gray-500 mt-1\">\n                    ‚ö†Ô∏è Your admin session will be preserved and you can return anytime\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Help Panel (Right Sidebar) - Same as Super Admin */}\n      {showHelpPanel && (\n        <>\n          <div \n            className=\"fixed inset-0 bg-black/30 z-40\"\n            onClick={() => setShowHelpPanel(false)}\n          />\n          <div className=\"fixed right-0 top-0 bottom-0 w-96 bg-white shadow-2xl z-50 flex flex-col\">\n            {/* Help Panel Header */}\n            <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n              <h2 className=\"text-xl font-bold text-gray-900\">Help & Support</h2>\n              <button\n                onClick={() => setShowHelpPanel(false)}\n                className=\"text-gray-400 hover:text-gray-600\"\n              >\n                <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n\n            {/* Search Help */}\n            <div className=\"p-4 border-b border-gray-200\">\n              <div className=\"relative\">\n                <input\n                  type=\"search\"\n                  placeholder=\"Search help articles...\"\n                  className=\"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-green-500\"\n                />\n                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                  <svg className=\"h-4 w-4 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n                  </svg>\n                </div>\n              </div>\n            </div>\n\n            {/* Help Content */}\n            <div className=\"flex-1 overflow-y-auto p-6\">\n              <div className=\"space-y-6\">\n                <div>\n                  <h3 className=\"font-semibold text-gray-900 mb-3\">Quick Start</h3>\n                  <ul className=\"space-y-2\">\n                    <li>\n                      <a href=\"#\" className=\"text-green-600 hover:text-green-800 text-sm\">Getting Started with RISIVO</a>\n                    </li>\n                    <li>\n                      <a href=\"#\" className=\"text-green-600 hover:text-green-800 text-sm\">Managing Sub-Accounts</a>\n                    </li>\n                    <li>\n                      <a href=\"#\" className=\"text-green-600 hover:text-green-800 text-sm\">Lead Engine Guide</a>\n                    </li>\n                  </ul>\n                </div>\n\n                <div>\n                  <h3 className=\"font-semibold text-gray-900 mb-3\">AI Features</h3>\n                  <ul className=\"space-y-2\">\n                    <li>\n                      <a href=\"#\" className=\"text-green-600 hover:text-green-800 text-sm\">AI Translation Guide</a>\n                    </li>\n                    <li>\n                      <a href=\"#\" className=\"text-green-600 hover:text-green-800 text-sm\">Content Generation</a>\n                    </li>\n                    <li>\n                      <a href=\"#\" className=\"text-green-600 hover:text-green-800 text-sm\">Chatbot Setup</a>\n                    </li>\n                  </ul>\n                </div>\n\n                <div>\n                  <h3 className=\"font-semibold text-gray-900 mb-3\">Support</h3>\n                  <ul className=\"space-y-2\">\n                    <li>\n                      <a href=\"#\" className=\"text-green-600 hover:text-green-800 text-sm\">Contact Support</a>\n                    </li>\n                    <li>\n                      <a href=\"#\" className=\"text-green-600 hover:text-green-800 text-sm\">Submit a Ticket</a>\n                    </li>\n                    <li>\n                      <a href=\"#\" className=\"text-green-600 hover:text-green-800 text-sm\">Video Tutorials</a>\n                    </li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n\n            {/* Contact Support Button */}\n            <div className=\"p-6 border-t border-gray-200\">\n              <button className=\"w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 font-medium\">\n                Contact Support Team\n              </button>\n            </div>\n          </div>\n        </>\n      )}\n\n      {/* Onboarding Checklist Modal */}\n      {showChecklistModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] overflow-y-auto\">\n            {/* Modal Header */}\n            <div className=\"px-6 py-4 border-b border-gray-200 flex items-center justify-between sticky top-0 bg-white\">\n              <div>\n                <h3 className=\"text-lg font-semibold text-gray-900\">Onboarding Checklist</h3>\n                <p className=\"text-sm text-gray-600 mt-1\">Complete these tasks to get started</p>\n              </div>\n              <button\n                onClick={() => setShowChecklistModal(false)}\n                className=\"text-gray-400 hover:text-gray-600\"\n              >\n                <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n\n            {/* Progress Bar */}\n            <div className=\"px-6 py-4 bg-gray-50\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <span className=\"text-sm font-medium text-gray-700\">Progress</span>\n                <span className=\"text-sm font-bold text-green-600\">{checklistProgress}%</span>\n              </div>\n              <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                <div \n                  className=\"bg-green-600 h-2 rounded-full transition-all duration-300\"\n                  style={{ width: `${checklistProgress}%` }}\n                ></div>\n              </div>\n              <p className=\"text-xs text-gray-600 mt-2\">\n                {completedRequired} of {totalRequired} required tasks completed\n              </p>\n            </div>\n\n            {/* Checklist Items */}\n            <div className=\"p-6 space-y-3\">\n              {checklistTasks.map((task) => (\n                <div\n                  key={task.id}\n                  className={`p-4 border-2 rounded-lg transition-all ${\n                    task.completed \n                      ? 'bg-green-50 border-green-300' \n                      : 'bg-white border-gray-200 hover:border-green-300'\n                  }`}\n                >\n                  <div className=\"flex items-start gap-3\">\n                    <button\n                      onClick={() => handleToggleTask(task.id)}\n                      className={`flex-shrink-0 w-6 h-6 rounded border-2 flex items-center justify-center transition-all ${\n                        task.completed\n                          ? 'bg-green-600 border-green-600'\n                          : 'border-gray-300 hover:border-green-500'\n                      }`}\n                    >\n                      {task.completed && (\n                        <svg className=\"w-4 h-4 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={3} d=\"M5 13l4 4L19 7\" />\n                        </svg>\n                      )}\n                    </button>\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-2\">\n                        <h4 className={`font-medium ${task.completed ? 'text-gray-500 line-through' : 'text-gray-900'}`}>\n                          {task.title}\n                        </h4>\n                        {task.required && (\n                          <span className=\"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded-full\">\n                            Required\n                          </span>\n                        )}\n                      </div>\n                      <p className=\"text-sm text-gray-600 mt-1\">{task.description}</p>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n\n            {/* Footer */}\n            <div className=\"px-6 py-4 bg-gray-50 border-t border-gray-200 rounded-b-lg\">\n              {allRequiredCompleted ? (\n                <div className=\"text-center\">\n                  <p className=\"text-green-600 font-semibold mb-2\">üéâ All required tasks completed!</p>\n                  <p className=\"text-sm text-gray-600\">You're all set to start using RISIVO CRM</p>\n                </div>\n              ) : (\n                <p className=\"text-sm text-gray-600 text-center\">\n                  Complete all required tasks to unlock the full experience\n                </p>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* AI Robot Chatbot - Removed floating icons, now in header */}\n\n      {/* Chatbot Window */}\n      {showChatbot && (\n        <div className=\"fixed bottom-6 right-6 z-50 w-96 h-[600px] bg-white rounded-lg shadow-2xl border-2 border-green-300 flex flex-col\">\n          {/* Chatbot Header */}\n          <div className=\"px-4 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-t-lg flex items-center justify-between\">\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-2xl\">ü§ñ</span>\n              <div>\n                <h3 className=\"font-semibold\">Sarah - AI Assistant</h3>\n                <p className=\"text-xs opacity-90\">Online ‚Ä¢ Ready to help</p>\n              </div>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <button\n                onClick={clearMessages}\n                className=\"text-white hover:bg-white hover:bg-opacity-20 rounded p-1\"\n                title=\"Clear conversation\"\n              >\n                <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                </svg>\n              </button>\n              <button\n                onClick={() => setShowChatbot(false)}\n                className=\"text-white hover:bg-white hover:bg-opacity-20 rounded p-1\"\n                title=\"Close chat\"\n              >\n                <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n          </div>\n\n          {/* Chat Messages */}\n          <div ref={messagesContainerRef} className=\"flex-1 p-4 overflow-y-auto bg-gray-50\">\n            <div className=\"space-y-4\">\n              {/* Welcome Message */}\n              {messages.length === 0 && !isLoading && (\n                <div className=\"flex flex-col items-center justify-center h-full text-center py-8\">\n                  <div className=\"w-16 h-16 rounded-full bg-gradient-to-br from-green-400 to-green-600 flex items-center justify-center mb-3\">\n                    <span className=\"text-3xl\">ü§ñ</span>\n                  </div>\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-1\">Hi! I'm Sarah</h3>\n                  <p className=\"text-sm text-gray-600 mb-4 px-4\">\n                    I'm your AI marketing assistant. How can I help you today?\n                  </p>\n                  <div className=\"grid grid-cols-1 gap-2 w-full px-4\">\n                    <button\n                      onClick={() => sendMessage('Create a pipeline for real estate leads')}\n                      className=\"px-3 py-2 bg-white hover:bg-gray-50 border border-gray-200 rounded-lg text-left text-sm transition-colors\"\n                    >\n                      <div className=\"font-medium text-gray-900\">Create a pipeline</div>\n                    </button>\n                    <button\n                      onClick={() => sendMessage('Add a new contact')}\n                      className=\"px-3 py-2 bg-white hover:bg-gray-50 border border-gray-200 rounded-lg text-left text-sm transition-colors\"\n                    >\n                      <div className=\"font-medium text-gray-900\">Add contact</div>\n                    </button>\n                    <button\n                      onClick={() => sendMessage('Help me set up an automation workflow')}\n                      className=\"px-3 py-2 bg-white hover:bg-gray-50 border border-gray-200 rounded-lg text-left text-sm transition-colors\"\n                    >\n                      <div className=\"font-medium text-gray-900\">Create workflow</div>\n                    </button>\n                  </div>\n                </div>\n              )}\n\n              {/* AI Messages */}\n              {messages.map((message) => (\n                <MessageBubble key={message.id} message={message} />\n              ))}\n\n              {/* Typing Indicator */}\n              {isLoading && <TypingIndicator />}\n\n              {/* Error Message */}\n              {error && (\n                <div className=\"bg-red-50 border border-red-200 text-red-800 px-3 py-2 rounded-lg text-sm\">\n                  {error}\n                </div>\n              )}\n\n              {/* Auto-scroll anchor */}\n              <div ref={messagesEndRef} />\n            </div>\n          </div>\n\n          {/* Chat Input Area */}\n          <div className=\"p-4 border-t border-gray-200 bg-white rounded-b-lg\">\n            {/* Action Buttons */}\n            <div className=\"flex items-center gap-2 mb-3\">\n              <button \n                className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n                title=\"Upload file\"\n              >\n                <svg className=\"w-5 h-5 text-gray-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13\" />\n                </svg>\n              </button>\n              <button \n                className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\"\n                title=\"Voice input\"\n              >\n                <svg className=\"w-5 h-5 text-gray-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\" />\n                </svg>\n              </button>\n              <input \n                type=\"file\" \n                className=\"hidden\" \n                id=\"chatbot-file-upload\"\n                accept=\"image/*,.pdf,.doc,.docx,.xls,.xlsx,.csv\"\n              />\n            </div>\n\n            {/* Message Input */}\n            <div className=\"flex items-center gap-2\">\n              <input\n                type=\"text\"\n                value={chatMessage}\n                onChange={(e) => setChatMessage(e.target.value)}\n                placeholder=\"Type your message...\"\n                className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm\"\n                disabled={isLoading}\n                onKeyPress={async (e) => {\n                  if (e.key === 'Enter' && chatMessage.trim() && !isLoading) {\n                    const message = chatMessage\n                    setChatMessage('')\n                    await sendMessage(message)\n                  }\n                }}\n              />\n              <button \n                className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed\"\n                disabled={!chatMessage.trim() || isLoading}\n                onClick={async () => {\n                  if (chatMessage.trim() && !isLoading) {\n                    const message = chatMessage\n                    setChatMessage('')\n                    await sendMessage(message)\n                  }\n                }}\n              >\n                <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 19l9 2-9-18-9 18 9-2zm0 0v-8\" />\n                </svg>\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}